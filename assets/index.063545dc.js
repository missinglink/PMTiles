var ES=Object.defineProperty,TS=Object.defineProperties;var PS=Object.getOwnPropertyDescriptors;var Od=Object.getOwnPropertySymbols;var Tv=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable;var Ev=(e,n,o)=>n in e?ES(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ai=(e,n)=>{for(var o in n||(n={}))Tv.call(n,o)&&Ev(e,o,n[o]);if(Od)for(var o of Od(n))Pv.call(n,o)&&Ev(e,o,n[o]);return e},Ra=(e,n)=>TS(e,PS(n));var _n=(e,n)=>{var o={};for(var h in e)Tv.call(e,h)&&n.indexOf(h)<0&&(o[h]=e[h]);if(e!=null&&Od)for(var h of Od(e))n.indexOf(h)<0&&Pv.call(e,h)&&(o[h]=e[h]);return o};function kS(e,n){return n.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(h){if(h!=="default"&&!(h in e)){var g=Object.getOwnPropertyDescriptor(o,h);Object.defineProperty(e,h,g.get?g:{enumerable:!0,get:function(){return o[h]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const CS=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const v of g)if(v.type==="childList")for(const S of v.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&h(S)}).observe(document,{childList:!0,subtree:!0});function o(g){const v={};return g.integrity&&(v.integrity=g.integrity),g.referrerpolicy&&(v.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?v.credentials="include":g.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(g){if(g.ep)return;g.ep=!0;const v=o(g);fetch(g.href,v)}};CS();var wx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},re={exports:{}},mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd=Symbol.for("react.element"),IS=Symbol.for("react.portal"),zS=Symbol.for("react.fragment"),AS=Symbol.for("react.strict_mode"),MS=Symbol.for("react.profiler"),LS=Symbol.for("react.provider"),DS=Symbol.for("react.context"),RS=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),FS=Symbol.for("react.memo"),OS=Symbol.for("react.lazy"),kv=Symbol.iterator;function NS(e){return e===null||typeof e!="object"?null:(e=kv&&e[kv]||e["@@iterator"],typeof e=="function"?e:null)}var bx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sx=Object.assign,Ex={};function Bc(e,n,o){this.props=e,this.context=n,this.refs=Ex,this.updater=o||bx}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Bc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Tx(){}Tx.prototype=Bc.prototype;function e_(e,n,o){this.props=e,this.context=n,this.refs=Ex,this.updater=o||bx}var t_=e_.prototype=new Tx;t_.constructor=e_;Sx(t_,Bc.prototype);t_.isPureReactComponent=!0;var Cv=Array.isArray,Px=Object.prototype.hasOwnProperty,n_={current:null},kx={key:!0,ref:!0,__self:!0,__source:!0};function Cx(e,n,o){var h,g={},v=null,S=null;if(n!=null)for(h in n.ref!==void 0&&(S=n.ref),n.key!==void 0&&(v=""+n.key),n)Px.call(n,h)&&!kx.hasOwnProperty(h)&&(g[h]=n[h]);var u=arguments.length-2;if(u===1)g.children=o;else if(1<u){for(var I=Array(u),N=0;N<u;N++)I[N]=arguments[N+2];g.children=I}if(e&&e.defaultProps)for(h in u=e.defaultProps,u)g[h]===void 0&&(g[h]=u[h]);return{$$typeof:sd,type:e,key:v,ref:S,props:g,_owner:n_.current}}function US(e,n){return{$$typeof:sd,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function i_(e){return typeof e=="object"&&e!==null&&e.$$typeof===sd}function VS(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return n[o]})}var Iv=/\/+/g;function lm(e,n){return typeof e=="object"&&e!==null&&e.key!=null?VS(""+e.key):n.toString(36)}function dp(e,n,o,h,g){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var S=!1;if(e===null)S=!0;else switch(v){case"string":case"number":S=!0;break;case"object":switch(e.$$typeof){case sd:case IS:S=!0}}if(S)return S=e,g=g(S),e=h===""?"."+lm(S,0):h,Cv(g)?(o="",e!=null&&(o=e.replace(Iv,"$&/")+"/"),dp(g,n,o,"",function(N){return N})):g!=null&&(i_(g)&&(g=US(g,o+(!g.key||S&&S.key===g.key?"":(""+g.key).replace(Iv,"$&/")+"/")+e)),n.push(g)),1;if(S=0,h=h===""?".":h+":",Cv(e))for(var u=0;u<e.length;u++){v=e[u];var I=h+lm(v,u);S+=dp(v,n,o,I,g)}else if(I=NS(e),typeof I=="function")for(e=I.call(e),u=0;!(v=e.next()).done;)v=v.value,I=h+lm(v,u++),S+=dp(v,n,o,I,g);else if(v==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return S}function Nd(e,n,o){if(e==null)return e;var h=[],g=0;return dp(e,h,"","",function(v){return n.call(o,v,g++)}),h}function $S(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Gr={current:null},pp={transition:null},ZS={ReactCurrentDispatcher:Gr,ReactCurrentBatchConfig:pp,ReactCurrentOwner:n_};mn.Children={map:Nd,forEach:function(e,n,o){Nd(e,function(){n.apply(this,arguments)},o)},count:function(e){var n=0;return Nd(e,function(){n++}),n},toArray:function(e){return Nd(e,function(n){return n})||[]},only:function(e){if(!i_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mn.Component=Bc;mn.Fragment=zS;mn.Profiler=MS;mn.PureComponent=e_;mn.StrictMode=AS;mn.Suspense=BS;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;mn.cloneElement=function(e,n,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var h=Sx({},e.props),g=e.key,v=e.ref,S=e._owner;if(n!=null){if(n.ref!==void 0&&(v=n.ref,S=n_.current),n.key!==void 0&&(g=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(I in n)Px.call(n,I)&&!kx.hasOwnProperty(I)&&(h[I]=n[I]===void 0&&u!==void 0?u[I]:n[I])}var I=arguments.length-2;if(I===1)h.children=o;else if(1<I){u=Array(I);for(var N=0;N<I;N++)u[N]=arguments[N+2];h.children=u}return{$$typeof:sd,type:e.type,key:g,ref:v,props:h,_owner:S}};mn.createContext=function(e){return e={$$typeof:DS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LS,_context:e},e.Consumer=e};mn.createElement=Cx;mn.createFactory=function(e){var n=Cx.bind(null,e);return n.type=e,n};mn.createRef=function(){return{current:null}};mn.forwardRef=function(e){return{$$typeof:RS,render:e}};mn.isValidElement=i_;mn.lazy=function(e){return{$$typeof:OS,_payload:{_status:-1,_result:e},_init:$S}};mn.memo=function(e,n){return{$$typeof:FS,type:e,compare:n===void 0?null:n}};mn.startTransition=function(e){var n=pp.transition;pp.transition={};try{e()}finally{pp.transition=n}};mn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mn.useCallback=function(e,n){return Gr.current.useCallback(e,n)};mn.useContext=function(e){return Gr.current.useContext(e)};mn.useDebugValue=function(){};mn.useDeferredValue=function(e){return Gr.current.useDeferredValue(e)};mn.useEffect=function(e,n){return Gr.current.useEffect(e,n)};mn.useId=function(){return Gr.current.useId()};mn.useImperativeHandle=function(e,n,o){return Gr.current.useImperativeHandle(e,n,o)};mn.useInsertionEffect=function(e,n){return Gr.current.useInsertionEffect(e,n)};mn.useLayoutEffect=function(e,n){return Gr.current.useLayoutEffect(e,n)};mn.useMemo=function(e,n){return Gr.current.useMemo(e,n)};mn.useReducer=function(e,n,o){return Gr.current.useReducer(e,n,o)};mn.useRef=function(e){return Gr.current.useRef(e)};mn.useState=function(e){return Gr.current.useState(e)};mn.useSyncExternalStore=function(e,n,o){return Gr.current.useSyncExternalStore(e,n,o)};mn.useTransition=function(){return Gr.current.useTransition()};mn.version="18.1.0";re.exports=mn;var nn=re.exports,jS=kS({__proto__:null,default:nn},[re.exports]),Wm={},r_={exports:{}},Co={},Ix={exports:{}},zx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(Fe,ct){var qe=Fe.length;Fe.push(ct);e:for(;0<qe;){var wt=qe-1>>>1,It=Fe[wt];if(0<g(It,ct))Fe[wt]=ct,Fe[qe]=It,qe=wt;else break e}}function o(Fe){return Fe.length===0?null:Fe[0]}function h(Fe){if(Fe.length===0)return null;var ct=Fe[0],qe=Fe.pop();if(qe!==ct){Fe[0]=qe;e:for(var wt=0,It=Fe.length,Qt=It>>>1;wt<Qt;){var Rt=2*(wt+1)-1,Nt=Fe[Rt],Ct=Rt+1,gn=Fe[Ct];if(0>g(Nt,qe))Ct<It&&0>g(gn,Nt)?(Fe[wt]=gn,Fe[Ct]=qe,wt=Ct):(Fe[wt]=Nt,Fe[Rt]=qe,wt=Rt);else if(Ct<It&&0>g(gn,qe))Fe[wt]=gn,Fe[Ct]=qe,wt=Ct;else break e}}return ct}function g(Fe,ct){var qe=Fe.sortIndex-ct.sortIndex;return qe!==0?qe:Fe.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var S=Date,u=S.now();e.unstable_now=function(){return S.now()-u}}var I=[],N=[],j=1,q=null,V=3,he=!1,ge=!1,pe=!1,Ee=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Fe){for(var ct=o(N);ct!==null;){if(ct.callback===null)h(N);else if(ct.startTime<=Fe)h(N),ct.sortIndex=ct.expirationTime,n(I,ct);else break;ct=o(N)}}function Te(Fe){if(pe=!1,te(Fe),!ge)if(o(I)!==null)ge=!0,Ke(Ae);else{var ct=o(N);ct!==null&&En(Te,ct.startTime-Fe)}}function Ae(Fe,ct){ge=!1,pe&&(pe=!1,ne(Be),Be=-1),he=!0;var qe=V;try{for(te(ct),q=o(I);q!==null&&(!(q.expirationTime>ct)||Fe&&!Pt());){var wt=q.callback;if(typeof wt=="function"){q.callback=null,V=q.priorityLevel;var It=wt(q.expirationTime<=ct);ct=e.unstable_now(),typeof It=="function"?q.callback=It:q===o(I)&&h(I),te(ct)}else h(I);q=o(I)}if(q!==null)var Qt=!0;else{var Rt=o(N);Rt!==null&&En(Te,Rt.startTime-ct),Qt=!1}return Qt}finally{q=null,V=qe,he=!1}}var $e=!1,Ne=null,Be=-1,lt=5,dt=-1;function Pt(){return!(e.unstable_now()-dt<lt)}function Lt(){if(Ne!==null){var Fe=e.unstable_now();dt=Fe;var ct=!0;try{ct=Ne(!0,Fe)}finally{ct?on():($e=!1,Ne=null)}}else $e=!1}var on;if(typeof Q=="function")on=function(){Q(Lt)};else if(typeof MessageChannel!="undefined"){var At=new MessageChannel,cn=At.port2;At.port1.onmessage=Lt,on=function(){cn.postMessage(null)}}else on=function(){Ee(Lt,0)};function Ke(Fe){Ne=Fe,$e||($e=!0,on())}function En(Fe,ct){Be=Ee(function(){Fe(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Fe){Fe.callback=null},e.unstable_continueExecution=function(){ge||he||(ge=!0,Ke(Ae))},e.unstable_forceFrameRate=function(Fe){0>Fe||125<Fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):lt=0<Fe?Math.floor(1e3/Fe):5},e.unstable_getCurrentPriorityLevel=function(){return V},e.unstable_getFirstCallbackNode=function(){return o(I)},e.unstable_next=function(Fe){switch(V){case 1:case 2:case 3:var ct=3;break;default:ct=V}var qe=V;V=ct;try{return Fe()}finally{V=qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Fe,ct){switch(Fe){case 1:case 2:case 3:case 4:case 5:break;default:Fe=3}var qe=V;V=Fe;try{return ct()}finally{V=qe}},e.unstable_scheduleCallback=function(Fe,ct,qe){var wt=e.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?wt+qe:wt):qe=wt,Fe){case 1:var It=-1;break;case 2:It=250;break;case 5:It=1073741823;break;case 4:It=1e4;break;default:It=5e3}return It=qe+It,Fe={id:j++,callback:ct,priorityLevel:Fe,startTime:qe,expirationTime:It,sortIndex:-1},qe>wt?(Fe.sortIndex=qe,n(N,Fe),o(I)===null&&Fe===o(N)&&(pe?(ne(Be),Be=-1):pe=!0,En(Te,qe-wt))):(Fe.sortIndex=It,n(I,Fe),ge||he||(ge=!0,Ke(Ae))),Fe},e.unstable_shouldYield=Pt,e.unstable_wrapCallback=function(Fe){var ct=V;return function(){var qe=V;V=ct;try{return Fe.apply(this,arguments)}finally{V=qe}}}})(zx);Ix.exports=zx;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax=re.exports,ko=Ix.exports;function Ye(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mx=new Set,Vh={};function zu(e,n){Ic(e,n),Ic(e+"Capture",n)}function Ic(e,n){for(Vh[e]=n,e=0;e<n.length;e++)Mx.add(n[e])}var Wa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qm=Object.prototype.hasOwnProperty,GS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},Av={};function WS(e){return qm.call(Av,e)?!0:qm.call(zv,e)?!1:GS.test(e)?Av[e]=!0:(zv[e]=!0,!1)}function qS(e,n,o,h){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HS(e,n,o,h){if(n===null||typeof n=="undefined"||qS(e,n,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Wr(e,n,o,h,g,v,S){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=S}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ur[e]=new Wr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];ur[n]=new Wr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ur[e]=new Wr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ur[e]=new Wr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ur[e]=new Wr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ur[e]=new Wr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ur[e]=new Wr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ur[e]=new Wr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ur[e]=new Wr(e,5,!1,e.toLowerCase(),null,!1,!1)});var o_=/[\-:]([a-z])/g;function s_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(o_,s_);ur[n]=new Wr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(o_,s_);ur[n]=new Wr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(o_,s_);ur[n]=new Wr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ur[e]=new Wr(e,1,!1,e.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ur[e]=new Wr(e,1,!1,e.toLowerCase(),null,!0,!0)});function a_(e,n,o,h){var g=ur.hasOwnProperty(n)?ur[n]:null;(g!==null?g.type!==0:h||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(HS(n,o,g,h)&&(o=null),h||g===null?WS(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):g.mustUseProperty?e[g.propertyName]=o===null?g.type===3?!1:"":o:(n=g.attributeName,h=g.attributeNamespace,o===null?e.removeAttribute(n):(g=g.type,o=g===3||g===4&&o===!0?"":""+o,h?e.setAttributeNS(h,n,o):e.setAttribute(n,o))))}var Ka=Ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ud=Symbol.for("react.element"),uc=Symbol.for("react.portal"),cc=Symbol.for("react.fragment"),l_=Symbol.for("react.strict_mode"),Hm=Symbol.for("react.profiler"),Lx=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),u_=Symbol.for("react.forward_ref"),Xm=Symbol.for("react.suspense"),Km=Symbol.for("react.suspense_list"),c_=Symbol.for("react.memo"),xl=Symbol.for("react.lazy"),Rx=Symbol.for("react.offscreen"),Mv=Symbol.iterator;function dh(e){return e===null||typeof e!="object"?null:(e=Mv&&e[Mv]||e["@@iterator"],typeof e=="function"?e:null)}var gi=Object.assign,um;function Sh(e){if(um===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);um=n&&n[1]||""}return`
`+um+e}var cm=!1;function hm(e,n){if(!e||cm)return"";cm=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(N){var h=N}Reflect.construct(e,[],n)}else{try{n.call()}catch(N){h=N}e.call(n.prototype)}else{try{throw Error()}catch(N){h=N}e()}}catch(N){if(N&&h&&typeof N.stack=="string"){for(var g=N.stack.split(`
`),v=h.stack.split(`
`),S=g.length-1,u=v.length-1;1<=S&&0<=u&&g[S]!==v[u];)u--;for(;1<=S&&0<=u;S--,u--)if(g[S]!==v[u]){if(S!==1||u!==1)do if(S--,u--,0>u||g[S]!==v[u]){var I=`
`+g[S].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=S&&0<=u);break}}}finally{cm=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Sh(e):""}function XS(e){switch(e.tag){case 5:return Sh(e.type);case 16:return Sh("Lazy");case 13:return Sh("Suspense");case 19:return Sh("SuspenseList");case 0:case 2:case 15:return e=hm(e.type,!1),e;case 11:return e=hm(e.type.render,!1),e;case 1:return e=hm(e.type,!0),e;default:return""}}function Ym(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cc:return"Fragment";case uc:return"Portal";case Hm:return"Profiler";case l_:return"StrictMode";case Xm:return"Suspense";case Km:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dx:return(e.displayName||"Context")+".Consumer";case Lx:return(e._context.displayName||"Context")+".Provider";case u_:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case c_:return n=e.displayName||null,n!==null?n:Ym(e.type)||"Memo";case xl:n=e._payload,e=e._init;try{return Ym(e(n))}catch{}}return null}function KS(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ym(n);case 8:return n===l_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ll(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bx(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function YS(e){var n=Bx(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof o!="undefined"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,v=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Vd(e){e._valueTracker||(e._valueTracker=YS(e))}function Fx(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),h="";return e&&(h=Bx(e)?e.checked?"true":"false":e.value),e=h,e!==o?(n.setValue(e),!0):!1}function Tp(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jm(e,n){var o=n.checked;return gi({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o!=null?o:e._wrapperState.initialChecked})}function Lv(e,n){var o=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;o=Ll(n.value!=null?n.value:o),e._wrapperState={initialChecked:h,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ox(e,n){n=n.checked,n!=null&&a_(e,"checked",n,!1)}function Qm(e,n){Ox(e,n);var o=Ll(n.value),h=n.type;if(o!=null)h==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?eg(e,n.type,o):n.hasOwnProperty("defaultValue")&&eg(e,n.type,Ll(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Dv(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function eg(e,n,o){(n!=="number"||Tp(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Eh=Array.isArray;function bc(e,n,o,h){if(e=e.options,n){n={};for(var g=0;g<o.length;g++)n["$"+o[g]]=!0;for(o=0;o<e.length;o++)g=n.hasOwnProperty("$"+e[o].value),e[o].selected!==g&&(e[o].selected=g),g&&h&&(e[o].defaultSelected=!0)}else{for(o=""+Ll(o),n=null,g=0;g<e.length;g++){if(e[g].value===o){e[g].selected=!0,h&&(e[g].defaultSelected=!0);return}n!==null||e[g].disabled||(n=e[g])}n!==null&&(n.selected=!0)}}function tg(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return gi({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rv(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(Ye(92));if(Eh(o)){if(1<o.length)throw Error(Ye(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:Ll(o)}}function Nx(e,n){var o=Ll(n.value),h=Ll(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),h!=null&&(e.defaultValue=""+h)}function Bv(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ng(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Ux(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $d,Vx=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(n,o,h,g){MSApp.execUnsafeLocalFunction(function(){return e(n,o,h,g)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for($d=$d||document.createElement("div"),$d.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=$d.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function $h(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var Ch={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JS=["Webkit","ms","Moz","O"];Object.keys(Ch).forEach(function(e){JS.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ch[n]=Ch[e]})});function $x(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||Ch.hasOwnProperty(e)&&Ch[e]?(""+n).trim():n+"px"}function Zx(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var h=o.indexOf("--")===0,g=$x(o,n[o],h);o==="float"&&(o="cssFloat"),h?e.setProperty(o,g):e[o]=g}}var QS=gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ig(e,n){if(n){if(QS[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Ye(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Ye(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Ye(62))}}function rg(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var og=null;function h_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sg=null,Sc=null,Ec=null;function Fv(e){if(e=ud(e)){if(typeof sg!="function")throw Error(Ye(280));var n=e.stateNode;n&&(n=af(n),sg(e.stateNode,e.type,n))}}function jx(e){Sc?Ec?Ec.push(e):Ec=[e]:Sc=e}function Gx(){if(Sc){var e=Sc,n=Ec;if(Ec=Sc=null,Fv(e),n)for(e=0;e<n.length;e++)Fv(n[e])}}function Wx(e,n){return e(n)}function qx(){}var dm=!1;function Hx(e,n,o){if(dm)return e(n,o);dm=!0;try{return Wx(e,n,o)}finally{dm=!1,(Sc!==null||Ec!==null)&&(qx(),Gx())}}function Zh(e,n){var o=e.stateNode;if(o===null)return null;var h=af(o);if(h===null)return null;o=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Ye(231,n,typeof o));return o}var ag=!1;if(Wa)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){ag=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{ag=!1}function eE(e,n,o,h,g,v,S,u,I){var N=Array.prototype.slice.call(arguments,3);try{n.apply(o,N)}catch(j){this.onError(j)}}var Ih=!1,Pp=null,kp=!1,lg=null,tE={onError:function(e){Ih=!0,Pp=e}};function nE(e,n,o,h,g,v,S,u,I){Ih=!1,Pp=null,eE.apply(tE,arguments)}function iE(e,n,o,h,g,v,S,u,I){if(nE.apply(this,arguments),Ih){if(Ih){var N=Pp;Ih=!1,Pp=null}else throw Error(Ye(198));kp||(kp=!0,lg=N)}}function Au(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function Xx(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Ov(e){if(Au(e)!==e)throw Error(Ye(188))}function rE(e){var n=e.alternate;if(!n){if(n=Au(e),n===null)throw Error(Ye(188));return n!==e?null:e}for(var o=e,h=n;;){var g=o.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){o=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===o)return Ov(g),e;if(v===h)return Ov(g),n;v=v.sibling}throw Error(Ye(188))}if(o.return!==h.return)o=g,h=v;else{for(var S=!1,u=g.child;u;){if(u===o){S=!0,o=g,h=v;break}if(u===h){S=!0,h=g,o=v;break}u=u.sibling}if(!S){for(u=v.child;u;){if(u===o){S=!0,o=v,h=g;break}if(u===h){S=!0,h=v,o=g;break}u=u.sibling}if(!S)throw Error(Ye(189))}}if(o.alternate!==h)throw Error(Ye(190))}if(o.tag!==3)throw Error(Ye(188));return o.stateNode.current===o?e:n}function Kx(e){return e=rE(e),e!==null?Yx(e):null}function Yx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Yx(e);if(n!==null)return n;e=e.sibling}return null}var Jx=ko.unstable_scheduleCallback,Nv=ko.unstable_cancelCallback,oE=ko.unstable_shouldYield,sE=ko.unstable_requestPaint,Pi=ko.unstable_now,aE=ko.unstable_getCurrentPriorityLevel,d_=ko.unstable_ImmediatePriority,Qx=ko.unstable_UserBlockingPriority,Cp=ko.unstable_NormalPriority,lE=ko.unstable_LowPriority,e1=ko.unstable_IdlePriority,nf=null,ra=null;function uE(e){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(nf,e,void 0,(e.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:dE,cE=Math.log,hE=Math.LN2;function dE(e){return e>>>=0,e===0?32:31-(cE(e)/hE|0)|0}var Zd=64,jd=4194304;function Th(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ip(e,n){var o=e.pendingLanes;if(o===0)return 0;var h=0,g=e.suspendedLanes,v=e.pingedLanes,S=o&268435455;if(S!==0){var u=S&~g;u!==0?h=Th(u):(v&=S,v!==0&&(h=Th(v)))}else S=o&~g,S!==0?h=Th(S):v!==0&&(h=Th(v));if(h===0)return 0;if(n!==0&&n!==h&&(n&g)===0&&(g=h&-h,v=n&-n,g>=v||g===16&&(v&4194240)!==0))return n;if((h&4)!==0&&(h|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=h;0<n;)o=31-Cs(n),g=1<<o,h|=e[o],n&=~g;return h}function pE(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fE(e,n){for(var o=e.suspendedLanes,h=e.pingedLanes,g=e.expirationTimes,v=e.pendingLanes;0<v;){var S=31-Cs(v),u=1<<S,I=g[S];I===-1?((u&o)===0||(u&h)!==0)&&(g[S]=pE(u,n)):I<=n&&(e.expiredLanes|=u),v&=~u}}function ug(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t1(){var e=Zd;return Zd<<=1,(Zd&4194240)===0&&(Zd=64),e}function pm(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function ad(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Cs(n),e[n]=o}function mE(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<o;){var g=31-Cs(o),v=1<<g;n[g]=0,h[g]=-1,e[g]=-1,o&=~v}}function p_(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var h=31-Cs(o),g=1<<h;g&n|e[h]&n&&(e[h]|=n),o&=~g}}var Bn=0;function n1(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var i1,f_,r1,o1,s1,cg=!1,Gd=[],kl=null,Cl=null,Il=null,jh=new Map,Gh=new Map,bl=[],gE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uv(e,n){switch(e){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Cl=null;break;case"mouseover":case"mouseout":Il=null;break;case"pointerover":case"pointerout":jh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(n.pointerId)}}function fh(e,n,o,h,g,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:o,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},n!==null&&(n=ud(n),n!==null&&f_(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),e)}function _E(e,n,o,h,g){switch(n){case"focusin":return kl=fh(kl,e,n,o,h,g),!0;case"dragenter":return Cl=fh(Cl,e,n,o,h,g),!0;case"mouseover":return Il=fh(Il,e,n,o,h,g),!0;case"pointerover":var v=g.pointerId;return jh.set(v,fh(jh.get(v)||null,e,n,o,h,g)),!0;case"gotpointercapture":return v=g.pointerId,Gh.set(v,fh(Gh.get(v)||null,e,n,o,h,g)),!0}return!1}function a1(e){var n=_u(e.target);if(n!==null){var o=Au(n);if(o!==null){if(n=o.tag,n===13){if(n=Xx(o),n!==null){e.blockedOn=n,s1(e.priority,function(){r1(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fp(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=hg(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);og=h,o.target.dispatchEvent(h),og=null}else return n=ud(o),n!==null&&f_(n),e.blockedOn=o,!1;n.shift()}return!0}function Vv(e,n,o){fp(e)&&o.delete(n)}function yE(){cg=!1,kl!==null&&fp(kl)&&(kl=null),Cl!==null&&fp(Cl)&&(Cl=null),Il!==null&&fp(Il)&&(Il=null),jh.forEach(Vv),Gh.forEach(Vv)}function mh(e,n){e.blockedOn===n&&(e.blockedOn=null,cg||(cg=!0,ko.unstable_scheduleCallback(ko.unstable_NormalPriority,yE)))}function Wh(e){function n(g){return mh(g,e)}if(0<Gd.length){mh(Gd[0],e);for(var o=1;o<Gd.length;o++){var h=Gd[o];h.blockedOn===e&&(h.blockedOn=null)}}for(kl!==null&&mh(kl,e),Cl!==null&&mh(Cl,e),Il!==null&&mh(Il,e),jh.forEach(n),Gh.forEach(n),o=0;o<bl.length;o++)h=bl[o],h.blockedOn===e&&(h.blockedOn=null);for(;0<bl.length&&(o=bl[0],o.blockedOn===null);)a1(o),o.blockedOn===null&&bl.shift()}var Tc=Ka.ReactCurrentBatchConfig,zp=!0;function vE(e,n,o,h){var g=Bn,v=Tc.transition;Tc.transition=null;try{Bn=1,m_(e,n,o,h)}finally{Bn=g,Tc.transition=v}}function xE(e,n,o,h){var g=Bn,v=Tc.transition;Tc.transition=null;try{Bn=4,m_(e,n,o,h)}finally{Bn=g,Tc.transition=v}}function m_(e,n,o,h){if(zp){var g=hg(e,n,o,h);if(g===null)Sm(e,n,h,Ap,o),Uv(e,h);else if(_E(g,e,n,o,h))h.stopPropagation();else if(Uv(e,h),n&4&&-1<gE.indexOf(e)){for(;g!==null;){var v=ud(g);if(v!==null&&i1(v),v=hg(e,n,o,h),v===null&&Sm(e,n,h,Ap,o),v===g)break;g=v}g!==null&&h.stopPropagation()}else Sm(e,n,h,null,o)}}var Ap=null;function hg(e,n,o,h){if(Ap=null,e=h_(h),e=_u(e),e!==null)if(n=Au(e),n===null)e=null;else if(o=n.tag,o===13){if(e=Xx(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ap=e,null}function l1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aE()){case d_:return 1;case Qx:return 4;case Cp:case lE:return 16;case e1:return 536870912;default:return 16}default:return 16}}var Tl=null,g_=null,mp=null;function u1(){if(mp)return mp;var e,n=g_,o=n.length,h,g="value"in Tl?Tl.value:Tl.textContent,v=g.length;for(e=0;e<o&&n[e]===g[e];e++);var S=o-e;for(h=1;h<=S&&n[o-h]===g[v-h];h++);return mp=g.slice(e,1<h?1-h:void 0)}function gp(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Wd(){return!0}function $v(){return!1}function Io(e){function n(o,h,g,v,S){this._reactName=o,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(o=e[u],this[u]=o?o(v):v[u]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wd:$v,this.isPropagationStopped=$v,this}return gi(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wd)},persist:function(){},isPersistent:Wd}),n}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=Io(Fc),ld=gi({},Fc,{view:0,detail:0}),wE=Io(ld),fm,mm,gh,rf=gi({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gh&&(gh&&e.type==="mousemove"?(fm=e.screenX-gh.screenX,mm=e.screenY-gh.screenY):mm=fm=0,gh=e),fm)},movementY:function(e){return"movementY"in e?e.movementY:mm}}),Zv=Io(rf),bE=gi({},rf,{dataTransfer:0}),SE=Io(bE),EE=gi({},ld,{relatedTarget:0}),gm=Io(EE),TE=gi({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=Io(TE),kE=gi({},Fc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),CE=Io(kE),IE=gi({},Fc,{data:0}),jv=Io(IE),zE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ME={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LE(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ME[e])?!!n[e]:!1}function y_(){return LE}var DE=gi({},ld,{key:function(e){if(e.key){var n=zE[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=gp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y_,charCode:function(e){return e.type==="keypress"?gp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),RE=Io(DE),BE=gi({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gv=Io(BE),FE=gi({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y_}),OE=Io(FE),NE=gi({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UE=Io(NE),VE=gi({},rf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$E=Io(VE),ZE=[9,13,27,32],v_=Wa&&"CompositionEvent"in window,zh=null;Wa&&"documentMode"in document&&(zh=document.documentMode);var jE=Wa&&"TextEvent"in window&&!zh,c1=Wa&&(!v_||zh&&8<zh&&11>=zh),Wv=String.fromCharCode(32),qv=!1;function h1(e,n){switch(e){case"keyup":return ZE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hc=!1;function GE(e,n){switch(e){case"compositionend":return d1(n);case"keypress":return n.which!==32?null:(qv=!0,Wv);case"textInput":return e=n.data,e===Wv&&qv?null:e;default:return null}}function WE(e,n){if(hc)return e==="compositionend"||!v_&&h1(e,n)?(e=u1(),mp=g_=Tl=null,hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return c1&&n.locale!=="ko"?null:n.data;default:return null}}var qE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hv(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!qE[e.type]:n==="textarea"}function p1(e,n,o,h){jx(h),n=Mp(n,"onChange"),0<n.length&&(o=new __("onChange","change",null,o,h),e.push({event:o,listeners:n}))}var Ah=null,qh=null;function HE(e){E1(e,0)}function of(e){var n=fc(e);if(Fx(n))return e}function XE(e,n){if(e==="change")return n}var f1=!1;if(Wa){var _m;if(Wa){var ym="oninput"in document;if(!ym){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),ym=typeof Xv.oninput=="function"}_m=ym}else _m=!1;f1=_m&&(!document.documentMode||9<document.documentMode)}function Kv(){Ah&&(Ah.detachEvent("onpropertychange",m1),qh=Ah=null)}function m1(e){if(e.propertyName==="value"&&of(qh)){var n=[];p1(n,qh,e,h_(e)),Hx(HE,n)}}function KE(e,n,o){e==="focusin"?(Kv(),Ah=n,qh=o,Ah.attachEvent("onpropertychange",m1)):e==="focusout"&&Kv()}function YE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return of(qh)}function JE(e,n){if(e==="click")return of(n)}function QE(e,n){if(e==="input"||e==="change")return of(n)}function eT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Is=typeof Object.is=="function"?Object.is:eT;function Hh(e,n){if(Is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),h=Object.keys(n);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var g=o[h];if(!qm.call(n,g)||!Is(e[g],n[g]))return!1}return!0}function Yv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jv(e,n){var o=Yv(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=n&&h>=n)return{node:o,offset:n-e};e=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Yv(o)}}function g1(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?g1(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function _1(){for(var e=window,n=Tp();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=Tp(e.document)}return n}function x_(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function tT(e){var n=_1(),o=e.focusedElem,h=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&g1(o.ownerDocument.documentElement,o)){if(h!==null&&x_(o)){if(n=h.start,e=h.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var g=o.textContent.length,v=Math.min(h.start,g);h=h.end===void 0?v:Math.min(h.end,g),!e.extend&&v>h&&(g=h,h=v,v=g),g=Jv(o,v);var S=Jv(o,h);g&&S&&(e.rangeCount!==1||e.anchorNode!==g.node||e.anchorOffset!==g.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),e.removeAllRanges(),v>h?(e.addRange(n),e.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nT=Wa&&"documentMode"in document&&11>=document.documentMode,dc=null,dg=null,Mh=null,pg=!1;function Qv(e,n,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pg||dc==null||dc!==Tp(h)||(h=dc,"selectionStart"in h&&x_(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Mh&&Hh(Mh,h)||(Mh=h,h=Mp(dg,"onSelect"),0<h.length&&(n=new __("onSelect","select",null,n,o),e.push({event:n,listeners:h}),n.target=dc)))}function qd(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var pc={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},vm={},y1={};Wa&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete pc.animationend.animation,delete pc.animationiteration.animation,delete pc.animationstart.animation),"TransitionEvent"in window||delete pc.transitionend.transition);function sf(e){if(vm[e])return vm[e];if(!pc[e])return e;var n=pc[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in y1)return vm[e]=n[o];return e}var v1=sf("animationend"),x1=sf("animationiteration"),w1=sf("animationstart"),b1=sf("transitionend"),S1=new Map,e0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(e,n){S1.set(e,n),zu(n,[e])}for(var xm=0;xm<e0.length;xm++){var wm=e0[xm],iT=wm.toLowerCase(),rT=wm[0].toUpperCase()+wm.slice(1);Fl(iT,"on"+rT)}Fl(v1,"onAnimationEnd");Fl(x1,"onAnimationIteration");Fl(w1,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(b1,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);zu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zu("onBeforeInput",["compositionend","keypress","textInput","paste"]);zu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function t0(e,n,o){var h=e.type||"unknown-event";e.currentTarget=o,iE(h,n,void 0,e),e.currentTarget=null}function E1(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],g=h.event;h=h.listeners;e:{var v=void 0;if(n)for(var S=h.length-1;0<=S;S--){var u=h[S],I=u.instance,N=u.currentTarget;if(u=u.listener,I!==v&&g.isPropagationStopped())break e;t0(g,u,N),v=I}else for(S=0;S<h.length;S++){if(u=h[S],I=u.instance,N=u.currentTarget,u=u.listener,I!==v&&g.isPropagationStopped())break e;t0(g,u,N),v=I}}}if(kp)throw e=lg,kp=!1,lg=null,e}function Qn(e,n){var o=n[yg];o===void 0&&(o=n[yg]=new Set);var h=e+"__bubble";o.has(h)||(T1(n,e,2,!1),o.add(h))}function bm(e,n,o){var h=0;n&&(h|=4),T1(o,e,h,n)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Xh(e){if(!e[Hd]){e[Hd]=!0,Mx.forEach(function(o){o!=="selectionchange"&&(oT.has(o)||bm(o,!1,e),bm(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Hd]||(n[Hd]=!0,bm("selectionchange",!1,n))}}function T1(e,n,o,h){switch(l1(n)){case 1:var g=vE;break;case 4:g=xE;break;default:g=m_}o=g.bind(null,n,o,e),g=void 0,!ag||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),h?g!==void 0?e.addEventListener(n,o,{capture:!0,passive:g}):e.addEventListener(n,o,!0):g!==void 0?e.addEventListener(n,o,{passive:g}):e.addEventListener(n,o,!1)}function Sm(e,n,o,h,g){var v=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var u=h.stateNode.containerInfo;if(u===g||u.nodeType===8&&u.parentNode===g)break;if(S===4)for(S=h.return;S!==null;){var I=S.tag;if((I===3||I===4)&&(I=S.stateNode.containerInfo,I===g||I.nodeType===8&&I.parentNode===g))return;S=S.return}for(;u!==null;){if(S=_u(u),S===null)return;if(I=S.tag,I===5||I===6){h=v=S;continue e}u=u.parentNode}}h=h.return}Hx(function(){var N=v,j=h_(o),q=[];e:{var V=S1.get(e);if(V!==void 0){var he=__,ge=e;switch(e){case"keypress":if(gp(o)===0)break e;case"keydown":case"keyup":he=RE;break;case"focusin":ge="focus",he=gm;break;case"focusout":ge="blur",he=gm;break;case"beforeblur":case"afterblur":he=gm;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=SE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=OE;break;case v1:case x1:case w1:he=PE;break;case b1:he=UE;break;case"scroll":he=wE;break;case"wheel":he=$E;break;case"copy":case"cut":case"paste":he=CE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Gv}var pe=(n&4)!==0,Ee=!pe&&e==="scroll",ne=pe?V!==null?V+"Capture":null:V;pe=[];for(var Q=N,te;Q!==null;){te=Q;var Te=te.stateNode;if(te.tag===5&&Te!==null&&(te=Te,ne!==null&&(Te=Zh(Q,ne),Te!=null&&pe.push(Kh(Q,Te,te)))),Ee)break;Q=Q.return}0<pe.length&&(V=new he(V,ge,null,o,j),q.push({event:V,listeners:pe}))}}if((n&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",he=e==="mouseout"||e==="pointerout",V&&o!==og&&(ge=o.relatedTarget||o.fromElement)&&(_u(ge)||ge[qa]))break e;if((he||V)&&(V=j.window===j?j:(V=j.ownerDocument)?V.defaultView||V.parentWindow:window,he?(ge=o.relatedTarget||o.toElement,he=N,ge=ge?_u(ge):null,ge!==null&&(Ee=Au(ge),ge!==Ee||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(he=null,ge=N),he!==ge)){if(pe=Zv,Te="onMouseLeave",ne="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(pe=Gv,Te="onPointerLeave",ne="onPointerEnter",Q="pointer"),Ee=he==null?V:fc(he),te=ge==null?V:fc(ge),V=new pe(Te,Q+"leave",he,o,j),V.target=Ee,V.relatedTarget=te,Te=null,_u(j)===N&&(pe=new pe(ne,Q+"enter",ge,o,j),pe.target=te,pe.relatedTarget=Ee,Te=pe),Ee=Te,he&&ge)t:{for(pe=he,ne=ge,Q=0,te=pe;te;te=nc(te))Q++;for(te=0,Te=ne;Te;Te=nc(Te))te++;for(;0<Q-te;)pe=nc(pe),Q--;for(;0<te-Q;)ne=nc(ne),te--;for(;Q--;){if(pe===ne||ne!==null&&pe===ne.alternate)break t;pe=nc(pe),ne=nc(ne)}pe=null}else pe=null;he!==null&&n0(q,V,he,pe,!1),ge!==null&&Ee!==null&&n0(q,Ee,ge,pe,!0)}}e:{if(V=N?fc(N):window,he=V.nodeName&&V.nodeName.toLowerCase(),he==="select"||he==="input"&&V.type==="file")var Ae=XE;else if(Hv(V))if(f1)Ae=QE;else{Ae=YE;var $e=KE}else(he=V.nodeName)&&he.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(Ae=JE);if(Ae&&(Ae=Ae(e,N))){p1(q,Ae,o,j);break e}$e&&$e(e,V,N),e==="focusout"&&($e=V._wrapperState)&&$e.controlled&&V.type==="number"&&eg(V,"number",V.value)}switch($e=N?fc(N):window,e){case"focusin":(Hv($e)||$e.contentEditable==="true")&&(dc=$e,dg=N,Mh=null);break;case"focusout":Mh=dg=dc=null;break;case"mousedown":pg=!0;break;case"contextmenu":case"mouseup":case"dragend":pg=!1,Qv(q,o,j);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":Qv(q,o,j)}var Ne;if(v_)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else hc?h1(e,o)&&(Be="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(c1&&o.locale!=="ko"&&(hc||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&hc&&(Ne=u1()):(Tl=j,g_="value"in Tl?Tl.value:Tl.textContent,hc=!0)),$e=Mp(N,Be),0<$e.length&&(Be=new jv(Be,e,null,o,j),q.push({event:Be,listeners:$e}),Ne?Be.data=Ne:(Ne=d1(o),Ne!==null&&(Be.data=Ne)))),(Ne=jE?GE(e,o):WE(e,o))&&(N=Mp(N,"onBeforeInput"),0<N.length&&(j=new jv("onBeforeInput","beforeinput",null,o,j),q.push({event:j,listeners:N}),j.data=Ne))}E1(q,n)})}function Kh(e,n,o){return{instance:e,listener:n,currentTarget:o}}function Mp(e,n){for(var o=n+"Capture",h=[];e!==null;){var g=e,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Zh(e,o),v!=null&&h.unshift(Kh(e,v,g)),v=Zh(e,n),v!=null&&h.push(Kh(e,v,g))),e=e.return}return h}function nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function n0(e,n,o,h,g){for(var v=n._reactName,S=[];o!==null&&o!==h;){var u=o,I=u.alternate,N=u.stateNode;if(I!==null&&I===h)break;u.tag===5&&N!==null&&(u=N,g?(I=Zh(o,v),I!=null&&S.unshift(Kh(o,I,u))):g||(I=Zh(o,v),I!=null&&S.push(Kh(o,I,u)))),o=o.return}S.length!==0&&e.push({event:n,listeners:S})}var sT=/\r\n?/g,aT=/\u0000|\uFFFD/g;function i0(e){return(typeof e=="string"?e:""+e).replace(sT,`
`).replace(aT,"")}function Xd(e,n,o){if(n=i0(n),i0(e)!==n&&o)throw Error(Ye(425))}function Lp(){}var fg=null,mg=null;function gg(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _g=typeof setTimeout=="function"?setTimeout:void 0,lT=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,uT=typeof queueMicrotask=="function"?queueMicrotask:typeof r0!="undefined"?function(e){return r0.resolve(null).then(e).catch(cT)}:_g;function cT(e){setTimeout(function(){throw e})}function Em(e,n){var o=n,h=0;do{var g=o.nextSibling;if(e.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(h===0){e.removeChild(g),Wh(n);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=g}while(o);Wh(n)}function Va(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function o0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var Oc=Math.random().toString(36).slice(2),ia="__reactFiber$"+Oc,Yh="__reactProps$"+Oc,qa="__reactContainer$"+Oc,yg="__reactEvents$"+Oc,hT="__reactListeners$"+Oc,dT="__reactHandles$"+Oc;function _u(e){var n=e[ia];if(n)return n;for(var o=e.parentNode;o;){if(n=o[qa]||o[ia]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=o0(e);e!==null;){if(o=e[ia])return o;e=o0(e)}return n}e=o,o=e.parentNode}return null}function ud(e){return e=e[ia]||e[qa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function af(e){return e[Yh]||null}var vg=[],mc=-1;function Ol(e){return{current:e}}function ni(e){0>mc||(e.current=vg[mc],vg[mc]=null,mc--)}function Xn(e,n){mc++,vg[mc]=e.current,e.current=n}var Dl={},Er=Ol(Dl),so=Ol(!1),Tu=Dl;function zc(e,n){var o=e.type.contextTypes;if(!o)return Dl;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in o)g[v]=n[v];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=g),g}function ao(e){return e=e.childContextTypes,e!=null}function Dp(){ni(so),ni(Er)}function s0(e,n,o){if(Er.current!==Dl)throw Error(Ye(168));Xn(Er,n),Xn(so,o)}function P1(e,n,o){var h=e.stateNode;if(n=n.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var g in h)if(!(g in n))throw Error(Ye(108,KS(e)||"Unknown",g));return gi({},o,h)}function Rp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dl,Tu=Er.current,Xn(Er,e),Xn(so,so.current),!0}function a0(e,n,o){var h=e.stateNode;if(!h)throw Error(Ye(169));o?(e=P1(e,n,Tu),h.__reactInternalMemoizedMergedChildContext=e,ni(so),ni(Er),Xn(Er,e)):ni(so),Xn(so,o)}var Na=null,lf=!1,Tm=!1;function k1(e){Na===null?Na=[e]:Na.push(e)}function pT(e){lf=!0,k1(e)}function Nl(){if(!Tm&&Na!==null){Tm=!0;var e=0,n=Bn;try{var o=Na;for(Bn=1;e<o.length;e++){var h=o[e];do h=h(!0);while(h!==null)}Na=null,lf=!1}catch(g){throw Na!==null&&(Na=Na.slice(e+1)),Jx(d_,Nl),g}finally{Bn=n,Tm=!1}}return null}var fT=Ka.ReactCurrentBatchConfig;function bs(e,n){if(e&&e.defaultProps){n=gi({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}var Bp=Ol(null),Fp=null,gc=null,w_=null;function b_(){w_=gc=Fp=null}function S_(e){var n=Bp.current;ni(Bp),e._currentValue=n}function xg(e,n,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===o)break;e=e.return}}function Pc(e,n){Fp=e,w_=gc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(oo=!0),e.firstContext=null)}function Jo(e){var n=e._currentValue;if(w_!==e)if(e={context:e,memoizedValue:n,next:null},gc===null){if(Fp===null)throw Error(Ye(308));gc=e,Fp.dependencies={lanes:0,firstContext:e}}else gc=gc.next=e;return n}var ks=null,wl=!1;function E_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C1(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function zl(e,n){var o=e.updateQueue;o!==null&&(o=o.shared,_w(e)?(e=o.interleaved,e===null?(n.next=n,ks===null?ks=[o]:ks.push(o)):(n.next=e.next,e.next=n),o.interleaved=n):(e=o.pending,e===null?n.next=n:(n.next=e.next,e.next=n),o.pending=n))}function _p(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,p_(e,o)}}function l0(e,n){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var g=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var S={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};v===null?g=v=S:v=v.next=S,o=o.next}while(o!==null);v===null?g=v=n:v=v.next=n}else g=v=n;o={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function Op(e,n,o,h){var g=e.updateQueue;wl=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,u=g.shared.pending;if(u!==null){g.shared.pending=null;var I=u,N=I.next;I.next=null,S===null?v=N:S.next=N,S=I;var j=e.alternate;j!==null&&(j=j.updateQueue,u=j.lastBaseUpdate,u!==S&&(u===null?j.firstBaseUpdate=N:u.next=N,j.lastBaseUpdate=I))}if(v!==null){var q=g.baseState;S=0,j=N=I=null,u=v;do{var V=u.lane,he=u.eventTime;if((h&V)===V){j!==null&&(j=j.next={eventTime:he,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var ge=e,pe=u;switch(V=n,he=o,pe.tag){case 1:if(ge=pe.payload,typeof ge=="function"){q=ge.call(he,q,V);break e}q=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=pe.payload,V=typeof ge=="function"?ge.call(he,q,V):ge,V==null)break e;q=gi({},q,V);break e;case 2:wl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,V=g.effects,V===null?g.effects=[u]:V.push(u))}else he={eventTime:he,lane:V,tag:u.tag,payload:u.payload,callback:u.callback,next:null},j===null?(N=j=he,I=q):j=j.next=he,S|=V;if(u=u.next,u===null){if(u=g.shared.pending,u===null)break;V=u,u=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(1);if(j===null&&(I=q),g.baseState=I,g.firstBaseUpdate=N,g.lastBaseUpdate=j,n=g.shared.interleaved,n!==null){g=n;do S|=g.lane,g=g.next;while(g!==n)}else v===null&&(g.shared.lanes=0);Cu|=S,e.lanes=S,e.memoizedState=q}}function u0(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var h=e[n],g=h.callback;if(g!==null){if(h.callback=null,h=o,typeof g!="function")throw Error(Ye(191,g));g.call(h)}}}var I1=new Ax.Component().refs;function wg(e,n,o,h){n=e.memoizedState,o=o(h,n),o=o==null?n:gi({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var uf={isMounted:function(e){return(e=e._reactInternals)?Au(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var h=jr(),g=Ml(e),v=ja(h,g);v.payload=n,o!=null&&(v.callback=o),zl(e,v),n=Yo(e,g,h),n!==null&&_p(n,e,g)},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var h=jr(),g=Ml(e),v=ja(h,g);v.tag=1,v.payload=n,o!=null&&(v.callback=o),zl(e,v),n=Yo(e,g,h),n!==null&&_p(n,e,g)},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=jr(),h=Ml(e),g=ja(o,h);g.tag=2,n!=null&&(g.callback=n),zl(e,g),n=Yo(e,h,o),n!==null&&_p(n,e,h)}};function c0(e,n,o,h,g,v,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,v,S):n.prototype&&n.prototype.isPureReactComponent?!Hh(o,h)||!Hh(g,v):!0}function z1(e,n,o){var h=!1,g=Dl,v=n.contextType;return typeof v=="object"&&v!==null?v=Jo(v):(g=ao(n)?Tu:Er.current,h=n.contextTypes,v=(h=h!=null)?zc(e,g):Dl),n=new n(o,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=uf,e.stateNode=n,n._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=v),n}function h0(e,n,o,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,h),n.state!==e&&uf.enqueueReplaceState(n,n.state,null)}function bg(e,n,o,h){var g=e.stateNode;g.props=o,g.state=e.memoizedState,g.refs=I1,E_(e);var v=n.contextType;typeof v=="object"&&v!==null?g.context=Jo(v):(v=ao(n)?Tu:Er.current,g.context=zc(e,v)),g.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(wg(e,n,v,o),g.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(n=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),n!==g.state&&uf.enqueueReplaceState(g,g.state,null),Op(e,o,g,h),g.state=e.memoizedState),typeof g.componentDidMount=="function"&&(e.flags|=4194308)}var _c=[],yc=0,Np=null,Up=0,qo=[],Ho=0,Pu=null,$a=1,Za="";function pu(e,n){_c[yc++]=Up,_c[yc++]=Np,Np=e,Up=n}function A1(e,n,o){qo[Ho++]=$a,qo[Ho++]=Za,qo[Ho++]=Pu,Pu=e;var h=$a;e=Za;var g=32-Cs(h)-1;h&=~(1<<g),o+=1;var v=32-Cs(n)+g;if(30<v){var S=g-g%5;v=(h&(1<<S)-1).toString(32),h>>=S,g-=S,$a=1<<32-Cs(n)+g|o<<g|h,Za=v+e}else $a=1<<v|o<<g|h,Za=e}function T_(e){e.return!==null&&(pu(e,1),A1(e,1,0))}function P_(e){for(;e===Np;)Np=_c[--yc],_c[yc]=null,Up=_c[--yc],_c[yc]=null;for(;e===Pu;)Pu=qo[--Ho],qo[Ho]=null,Za=qo[--Ho],qo[Ho]=null,$a=qo[--Ho],qo[Ho]=null}var Po=null,ro=null,li=!1,Ps=null;function M1(e,n){var o=Xo(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function d0(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Po=e,ro=Va(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Po=e,ro=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Pu!==null?{id:$a,overflow:Za}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Xo(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,Po=e,ro=null,!0):!1;default:return!1}}function Sg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(li){var n=ro;if(n){var o=n;if(!d0(e,n)){if(Sg(e))throw Error(Ye(418));n=Va(o.nextSibling);var h=Po;n&&d0(e,n)?M1(h,o):(e.flags=e.flags&-4097|2,li=!1,Po=e)}}else{if(Sg(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,li=!1,Po=e}}}function p0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Po=e}function _h(e){if(e!==Po)return!1;if(!li)return p0(e),li=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!gg(e.type,e.memoizedProps)),n&&(n=ro)){if(Sg(e)){for(e=ro;e;)e=Va(e.nextSibling);throw Error(Ye(418))}for(;n;)M1(e,n),n=Va(n.nextSibling)}if(p0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){ro=Va(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}ro=null}}else ro=Po?Va(e.stateNode.nextSibling):null;return!0}function Ac(){ro=Po=null,li=!1}function k_(e){Ps===null?Ps=[e]:Ps.push(e)}function yh(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Ye(309));var h=o.stateNode}if(!h)throw Error(Ye(147,e));var g=h,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(S){var u=g.refs;u===I1&&(u=g.refs={}),S===null?delete u[v]:u[v]=S},n._stringRef=v,n)}if(typeof e!="string")throw Error(Ye(284));if(!o._owner)throw Error(Ye(290,e))}return e}function Kd(e,n){throw e=Object.prototype.toString.call(n),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function f0(e){var n=e._init;return n(e._payload)}function L1(e){function n(ne,Q){if(e){var te=ne.deletions;te===null?(ne.deletions=[Q],ne.flags|=16):te.push(Q)}}function o(ne,Q){if(!e)return null;for(;Q!==null;)n(ne,Q),Q=Q.sibling;return null}function h(ne,Q){for(ne=new Map;Q!==null;)Q.key!==null?ne.set(Q.key,Q):ne.set(Q.index,Q),Q=Q.sibling;return ne}function g(ne,Q){return ne=Rl(ne,Q),ne.index=0,ne.sibling=null,ne}function v(ne,Q,te){return ne.index=te,e?(te=ne.alternate,te!==null?(te=te.index,te<Q?(ne.flags|=2,Q):te):(ne.flags|=2,Q)):(ne.flags|=1048576,Q)}function S(ne){return e&&ne.alternate===null&&(ne.flags|=2),ne}function u(ne,Q,te,Te){return Q===null||Q.tag!==6?(Q=Am(te,ne.mode,Te),Q.return=ne,Q):(Q=g(Q,te),Q.return=ne,Q)}function I(ne,Q,te,Te){var Ae=te.type;return Ae===cc?j(ne,Q,te.props.children,Te,te.key):Q!==null&&(Q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===xl&&f0(Ae)===Q.type)?(Te=g(Q,te.props),Te.ref=yh(ne,Q,te),Te.return=ne,Te):(Te=bp(te.type,te.key,te.props,null,ne.mode,Te),Te.ref=yh(ne,Q,te),Te.return=ne,Te)}function N(ne,Q,te,Te){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==te.containerInfo||Q.stateNode.implementation!==te.implementation?(Q=Mm(te,ne.mode,Te),Q.return=ne,Q):(Q=g(Q,te.children||[]),Q.return=ne,Q)}function j(ne,Q,te,Te,Ae){return Q===null||Q.tag!==7?(Q=bu(te,ne.mode,Te,Ae),Q.return=ne,Q):(Q=g(Q,te),Q.return=ne,Q)}function q(ne,Q,te){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Am(""+Q,ne.mode,te),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Ud:return te=bp(Q.type,Q.key,Q.props,null,ne.mode,te),te.ref=yh(ne,null,Q),te.return=ne,te;case uc:return Q=Mm(Q,ne.mode,te),Q.return=ne,Q;case xl:var Te=Q._init;return q(ne,Te(Q._payload),te)}if(Eh(Q)||dh(Q))return Q=bu(Q,ne.mode,te,null),Q.return=ne,Q;Kd(ne,Q)}return null}function V(ne,Q,te,Te){var Ae=Q!==null?Q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Ae!==null?null:u(ne,Q,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Ud:return te.key===Ae?I(ne,Q,te,Te):null;case uc:return te.key===Ae?N(ne,Q,te,Te):null;case xl:return Ae=te._init,V(ne,Q,Ae(te._payload),Te)}if(Eh(te)||dh(te))return Ae!==null?null:j(ne,Q,te,Te,null);Kd(ne,te)}return null}function he(ne,Q,te,Te,Ae){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ne=ne.get(te)||null,u(Q,ne,""+Te,Ae);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case Ud:return ne=ne.get(Te.key===null?te:Te.key)||null,I(Q,ne,Te,Ae);case uc:return ne=ne.get(Te.key===null?te:Te.key)||null,N(Q,ne,Te,Ae);case xl:var $e=Te._init;return he(ne,Q,te,$e(Te._payload),Ae)}if(Eh(Te)||dh(Te))return ne=ne.get(te)||null,j(Q,ne,Te,Ae,null);Kd(Q,Te)}return null}function ge(ne,Q,te,Te){for(var Ae=null,$e=null,Ne=Q,Be=Q=0,lt=null;Ne!==null&&Be<te.length;Be++){Ne.index>Be?(lt=Ne,Ne=null):lt=Ne.sibling;var dt=V(ne,Ne,te[Be],Te);if(dt===null){Ne===null&&(Ne=lt);break}e&&Ne&&dt.alternate===null&&n(ne,Ne),Q=v(dt,Q,Be),$e===null?Ae=dt:$e.sibling=dt,$e=dt,Ne=lt}if(Be===te.length)return o(ne,Ne),li&&pu(ne,Be),Ae;if(Ne===null){for(;Be<te.length;Be++)Ne=q(ne,te[Be],Te),Ne!==null&&(Q=v(Ne,Q,Be),$e===null?Ae=Ne:$e.sibling=Ne,$e=Ne);return li&&pu(ne,Be),Ae}for(Ne=h(ne,Ne);Be<te.length;Be++)lt=he(Ne,ne,Be,te[Be],Te),lt!==null&&(e&&lt.alternate!==null&&Ne.delete(lt.key===null?Be:lt.key),Q=v(lt,Q,Be),$e===null?Ae=lt:$e.sibling=lt,$e=lt);return e&&Ne.forEach(function(Pt){return n(ne,Pt)}),li&&pu(ne,Be),Ae}function pe(ne,Q,te,Te){var Ae=dh(te);if(typeof Ae!="function")throw Error(Ye(150));if(te=Ae.call(te),te==null)throw Error(Ye(151));for(var $e=Ae=null,Ne=Q,Be=Q=0,lt=null,dt=te.next();Ne!==null&&!dt.done;Be++,dt=te.next()){Ne.index>Be?(lt=Ne,Ne=null):lt=Ne.sibling;var Pt=V(ne,Ne,dt.value,Te);if(Pt===null){Ne===null&&(Ne=lt);break}e&&Ne&&Pt.alternate===null&&n(ne,Ne),Q=v(Pt,Q,Be),$e===null?Ae=Pt:$e.sibling=Pt,$e=Pt,Ne=lt}if(dt.done)return o(ne,Ne),li&&pu(ne,Be),Ae;if(Ne===null){for(;!dt.done;Be++,dt=te.next())dt=q(ne,dt.value,Te),dt!==null&&(Q=v(dt,Q,Be),$e===null?Ae=dt:$e.sibling=dt,$e=dt);return li&&pu(ne,Be),Ae}for(Ne=h(ne,Ne);!dt.done;Be++,dt=te.next())dt=he(Ne,ne,Be,dt.value,Te),dt!==null&&(e&&dt.alternate!==null&&Ne.delete(dt.key===null?Be:dt.key),Q=v(dt,Q,Be),$e===null?Ae=dt:$e.sibling=dt,$e=dt);return e&&Ne.forEach(function(Lt){return n(ne,Lt)}),li&&pu(ne,Be),Ae}function Ee(ne,Q,te,Te){if(typeof te=="object"&&te!==null&&te.type===cc&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Ud:e:{for(var Ae=te.key,$e=Q;$e!==null;){if($e.key===Ae){if(Ae=te.type,Ae===cc){if($e.tag===7){o(ne,$e.sibling),Q=g($e,te.props.children),Q.return=ne,ne=Q;break e}}else if($e.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===xl&&f0(Ae)===$e.type){o(ne,$e.sibling),Q=g($e,te.props),Q.ref=yh(ne,$e,te),Q.return=ne,ne=Q;break e}o(ne,$e);break}else n(ne,$e);$e=$e.sibling}te.type===cc?(Q=bu(te.props.children,ne.mode,Te,te.key),Q.return=ne,ne=Q):(Te=bp(te.type,te.key,te.props,null,ne.mode,Te),Te.ref=yh(ne,Q,te),Te.return=ne,ne=Te)}return S(ne);case uc:e:{for($e=te.key;Q!==null;){if(Q.key===$e)if(Q.tag===4&&Q.stateNode.containerInfo===te.containerInfo&&Q.stateNode.implementation===te.implementation){o(ne,Q.sibling),Q=g(Q,te.children||[]),Q.return=ne,ne=Q;break e}else{o(ne,Q);break}else n(ne,Q);Q=Q.sibling}Q=Mm(te,ne.mode,Te),Q.return=ne,ne=Q}return S(ne);case xl:return $e=te._init,Ee(ne,Q,$e(te._payload),Te)}if(Eh(te))return ge(ne,Q,te,Te);if(dh(te))return pe(ne,Q,te,Te);Kd(ne,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,Q!==null&&Q.tag===6?(o(ne,Q.sibling),Q=g(Q,te),Q.return=ne,ne=Q):(o(ne,Q),Q=Am(te,ne.mode,Te),Q.return=ne,ne=Q),S(ne)):o(ne,Q)}return Ee}var Mc=L1(!0),D1=L1(!1),cd={},oa=Ol(cd),Jh=Ol(cd),Qh=Ol(cd);function yu(e){if(e===cd)throw Error(Ye(174));return e}function C_(e,n){switch(Xn(Qh,n),Xn(Jh,e),Xn(oa,cd),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ng(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=ng(n,e)}ni(oa),Xn(oa,n)}function Lc(){ni(oa),ni(Jh),ni(Qh)}function R1(e){yu(Qh.current);var n=yu(oa.current),o=ng(n,e.type);n!==o&&(Xn(Jh,e),Xn(oa,o))}function I_(e){Jh.current===e&&(ni(oa),ni(Jh))}var fi=Ol(0);function Vp(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Pm=[];function z_(){for(var e=0;e<Pm.length;e++)Pm[e]._workInProgressVersionPrimary=null;Pm.length=0}var yp=Ka.ReactCurrentDispatcher,km=Ka.ReactCurrentBatchConfig,ku=0,mi=null,Ni=null,Yi=null,$p=!1,Lh=!1,ed=0,mT=0;function xr(){throw Error(Ye(321))}function A_(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Is(e[o],n[o]))return!1;return!0}function M_(e,n,o,h,g,v){if(ku=v,mi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,yp.current=e===null||e.memoizedState===null?vT:xT,e=o(h,g),Lh){v=0;do{if(Lh=!1,ed=0,25<=v)throw Error(Ye(301));v+=1,Yi=Ni=null,n.updateQueue=null,yp.current=wT,e=o(h,g)}while(Lh)}if(yp.current=Zp,n=Ni!==null&&Ni.next!==null,ku=0,Yi=Ni=mi=null,$p=!1,n)throw Error(Ye(300));return e}function L_(){var e=ed!==0;return ed=0,e}function na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?mi.memoizedState=Yi=e:Yi=Yi.next=e,Yi}function Qo(){if(Ni===null){var e=mi.alternate;e=e!==null?e.memoizedState:null}else e=Ni.next;var n=Yi===null?mi.memoizedState:Yi.next;if(n!==null)Yi=n,Ni=e;else{if(e===null)throw Error(Ye(310));Ni=e,e={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},Yi===null?mi.memoizedState=Yi=e:Yi=Yi.next=e}return Yi}function td(e,n){return typeof n=="function"?n(e):n}function Cm(e){var n=Qo(),o=n.queue;if(o===null)throw Error(Ye(311));o.lastRenderedReducer=e;var h=Ni,g=h.baseQueue,v=o.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}h.baseQueue=g=v,o.pending=null}if(g!==null){v=g.next,h=h.baseState;var u=S=null,I=null,N=v;do{var j=N.lane;if((ku&j)===j)I!==null&&(I=I.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),h=N.hasEagerState?N.eagerState:e(h,N.action);else{var q={lane:j,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};I===null?(u=I=q,S=h):I=I.next=q,mi.lanes|=j,Cu|=j}N=N.next}while(N!==null&&N!==v);I===null?S=h:I.next=u,Is(h,n.memoizedState)||(oo=!0),n.memoizedState=h,n.baseState=S,n.baseQueue=I,o.lastRenderedState=h}if(e=o.interleaved,e!==null){g=e;do v=g.lane,mi.lanes|=v,Cu|=v,g=g.next;while(g!==e)}else g===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Im(e){var n=Qo(),o=n.queue;if(o===null)throw Error(Ye(311));o.lastRenderedReducer=e;var h=o.dispatch,g=o.pending,v=n.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do v=e(v,S.action),S=S.next;while(S!==g);Is(v,n.memoizedState)||(oo=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),o.lastRenderedState=v}return[v,h]}function B1(){}function F1(e,n){var o=mi,h=Qo(),g=n(),v=!Is(h.memoizedState,g);if(v&&(h.memoizedState=g,oo=!0),h=h.queue,D_(U1.bind(null,o,h,e),[e]),h.getSnapshot!==n||v||Yi!==null&&Yi.memoizedState.tag&1){if(o.flags|=2048,nd(9,N1.bind(null,o,h,g,n),void 0,null),Vi===null)throw Error(Ye(349));(ku&30)!==0||O1(o,n,g)}return g}function O1(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function N1(e,n,o,h){n.value=o,n.getSnapshot=h,V1(n)&&Yo(e,1,-1)}function U1(e,n,o){return o(function(){V1(n)&&Yo(e,1,-1)})}function V1(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Is(e,o)}catch{return!0}}function m0(e){var n=na();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:td,lastRenderedState:e},n.queue=e,e=e.dispatch=yT.bind(null,mi,e),[n.memoizedState,e]}function nd(e,n,o,h){return e={tag:e,create:n,destroy:o,deps:h,next:null},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,n.lastEffect=e)),e}function $1(){return Qo().memoizedState}function vp(e,n,o,h){var g=na();mi.flags|=e,g.memoizedState=nd(1|n,o,void 0,h===void 0?null:h)}function cf(e,n,o,h){var g=Qo();h=h===void 0?null:h;var v=void 0;if(Ni!==null){var S=Ni.memoizedState;if(v=S.destroy,h!==null&&A_(h,S.deps)){g.memoizedState=nd(n,o,v,h);return}}mi.flags|=e,g.memoizedState=nd(1|n,o,v,h)}function g0(e,n){return vp(8390656,8,e,n)}function D_(e,n){return cf(2048,8,e,n)}function Z1(e,n){return cf(4,2,e,n)}function j1(e,n){return cf(4,4,e,n)}function G1(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function W1(e,n,o){return o=o!=null?o.concat([e]):null,cf(4,4,G1.bind(null,n,e),o)}function R_(){}function q1(e,n){var o=Qo();n=n===void 0?null:n;var h=o.memoizedState;return h!==null&&n!==null&&A_(n,h[1])?h[0]:(o.memoizedState=[e,n],e)}function H1(e,n){var o=Qo();n=n===void 0?null:n;var h=o.memoizedState;return h!==null&&n!==null&&A_(n,h[1])?h[0]:(e=e(),o.memoizedState=[e,n],e)}function X1(e,n,o){return(ku&21)===0?(e.baseState&&(e.baseState=!1,oo=!0),e.memoizedState=o):(Is(o,n)||(o=t1(),mi.lanes|=o,Cu|=o,e.baseState=!0),n)}function gT(e,n){var o=Bn;Bn=o!==0&&4>o?o:4,e(!0);var h=km.transition;km.transition={};try{e(!1),n()}finally{Bn=o,km.transition=h}}function K1(){return Qo().memoizedState}function _T(e,n,o){var h=Ml(e);o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},Y1(e)?J1(n,o):(Q1(e,n,o),o=jr(),e=Yo(e,h,o),e!==null&&ew(e,n,h))}function yT(e,n,o){var h=Ml(e),g={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(Y1(e))J1(n,g);else{Q1(e,n,g);var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var S=n.lastRenderedState,u=v(S,o);if(g.hasEagerState=!0,g.eagerState=u,Is(u,S))return}catch{}finally{}o=jr(),e=Yo(e,h,o),e!==null&&ew(e,n,h)}}function Y1(e){var n=e.alternate;return e===mi||n!==null&&n===mi}function J1(e,n){Lh=$p=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Q1(e,n,o){_w(e)?(e=n.interleaved,e===null?(o.next=o,ks===null?ks=[n]:ks.push(n)):(o.next=e.next,e.next=o),n.interleaved=o):(e=n.pending,e===null?o.next=o:(o.next=e.next,e.next=o),n.pending=o)}function ew(e,n,o){if((o&4194240)!==0){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,p_(e,o)}}var Zp={readContext:Jo,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},vT={readContext:Jo,useCallback:function(e,n){return na().memoizedState=[e,n===void 0?null:n],e},useContext:Jo,useEffect:g0,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,vp(4194308,4,G1.bind(null,n,e),o)},useLayoutEffect:function(e,n){return vp(4194308,4,e,n)},useInsertionEffect:function(e,n){return vp(4,2,e,n)},useMemo:function(e,n){var o=na();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var h=na();return n=o!==void 0?o(n):n,h.memoizedState=h.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},h.queue=e,e=e.dispatch=_T.bind(null,mi,e),[h.memoizedState,e]},useRef:function(e){var n=na();return e={current:e},n.memoizedState=e},useState:m0,useDebugValue:R_,useDeferredValue:function(e){return na().memoizedState=e},useTransition:function(){var e=m0(!1),n=e[0];return e=gT.bind(null,e[1]),na().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var h=mi,g=na();if(li){if(o===void 0)throw Error(Ye(407));o=o()}else{if(o=n(),Vi===null)throw Error(Ye(349));(ku&30)!==0||O1(h,n,o)}g.memoizedState=o;var v={value:o,getSnapshot:n};return g.queue=v,g0(U1.bind(null,h,v,e),[e]),h.flags|=2048,nd(9,N1.bind(null,h,v,o,n),void 0,null),o},useId:function(){var e=na(),n=Vi.identifierPrefix;if(li){var o=Za,h=$a;o=(h&~(1<<32-Cs(h)-1)).toString(32)+o,n=":"+n+"R"+o,o=ed++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=mT++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},xT={readContext:Jo,useCallback:q1,useContext:Jo,useEffect:D_,useImperativeHandle:W1,useInsertionEffect:Z1,useLayoutEffect:j1,useMemo:H1,useReducer:Cm,useRef:$1,useState:function(){return Cm(td)},useDebugValue:R_,useDeferredValue:function(e){var n=Qo();return X1(n,Ni.memoizedState,e)},useTransition:function(){var e=Cm(td)[0],n=Qo().memoizedState;return[e,n]},useMutableSource:B1,useSyncExternalStore:F1,useId:K1,unstable_isNewReconciler:!1},wT={readContext:Jo,useCallback:q1,useContext:Jo,useEffect:D_,useImperativeHandle:W1,useInsertionEffect:Z1,useLayoutEffect:j1,useMemo:H1,useReducer:Im,useRef:$1,useState:function(){return Im(td)},useDebugValue:R_,useDeferredValue:function(e){var n=Qo();return Ni===null?n.memoizedState=e:X1(n,Ni.memoizedState,e)},useTransition:function(){var e=Im(td)[0],n=Qo().memoizedState;return[e,n]},useMutableSource:B1,useSyncExternalStore:F1,useId:K1,unstable_isNewReconciler:!1};function B_(e,n){try{var o="",h=n;do o+=XS(h),h=h.return;while(h);var g=o}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:g}}function Tg(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var bT=typeof WeakMap=="function"?WeakMap:Map;function tw(e,n,o){o=ja(-1,o),o.tag=3,o.payload={element:null};var h=n.value;return o.callback=function(){Gp||(Gp=!0,Dg=h),Tg(e,n)},o}function nw(e,n,o){o=ja(-1,o),o.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var g=n.value;o.payload=function(){return h(g)},o.callback=function(){Tg(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(o.callback=function(){Tg(e,n),typeof h!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var S=n.stack;this.componentDidCatch(n.value,{componentStack:S!==null?S:""})}),o}function _0(e,n,o){var h=e.pingCache;if(h===null){h=e.pingCache=new bT;var g=new Set;h.set(n,g)}else g=h.get(n),g===void 0&&(g=new Set,h.set(n,g));g.has(o)||(g.add(o),e=RT.bind(null,e,n,o),n.then(e,e))}function y0(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function v0(e,n,o,h,g){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=ja(-1,1),n.tag=2,zl(o,n))),o.lanes|=1),e):(e.flags|=65536,e.lanes=g,e)}var iw,Pg,rw,ow;iw=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Pg=function(){};rw=function(e,n,o,h){var g=e.memoizedProps;if(g!==h){e=n.stateNode,yu(oa.current);var v=null;switch(o){case"input":g=Jm(e,g),h=Jm(e,h),v=[];break;case"select":g=gi({},g,{value:void 0}),h=gi({},h,{value:void 0}),v=[];break;case"textarea":g=tg(e,g),h=tg(e,h),v=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=Lp)}ig(o,h);var S;o=null;for(N in g)if(!h.hasOwnProperty(N)&&g.hasOwnProperty(N)&&g[N]!=null)if(N==="style"){var u=g[N];for(S in u)u.hasOwnProperty(S)&&(o||(o={}),o[S]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(Vh.hasOwnProperty(N)?v||(v=[]):(v=v||[]).push(N,null));for(N in h){var I=h[N];if(u=g!=null?g[N]:void 0,h.hasOwnProperty(N)&&I!==u&&(I!=null||u!=null))if(N==="style")if(u){for(S in u)!u.hasOwnProperty(S)||I&&I.hasOwnProperty(S)||(o||(o={}),o[S]="");for(S in I)I.hasOwnProperty(S)&&u[S]!==I[S]&&(o||(o={}),o[S]=I[S])}else o||(v||(v=[]),v.push(N,o)),o=I;else N==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,u=u?u.__html:void 0,I!=null&&u!==I&&(v=v||[]).push(N,I)):N==="children"?typeof I!="string"&&typeof I!="number"||(v=v||[]).push(N,""+I):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(Vh.hasOwnProperty(N)?(I!=null&&N==="onScroll"&&Qn("scroll",e),v||u===I||(v=[])):(v=v||[]).push(N,I))}o&&(v=v||[]).push("style",o);var N=v;(n.updateQueue=N)&&(n.flags|=4)}};ow=function(e,n,o,h){o!==h&&(n.flags|=4)};function vh(e,n){if(!li)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function wr(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(n)for(var g=e.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=h,e.childLanes=o,n}function ST(e,n,o){var h=n.pendingProps;switch(P_(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(n),null;case 1:return ao(n.type)&&Dp(),wr(n),null;case 3:return h=n.stateNode,Lc(),ni(so),ni(Er),z_(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(_h(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ps!==null&&(Fg(Ps),Ps=null))),Pg(e,n),wr(n),null;case 5:I_(n);var g=yu(Qh.current);if(o=n.type,e!==null&&n.stateNode!=null)rw(e,n,o,h,g),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!h){if(n.stateNode===null)throw Error(Ye(166));return wr(n),null}if(e=yu(oa.current),_h(n)){h=n.stateNode,o=n.type;var v=n.memoizedProps;switch(h[ia]=n,h[Yh]=v,e=(n.mode&1)!==0,o){case"dialog":Qn("cancel",h),Qn("close",h);break;case"iframe":case"object":case"embed":Qn("load",h);break;case"video":case"audio":for(g=0;g<Ph.length;g++)Qn(Ph[g],h);break;case"source":Qn("error",h);break;case"img":case"image":case"link":Qn("error",h),Qn("load",h);break;case"details":Qn("toggle",h);break;case"input":Lv(h,v),Qn("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},Qn("invalid",h);break;case"textarea":Rv(h,v),Qn("invalid",h)}ig(o,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var u=v[S];S==="children"?typeof u=="string"?h.textContent!==u&&(v.suppressHydrationWarning!==!0&&Xd(h.textContent,u,e),g=["children",u]):typeof u=="number"&&h.textContent!==""+u&&(v.suppressHydrationWarning!==!0&&Xd(h.textContent,u,e),g=["children",""+u]):Vh.hasOwnProperty(S)&&u!=null&&S==="onScroll"&&Qn("scroll",h)}switch(o){case"input":Vd(h),Dv(h,v,!0);break;case"textarea":Vd(h),Bv(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Lp)}h=g,n.updateQueue=h,h!==null&&(n.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ux(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=S.createElement(o,{is:h.is}):(e=S.createElement(o),o==="select"&&(S=e,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):e=S.createElementNS(e,o),e[ia]=n,e[Yh]=h,iw(e,n,!1,!1),n.stateNode=e;e:{switch(S=rg(o,h),o){case"dialog":Qn("cancel",e),Qn("close",e),g=h;break;case"iframe":case"object":case"embed":Qn("load",e),g=h;break;case"video":case"audio":for(g=0;g<Ph.length;g++)Qn(Ph[g],e);g=h;break;case"source":Qn("error",e),g=h;break;case"img":case"image":case"link":Qn("error",e),Qn("load",e),g=h;break;case"details":Qn("toggle",e),g=h;break;case"input":Lv(e,h),g=Jm(e,h),Qn("invalid",e);break;case"option":g=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},g=gi({},h,{value:void 0}),Qn("invalid",e);break;case"textarea":Rv(e,h),g=tg(e,h),Qn("invalid",e);break;default:g=h}ig(o,g),u=g;for(v in u)if(u.hasOwnProperty(v)){var I=u[v];v==="style"?Zx(e,I):v==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&Vx(e,I)):v==="children"?typeof I=="string"?(o!=="textarea"||I!=="")&&$h(e,I):typeof I=="number"&&$h(e,""+I):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Vh.hasOwnProperty(v)?I!=null&&v==="onScroll"&&Qn("scroll",e):I!=null&&a_(e,v,I,S))}switch(o){case"input":Vd(e),Dv(e,h,!1);break;case"textarea":Vd(e),Bv(e);break;case"option":h.value!=null&&e.setAttribute("value",""+Ll(h.value));break;case"select":e.multiple=!!h.multiple,v=h.value,v!=null?bc(e,!!h.multiple,v,!1):h.defaultValue!=null&&bc(e,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(e.onclick=Lp)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return wr(n),null;case 6:if(e&&n.stateNode!=null)ow(e,n,e.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(Ye(166));if(o=yu(Qh.current),yu(oa.current),_h(n)){if(h=n.stateNode,o=n.memoizedProps,h[ia]=n,(v=h.nodeValue!==o)&&(e=Po,e!==null))switch(e.tag){case 3:Xd(h.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xd(h.nodeValue,o,(e.mode&1)!==0)}v&&(n.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[ia]=n,n.stateNode=h}return wr(n),null;case 13:if(ni(fi),h=n.memoizedState,li&&ro!==null&&(n.mode&1)!==0&&(n.flags&128)===0){for(h=ro;h;)h=Va(h.nextSibling);return Ac(),n.flags|=98560,n}if(h!==null&&h.dehydrated!==null){if(h=_h(n),e===null){if(!h)throw Error(Ye(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Ye(317));h[ia]=n}else Ac(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;return wr(n),null}return Ps!==null&&(Fg(Ps),Ps=null),(n.flags&128)!==0?(n.lanes=o,n):(h=h!==null,o=!1,e===null?_h(n):o=e.memoizedState!==null,h!==o&&h&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(fi.current&1)!==0?Ui===0&&(Ui=3):$_())),n.updateQueue!==null&&(n.flags|=4),wr(n),null);case 4:return Lc(),Pg(e,n),e===null&&Xh(n.stateNode.containerInfo),wr(n),null;case 10:return S_(n.type._context),wr(n),null;case 17:return ao(n.type)&&Dp(),wr(n),null;case 19:if(ni(fi),v=n.memoizedState,v===null)return wr(n),null;if(h=(n.flags&128)!==0,S=v.rendering,S===null)if(h)vh(v,!1);else{if(Ui!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(S=Vp(e),S!==null){for(n.flags|=128,vh(v,!1),h=S.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),n.subtreeFlags=0,h=o,o=n.child;o!==null;)v=o,e=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,e=S.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Xn(fi,fi.current&1|2),n.child}e=e.sibling}v.tail!==null&&Pi()>Dc&&(n.flags|=128,h=!0,vh(v,!1),n.lanes=4194304)}else{if(!h)if(e=Vp(S),e!==null){if(n.flags|=128,h=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),vh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!li)return wr(n),null}else 2*Pi()-v.renderingStartTime>Dc&&o!==1073741824&&(n.flags|=128,h=!0,vh(v,!1),n.lanes=4194304);v.isBackwards?(S.sibling=n.child,n.child=S):(o=v.last,o!==null?o.sibling=S:n.child=S,v.last=S)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Pi(),n.sibling=null,o=fi.current,Xn(fi,h?o&1|2:o&1),n):(wr(n),null);case 22:case 23:return V_(),h=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(n.flags|=8192),h&&(n.mode&1)!==0?(So&1073741824)!==0&&(wr(n),n.subtreeFlags&6&&(n.flags|=8192)):wr(n),null;case 24:return null;case 25:return null}throw Error(Ye(156,n.tag))}var ET=Ka.ReactCurrentOwner,oo=!1;function Zr(e,n,o,h){n.child=e===null?D1(n,null,o,h):Mc(n,e.child,o,h)}function x0(e,n,o,h,g){o=o.render;var v=n.ref;return Pc(n,g),h=M_(e,n,o,h,v,g),o=L_(),e!==null&&!oo?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~g,Ha(e,n,g)):(li&&o&&T_(n),n.flags|=1,Zr(e,n,h,g),n.child)}function w0(e,n,o,h,g){if(e===null){var v=o.type;return typeof v=="function"&&!Z_(v)&&v.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=v,sw(e,n,v,h,g)):(e=bp(o.type,null,h,n,n.mode,g),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&g)===0){var S=v.memoizedProps;if(o=o.compare,o=o!==null?o:Hh,o(S,h)&&e.ref===n.ref)return Ha(e,n,g)}return n.flags|=1,e=Rl(v,h),e.ref=n.ref,e.return=n,n.child=e}function sw(e,n,o,h,g){if(e!==null){var v=e.memoizedProps;if(Hh(v,h)&&e.ref===n.ref)if(oo=!1,n.pendingProps=h=v,(e.lanes&g)!==0)(e.flags&131072)!==0&&(oo=!0);else return n.lanes=e.lanes,Ha(e,n,g)}return kg(e,n,o,h,g)}function aw(e,n,o){var h=n.pendingProps,g=h.children,v=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(xc,So),So|=o;else if((o&1073741824)!==0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:o,Xn(xc,So),So|=h;else return e=v!==null?v.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Xn(xc,So),So|=e,null;else v!==null?(h=v.baseLanes|o,n.memoizedState=null):h=o,Xn(xc,So),So|=h;return Zr(e,n,g,o),n.child}function lw(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function kg(e,n,o,h,g){var v=ao(o)?Tu:Er.current;return v=zc(n,v),Pc(n,g),o=M_(e,n,o,h,v,g),h=L_(),e!==null&&!oo?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~g,Ha(e,n,g)):(li&&h&&T_(n),n.flags|=1,Zr(e,n,o,g),n.child)}function b0(e,n,o,h,g){if(ao(o)){var v=!0;Rp(n)}else v=!1;if(Pc(n,g),n.stateNode===null)e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),z1(n,o,h),bg(n,o,h,g),h=!0;else if(e===null){var S=n.stateNode,u=n.memoizedProps;S.props=u;var I=S.context,N=o.contextType;typeof N=="object"&&N!==null?N=Jo(N):(N=ao(o)?Tu:Er.current,N=zc(n,N));var j=o.getDerivedStateFromProps,q=typeof j=="function"||typeof S.getSnapshotBeforeUpdate=="function";q||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(u!==h||I!==N)&&h0(n,S,h,N),wl=!1;var V=n.memoizedState;S.state=V,Op(n,h,S,g),I=n.memoizedState,u!==h||V!==I||so.current||wl?(typeof j=="function"&&(wg(n,o,j,h),I=n.memoizedState),(u=wl||c0(n,o,u,h,V,I,N))?(q||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=I),S.props=h,S.state=I,S.context=N,h=u):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{S=n.stateNode,C1(e,n),u=n.memoizedProps,N=n.type===n.elementType?u:bs(n.type,u),S.props=N,q=n.pendingProps,V=S.context,I=o.contextType,typeof I=="object"&&I!==null?I=Jo(I):(I=ao(o)?Tu:Er.current,I=zc(n,I));var he=o.getDerivedStateFromProps;(j=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(u!==q||V!==I)&&h0(n,S,h,I),wl=!1,V=n.memoizedState,S.state=V,Op(n,h,S,g);var ge=n.memoizedState;u!==q||V!==ge||so.current||wl?(typeof he=="function"&&(wg(n,o,he,h),ge=n.memoizedState),(N=wl||c0(n,o,N,h,V,ge,I)||!1)?(j||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ge,I),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ge,I)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||u===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ge),S.props=h,S.state=ge,S.context=I,h=N):(typeof S.componentDidUpdate!="function"||u===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),h=!1)}return Cg(e,n,o,h,v,g)}function Cg(e,n,o,h,g,v){lw(e,n);var S=(n.flags&128)!==0;if(!h&&!S)return g&&a0(n,o,!1),Ha(e,n,v);h=n.stateNode,ET.current=n;var u=S&&typeof o.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,e!==null&&S?(n.child=Mc(n,e.child,null,v),n.child=Mc(n,null,u,v)):Zr(e,n,u,v),n.memoizedState=h.state,g&&a0(n,o,!0),n.child}function uw(e){var n=e.stateNode;n.pendingContext?s0(e,n.pendingContext,n.pendingContext!==n.context):n.context&&s0(e,n.context,!1),C_(e,n.containerInfo)}function S0(e,n,o,h,g){return Ac(),k_(g),n.flags|=256,Zr(e,n,o,h),n.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Jd(e){return{baseLanes:e,cachePool:null,transitions:null}}function E0(e,n){return{baseLanes:e.baseLanes|n,cachePool:null,transitions:e.transitions}}function cw(e,n,o){var h=n.pendingProps,g=fi.current,v=!1,S=(n.flags&128)!==0,u;if((u=S)||(u=e!==null&&e.memoizedState===null?!1:(g&2)!==0),u?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(g|=1),Xn(fi,g&1),e===null)return Eg(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(g=h.children,e=h.fallback,v?(h=n.mode,v=n.child,g={mode:"hidden",children:g},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=g):v=Hp(g,h,0,null),e=bu(e,h,o,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=Jd(o),n.memoizedState=Yd,e):Ig(n,g));if(g=e.memoizedState,g!==null){if(u=g.dehydrated,u!==null){if(S)return n.flags&256?(n.flags&=-257,Qd(e,n,o,Error(Ye(422)))):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=h.fallback,g=n.mode,h=Hp({mode:"visible",children:h.children},g,0,null),v=bu(v,g,o,null),v.flags|=2,h.return=n,v.return=n,h.sibling=v,n.child=h,(n.mode&1)!==0&&Mc(n,e.child,null,o),n.child.memoizedState=Jd(o),n.memoizedState=Yd,v);if((n.mode&1)===0)n=Qd(e,n,o,null);else if(u.data==="$!")n=Qd(e,n,o,Error(Ye(419)));else if(h=(o&e.childLanes)!==0,oo||h){if(h=Vi,h!==null){switch(o&-o){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}h=(v&(h.suspendedLanes|o))!==0?0:v,h!==0&&h!==g.retryLane&&(g.retryLane=h,Yo(e,h,-1))}$_(),n=Qd(e,n,o,Error(Ye(421)))}else u.data==="$?"?(n.flags|=128,n.child=e.child,n=BT.bind(null,e),u._reactRetry=n,n=null):(o=g.treeContext,ro=Va(u.nextSibling),Po=n,li=!0,Ps=null,o!==null&&(qo[Ho++]=$a,qo[Ho++]=Za,qo[Ho++]=Pu,$a=o.id,Za=o.overflow,Pu=n),n=Ig(n,n.pendingProps.children),n.flags|=4096);return n}return v?(h=P0(e,n,h.children,h.fallback,o),v=n.child,g=e.child.memoizedState,v.memoizedState=g===null?Jd(o):E0(g,o),v.childLanes=e.childLanes&~o,n.memoizedState=Yd,h):(o=T0(e,n,h.children,o),n.memoizedState=null,o)}return v?(h=P0(e,n,h.children,h.fallback,o),v=n.child,g=e.child.memoizedState,v.memoizedState=g===null?Jd(o):E0(g,o),v.childLanes=e.childLanes&~o,n.memoizedState=Yd,h):(o=T0(e,n,h.children,o),n.memoizedState=null,o)}function Ig(e,n){return n=Hp({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function T0(e,n,o,h){var g=e.child;return e=g.sibling,o=Rl(g,{mode:"visible",children:o}),(n.mode&1)===0&&(o.lanes=h),o.return=n,o.sibling=null,e!==null&&(h=n.deletions,h===null?(n.deletions=[e],n.flags|=16):h.push(e)),n.child=o}function P0(e,n,o,h,g){var v=n.mode;e=e.child;var S=e.sibling,u={mode:"hidden",children:o};return(v&1)===0&&n.child!==e?(o=n.child,o.childLanes=0,o.pendingProps=u,n.deletions=null):(o=Rl(e,u),o.subtreeFlags=e.subtreeFlags&14680064),S!==null?h=Rl(S,h):(h=bu(h,v,g,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,h}function Qd(e,n,o,h){return h!==null&&k_(h),Mc(n,e.child,null,o),e=Ig(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function k0(e,n,o){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),xg(e.return,n,o)}function zm(e,n,o,h,g){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=o,v.tailMode=g)}function hw(e,n,o){var h=n.pendingProps,g=h.revealOrder,v=h.tail;if(Zr(e,n,h.children,o),h=fi.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&k0(e,o,n);else if(e.tag===19)k0(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Xn(fi,h),(n.mode&1)===0)n.memoizedState=null;else switch(g){case"forwards":for(o=n.child,g=null;o!==null;)e=o.alternate,e!==null&&Vp(e)===null&&(g=o),o=o.sibling;o=g,o===null?(g=n.child,n.child=null):(g=o.sibling,o.sibling=null),zm(n,!1,g,o,v);break;case"backwards":for(o=null,g=n.child,n.child=null;g!==null;){if(e=g.alternate,e!==null&&Vp(e)===null){n.child=g;break}e=g.sibling,g.sibling=o,o=g,g=e}zm(n,!0,o,null,v);break;case"together":zm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ha(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Cu|=n.lanes,(o&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(Ye(153));if(n.child!==null){for(e=n.child,o=Rl(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Rl(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function TT(e,n,o){switch(n.tag){case 3:uw(n),Ac();break;case 5:R1(n);break;case 1:ao(n.type)&&Rp(n);break;case 4:C_(n,n.stateNode.containerInfo);break;case 10:var h=n.type._context,g=n.memoizedProps.value;Xn(Bp,h._currentValue),h._currentValue=g;break;case 13:if(h=n.memoizedState,h!==null)return h.dehydrated!==null?(Xn(fi,fi.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?cw(e,n,o):(Xn(fi,fi.current&1),e=Ha(e,n,o),e!==null?e.sibling:null);Xn(fi,fi.current&1);break;case 19:if(h=(o&n.childLanes)!==0,(e.flags&128)!==0){if(h)return hw(e,n,o);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Xn(fi,fi.current),h)break;return null;case 22:case 23:return n.lanes=0,aw(e,n,o)}return Ha(e,n,o)}function PT(e,n){switch(P_(n),n.tag){case 1:return ao(n.type)&&Dp(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Lc(),ni(so),ni(Er),z_(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return I_(n),null;case 13:if(ni(fi),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Ye(340));Ac()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ni(fi),null;case 4:return Lc(),null;case 10:return S_(n.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var ep=!1,br=!1,kT=typeof WeakSet=="function"?WeakSet:Set,yt=null;function vc(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){bi(e,n,h)}else o.current=null}function zg(e,n,o){try{o()}catch(h){bi(e,n,h)}}var C0=!1;function CT(e,n){if(fg=zp,e=_1(),x_(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var S=0,u=-1,I=-1,N=0,j=0,q=e,V=null;t:for(;;){for(var he;q!==o||g!==0&&q.nodeType!==3||(u=S+g),q!==v||h!==0&&q.nodeType!==3||(I=S+h),q.nodeType===3&&(S+=q.nodeValue.length),(he=q.firstChild)!==null;)V=q,q=he;for(;;){if(q===e)break t;if(V===o&&++N===g&&(u=S),V===v&&++j===h&&(I=S),(he=q.nextSibling)!==null)break;q=V,V=q.parentNode}q=he}o=u===-1||I===-1?null:{start:u,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(mg={focusedElem:e,selectionRange:o},zp=!1,yt=n;yt!==null;)if(n=yt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,yt=e;else for(;yt!==null;){n=yt;try{var ge=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var pe=ge.memoizedProps,Ee=ge.memoizedState,ne=n.stateNode,Q=ne.getSnapshotBeforeUpdate(n.elementType===n.type?pe:bs(n.type,pe),Ee);ne.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var te=n.stateNode.containerInfo;if(te.nodeType===1)te.textContent="";else if(te.nodeType===9){var Te=te.body;Te!=null&&(Te.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(Ae){bi(n,n.return,Ae)}if(e=n.sibling,e!==null){e.return=n.return,yt=e;break}yt=n.return}return ge=C0,C0=!1,ge}function Dh(e,n,o){var h=n.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&e)===e){var v=g.destroy;g.destroy=void 0,v!==void 0&&zg(n,o,v)}g=g.next}while(g!==h)}}function hf(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var h=o.create;o.destroy=h()}o=o.next}while(o!==n)}}function Ag(e){var n=e.ref;if(n!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof n=="function"?n(e):n.current=e}}function dw(e){var n=e.alternate;n!==null&&(e.alternate=null,dw(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[ia],delete n[Yh],delete n[yg],delete n[hT],delete n[dT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pw(e){return e.tag===5||e.tag===3||e.tag===4}function I0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mg(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Lp));else if(h!==4&&(e=e.child,e!==null))for(Mg(e,n,o),e=e.sibling;e!==null;)Mg(e,n,o),e=e.sibling}function Lg(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Lg(e,n,o),e=e.sibling;e!==null;)Lg(e,n,o),e=e.sibling}var ar=null,Ss=!1;function yl(e,n,o){for(o=o.child;o!==null;)fw(e,n,o),o=o.sibling}function fw(e,n,o){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(nf,o)}catch{}switch(o.tag){case 5:br||vc(o,n);case 6:var h=ar,g=Ss;ar=null,yl(e,n,o),ar=h,Ss=g,ar!==null&&(Ss?(e=ar,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):ar.removeChild(o.stateNode));break;case 18:ar!==null&&(Ss?(e=ar,o=o.stateNode,e.nodeType===8?Em(e.parentNode,o):e.nodeType===1&&Em(e,o),Wh(e)):Em(ar,o.stateNode));break;case 4:h=ar,g=Ss,ar=o.stateNode.containerInfo,Ss=!0,yl(e,n,o),ar=h,Ss=g;break;case 0:case 11:case 14:case 15:if(!br&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&zg(o,n,S),g=g.next}while(g!==h)}yl(e,n,o);break;case 1:if(!br&&(vc(o,n),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(u){bi(o,n,u)}yl(e,n,o);break;case 21:yl(e,n,o);break;case 22:o.mode&1?(br=(h=br)||o.memoizedState!==null,yl(e,n,o),br=h):yl(e,n,o);break;default:yl(e,n,o)}}function z0(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new kT),n.forEach(function(h){var g=FT.bind(null,e,h);o.has(h)||(o.add(h),h.then(g,g))})}}function vs(e,n){var o=n.deletions;if(o!==null)for(var h=0;h<o.length;h++){var g=o[h];try{var v=e,S=n,u=S;e:for(;u!==null;){switch(u.tag){case 5:ar=u.stateNode,Ss=!1;break e;case 3:ar=u.stateNode.containerInfo,Ss=!0;break e;case 4:ar=u.stateNode.containerInfo,Ss=!0;break e}u=u.return}if(ar===null)throw Error(Ye(160));fw(v,S,g),ar=null,Ss=!1;var I=g.alternate;I!==null&&(I.return=null),g.return=null}catch(N){bi(g,n,N)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)mw(n,e),n=n.sibling}function mw(e,n){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(n,e),ea(e),h&4){try{Dh(3,e,e.return),hf(3,e)}catch(ge){bi(e,e.return,ge)}try{Dh(5,e,e.return)}catch(ge){bi(e,e.return,ge)}}break;case 1:vs(n,e),ea(e),h&512&&o!==null&&vc(o,o.return);break;case 5:if(vs(n,e),ea(e),h&512&&o!==null&&vc(o,o.return),e.flags&32){var g=e.stateNode;try{$h(g,"")}catch(ge){bi(e,e.return,ge)}}if(h&4&&(g=e.stateNode,g!=null)){var v=e.memoizedProps,S=o!==null?o.memoizedProps:v,u=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{u==="input"&&v.type==="radio"&&v.name!=null&&Ox(g,v),rg(u,S);var N=rg(u,v);for(S=0;S<I.length;S+=2){var j=I[S],q=I[S+1];j==="style"?Zx(g,q):j==="dangerouslySetInnerHTML"?Vx(g,q):j==="children"?$h(g,q):a_(g,j,q,N)}switch(u){case"input":Qm(g,v);break;case"textarea":Nx(g,v);break;case"select":var V=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?bc(g,!!v.multiple,he,!1):V!==!!v.multiple&&(v.defaultValue!=null?bc(g,!!v.multiple,v.defaultValue,!0):bc(g,!!v.multiple,v.multiple?[]:"",!1))}g[Yh]=v}catch(ge){bi(e,e.return,ge)}}break;case 6:if(vs(n,e),ea(e),h&4){if(e.stateNode===null)throw Error(Ye(162));N=e.stateNode,j=e.memoizedProps;try{N.nodeValue=j}catch(ge){bi(e,e.return,ge)}}break;case 3:if(vs(n,e),ea(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Wh(n.containerInfo)}catch(ge){bi(e,e.return,ge)}break;case 4:vs(n,e),ea(e);break;case 13:vs(n,e),ea(e),N=e.child,N.flags&8192&&N.memoizedState!==null&&(N.alternate===null||N.alternate.memoizedState===null)&&(N_=Pi()),h&4&&z0(e);break;case 22:if(N=o!==null&&o.memoizedState!==null,e.mode&1?(br=(j=br)||N,vs(n,e),br=j):vs(n,e),ea(e),h&8192){j=e.memoizedState!==null;e:for(q=null,V=e;;){if(V.tag===5){if(q===null){q=V;try{g=V.stateNode,j?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(u=V.stateNode,I=V.memoizedProps.style,S=I!=null&&I.hasOwnProperty("display")?I.display:null,u.style.display=$x("display",S))}catch(ge){bi(e,e.return,ge)}}}else if(V.tag===6){if(q===null)try{V.stateNode.nodeValue=j?"":V.memoizedProps}catch(ge){bi(e,e.return,ge)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;q===V&&(q=null),V=V.return}q===V&&(q=null),V.sibling.return=V.return,V=V.sibling}if(j&&!N&&(e.mode&1)!==0)for(yt=e,e=e.child;e!==null;){for(N=yt=e;yt!==null;){switch(j=yt,q=j.child,j.tag){case 0:case 11:case 14:case 15:Dh(4,j,j.return);break;case 1:if(vc(j,j.return),v=j.stateNode,typeof v.componentWillUnmount=="function"){V=j,he=j.return;try{g=V,v.props=g.memoizedProps,v.state=g.memoizedState,v.componentWillUnmount()}catch(ge){bi(V,he,ge)}}break;case 5:vc(j,j.return);break;case 22:if(j.memoizedState!==null){M0(N);continue}}q!==null?(q.return=j,yt=q):M0(N)}e=e.sibling}}break;case 19:vs(n,e),ea(e),h&4&&z0(e);break;case 21:break;default:vs(n,e),ea(e)}}function ea(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(pw(o)){var h=o;break e}o=o.return}throw Error(Ye(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&($h(g,""),h.flags&=-33);var v=I0(e);Lg(e,v,g);break;case 3:case 4:var S=h.stateNode.containerInfo,u=I0(e);Mg(e,u,S);break;default:throw Error(Ye(161))}}catch(I){bi(e,e.return,I)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function IT(e,n,o){yt=e,gw(e)}function gw(e,n,o){for(var h=(e.mode&1)!==0;yt!==null;){var g=yt,v=g.child;if(g.tag===22&&h){var S=g.memoizedState!==null||ep;if(!S){var u=g.alternate,I=u!==null&&u.memoizedState!==null||br;u=ep;var N=br;if(ep=S,(br=I)&&!N)for(yt=g;yt!==null;)S=yt,I=S.child,S.tag===22&&S.memoizedState!==null?L0(g):I!==null?(I.return=S,yt=I):L0(g);for(;v!==null;)yt=v,gw(v),v=v.sibling;yt=g,ep=u,br=N}A0(e)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,yt=v):A0(e)}}function A0(e){for(;yt!==null;){var n=yt;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:br||hf(5,n);break;case 1:var h=n.stateNode;if(n.flags&4&&!br)if(o===null)h.componentDidMount();else{var g=n.elementType===n.type?o.memoizedProps:bs(n.type,o.memoizedProps);h.componentDidUpdate(g,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&u0(n,v,h);break;case 3:var S=n.updateQueue;if(S!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}u0(n,S,o)}break;case 5:var u=n.stateNode;if(o===null&&n.flags&4){o=u;var I=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&o.focus();break;case"img":I.src&&(o.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var N=n.alternate;if(N!==null){var j=N.memoizedState;if(j!==null){var q=j.dehydrated;q!==null&&Wh(q)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ye(163))}br||n.flags&512&&Ag(n)}catch(V){bi(n,n.return,V)}}if(n===e){yt=null;break}if(o=n.sibling,o!==null){o.return=n.return,yt=o;break}yt=n.return}}function M0(e){for(;yt!==null;){var n=yt;if(n===e){yt=null;break}var o=n.sibling;if(o!==null){o.return=n.return,yt=o;break}yt=n.return}}function L0(e){for(;yt!==null;){var n=yt;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{hf(4,n)}catch(I){bi(n,o,I)}break;case 1:var h=n.stateNode;if(typeof h.componentDidMount=="function"){var g=n.return;try{h.componentDidMount()}catch(I){bi(n,g,I)}}var v=n.return;try{Ag(n)}catch(I){bi(n,v,I)}break;case 5:var S=n.return;try{Ag(n)}catch(I){bi(n,S,I)}}}catch(I){bi(n,n.return,I)}if(n===e){yt=null;break}var u=n.sibling;if(u!==null){u.return=n.return,yt=u;break}yt=n.return}}var zT=Math.ceil,jp=Ka.ReactCurrentDispatcher,F_=Ka.ReactCurrentOwner,Ko=Ka.ReactCurrentBatchConfig,Sn=0,Vi=null,Mi=null,lr=0,So=0,xc=Ol(0),Ui=0,id=null,Cu=0,df=0,O_=0,Rh=null,io=null,N_=0,Dc=1/0,Oa=null,Gp=!1,Dg=null,Al=null,tp=!1,Pl=null,Wp=0,Bh=0,Rg=null,xp=-1,wp=0;function jr(){return(Sn&6)!==0?Pi():xp!==-1?xp:xp=Pi()}function Ml(e){return(e.mode&1)===0?1:(Sn&2)!==0&&lr!==0?lr&-lr:fT.transition!==null?(wp===0&&(wp=t1()),wp):(e=Bn,e!==0||(e=window.event,e=e===void 0?16:l1(e.type)),e)}function Yo(e,n,o){if(50<Bh)throw Bh=0,Rg=null,Error(Ye(185));var h=pf(e,n);return h===null?null:(ad(h,n,o),((Sn&2)===0||h!==Vi)&&(h===Vi&&((Sn&2)===0&&(df|=n),Ui===4&&Sl(h,lr)),lo(h,o),n===1&&Sn===0&&(e.mode&1)===0&&(Dc=Pi()+500,lf&&Nl())),h)}function pf(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}function _w(e){return(Vi!==null||ks!==null)&&(e.mode&1)!==0&&(Sn&2)===0}function lo(e,n){var o=e.callbackNode;fE(e,n);var h=Ip(e,e===Vi?lr:0);if(h===0)o!==null&&Nv(o),e.callbackNode=null,e.callbackPriority=0;else if(n=h&-h,e.callbackPriority!==n){if(o!=null&&Nv(o),n===1)e.tag===0?pT(D0.bind(null,e)):k1(D0.bind(null,e)),uT(function(){Sn===0&&Nl()}),o=null;else{switch(n1(h)){case 1:o=d_;break;case 4:o=Qx;break;case 16:o=Cp;break;case 536870912:o=e1;break;default:o=Cp}o=Tw(o,yw.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function yw(e,n){if(xp=-1,wp=0,(Sn&6)!==0)throw Error(Ye(327));var o=e.callbackNode;if(kc()&&e.callbackNode!==o)return null;var h=Ip(e,e===Vi?lr:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||n)n=qp(e,h);else{n=h;var g=Sn;Sn|=2;var v=xw();(Vi!==e||lr!==n)&&(Oa=null,Dc=Pi()+500,wu(e,n));do try{LT();break}catch(u){vw(e,u)}while(1);b_(),jp.current=v,Sn=g,Mi!==null?n=0:(Vi=null,lr=0,n=Ui)}if(n!==0){if(n===2&&(g=ug(e),g!==0&&(h=g,n=Bg(e,g))),n===1)throw o=id,wu(e,0),Sl(e,h),lo(e,Pi()),o;if(n===6)Sl(e,h);else{if(g=e.current.alternate,(h&30)===0&&!AT(g)&&(n=qp(e,h),n===2&&(v=ug(e),v!==0&&(h=v,n=Bg(e,v))),n===1))throw o=id,wu(e,0),Sl(e,h),lo(e,Pi()),o;switch(e.finishedWork=g,e.finishedLanes=h,n){case 0:case 1:throw Error(Ye(345));case 2:fu(e,io,Oa);break;case 3:if(Sl(e,h),(h&130023424)===h&&(n=N_+500-Pi(),10<n)){if(Ip(e,0)!==0)break;if(g=e.suspendedLanes,(g&h)!==h){jr(),e.pingedLanes|=e.suspendedLanes&g;break}e.timeoutHandle=_g(fu.bind(null,e,io,Oa),n);break}fu(e,io,Oa);break;case 4:if(Sl(e,h),(h&4194240)===h)break;for(n=e.eventTimes,g=-1;0<h;){var S=31-Cs(h);v=1<<S,S=n[S],S>g&&(g=S),h&=~v}if(h=g,h=Pi()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zT(h/1960))-h,10<h){e.timeoutHandle=_g(fu.bind(null,e,io,Oa),h);break}fu(e,io,Oa);break;case 5:fu(e,io,Oa);break;default:throw Error(Ye(329))}}}return lo(e,Pi()),e.callbackNode===o?yw.bind(null,e):null}function Bg(e,n){var o=Rh;return e.current.memoizedState.isDehydrated&&(wu(e,n).flags|=256),e=qp(e,n),e!==2&&(n=io,io=o,n!==null&&Fg(n)),e}function Fg(e){io===null?io=e:io.push.apply(io,e)}function AT(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var g=o[h],v=g.getSnapshot;g=g.value;try{if(!Is(v(),g))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sl(e,n){for(n&=~O_,n&=~df,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-Cs(n),h=1<<o;e[o]=-1,n&=~h}}function D0(e){if((Sn&6)!==0)throw Error(Ye(327));kc();var n=Ip(e,0);if((n&1)===0)return lo(e,Pi()),null;var o=qp(e,n);if(e.tag!==0&&o===2){var h=ug(e);h!==0&&(n=h,o=Bg(e,h))}if(o===1)throw o=id,wu(e,0),Sl(e,n),lo(e,Pi()),o;if(o===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,fu(e,io,Oa),lo(e,Pi()),null}function U_(e,n){var o=Sn;Sn|=1;try{return e(n)}finally{Sn=o,Sn===0&&(Dc=Pi()+500,lf&&Nl())}}function Iu(e){Pl!==null&&Pl.tag===0&&(Sn&6)===0&&kc();var n=Sn;Sn|=1;var o=Ko.transition,h=Bn;try{if(Ko.transition=null,Bn=1,e)return e()}finally{Bn=h,Ko.transition=o,Sn=n,(Sn&6)===0&&Nl()}}function V_(){So=xc.current,ni(xc)}function wu(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,lT(o)),Mi!==null)for(o=Mi.return;o!==null;){var h=o;switch(P_(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Dp();break;case 3:Lc(),ni(so),ni(Er),z_();break;case 5:I_(h);break;case 4:Lc();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:S_(h.type._context);break;case 22:case 23:V_()}o=o.return}if(Vi=e,Mi=e=Rl(e.current,null),lr=So=n,Ui=0,id=null,O_=df=Cu=0,io=Rh=null,ks!==null){for(n=0;n<ks.length;n++)if(o=ks[n],h=o.interleaved,h!==null){o.interleaved=null;var g=h.next,v=o.pending;if(v!==null){var S=v.next;v.next=g,h.next=S}o.pending=h}ks=null}return e}function vw(e,n){do{var o=Mi;try{if(b_(),yp.current=Zp,$p){for(var h=mi.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}$p=!1}if(ku=0,Yi=Ni=mi=null,Lh=!1,ed=0,F_.current=null,o===null||o.return===null){Ui=1,id=n,Mi=null;break}e:{var v=e,S=o.return,u=o,I=n;if(n=lr,u.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var N=I,j=u,q=j.tag;if((j.mode&1)===0&&(q===0||q===11||q===15)){var V=j.alternate;V?(j.updateQueue=V.updateQueue,j.memoizedState=V.memoizedState,j.lanes=V.lanes):(j.updateQueue=null,j.memoizedState=null)}var he=y0(S);if(he!==null){he.flags&=-257,v0(he,S,u,v,n),he.mode&1&&_0(v,N,n),n=he,I=N;var ge=n.updateQueue;if(ge===null){var pe=new Set;pe.add(I),n.updateQueue=pe}else ge.add(I);break e}else{if((n&1)===0){_0(v,N,n),$_();break e}I=Error(Ye(426))}}else if(li&&u.mode&1){var Ee=y0(S);if(Ee!==null){(Ee.flags&65536)===0&&(Ee.flags|=256),v0(Ee,S,u,v,n),k_(I);break e}}v=I,Ui!==4&&(Ui=2),Rh===null?Rh=[v]:Rh.push(v),I=B_(I,u),u=S;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var ne=tw(u,I,n);l0(u,ne);break e;case 1:v=I;var Q=u.type,te=u.stateNode;if((u.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Al===null||!Al.has(te)))){u.flags|=65536,n&=-n,u.lanes|=n;var Te=nw(u,v,n);l0(u,Te);break e}}u=u.return}while(u!==null)}bw(o)}catch(Ae){n=Ae,Mi===o&&o!==null&&(Mi=o=o.return);continue}break}while(1)}function xw(){var e=jp.current;return jp.current=Zp,e===null?Zp:e}function $_(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),Vi===null||(Cu&268435455)===0&&(df&268435455)===0||Sl(Vi,lr)}function qp(e,n){var o=Sn;Sn|=2;var h=xw();(Vi!==e||lr!==n)&&(Oa=null,wu(e,n));do try{MT();break}catch(g){vw(e,g)}while(1);if(b_(),Sn=o,jp.current=h,Mi!==null)throw Error(Ye(261));return Vi=null,lr=0,Ui}function MT(){for(;Mi!==null;)ww(Mi)}function LT(){for(;Mi!==null&&!oE();)ww(Mi)}function ww(e){var n=Ew(e.alternate,e,So);e.memoizedProps=e.pendingProps,n===null?bw(e):Mi=n,F_.current=null}function bw(e){var n=e;do{var o=n.alternate;if(e=n.return,(n.flags&32768)===0){if(o=ST(o,n,So),o!==null){Mi=o;return}}else{if(o=PT(o,n),o!==null){o.flags&=32767,Mi=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ui=6,Mi=null;return}}if(n=n.sibling,n!==null){Mi=n;return}Mi=n=e}while(n!==null);Ui===0&&(Ui=5)}function fu(e,n,o){var h=Bn,g=Ko.transition;try{Ko.transition=null,Bn=1,DT(e,n,o,h)}finally{Ko.transition=g,Bn=h}return null}function DT(e,n,o,h){do kc();while(Pl!==null);if((Sn&6)!==0)throw Error(Ye(327));o=e.finishedWork;var g=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var v=o.lanes|o.childLanes;if(mE(e,v),e===Vi&&(Mi=Vi=null,lr=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||tp||(tp=!0,Tw(Cp,function(){return kc(),null})),v=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||v){v=Ko.transition,Ko.transition=null;var S=Bn;Bn=1;var u=Sn;Sn|=4,F_.current=null,CT(e,o),mw(o,e),tT(mg),zp=!!fg,mg=fg=null,e.current=o,IT(o),sE(),Sn=u,Bn=S,Ko.transition=v}else e.current=o;if(tp&&(tp=!1,Pl=e,Wp=g),v=e.pendingLanes,v===0&&(Al=null),uE(o.stateNode),lo(e,Pi()),n!==null)for(h=e.onRecoverableError,o=0;o<n.length;o++)h(n[o]);if(Gp)throw Gp=!1,e=Dg,Dg=null,e;return(Wp&1)!==0&&e.tag!==0&&kc(),v=e.pendingLanes,(v&1)!==0?e===Rg?Bh++:(Bh=0,Rg=e):Bh=0,Nl(),null}function kc(){if(Pl!==null){var e=n1(Wp),n=Ko.transition,o=Bn;try{if(Ko.transition=null,Bn=16>e?16:e,Pl===null)var h=!1;else{if(e=Pl,Pl=null,Wp=0,(Sn&6)!==0)throw Error(Ye(331));var g=Sn;for(Sn|=4,yt=e.current;yt!==null;){var v=yt,S=v.child;if((yt.flags&16)!==0){var u=v.deletions;if(u!==null){for(var I=0;I<u.length;I++){var N=u[I];for(yt=N;yt!==null;){var j=yt;switch(j.tag){case 0:case 11:case 15:Dh(8,j,v)}var q=j.child;if(q!==null)q.return=j,yt=q;else for(;yt!==null;){j=yt;var V=j.sibling,he=j.return;if(dw(j),j===N){yt=null;break}if(V!==null){V.return=he,yt=V;break}yt=he}}}var ge=v.alternate;if(ge!==null){var pe=ge.child;if(pe!==null){ge.child=null;do{var Ee=pe.sibling;pe.sibling=null,pe=Ee}while(pe!==null)}}yt=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,yt=S;else e:for(;yt!==null;){if(v=yt,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Dh(9,v,v.return)}var ne=v.sibling;if(ne!==null){ne.return=v.return,yt=ne;break e}yt=v.return}}var Q=e.current;for(yt=Q;yt!==null;){S=yt;var te=S.child;if((S.subtreeFlags&2064)!==0&&te!==null)te.return=S,yt=te;else e:for(S=Q;yt!==null;){if(u=yt,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:hf(9,u)}}catch(Ae){bi(u,u.return,Ae)}if(u===S){yt=null;break e}var Te=u.sibling;if(Te!==null){Te.return=u.return,yt=Te;break e}yt=u.return}}if(Sn=g,Nl(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(nf,e)}catch{}h=!0}return h}finally{Bn=o,Ko.transition=n}}return!1}function R0(e,n,o){n=B_(o,n),n=tw(e,n,1),zl(e,n),n=jr(),e=pf(e,1),e!==null&&(ad(e,1,n),lo(e,n))}function bi(e,n,o){if(e.tag===3)R0(e,e,o);else for(;n!==null;){if(n.tag===3){R0(n,e,o);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Al===null||!Al.has(h))){e=B_(o,e),e=nw(n,e,1),zl(n,e),e=jr(),n=pf(n,1),n!==null&&(ad(n,1,e),lo(n,e));break}}n=n.return}}function RT(e,n,o){var h=e.pingCache;h!==null&&h.delete(n),n=jr(),e.pingedLanes|=e.suspendedLanes&o,Vi===e&&(lr&o)===o&&(Ui===4||Ui===3&&(lr&130023424)===lr&&500>Pi()-N_?wu(e,0):O_|=o),lo(e,n)}function Sw(e,n){n===0&&((e.mode&1)===0?n=1:(n=jd,jd<<=1,(jd&130023424)===0&&(jd=4194304)));var o=jr();e=pf(e,n),e!==null&&(ad(e,n,o),lo(e,o))}function BT(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Sw(e,o)}function FT(e,n){var o=0;switch(e.tag){case 13:var h=e.stateNode,g=e.memoizedState;g!==null&&(o=g.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(Ye(314))}h!==null&&h.delete(n),Sw(e,o)}var Ew;Ew=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||so.current)oo=!0;else{if((e.lanes&o)===0&&(n.flags&128)===0)return oo=!1,TT(e,n,o);oo=(e.flags&131072)!==0}else oo=!1,li&&(n.flags&1048576)!==0&&A1(n,Up,n.index);switch(n.lanes=0,n.tag){case 2:var h=n.type;e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps;var g=zc(n,Er.current);Pc(n,o),g=M_(null,n,h,e,g,o);var v=L_();return n.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ao(h)?(v=!0,Rp(n)):v=!1,n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,E_(n),g.updater=uf,n.stateNode=g,g._reactInternals=n,bg(n,h,e,o),n=Cg(null,n,h,!0,v,o)):(n.tag=0,li&&v&&T_(n),Zr(null,n,g,o),n=n.child),n;case 16:h=n.elementType;e:{switch(e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,g=h._init,h=g(h._payload),n.type=h,g=n.tag=NT(h),e=bs(h,e),g){case 0:n=kg(null,n,h,e,o);break e;case 1:n=b0(null,n,h,e,o);break e;case 11:n=x0(null,n,h,e,o);break e;case 14:n=w0(null,n,h,bs(h.type,e),o);break e}throw Error(Ye(306,h,""))}return n;case 0:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:bs(h,g),kg(e,n,h,g,o);case 1:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:bs(h,g),b0(e,n,h,g,o);case 3:e:{if(uw(n),e===null)throw Error(Ye(387));h=n.pendingProps,v=n.memoizedState,g=v.element,C1(e,n),Op(n,h,null,o);var S=n.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){g=Error(Ye(423)),n=S0(e,n,h,o,g);break e}else if(h!==g){g=Error(Ye(424)),n=S0(e,n,h,o,g);break e}else for(ro=Va(n.stateNode.containerInfo.firstChild),Po=n,li=!0,Ps=null,o=D1(n,null,h,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ac(),h===g){n=Ha(e,n,o);break e}Zr(e,n,h,o)}n=n.child}return n;case 5:return R1(n),e===null&&Eg(n),h=n.type,g=n.pendingProps,v=e!==null?e.memoizedProps:null,S=g.children,gg(h,g)?S=null:v!==null&&gg(h,v)&&(n.flags|=32),lw(e,n),Zr(e,n,S,o),n.child;case 6:return e===null&&Eg(n),null;case 13:return cw(e,n,o);case 4:return C_(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Mc(n,null,h,o):Zr(e,n,h,o),n.child;case 11:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:bs(h,g),x0(e,n,h,g,o);case 7:return Zr(e,n,n.pendingProps,o),n.child;case 8:return Zr(e,n,n.pendingProps.children,o),n.child;case 12:return Zr(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(h=n.type._context,g=n.pendingProps,v=n.memoizedProps,S=g.value,Xn(Bp,h._currentValue),h._currentValue=S,v!==null)if(Is(v.value,S)){if(v.children===g.children&&!so.current){n=Ha(e,n,o);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var u=v.dependencies;if(u!==null){S=v.child;for(var I=u.firstContext;I!==null;){if(I.context===h){if(v.tag===1){I=ja(-1,o&-o),I.tag=2;var N=v.updateQueue;if(N!==null){N=N.shared;var j=N.pending;j===null?I.next=I:(I.next=j.next,j.next=I),N.pending=I}}v.lanes|=o,I=v.alternate,I!==null&&(I.lanes|=o),xg(v.return,o,n),u.lanes|=o;break}I=I.next}}else if(v.tag===10)S=v.type===n.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(Ye(341));S.lanes|=o,u=S.alternate,u!==null&&(u.lanes|=o),xg(S,o,n),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===n){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Zr(e,n,g.children,o),n=n.child}return n;case 9:return g=n.type,h=n.pendingProps.children,Pc(n,o),g=Jo(g),h=h(g),n.flags|=1,Zr(e,n,h,o),n.child;case 14:return h=n.type,g=bs(h,n.pendingProps),g=bs(h.type,g),w0(e,n,h,g,o);case 15:return sw(e,n,n.type,n.pendingProps,o);case 17:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:bs(h,g),e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,ao(h)?(e=!0,Rp(n)):e=!1,Pc(n,o),z1(n,h,g),bg(n,h,g,o),Cg(null,n,h,!0,e,o);case 19:return hw(e,n,o);case 22:return aw(e,n,o)}throw Error(Ye(156,n.tag))};function Tw(e,n){return Jx(e,n)}function OT(e,n,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,n,o,h){return new OT(e,n,o,h)}function Z_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NT(e){if(typeof e=="function")return Z_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===u_)return 11;if(e===c_)return 14}return 2}function Rl(e,n){var o=e.alternate;return o===null?(o=Xo(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function bp(e,n,o,h,g,v){var S=2;if(h=e,typeof e=="function")Z_(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case cc:return bu(o.children,g,v,n);case l_:S=8,g|=8;break;case Hm:return e=Xo(12,o,n,g|2),e.elementType=Hm,e.lanes=v,e;case Xm:return e=Xo(13,o,n,g),e.elementType=Xm,e.lanes=v,e;case Km:return e=Xo(19,o,n,g),e.elementType=Km,e.lanes=v,e;case Rx:return Hp(o,g,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lx:S=10;break e;case Dx:S=9;break e;case u_:S=11;break e;case c_:S=14;break e;case xl:S=16,h=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return n=Xo(S,o,n,g),n.elementType=e,n.type=h,n.lanes=v,n}function bu(e,n,o,h){return e=Xo(7,e,h,n),e.lanes=o,e}function Hp(e,n,o,h){return e=Xo(22,e,h,n),e.elementType=Rx,e.lanes=o,e.stateNode={},e}function Am(e,n,o){return e=Xo(6,e,null,n),e.lanes=o,e}function Mm(e,n,o){return n=Xo(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function UT(e,n,o,h,g){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function j_(e,n,o,h,g,v,S,u,I){return e=new UT(e,n,o,u,I),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Xo(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},E_(v),e}function VT(e,n,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uc,key:h==null?null:""+h,children:e,containerInfo:n,implementation:o}}function Pw(e){if(!e)return Dl;e=e._reactInternals;e:{if(Au(e)!==e||e.tag!==1)throw Error(Ye(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ao(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Ye(171))}if(e.tag===1){var o=e.type;if(ao(o))return P1(e,o,n)}return n}function kw(e,n,o,h,g,v,S,u,I){return e=j_(o,h,!0,e,g,v,S,u,I),e.context=Pw(null),o=e.current,h=jr(),g=Ml(o),v=ja(h,g),v.callback=n!=null?n:null,zl(o,v),e.current.lanes=g,ad(e,g,h),lo(e,h),e}function ff(e,n,o,h){var g=n.current,v=jr(),S=Ml(g);return o=Pw(o),n.context===null?n.context=o:n.pendingContext=o,n=ja(v,S),n.payload={element:e},h=h===void 0?null:h,h!==null&&(n.callback=h),zl(g,n),e=Yo(g,S,v),e!==null&&_p(e,g,S),S}function Xp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function B0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function G_(e,n){B0(e,n),(e=e.alternate)&&B0(e,n)}function $T(){return null}var Cw=typeof reportError=="function"?reportError:function(e){console.error(e)};function W_(e){this._internalRoot=e}mf.prototype.render=W_.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Ye(409));ff(e,n,null,null)};mf.prototype.unmount=W_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Iu(function(){ff(null,e,null,null)}),n[qa]=null}};function mf(e){this._internalRoot=e}mf.prototype.unstable_scheduleHydration=function(e){if(e){var n=o1();e={blockedOn:null,target:e,priority:n};for(var o=0;o<bl.length&&n!==0&&n<bl[o].priority;o++);bl.splice(o,0,e),o===0&&a1(e)}};function q_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function F0(){}function ZT(e,n,o,h,g){if(g){if(typeof h=="function"){var v=h;h=function(){var N=Xp(S);v.call(N)}}var S=kw(n,h,e,0,null,!1,!1,"",F0);return e._reactRootContainer=S,e[qa]=S.current,Xh(e.nodeType===8?e.parentNode:e),Iu(),S}for(;g=e.lastChild;)e.removeChild(g);if(typeof h=="function"){var u=h;h=function(){var N=Xp(I);u.call(N)}}var I=j_(e,0,!1,null,null,!1,!1,"",F0);return e._reactRootContainer=I,e[qa]=I.current,Xh(e.nodeType===8?e.parentNode:e),Iu(function(){ff(n,I,o,h)}),I}function _f(e,n,o,h,g){var v=o._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var u=g;g=function(){var I=Xp(S);u.call(I)}}ff(n,S,e,g)}else S=ZT(o,n,e,g,h);return Xp(S)}i1=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Th(n.pendingLanes);o!==0&&(p_(n,o|1),lo(n,Pi()),(Sn&6)===0&&(Dc=Pi()+500,Nl()))}break;case 13:var h=jr();Iu(function(){return Yo(e,1,h)}),G_(e,1)}};f_=function(e){if(e.tag===13){var n=jr();Yo(e,134217728,n),G_(e,134217728)}};r1=function(e){if(e.tag===13){var n=jr(),o=Ml(e);Yo(e,o,n),G_(e,o)}};o1=function(){return Bn};s1=function(e,n){var o=Bn;try{return Bn=e,n()}finally{Bn=o}};sg=function(e,n,o){switch(n){case"input":if(Qm(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var h=o[n];if(h!==e&&h.form===e.form){var g=af(h);if(!g)throw Error(Ye(90));Fx(h),Qm(h,g)}}}break;case"textarea":Nx(e,o);break;case"select":n=o.value,n!=null&&bc(e,!!o.multiple,n,!1)}};Wx=U_;qx=Iu;var jT={usingClientEntryPoint:!1,Events:[ud,fc,af,jx,Gx,U_]},xh={findFiberByHostInstance:_u,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},GT={bundleType:xh.bundleType,version:xh.version,rendererPackageName:xh.rendererPackageName,rendererConfig:xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kx(e),e===null?null:e.stateNode},findFiberByHostInstance:xh.findFiberByHostInstance||$T,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!np.isDisabled&&np.supportsFiber)try{nf=np.inject(GT),ra=np}catch{}}Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;Co.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q_(n))throw Error(Ye(200));return VT(e,n,null,o)};Co.createRoot=function(e,n){if(!q_(e))throw Error(Ye(299));var o=!1,h="",g=Cw;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=j_(e,1,!1,null,null,o,!1,h,g),e[qa]=n.current,Xh(e.nodeType===8?e.parentNode:e),new W_(n)};Co.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=Kx(n),e=e===null?null:e.stateNode,e};Co.flushSync=function(e){return Iu(e)};Co.hydrate=function(e,n,o){if(!gf(n))throw Error(Ye(200));return _f(null,e,n,!0,o)};Co.hydrateRoot=function(e,n,o){if(!q_(e))throw Error(Ye(405));var h=o!=null&&o.hydratedSources||null,g=!1,v="",S=Cw;if(o!=null&&(o.unstable_strictMode===!0&&(g=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),n=kw(n,null,e,1,o!=null?o:null,g,!1,v,S),e[qa]=n.current,Xh(e),h)for(e=0;e<h.length;e++)o=h[e],g=o._getVersion,g=g(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,g]:n.mutableSourceEagerHydrationData.push(o,g);return new mf(n)};Co.render=function(e,n,o){if(!gf(n))throw Error(Ye(200));return _f(null,e,n,!1,o)};Co.unmountComponentAtNode=function(e){if(!gf(e))throw Error(Ye(40));return e._reactRootContainer?(Iu(function(){_f(null,null,e,!1,function(){e._reactRootContainer=null,e[qa]=null})}),!0):!1};Co.unstable_batchedUpdates=U_;Co.unstable_renderSubtreeIntoContainer=function(e,n,o,h){if(!gf(o))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return _f(e,n,o,!1,h)};Co.version="18.1.0-next-22edb9f77-20220426";function Iw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iw)}catch(e){console.error(e)}}Iw(),r_.exports=Co;var WT=r_.exports,O0=r_.exports;Wm.createRoot=O0.createRoot,Wm.hydrateRoot=O0.hydrateRoot;var On="colors",$r="sizes",xt="space",qT={gap:xt,gridGap:xt,columnGap:xt,gridColumnGap:xt,rowGap:xt,gridRowGap:xt,inset:xt,insetBlock:xt,insetBlockEnd:xt,insetBlockStart:xt,insetInline:xt,insetInlineEnd:xt,insetInlineStart:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,marginBlock:xt,marginBlockEnd:xt,marginBlockStart:xt,marginInline:xt,marginInlineEnd:xt,marginInlineStart:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,paddingBlock:xt,paddingBlockEnd:xt,paddingBlockStart:xt,paddingInline:xt,paddingInlineEnd:xt,paddingInlineStart:xt,top:xt,right:xt,bottom:xt,left:xt,scrollMargin:xt,scrollMarginTop:xt,scrollMarginRight:xt,scrollMarginBottom:xt,scrollMarginLeft:xt,scrollMarginX:xt,scrollMarginY:xt,scrollMarginBlock:xt,scrollMarginBlockEnd:xt,scrollMarginBlockStart:xt,scrollMarginInline:xt,scrollMarginInlineEnd:xt,scrollMarginInlineStart:xt,scrollPadding:xt,scrollPaddingTop:xt,scrollPaddingRight:xt,scrollPaddingBottom:xt,scrollPaddingLeft:xt,scrollPaddingX:xt,scrollPaddingY:xt,scrollPaddingBlock:xt,scrollPaddingBlockEnd:xt,scrollPaddingBlockStart:xt,scrollPaddingInline:xt,scrollPaddingInlineEnd:xt,scrollPaddingInlineStart:xt,fontSize:"fontSizes",background:On,backgroundColor:On,backgroundImage:On,borderImage:On,border:On,borderBlock:On,borderBlockEnd:On,borderBlockStart:On,borderBottom:On,borderBottomColor:On,borderColor:On,borderInline:On,borderInlineEnd:On,borderInlineStart:On,borderLeft:On,borderLeftColor:On,borderRight:On,borderRightColor:On,borderTop:On,borderTopColor:On,caretColor:On,color:On,columnRuleColor:On,fill:On,outline:On,outlineColor:On,stroke:On,textDecorationColor:On,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:$r,minBlockSize:$r,maxBlockSize:$r,inlineSize:$r,minInlineSize:$r,maxInlineSize:$r,width:$r,minWidth:$r,maxWidth:$r,height:$r,minHeight:$r,maxHeight:$r,flexBasis:$r,gridTemplateColumns:$r,gridTemplateRows:$r,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},HT=(e,n)=>typeof n=="function"?{"()":Function.prototype.toString.call(n)}:n,Nc=()=>{const e=Object.create(null);return(n,o,...h)=>{const g=(v=>JSON.stringify(v,HT))(n);return g in e?e[g]:e[g]=o(n,...h)}},Su=Symbol.for("sxs.internal"),H_=(e,n)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)),N0=e=>{for(const n in e)return!0;return!1},{hasOwnProperty:XT}=Object.prototype,Og=e=>e.includes("-")?e:e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),KT=/\s+(?![^()]*\))/,ic=e=>n=>e(...typeof n=="string"?String(n).split(KT):[n]),U0={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:ic((e,n)=>({marginBlockStart:e,marginBlockEnd:n||e})),marginInline:ic((e,n)=>({marginInlineStart:e,marginInlineEnd:n||e})),maxSize:ic((e,n)=>({maxBlockSize:e,maxInlineSize:n||e})),minSize:ic((e,n)=>({minBlockSize:e,minInlineSize:n||e})),paddingBlock:ic((e,n)=>({paddingBlockStart:e,paddingBlockEnd:n||e})),paddingInline:ic((e,n)=>({paddingInlineStart:e,paddingInlineEnd:n||e}))},Lm=/([\d.]+)([^]*)/,YT=(e,n)=>e.length?e.reduce((o,h)=>(o.push(...n.map(g=>g.includes("&")?g.replace(/&/g,/[ +>|~]/.test(h)&&/&.*&/.test(g)?`:is(${h})`:h):h+" "+g)),o),[]):n,JT=(e,n)=>e in QT&&typeof n=="string"?n.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(o,h,g,v)=>h+(g==="stretch"?`-moz-available${v};${Og(e)}:${h}-webkit-fill-available`:`-moz-fit-content${v};${Og(e)}:${h}fit-content`)+v):String(n),QT={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Xa=e=>e?e+"-":"",zw=(e,n,o)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(h,g,v,S,u)=>S=="$"==!!v?h:(g||S=="--"?"calc(":"")+"var(--"+(S==="$"?Xa(n)+(u.includes("$")?"":Xa(o))+u.replace(/\$/g,"-"):u)+")"+(g||S=="--"?"*"+(g||"")+(v||"1")+")":"")),eP=/\s*,\s*(?![^()]*\))/,tP=Object.prototype.toString,wc=(e,n,o,h,g)=>{let v,S,u;const I=(N,j,q)=>{let V,he;const ge=pe=>{for(V in pe){const Q=V.charCodeAt(0)===64,te=Q&&Array.isArray(pe[V])?pe[V]:[pe[V]];for(he of te){const Te=/[A-Z]/.test(ne=V)?ne:ne.replace(/-[^]/g,$e=>$e[1].toUpperCase()),Ae=typeof he=="object"&&he&&he.toString===tP&&(!h.utils[Te]||!j.length);if(Te in h.utils&&!Ae){const $e=h.utils[Te];if($e!==S){S=$e,ge($e(he)),S=null;continue}}else if(Te in U0){const $e=U0[Te];if($e!==u){u=$e,ge($e(he)),u=null;continue}}if(Q&&(Ee=V.slice(1)in h.media?"@media "+h.media[V.slice(1)]:V,V=Ee.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,($e,Ne,Be,lt,dt,Pt)=>{const Lt=Lm.test(Ne),on=.0625*(Lt?-1:1),[At,cn]=Lt?[lt,Ne]:[Ne,lt];return"("+(Be[0]==="="?"":Be[0]===">"===Lt?"max-":"min-")+At+":"+(Be[0]!=="="&&Be.length===1?cn.replace(Lm,(Ke,En,Fe)=>Number(En)+on*(Be===">"?1:-1)+Fe):cn)+(dt?") and ("+(dt[0]===">"?"min-":"max-")+At+":"+(dt.length===1?Pt.replace(Lm,(Ke,En,Fe)=>Number(En)+on*(dt===">"?-1:1)+Fe):Pt):"")+")"})),Ae){const $e=Q?q.concat(V):[...q],Ne=Q?[...j]:YT(j,V.split(eP));v!==void 0&&g(V0(...v)),v=void 0,I(he,Ne,$e)}else v===void 0&&(v=[[],j,q]),V=Q||V.charCodeAt(0)!==36?V:`--${Xa(h.prefix)}${V.slice(1).replace(/\$/g,"-")}`,he=Ae?he:typeof he=="number"?he&&Te in nP?String(he)+"px":String(he):zw(JT(Te,he==null?"":he),h.prefix,h.themeMap[Te]),v[0].push(`${Q?`${V} `:`${Og(V)}:`}${he}`)}}var Ee,ne};ge(N),v!==void 0&&g(V0(...v)),v=void 0};I(e,n,o)},V0=(e,n,o)=>`${o.map(h=>`${h}{`).join("")}${n.length?`${n.join(",")}{`:""}${e.join(";")}${n.length?"}":""}${Array(o.length?o.length+1:0).join("}")}`,nP={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},$0=e=>String.fromCharCode(e+(e>25?39:97)),Eu=e=>(n=>{let o,h="";for(o=Math.abs(n);o>52;o=o/52|0)h=$0(o%52)+h;return $0(o%52)+h})(((n,o)=>{let h=o.length;for(;h;)n=33*n^o.charCodeAt(--h);return n})(5381,JSON.stringify(e))>>>0),kh=["themed","global","styled","onevar","resonevar","allvar","inline"],iP=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},rP=e=>{let n;const o=()=>{const{cssRules:g}=n.sheet;return[].map.call(g,(v,S)=>{const{cssText:u}=v;let I="";if(u.startsWith("--sxs"))return"";if(g[S-1]&&(I=g[S-1].cssText).startsWith("--sxs")){if(!v.cssRules.length)return"";for(const N in n.rules)if(n.rules[N].group===v)return`--sxs{--sxs:${[...n.rules[N].cache].join(" ")}}${u}`;return v.cssRules.length?`${I}${u}`:""}return u}).join("")},h=()=>{if(n){const{rules:u,sheet:I}=n;if(!I.deleteRule){for(;Object(Object(I.cssRules)[0]).type===3;)I.cssRules.splice(0,1);I.cssRules=[]}for(const N in u)delete u[N]}const g=Object(e).styleSheets||[];for(const u of g)if(iP(u)){for(let I=0,N=u.cssRules;N[I];++I){const j=Object(N[I]);if(j.type!==1)continue;const q=Object(N[I+1]);if(q.type!==4)continue;++I;const{cssText:V}=j;if(!V.startsWith("--sxs"))continue;const he=V.slice(14,-3).trim().split(/\s+/),ge=kh[he[0]];ge&&(n||(n={sheet:u,reset:h,rules:{},toString:o}),n.rules[ge]={group:q,index:I,cache:new Set(he)})}if(n)break}if(!n){const u=(I,N)=>({type:N,cssRules:[],insertRule(j,q){this.cssRules.splice(q,0,u(j,{import:3,undefined:1}[(j.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return I==="@media{}"?`@media{${[].map.call(this.cssRules,j=>j.cssText).join("")}}`:I}});n={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:h,toString:o}}const{sheet:v,rules:S}=n;for(let u=kh.length-1;u>=0;--u){const I=kh[u];if(!S[I]){const N=kh[u+1],j=S[N]?S[N].index:v.cssRules.length;v.insertRule("@media{}",j),v.insertRule(`--sxs{--sxs:${u}}`,j),S[I]={group:v.cssRules[j+1],index:j,cache:new Set([u])}}oP(S[I])}};return h(),n},oP=e=>{const n=e.group;let o=n.cssRules.length;e.apply=h=>{try{n.insertRule(h,o),++o}catch{}}},wh=Symbol(),sP=Nc(),Z0=(e,n)=>sP(e,()=>(...o)=>{let h={type:null,composers:new Set};for(const g of o)if(g!=null)if(g[Su]){h.type==null&&(h.type=g[Su].type);for(const v of g[Su].composers)h.composers.add(v)}else g.constructor!==Object||g.$$typeof?h.type==null&&(h.type=g):h.composers.add(aP(g,e));return h.type==null&&(h.type="span"),h.composers.size||h.composers.add(["PJLV",{},[],[],{},[]]),lP(e,h,n)}),aP=(v,g)=>{var S=v,{variants:e,compoundVariants:n,defaultVariants:o}=S,h=_n(S,["variants","compoundVariants","defaultVariants"]);const u=`${Xa(g.prefix)}c-${Eu(h)}`,I=[],N=[],j=Object.create(null),q=[];for(const pe in o)j[pe]=String(o[pe]);if(typeof e=="object"&&e)for(const pe in e){V=j,he=pe,XT.call(V,he)||(j[pe]="undefined");const Ee=e[pe];for(const ne in Ee){const Q={[pe]:String(ne)};String(ne)==="undefined"&&q.push(pe);const te=Ee[ne],Te=[Q,te,!N0(te)];I.push(Te)}}var V,he;if(typeof n=="object"&&n)for(const pe of n){let ge=pe,{css:Ee}=ge,ne=_n(ge,["css"]);Ee=typeof Ee=="object"&&Ee||{};for(const te in ne)ne[te]=String(ne[te]);const Q=[ne,Ee,!N0(Ee)];N.push(Q)}return[u,h,I,N,j,q]},lP=(e,n,o)=>{const[h,g,v,S]=uP(n.composers),u=typeof n.type=="function"||n.type.$$typeof?(q=>{function V(){for(let he=0;he<V[wh].length;he++){const[ge,pe]=V[wh][he];q.rules[ge].apply(pe)}return V[wh]=[],null}return V[wh]=[],V.rules={},kh.forEach(he=>V.rules[he]={apply:ge=>V[wh].push([he,ge])}),V})(o):null,I=(u||o).rules,N=`.${h}${g.length>1?`:where(.${g.slice(1).join(".")})`:""}`,j=q=>{q=typeof q=="object"&&q||cP;const ne=q,{css:V}=ne,he=_n(ne,["css"]),ge={};for(const Q in v)if(delete he[Q],Q in q){let te=q[Q];typeof te=="object"&&te?ge[Q]=ai({"@initial":v[Q]},te):(te=String(te),ge[Q]=te!=="undefined"||S.has(Q)?te:v[Q])}else ge[Q]=v[Q];const pe=new Set([...g]);for(const[Q,te,Te,Ae]of n.composers){o.rules.styled.cache.has(Q)||(o.rules.styled.cache.add(Q),wc(te,[`.${Q}`],[],e,Be=>{I.styled.apply(Be)}));const $e=j0(Te,ge,e.media),Ne=j0(Ae,ge,e.media,!0);for(const Be of $e)if(Be!==void 0)for(const[lt,dt,Pt]of Be){const Lt=`${Q}-${Eu(dt)}-${lt}`;pe.add(Lt);const on=(Pt?o.rules.resonevar:o.rules.onevar).cache,At=Pt?I.resonevar:I.onevar;on.has(Lt)||(on.add(Lt),wc(dt,[`.${Lt}`],[],e,cn=>{At.apply(cn)}))}for(const Be of Ne)if(Be!==void 0)for(const[lt,dt]of Be){const Pt=`${Q}-${Eu(dt)}-${lt}`;pe.add(Pt),o.rules.allvar.cache.has(Pt)||(o.rules.allvar.cache.add(Pt),wc(dt,[`.${Pt}`],[],e,Lt=>{I.allvar.apply(Lt)}))}}if(typeof V=="object"&&V){const Q=`${h}-i${Eu(V)}-css`;pe.add(Q),o.rules.inline.cache.has(Q)||(o.rules.inline.cache.add(Q),wc(V,[`.${Q}`],[],e,te=>{I.inline.apply(te)}))}for(const Q of String(q.className||"").trim().split(/\s+/))Q&&pe.add(Q);const Ee=he.className=[...pe].join(" ");return{type:n.type,className:Ee,selector:N,props:he,toString:()=>Ee,deferredInjector:u}};return H_(j,{className:h,selector:N,[Su]:n,toString:()=>(o.rules.styled.cache.has(h)||j(),h)})},uP=e=>{let n="";const o=[],h={},g=[];for(const[v,,,,S,u]of e){n===""&&(n=v),o.push(v),g.push(...u);for(const I in S){const N=S[I];(h[I]===void 0||N!=="undefined"||u.includes(N))&&(h[I]=N)}}return[n,o,h,new Set(g)]},j0=(e,n,o,h)=>{const g=[];e:for(let[v,S,u]of e){if(u)continue;let I,N=0,j=!1;for(I in v){const q=v[I];let V=n[I];if(V!==q){if(typeof V!="object"||!V)continue e;{let he,ge,pe=0;for(const Ee in V){if(q===String(V[Ee])){if(Ee!=="@initial"){const ne=Ee.slice(1);(ge=ge||[]).push(ne in o?o[ne]:Ee.replace(/^@media ?/,"")),j=!0}N+=pe,he=!0}++pe}if(ge&&ge.length&&(S={["@media "+ge.join(", ")]:S}),!he)continue e}}}(g[N]=g[N]||[]).push([h?"cv":`${I}-${v[I]}`,S,j])}return g},cP={},hP=Nc(),dP=(e,n)=>hP(e,()=>(...o)=>{const h=()=>{for(let g of o){g=typeof g=="object"&&g||{};let v=Eu(g);if(!n.rules.global.cache.has(v)){if(n.rules.global.cache.add(v),"@import"in g){let S=[].indexOf.call(n.sheet.cssRules,n.rules.themed.group)-1;for(let u of[].concat(g["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,n.sheet.insertRule(`@import ${u};`,S++);delete g["@import"]}wc(g,[],[],e,S=>{n.rules.global.apply(S)})}}return""};return H_(h,{toString:h})}),pP=Nc(),fP=(e,n)=>pP(e,()=>o=>{const h=`${Xa(e.prefix)}k-${Eu(o)}`,g=()=>{if(!n.rules.global.cache.has(h)){n.rules.global.cache.add(h);const v=[];wc(o,[],[],e,u=>v.push(u));const S=`@keyframes ${h}{${v.join("")}}`;n.rules.global.apply(S)}return h};return H_(g,{get name(){return g()},toString:g})}),mP=class{constructor(e,n,o,h){this.token=e==null?"":String(e),this.value=n==null?"":String(n),this.scale=o==null?"":String(o),this.prefix=h==null?"":String(h)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Xa(this.prefix)+Xa(this.scale)+this.token}toString(){return this.computedValue}},gP=Nc(),_P=(e,n)=>gP(e,()=>(o,h)=>{h=typeof o=="object"&&o||Object(h);const g=`.${o=(o=typeof o=="string"?o:"")||`${Xa(e.prefix)}t-${Eu(h)}`}`,v={},S=[];for(const I in h){v[I]={};for(const N in h[I]){const j=`--${Xa(e.prefix)}${I}-${N}`,q=zw(String(h[I][N]),e.prefix,I);v[I][N]=new mP(N,q,I,e.prefix),S.push(`${j}:${q}`)}}const u=()=>{if(S.length&&!n.rules.themed.cache.has(o)){n.rules.themed.cache.add(o);const I=`${h===e.theme?":root,":""}.${o}{${S.join(";")}}`;n.rules.themed.apply(I)}return o};return Ra(ai({},v),{get className(){return u()},selector:g,toString:u})}),yP=Nc(),G0,vP=Nc(),Aw=e=>{const n=(o=>{let h=!1;const g=yP(o,v=>{h=!0;const S="prefix"in(v=typeof v=="object"&&v||{})?String(v.prefix):"",u=typeof v.media=="object"&&v.media||{},I=typeof v.root=="object"?v.root||null:globalThis.document||null,N=typeof v.theme=="object"&&v.theme||{},j={prefix:S,media:u,theme:N,themeMap:typeof v.themeMap=="object"&&v.themeMap||ai({},qT),utils:typeof v.utils=="object"&&v.utils||{}},q=rP(I),V={css:Z0(j,q),globalCss:dP(j,q),keyframes:fP(j,q),createTheme:_P(j,q),reset(){q.reset(),V.theme.toString()},theme:{},sheet:q,config:j,prefix:S,getCssText:q.toString,toString:q.toString};return String(V.theme=V.createTheme(N)),V});return h||g.reset(),g})(e);return n.styled=(({config:o,sheet:h})=>vP(o,()=>{const g=Z0(o,h);return(...v)=>{const S=g(...v),u=S[Su].type,I=nn.forwardRef((N,j)=>{const q=N&&N.as||u,{props:V,deferredInjector:he}=S(N);return delete V.as,V.ref=j,he?nn.createElement(nn.Fragment,null,nn.createElement(q,V),nn.createElement(he,null)):nn.createElement(q,V)});return I.className=S.className,I.displayName=`Styled.${u.displayName||u.name||u}`,I.selector=S.selector,I.toString=()=>S.selector,I[Su]=S[Su],I}}))(n),n},xP=()=>G0||(G0=Aw()),wP=(...e)=>xP().globalCss(...e);const{styled:Mn}=Aw({theme:{colors:{black:"rgba(0, 0, 0)",white:"rgba(236, 237, 238)",hover:"#7180B9",primary:"#3423A6",primaryText:"white"},fonts:{sans:"Inter, sans-serif"},fontSizes:{1:"12px",2:"14px",3:"16px",4:"20px",5:"24px",6:"32px"},space:{1:"10px",2:"20px",3:"40px"},sizes:{1:"4px",2:"8px",3:"16px",4:"32px",5:"64px",6:"128px"},radii:{1:"2px",2:"4px",3:"8px",round:"9999px"},fontWeights:{},lineHeights:{},letterSpacings:{},borderWidths:{},borderStyles:{},shadows:{},zIndices:{},transitions:{}}}),bP=wP({"*":{margin:0,padding:0,border:0,fontFamily:"Inter, sans-serif"},body:{backgroundColor:"$black",color:"$white"},"@import":["url('https://rsms.me/inter/inter.css')"]});var Ua=(e,n,o)=>new Promise((h,g)=>{var v=I=>{try{u(o.next(I))}catch(N){g(N)}},S=I=>{try{u(o.throw(I))}catch(N){g(N)}},u=I=>I.done?h(I.value):Promise.resolve(I.value).then(v,S);u((o=o.apply(e,n)).next())}),Eo=Uint8Array,vu=Uint16Array,Mw=Uint32Array,Lw=new Eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dw=new Eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SP=new Eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rw=function(e,n){for(var o=new vu(31),h=0;h<31;++h)o[h]=n+=1<<e[h-1];for(var g=new Mw(o[30]),h=1;h<30;++h)for(var v=o[h];v<o[h+1];++v)g[v]=v-o[h]<<5|h;return[o,g]},Bw=Rw(Lw,2),Fw=Bw[0],EP=Bw[1];Fw[28]=258,EP[258]=28;var TP=Rw(Dw,0),PP=TP[0],Ng=new vu(32768);for(var ei=0;ei<32768;++ei)Ba=(ei&43690)>>>1|(ei&21845)<<1,Ba=(Ba&52428)>>>2|(Ba&13107)<<2,Ba=(Ba&61680)>>>4|(Ba&3855)<<4,Ng[ei]=((Ba&65280)>>>8|(Ba&255)<<8)>>>1;var Ba,Fh=function(e,n,o){for(var h=e.length,g=0,v=new vu(n);g<h;++g)e[g]&&++v[e[g]-1];var S=new vu(n);for(g=0;g<n;++g)S[g]=S[g-1]+v[g-1]<<1;var u;if(o){u=new vu(1<<n);var I=15-n;for(g=0;g<h;++g)if(e[g])for(var N=g<<4|e[g],j=n-e[g],q=S[e[g]-1]++<<j,V=q|(1<<j)-1;q<=V;++q)u[Ng[q]>>>I]=N}else for(u=new vu(h),g=0;g<h;++g)e[g]&&(u[g]=Ng[S[e[g]-1]++]>>>15-e[g]);return u},hd=new Eo(288);for(var ei=0;ei<144;++ei)hd[ei]=8;for(var ei=144;ei<256;++ei)hd[ei]=9;for(var ei=256;ei<280;++ei)hd[ei]=7;for(var ei=280;ei<288;++ei)hd[ei]=8;var Ow=new Eo(32);for(var ei=0;ei<32;++ei)Ow[ei]=5;var kP=Fh(hd,9,1),CP=Fh(Ow,5,1),Dm=function(e){for(var n=e[0],o=1;o<e.length;++o)e[o]>n&&(n=e[o]);return n},xs=function(e,n,o){var h=n/8|0;return(e[h]|e[h+1]<<8)>>(n&7)&o},Rm=function(e,n){var o=n/8|0;return(e[o]|e[o+1]<<8|e[o+2]<<16)>>(n&7)},IP=function(e){return(e+7)/8|0},zP=function(e,n,o){(n==null||n<0)&&(n=0),(o==null||o>e.length)&&(o=e.length);var h=new(e.BYTES_PER_ELEMENT==2?vu:e.BYTES_PER_ELEMENT==4?Mw:Eo)(o-n);return h.set(e.subarray(n,o)),h},AP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Es=function(e,n,o){var h=new Error(n||AP[e]);if(h.code=e,Error.captureStackTrace&&Error.captureStackTrace(h,Es),!o)throw h;return h},X_=function(e,n,o){var h=e.length;if(!h||o&&o.f&&!o.l)return n||new Eo(0);var g=!n||o,v=!o||o.i;o||(o={}),n||(n=new Eo(h*3));var S=function(Ct){var gn=n.length;if(Ct>gn){var Ln=new Eo(Math.max(gn*2,Ct));Ln.set(n),n=Ln}},u=o.f||0,I=o.p||0,N=o.b||0,j=o.l,q=o.d,V=o.m,he=o.n,ge=h*8;do{if(!j){u=xs(e,I,1);var pe=xs(e,I+1,3);if(I+=3,pe)if(pe==1)j=kP,q=CP,V=9,he=5;else if(pe==2){var te=xs(e,I,31)+257,Te=xs(e,I+10,15)+4,Ae=te+xs(e,I+5,31)+1;I+=14;for(var $e=new Eo(Ae),Ne=new Eo(19),Be=0;Be<Te;++Be)Ne[SP[Be]]=xs(e,I+Be*3,7);I+=Te*3;for(var lt=Dm(Ne),dt=(1<<lt)-1,Pt=Fh(Ne,lt,1),Be=0;Be<Ae;){var Lt=Pt[xs(e,I,dt)];I+=Lt&15;var Ee=Lt>>>4;if(Ee<16)$e[Be++]=Ee;else{var on=0,At=0;for(Ee==16?(At=3+xs(e,I,3),I+=2,on=$e[Be-1]):Ee==17?(At=3+xs(e,I,7),I+=3):Ee==18&&(At=11+xs(e,I,127),I+=7);At--;)$e[Be++]=on}}var cn=$e.subarray(0,te),Ke=$e.subarray(te);V=Dm(cn),he=Dm(Ke),j=Fh(cn,V,1),q=Fh(Ke,he,1)}else Es(1);else{var Ee=IP(I)+4,ne=e[Ee-4]|e[Ee-3]<<8,Q=Ee+ne;if(Q>h){v&&Es(0);break}g&&S(N+ne),n.set(e.subarray(Ee,Q),N),o.b=N+=ne,o.p=I=Q*8,o.f=u;continue}if(I>ge){v&&Es(0);break}}g&&S(N+131072);for(var En=(1<<V)-1,Fe=(1<<he)-1,ct=I;;ct=I){var on=j[Rm(e,I)&En],qe=on>>>4;if(I+=on&15,I>ge){v&&Es(0);break}if(on||Es(2),qe<256)n[N++]=qe;else if(qe==256){ct=I,j=null;break}else{var wt=qe-254;if(qe>264){var Be=qe-257,It=Lw[Be];wt=xs(e,I,(1<<It)-1)+Fw[Be],I+=It}var Qt=q[Rm(e,I)&Fe],Rt=Qt>>>4;Qt||Es(3),I+=Qt&15;var Ke=PP[Rt];if(Rt>3){var It=Dw[Rt];Ke+=Rm(e,I)&(1<<It)-1,I+=It}if(I>ge){v&&Es(0);break}g&&S(N+131072);for(var Nt=N+wt;N<Nt;N+=4)n[N]=n[N-Ke],n[N+1]=n[N+1-Ke],n[N+2]=n[N+2-Ke],n[N+3]=n[N+3-Ke];N=Nt}}o.l=j,o.p=ct,o.b=N,o.f=u,j&&(u=1,o.m=V,o.d=q,o.n=he)}while(!u);return N==n.length?n:zP(n,0,N)},MP=new Eo(0),LP=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Es(6,"invalid gzip data");var n=e[3],o=10;n&4&&(o+=e[10]|(e[11]<<8)+2);for(var h=(n>>3&1)+(n>>4&1);h>0;h-=!e[o++]);return o+(n&2)},DP=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},RP=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&Es(6,"invalid zlib data"),e[1]&32&&Es(6,"invalid zlib data: preset dictionaries not supported")};function BP(e,n){return X_(e,n)}function FP(e,n){return X_(e.subarray(LP(e),-8),n||new Eo(DP(e)))}function OP(e,n){return X_((RP(e),e.subarray(2,-4)),n)}function NP(e,n){return e[0]==31&&e[1]==139&&e[2]==8?FP(e,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?BP(e,n):OP(e,n)}var UP=typeof TextDecoder!="undefined"&&new TextDecoder,VP=0;try{UP.decode(MP,{stream:!0}),VP=1}catch{}var Nw=(e,n)=>e*Math.pow(2,n),bh=(e,n)=>Math.floor(e/Math.pow(2,n)),Kp=(e,n)=>Nw(e.getUint16(n+1,!0),8)+e.getUint8(n),Uw=(e,n)=>Nw(e.getUint32(n+2,!0),16)+e.getUint16(n,!0),$P=(e,n,o,h,g)=>{if(e!=h.getUint8(g))return e-h.getUint8(g);const v=Kp(h,g+1);if(n!=v)return n-v;const S=Kp(h,g+4);return o!=S?o-S:0},ZP=(e,n,o,h)=>{const g=Vw(e,n|128,o,h);return g?{z:n,x:o,y:h,offset:g[0],length:g[1],is_dir:!0}:null},W0=(e,n,o,h)=>{const g=Vw(e,n,o,h);return g?{z:n,x:o,y:h,offset:g[0],length:g[1],is_dir:!1}:null},Vw=(e,n,o,h)=>{let g=0,v=e.byteLength/17-1;for(;g<=v;){const S=v+g>>1,u=$P(n,o,h,e,S*17);if(u>0)g=S+1;else if(u<0)v=S-1;else return[Uw(e,S*17+7),e.getUint32(S*17+13,!0)]}return null},jP=e=>{if(e.byteLength<17)return null;const n=e.byteLength/17,o=K_(e,n-1);return o.is_dir?o.z:null},GP=(e,n)=>e.is_dir&&!n.is_dir?1:!e.is_dir&&n.is_dir?-1:e.z!==n.z?e.z-n.z:e.x!==n.x?e.x-n.x:e.y-n.y,K_=(e,n)=>{const o=e.getUint8(n*17);return{z:o&127,x:Kp(e,n*17+1),y:Kp(e,n*17+4),offset:Uw(e,n*17+7),length:e.getUint32(n*17+13,!0),is_dir:o>>7===1}},q0=e=>{const n=[];for(let o=0;o<e.byteLength/17;o++)n.push(K_(e,o));return WP(n)},WP=e=>{e.sort(GP);const n=new ArrayBuffer(17*e.length),o=new Uint8Array(n);for(let h=0;h<e.length;h++){const g=e[h];let v=g.z;g.is_dir&&(v=v|128),o[h*17]=v,o[h*17+1]=g.x&255,o[h*17+2]=g.x>>8&255,o[h*17+3]=g.x>>16&255,o[h*17+4]=g.y&255,o[h*17+5]=g.y>>8&255,o[h*17+6]=g.y>>16&255,o[h*17+7]=g.offset&255,o[h*17+8]=bh(g.offset,8)&255,o[h*17+9]=bh(g.offset,16)&255,o[h*17+10]=bh(g.offset,24)&255,o[h*17+11]=bh(g.offset,32)&255,o[h*17+12]=bh(g.offset,48)&255,o[h*17+13]=g.length&255,o[h*17+14]=g.length>>8&255,o[h*17+15]=g.length>>16&255,o[h*17+16]=g.length>>24&255}return new DataView(o.buffer,o.byteOffset,o.length)},qP=(e,n)=>{const o=jP(e.dir);if(o){const h=n.z-o,g=Math.trunc(n.x/(1<<h)),v=Math.trunc(n.y/(1<<h));return{z:o,x:g,y:v}}return null},HP=e=>{if(e.getUint16(0,!0)!==19792)throw new Error('File header does not begin with "PM"');const o=e.getUint16(2,!0),h=e.getUint32(4,!0),g=e.getUint16(8,!0);return{version:o,json_size:h,root_entries:g}},XP=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,n){return Ua(this,null,function*(){let h=yield this.file.slice(e,e+n).arrayBuffer();return new DataView(h)})}},KP=class{constructor(e){this.url=e}getKey(){return this.url}getBytes(e,n){return Ua(this,null,function*(){const o=new AbortController,h=o.signal,g=yield fetch(this.url,{signal:h,headers:{Range:"bytes="+e+"-"+(e+n-1)}}),v=g.headers.get("Content-Length");(!v||+v!==n)&&(console.error("Content-Length mismatch indicates byte serving not supported; aborting."),o.abort());const S=yield g.arrayBuffer();return new DataView(S)})}},YP=class{constructor(e,n){this.getKey=()=>this.source.getKey(),this.source=e,this.entries=new Map,this.maxEntries=n}getBytes(e,n){return Ua(this,null,function*(){let o=this.entries.get(e+"-"+n);if(o)return o.lastUsed=performance.now(),o.buffer;let h=this.source.getBytes(e,n);if(this.entries.set(e+"-"+n,{lastUsed:performance.now(),buffer:h}),this.entries.size>this.maxEntries){let g=1/0,v;this.entries.forEach((S,u)=>{S.lastUsed<g&&(g=S.lastUsed,v=u)}),v&&this.entries.delete(v)}return h})}},Oh=class{constructor(e,n=64){typeof e=="string"?this.source=new YP(new KP(e),n):this.source=e}fetchRoot(){return Ua(this,null,function*(){const e=yield this.source.getBytes(0,512e3),n=HP(new DataView(e.buffer,e.byteOffset,10));let o=new DataView(e.buffer,10+n.json_size,17*n.root_entries);return n.version===1&&(console.warn("Sorting pmtiles v1 directory"),o=q0(o)),{header:n,view:e,dir:o}})}root_entries(){return Ua(this,null,function*(){const e=yield this.fetchRoot();let n=[];for(var o=0;o<e.header.root_entries;o++)n.push(K_(e.dir,o));return n})}metadata(){return Ua(this,null,function*(){const e=yield this.fetchRoot(),n=new TextDecoder("utf-8"),o=JSON.parse(n.decode(new DataView(e.view.buffer,e.view.byteOffset+10,e.header.json_size)));return o.compression&&console.warn(`Archive has compression type: ${o.compression} and may not be readable directly by browsers.`),o.bounds||console.warn("Archive is missing 'bounds' in metadata, required in v2 and above."),o.minzoom||console.warn("Archive is missing 'minzoom' in metadata, required in v2 and above."),o.maxzoom||console.warn("Archive is missing 'maxzoom' in metadata, required in v2 and above."),o})}fetchLeafdir(e,n){return Ua(this,null,function*(){let o=yield this.source.getBytes(n.offset,n.length);return e===1&&(console.warn("Sorting pmtiles v1 directory."),o=q0(o)),o})}getLeafdir(e,n){return Ua(this,null,function*(){return this.fetchLeafdir(e,n)})}getZxy(e,n,o){return Ua(this,null,function*(){const h=yield this.fetchRoot(),g=W0(new DataView(h.dir.buffer,h.dir.byteOffset,h.dir.byteLength),e,n,o);if(g)return g;const v=qP(h,{z:e,x:n,y:o});if(v){const S=ZP(new DataView(h.dir.buffer,h.dir.byteOffset,h.dir.byteLength),v.z,v.x,v.y);if(S){const u=yield this.getLeafdir(h.header.version,S);return W0(new DataView(u.buffer,u.byteOffset,u.byteLength),e,n,o)}}return null})}},JP=(e,n)=>{const o=L.GridLayer.extend({createTile:function(h,g){const v=document.createElement("img");return e.getZxy(h.z,h.x,h.y).then(S=>{if(S===null)return;const u=new AbortController;u.signal,v.cancel=()=>{u.abort()},e.source.getBytes(S.offset,S.length).then(I=>{const N=new Blob([I],{type:"image/png"}),j=window.URL.createObjectURL(N);v.src=j,v.cancel=null,g(null,v)}).catch(I=>{if(I.name!=="AbortError")throw I})}),v},_removeTile:function(h){const g=this._tiles[h];!g||(g.el.cancel&&g.el.cancel(),g.el.width=0,g.el.height=0,g.el.deleted=!0,L.DomUtil.remove(g.el),delete this._tiles[h],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(h)}))}});return new o(n)},QP=class{constructor(){this.protocol=(e,n)=>{const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),h=e.url.match(o),g=h[1];let v=this.tiles.get(g);v||(v=new Oh(g),this.tiles.set(g,v));const S=h[2],u=h[3],I=h[4];return v.getZxy(+S,+u,+I).then(N=>{N?v.source.getBytes(N.offset,N.length).then(j=>{let q=new Uint8Array(j.buffer);q[0]==31&&q[1]==139&&(q=NP(q)),n(null,q,null,null)}).catch(j=>{n(new Error("Canceled"),null,null,null)}):n(null,new Uint8Array,null,null)}),{cancel:()=>{}}},this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function $w(e,n){if(e==null)return{};var o={},h=Object.keys(e),g,v;for(v=0;v<h.length;v++)g=h[v],!(n.indexOf(g)>=0)&&(o[g]=e[g]);return o}var ek=["color"],tk=re.exports.forwardRef(function(e,n){var o=e.color,h=o===void 0?"currentColor":o,g=$w(e,ek);return re.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g,{ref:n}),re.exports.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:h,fillRule:"evenodd",clipRule:"evenodd"}))}),nk=["color"],ik=re.exports.forwardRef(function(e,n){var o=e.color,h=o===void 0?"currentColor":o,g=$w(e,nk);return re.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g,{ref:n}),re.exports.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:h,fillRule:"evenodd",clipRule:"evenodd"}))}),Zw={exports:{}},rk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ok=rk,sk=ok;function jw(){}function Gw(){}Gw.resetWarningCache=jw;var ak=function(){function e(h,g,v,S,u,I){if(I!==sk){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}e.isRequired=e;function n(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Gw,resetWarningCache:jw};return o.PropTypes=o,o};Zw.exports=ak();var Gn=Zw.exports;function Uc(e,n,o,h){function g(v){return v instanceof o?v:new o(function(S){S(v)})}return new(o||(o=Promise))(function(v,S){function u(j){try{N(h.next(j))}catch(q){S(q)}}function I(j){try{N(h.throw(j))}catch(q){S(q)}}function N(j){j.done?v(j.value):g(j.value).then(u,I)}N((h=h.apply(e,n||[])).next())})}function Vc(e,n){var o={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},h,g,v,S;return S={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function u(N){return function(j){return I([N,j])}}function I(N){if(h)throw new TypeError("Generator is already executing.");for(;o;)try{if(h=1,g&&(v=N[0]&2?g.return:N[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,N[1])).done)return v;switch(g=0,v&&(N=[N[0]&2,v.value]),N[0]){case 0:case 1:v=N;break;case 4:return o.label++,{value:N[1],done:!1};case 5:o.label++,g=N[1],N=[0];continue;case 7:N=o.ops.pop(),o.trys.pop();continue;default:if(v=o.trys,!(v=v.length>0&&v[v.length-1])&&(N[0]===6||N[0]===2)){o=0;continue}if(N[0]===3&&(!v||N[1]>v[0]&&N[1]<v[3])){o.label=N[1];break}if(N[0]===6&&o.label<v[1]){o.label=v[1],v=N;break}if(v&&o.label<v[2]){o.label=v[2],o.ops.push(N);break}v[2]&&o.ops.pop(),o.trys.pop();continue}N=n.call(e,o)}catch(j){N=[6,j],g=0}finally{h=v=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}function lk(e,n){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var h=o.call(e),g,v=[],S;try{for(;(n===void 0||n-- >0)&&!(g=h.next()).done;)v.push(g.value)}catch(u){S={error:u}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(S)throw S.error}}return v}function uk(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(lk(arguments[n]));return e}var ck=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function dd(e,n){var o=hk(e);if(typeof o.path!="string"){var h=e.webkitRelativePath;Object.defineProperty(o,"path",{value:typeof n=="string"?n:typeof h=="string"&&h.length>0?h:e.name,writable:!1,configurable:!1,enumerable:!0})}return o}function hk(e){var n=e.name,o=n&&n.lastIndexOf(".")!==-1;if(o&&!e.type){var h=n.split(".").pop().toLowerCase(),g=ck.get(h);g&&Object.defineProperty(e,"type",{value:g,writable:!1,configurable:!1,enumerable:!0})}return e}var dk=[".DS_Store","Thumbs.db"];function pk(e){return Uc(this,void 0,void 0,function(){return Vc(this,function(n){return Yp(e)&&fk(e)?[2,yk(e.dataTransfer,e.type)]:mk(e)?[2,gk(e)]:Array.isArray(e)&&e.every(function(o){return"getFile"in o&&typeof o.getFile=="function"})?[2,_k(e)]:[2,[]]})})}function fk(e){return Yp(e.dataTransfer)}function mk(e){return Yp(e)&&Yp(e.target)}function Yp(e){return typeof e=="object"&&e!==null}function gk(e){return Ug(e.target.files).map(function(n){return dd(n)})}function _k(e){return Uc(this,void 0,void 0,function(){var n;return Vc(this,function(o){switch(o.label){case 0:return[4,Promise.all(e.map(function(h){return h.getFile()}))];case 1:return n=o.sent(),[2,n.map(function(h){return dd(h)})]}})})}function yk(e,n){return Uc(this,void 0,void 0,function(){var o,h;return Vc(this,function(g){switch(g.label){case 0:return e===null?[2,[]]:e.items?(o=Ug(e.items).filter(function(v){return v.kind==="file"}),n!=="drop"?[2,o]:[4,Promise.all(o.map(vk))]):[3,2];case 1:return h=g.sent(),[2,H0(Ww(h))];case 2:return[2,H0(Ug(e.files).map(function(v){return dd(v)}))]}})})}function H0(e){return e.filter(function(n){return dk.indexOf(n.name)===-1})}function Ug(e){if(e===null)return[];for(var n=[],o=0;o<e.length;o++){var h=e[o];n.push(h)}return n}function vk(e){if(typeof e.webkitGetAsEntry!="function")return X0(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?qw(n):X0(e)}function Ww(e){return e.reduce(function(n,o){return uk(n,Array.isArray(o)?Ww(o):[o])},[])}function X0(e){var n=e.getAsFile();if(!n)return Promise.reject(e+" is not a File");var o=dd(n);return Promise.resolve(o)}function xk(e){return Uc(this,void 0,void 0,function(){return Vc(this,function(n){return[2,e.isDirectory?qw(e):wk(e)]})})}function qw(e){var n=e.createReader();return new Promise(function(o,h){var g=[];function v(){var S=this;n.readEntries(function(u){return Uc(S,void 0,void 0,function(){var I,N,j;return Vc(this,function(q){switch(q.label){case 0:if(u.length)return[3,5];q.label=1;case 1:return q.trys.push([1,3,,4]),[4,Promise.all(g)];case 2:return I=q.sent(),o(I),[3,4];case 3:return N=q.sent(),h(N),[3,4];case 4:return[3,6];case 5:j=Promise.all(u.map(xk)),g.push(j),v(),q.label=6;case 6:return[2]}})})},function(u){h(u)})}v()})}function wk(e){return Uc(this,void 0,void 0,function(){return Vc(this,function(n){return[2,new Promise(function(o,h){e.file(function(g){var v=dd(g,e.fullPath);o(v)},function(g){h(g)})})]})})}var bk=function(e,n){if(e&&n){var o=Array.isArray(n)?n:n.split(","),h=e.name||"",g=(e.type||"").toLowerCase(),v=g.replace(/\/.*$/,"");return o.some(function(S){var u=S.trim().toLowerCase();return u.charAt(0)==="."?h.toLowerCase().endsWith(u):u.endsWith("/*")?v===u.replace(/\/.*$/,""):g===u})}return!0};function K0(e){return Tk(e)||Ek(e)||Hw(e)||Sk()}function Sk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ek(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tk(e){if(Array.isArray(e))return Vg(e)}function Pk(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function rd(e,n){return Ik(e)||Ck(e,n)||Hw(e,n)||kk()}function kk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hw(e,n){if(!!e){if(typeof e=="string")return Vg(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Vg(e,n)}}function Vg(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,h=new Array(n);o<n;o++)h[o]=e[o];return h}function Ck(e,n){var o=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var h=[],g=!0,v=!1,S,u;try{for(o=o.call(e);!(g=(S=o.next()).done)&&(h.push(S.value),!(n&&h.length===n));g=!0);}catch(I){v=!0,u=I}finally{try{!g&&o.return!=null&&o.return()}finally{if(v)throw u}}return h}}function Ik(e){if(Array.isArray(e))return e}var zk="file-invalid-type",Ak="file-too-large",Mk="file-too-small",Lk="too-many-files",Dk=function(n){n=Array.isArray(n)&&n.length===1?n[0]:n;var o=Array.isArray(n)?"one of ".concat(n.join(", ")):n;return{code:zk,message:"File type must be ".concat(o)}},Y0=function(n){return{code:Ak,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},J0=function(n){return{code:Mk,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},Rk={code:Lk,message:"Too many files"};function Xw(e,n){var o=e.type==="application/x-moz-file"||bk(e,n);return[o,o?null:Dk(n)]}function Kw(e,n,o){if(gu(e.size))if(gu(n)&&gu(o)){if(e.size>o)return[!1,Y0(o)];if(e.size<n)return[!1,J0(n)]}else{if(gu(n)&&e.size<n)return[!1,J0(n)];if(gu(o)&&e.size>o)return[!1,Y0(o)]}return[!0,null]}function gu(e){return e!=null}function Bk(e){var n=e.files,o=e.accept,h=e.minSize,g=e.maxSize,v=e.multiple,S=e.maxFiles,u=e.validator;return!v&&n.length>1||v&&S>=1&&n.length>S?!1:n.every(function(I){var N=Xw(I,o),j=rd(N,1),q=j[0],V=Kw(I,h,g),he=rd(V,1),ge=he[0],pe=u?u(I):null;return q&&ge&&!pe})}function Jp(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function ip(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Q0(e){e.preventDefault()}function Fk(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Ok(e){return e.indexOf("Edge/")!==-1}function Nk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Fk(e)||Ok(e)}function ta(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return function(h){for(var g=arguments.length,v=new Array(g>1?g-1:0),S=1;S<g;S++)v[S-1]=arguments[S];return n.some(function(u){return!Jp(h)&&u&&u.apply(void 0,[h].concat(v)),Jp(h)})}}function Uk(){return"showOpenFilePicker"in window}function Vk(e){return gu(e)?Object.entries(e).filter(function(n){var o=rd(n,2),h=o[0],g=o[1],v=!0;return Yw(h)||(console.warn('Skipped "'.concat(h,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),v=!1),(!Array.isArray(g)||!g.every(Jw))&&(console.warn('Skipped "'.concat(h,'" because an invalid file extension was provided.')),v=!1),v}).map(function(n){var o=rd(n,2),h=o[0],g=o[1];return{accept:Pk({},h,g)}}):e}function $k(e){if(gu(e))return Object.entries(e).reduce(function(n,o){var h=rd(o,2),g=h[0],v=h[1];return[].concat(K0(n),[g],K0(v))},[]).filter(function(n){return Yw(n)||Jw(n)}).join(",")}function Zk(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function jk(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Yw(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Jw(e){return/^.*\.[\w]+$/.test(e)}var yf={exports:{}},vf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk=re.exports,Wk=Symbol.for("react.element"),qk=Symbol.for("react.fragment"),Hk=Object.prototype.hasOwnProperty,Xk=Gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kk={key:!0,ref:!0,__self:!0,__source:!0};function Qw(e,n,o){var h,g={},v=null,S=null;o!==void 0&&(v=""+o),n.key!==void 0&&(v=""+n.key),n.ref!==void 0&&(S=n.ref);for(h in n)Hk.call(n,h)&&!Kk.hasOwnProperty(h)&&(g[h]=n[h]);if(e&&e.defaultProps)for(h in n=e.defaultProps,n)g[h]===void 0&&(g[h]=n[h]);return{$$typeof:Wk,type:e,key:v,ref:S,props:g,_owner:Xk.current}}vf.Fragment=qk;vf.jsx=Qw;vf.jsxs=Qw;yf.exports=vf;const _t=yf.exports.jsx,wi=yf.exports.jsxs,eb=yf.exports.Fragment;var Yk=["children"],Jk=["open"],Qk=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eC=["refKey","onChange","onClick"];function tC(e){return rC(e)||iC(e)||tb(e)||nC()}function nC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iC(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rC(e){if(Array.isArray(e))return $g(e)}function Bm(e,n){return aC(e)||sC(e,n)||tb(e,n)||oC()}function oC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tb(e,n){if(!!e){if(typeof e=="string")return $g(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return $g(e,n)}}function $g(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,h=new Array(n);o<n;o++)h[o]=e[o];return h}function sC(e,n){var o=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var h=[],g=!0,v=!1,S,u;try{for(o=o.call(e);!(g=(S=o.next()).done)&&(h.push(S.value),!(n&&h.length===n));g=!0);}catch(I){v=!0,u=I}finally{try{!g&&o.return!=null&&o.return()}finally{if(v)throw u}}return h}}function aC(e){if(Array.isArray(e))return e}function ex(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);n&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),o.push.apply(o,h)}return o}function pi(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?ex(Object(o),!0).forEach(function(h){Zg(e,h,o[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ex(Object(o)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(o,h))})}return e}function Zg(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function Qp(e,n){if(e==null)return{};var o=lC(e,n),h,g;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(g=0;g<v.length;g++)h=v[g],!(n.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,h)||(o[h]=e[h]))}return o}function lC(e,n){if(e==null)return{};var o={},h=Object.keys(e),g,v;for(v=0;v<h.length;v++)g=h[v],!(n.indexOf(g)>=0)&&(o[g]=e[g]);return o}var Y_=re.exports.forwardRef(function(e,n){var o=e.children,h=Qp(e,Yk),g=ib(h),v=g.open,S=Qp(g,Jk);return re.exports.useImperativeHandle(n,function(){return{open:v}},[v]),_t(eb,{children:o(pi(pi({},S),{},{open:v}))})});Y_.displayName="Dropzone";var nb={disabled:!1,getFilesFromEvent:pk,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Y_.defaultProps=nb;Y_.propTypes={children:Gn.func,accept:Gn.objectOf(Gn.arrayOf(Gn.string)),multiple:Gn.bool,preventDropOnDocument:Gn.bool,noClick:Gn.bool,noKeyboard:Gn.bool,noDrag:Gn.bool,noDragEventsBubbling:Gn.bool,minSize:Gn.number,maxSize:Gn.number,maxFiles:Gn.number,disabled:Gn.bool,getFilesFromEvent:Gn.func,onFileDialogCancel:Gn.func,onFileDialogOpen:Gn.func,useFsAccessApi:Gn.bool,autoFocus:Gn.bool,onDragEnter:Gn.func,onDragLeave:Gn.func,onDragOver:Gn.func,onDrop:Gn.func,onDropAccepted:Gn.func,onDropRejected:Gn.func,onError:Gn.func,validator:Gn.func};var jg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ib(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=pi(pi({},nb),e),o=n.accept,h=n.disabled,g=n.getFilesFromEvent,v=n.maxSize,S=n.minSize,u=n.multiple,I=n.maxFiles,N=n.onDragEnter,j=n.onDragLeave,q=n.onDragOver,V=n.onDrop,he=n.onDropAccepted,ge=n.onDropRejected,pe=n.onFileDialogCancel,Ee=n.onFileDialogOpen,ne=n.useFsAccessApi,Q=n.autoFocus,te=n.preventDropOnDocument,Te=n.noClick,Ae=n.noKeyboard,$e=n.noDrag,Ne=n.noDragEventsBubbling,Be=n.onError,lt=n.validator,dt=re.exports.useMemo(function(){return $k(o)},[o]),Pt=re.exports.useMemo(function(){return Vk(o)},[o]),Lt=re.exports.useMemo(function(){return typeof Ee=="function"?Ee:tx},[Ee]),on=re.exports.useMemo(function(){return typeof pe=="function"?pe:tx},[pe]),At=re.exports.useRef(null),cn=re.exports.useRef(null),Ke=re.exports.useReducer(uC,jg),En=Bm(Ke,2),Fe=En[0],ct=En[1],qe=Fe.isFocused,wt=Fe.isFileDialogActive,It=re.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&ne&&Uk()),Qt=function(){!It.current&&wt&&setTimeout(function(){if(cn.current){var Et=cn.current.files;Et.length||(ct({type:"closeDialog"}),on())}},300)};re.exports.useEffect(function(){return window.addEventListener("focus",Qt,!1),function(){window.removeEventListener("focus",Qt,!1)}},[cn,wt,on,It]);var Rt=re.exports.useRef([]),Nt=function(Et){At.current&&At.current.contains(Et.target)||(Et.preventDefault(),Rt.current=[])};re.exports.useEffect(function(){return te&&(document.addEventListener("dragover",Q0,!1),document.addEventListener("drop",Nt,!1)),function(){te&&(document.removeEventListener("dragover",Q0),document.removeEventListener("drop",Nt))}},[At,te]),re.exports.useEffect(function(){return!h&&Q&&At.current&&At.current.focus(),function(){}},[At,Q,h]);var Ct=re.exports.useCallback(function(it){Be?Be(it):console.error(it)},[Be]),gn=re.exports.useCallback(function(it){it.preventDefault(),it.persist(),ki(it),Rt.current=[].concat(tC(Rt.current),[it.target]),ip(it)&&Promise.resolve(g(it)).then(function(Et){if(!(Jp(it)&&!Ne)){var yn=Et.length,Fn=yn>0&&Bk({files:Et,accept:dt,minSize:S,maxSize:v,multiple:u,maxFiles:I,validator:lt}),ke=yn>0&&!Fn;ct({isDragAccept:Fn,isDragReject:ke,isDragActive:!0,type:"setDraggedFiles"}),N&&N(it)}}).catch(function(Et){return Ct(Et)})},[g,N,Ct,Ne,dt,S,v,u,I,lt]),Ln=re.exports.useCallback(function(it){it.preventDefault(),it.persist(),ki(it);var Et=ip(it);if(Et&&it.dataTransfer)try{it.dataTransfer.dropEffect="copy"}catch{}return Et&&q&&q(it),!1},[q,Ne]),qr=re.exports.useCallback(function(it){it.preventDefault(),it.persist(),ki(it);var Et=Rt.current.filter(function(Fn){return At.current&&At.current.contains(Fn)}),yn=Et.indexOf(it.target);yn!==-1&&Et.splice(yn,1),Rt.current=Et,!(Et.length>0)&&(ct({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ip(it)&&j&&j(it))},[At,j,Ne]),Tr=re.exports.useCallback(function(it,Et){var yn=[],Fn=[];it.forEach(function(ke){var Qe=Xw(ke,dt),Di=Bm(Qe,2),ji=Di[0],hn=Di[1],Si=Kw(ke,S,v),Wn=Bm(Si,2),dr=Wn[0],vn=Wn[1],Xe=lt?lt(ke):null;if(ji&&dr&&!Xe)yn.push(ke);else{var Ut=[hn,vn];Xe&&(Ut=Ut.concat(Xe)),Fn.push({file:ke,errors:Ut.filter(function(Ft){return Ft})})}}),(!u&&yn.length>1||u&&I>=1&&yn.length>I)&&(yn.forEach(function(ke){Fn.push({file:ke,errors:[Rk]})}),yn.splice(0)),ct({acceptedFiles:yn,fileRejections:Fn,type:"setFiles"}),V&&V(yn,Fn,Et),Fn.length>0&&ge&&ge(Fn,Et),yn.length>0&&he&&he(yn,Et)},[ct,u,dt,S,v,I,V,he,ge,lt]),hr=re.exports.useCallback(function(it){it.preventDefault(),it.persist(),ki(it),Rt.current=[],ip(it)&&Promise.resolve(g(it)).then(function(Et){Jp(it)&&!Ne||Tr(Et,it)}).catch(function(Et){return Ct(Et)}),ct({type:"reset"})},[g,Tr,Ct,Ne]),Li=re.exports.useCallback(function(){if(It.current){ct({type:"openDialog"}),Lt();var it={multiple:u,types:Pt};window.showOpenFilePicker(it).then(function(Et){return g(Et)}).then(function(Et){Tr(Et,null),ct({type:"closeDialog"})}).catch(function(Et){Zk(Et)?(on(Et),ct({type:"closeDialog"})):jk(Et)?(It.current=!1,cn.current&&(cn.current.value=null,cn.current.click())):Ct(Et)});return}cn.current&&(ct({type:"openDialog"}),Lt(),cn.current.value=null,cn.current.click())},[ct,Lt,on,ne,Tr,Ct,Pt,u]),Nn=re.exports.useCallback(function(it){!At.current||!At.current.isEqualNode(it.target)||(it.key===" "||it.key==="Enter"||it.keyCode===32||it.keyCode===13)&&(it.preventDefault(),Li())},[At,Li]),Pr=re.exports.useCallback(function(){ct({type:"focus"})},[]),uo=re.exports.useCallback(function(){ct({type:"blur"})},[]),kr=re.exports.useCallback(function(){Te||(Nk()?setTimeout(Li,0):Li())},[Te,Li]),ui=function(Et){return h?null:Et},Cr=function(Et){return Ae?null:ui(Et)},$i=function(Et){return $e?null:ui(Et)},ki=function(Et){Ne&&Et.stopPropagation()},Zi=re.exports.useMemo(function(){return function(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=it.refKey,yn=Et===void 0?"ref":Et,Fn=it.role,ke=it.onKeyDown,Qe=it.onFocus,Di=it.onBlur,ji=it.onClick,hn=it.onDragEnter,Si=it.onDragOver,Wn=it.onDragLeave,dr=it.onDrop,vn=Qp(it,Qk);return pi(pi(Zg({onKeyDown:Cr(ta(ke,Nn)),onFocus:Cr(ta(Qe,Pr)),onBlur:Cr(ta(Di,uo)),onClick:ui(ta(ji,kr)),onDragEnter:$i(ta(hn,gn)),onDragOver:$i(ta(Si,Ln)),onDragLeave:$i(ta(Wn,qr)),onDrop:$i(ta(dr,hr)),role:typeof Fn=="string"&&Fn!==""?Fn:"presentation"},yn,At),!h&&!Ae?{tabIndex:0}:{}),vn)}},[At,Nn,Pr,uo,kr,gn,Ln,qr,hr,Ae,$e,h]),zo=re.exports.useCallback(function(it){it.stopPropagation()},[]),Ht=re.exports.useMemo(function(){return function(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=it.refKey,yn=Et===void 0?"ref":Et,Fn=it.onChange,ke=it.onClick,Qe=Qp(it,eC),Di=Zg({accept:dt,multiple:u,type:"file",style:{display:"none"},onChange:ui(ta(Fn,hr)),onClick:ui(ta(ke,zo)),tabIndex:-1},yn,cn);return pi(pi({},Di),Qe)}},[cn,o,u,hr,h]);return pi(pi({},Fe),{},{isFocused:qe&&!h,getRootProps:Zi,getInputProps:Ht,rootRef:At,inputRef:cn,open:ui(Li)})}function uC(e,n){switch(n.type){case"focus":return pi(pi({},e),{},{isFocused:!0});case"blur":return pi(pi({},e),{},{isFocused:!1});case"openDialog":return pi(pi({},jg),{},{isFileDialogActive:!0});case"closeDialog":return pi(pi({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return pi(pi({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return pi(pi({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return pi({},jg);default:return e}}function tx(){}const ef=Boolean(globalThis==null?void 0:globalThis.document)?re.exports.useLayoutEffect:()=>{},cC=jS["useId".toString()]||(()=>{});let hC=0;function Nh(e){const[n,o]=re.exports.useState(cC());return ef(()=>{e||o(h=>h!=null?h:String(hC++))},[e]),e||(n?`radix-${n}`:"")}function rb(...e){return n=>e.forEach(o=>function(h,g){typeof h=="function"?h(g):h!=null&&(h.current=g)}(o,n))}function sa(...e){return re.exports.useCallback(rb(...e),e)}function Yt(){return Yt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(e[h]=o[h])}return e},Yt.apply(this,arguments)}const od=re.exports.forwardRef((e,n)=>{const g=e,{children:o}=g,h=_n(g,["children"]);return re.exports.Children.toArray(o).some(nx)?re.exports.createElement(re.exports.Fragment,null,re.exports.Children.map(o,v=>nx(v)?re.exports.createElement(Gg,Yt({},h,{ref:n}),v.props.children):v)):re.exports.createElement(Gg,Yt({},h,{ref:n}),o)});od.displayName="Slot";const Gg=re.exports.forwardRef((e,n)=>{const g=e,{children:o}=g,h=_n(g,["children"]);return re.exports.isValidElement(o)?re.exports.cloneElement(o,Ra(ai({},pC(h,o.props)),{ref:rb(n,o.ref)})):re.exports.Children.count(o)>1?re.exports.Children.only(null):null});Gg.displayName="SlotClone";const dC=({children:e})=>re.exports.createElement(re.exports.Fragment,null,e);function nx(e){return re.exports.isValidElement(e)&&e.type===dC}function pC(e,n){const o=ai({},n);for(const h in n){const g=e[h],v=n[h];/^on[A-Z]/.test(h)?o[h]=(...S)=>{v==null||v(...S),g==null||g(...S)}:h==="style"?o[h]=ai(ai({},g),v):h==="className"&&(o[h]=[g,v].filter(Boolean).join(" "))}return ai(ai({},e),o)}const cr=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,n)=>Ra(ai({},e),{[n]:re.exports.forwardRef((o,h)=>{const u=o,{asChild:g}=u,v=_n(u,["asChild"]),S=g?od:n;return re.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),re.exports.createElement(S,Yt({},v,{ref:h}))})}),{});function ob(e,n){const o=re.exports.createContext(n);function h(g){const I=g,{children:v}=I,S=_n(I,["children"]),u=re.exports.useMemo(()=>S,Object.values(S));return re.exports.createElement(o.Provider,{value:u},v)}return h.displayName=e+"Provider",[h,function(g){const v=re.exports.useContext(o);if(v)return v;if(n!==void 0)return n;throw new Error(`\`${g}\` must be used within \`${e}\``)}]}function pd(e,n=[]){let o=[];const h=()=>{const g=o.map(v=>re.exports.createContext(v));return function(v){const S=(v==null?void 0:v[e])||g;return re.exports.useMemo(()=>({[`__scope${e}`]:Ra(ai({},v),{[e]:S})}),[v,S])}};return h.scopeName=e,[function(g,v){const S=re.exports.createContext(v),u=o.length;function I(N){const pe=N,{scope:j,children:q}=pe,V=_n(pe,["scope","children"]),he=(j==null?void 0:j[e][u])||S,ge=re.exports.useMemo(()=>V,Object.values(V));return re.exports.createElement(he.Provider,{value:ge},q)}return o=[...o,v],I.displayName=g+"Provider",[I,function(N,j){const q=(j==null?void 0:j[e][u])||S,V=re.exports.useContext(q);if(V)return V;if(v!==void 0)return v;throw new Error(`\`${N}\` must be used within \`${g}\``)}]},fC(h,...n)]}function fC(...e){const n=e[0];if(e.length===1)return n;const o=()=>{const h=e.map(g=>({useScope:g(),scopeName:g.scopeName}));return function(g){const v=h.reduce((S,{useScope:u,scopeName:I})=>ai(ai({},S),u(g)[`__scope${I}`]),{});return re.exports.useMemo(()=>({[`__scope${n.scopeName}`]:v}),[v])}};return o.scopeName=n.scopeName,o}const[mC,rM]=ob("Label",{id:void 0,controlRef:{current:null}}),gC=re.exports.forwardRef((e,n)=>{const N=e,{htmlFor:o,id:h}=N,g=_n(N,["htmlFor","id"]),v=re.exports.useRef(null),S=re.exports.useRef(null),u=sa(n,S),I=Nh(h);return re.exports.useEffect(()=>{if(o){const j=document.getElementById(o);if(S.current&&j){const q=()=>j.getAttribute("aria-labelledby"),V=[I,q()].filter(Boolean).join(" ");return j.setAttribute("aria-labelledby",V),v.current=j,()=>{var he;const ge=(he=q())===null||he===void 0?void 0:he.replace(I,"");ge===""?j.removeAttribute("aria-labelledby"):ge&&j.setAttribute("aria-labelledby",ge)}}}},[I,o]),re.exports.createElement(mC,{id:I,controlRef:v},re.exports.createElement(cr.span,Yt({role:"label",id:I},g,{ref:u,onMouseDown:j=>{var q;(q=e.onMouseDown)===null||q===void 0||q.call(e,j),!j.defaultPrevented&&j.detail>1&&j.preventDefault()},onClick:j=>{var q;if((q=e.onClick)===null||q===void 0||q.call(e,j),!v.current||j.defaultPrevented)return;const V=v.current.contains(j.target),he=j.isTrusted===!0;!V&&he&&(v.current.click(),v.current.focus())}})))}),_C=gC,yC=Mn("input",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"$3",fontFamily:"$sans","&:focus":{boxShadow:"0 0 0 1px black"},width:"100%",border:"1px solid $white",padding:"$1",boxSizing:"border-box",margin:"0 0 $2 0",borderRadius:"$2"}),Fm=Mn(_C,{display:"block",fontSize:"$3",fontWeight:300,userSelect:"none",padding:"0 0 $1 0"}),vC=Mn("h1",{paddingBottom:"$1",fontWeight:500}),xC=Mn("div",{maxWidth:780,marginLeft:"auto",marginRight:"auto",padding:"$3"}),wC=Mn("button",{padding:"$1 $2",marginBottom:"$1",borderRadius:"$2",cursor:"pointer",variants:{color:{violet:{backgroundColor:"blueviolet",color:"white","&:hover":{backgroundColor:"darkviolet"}},gray:{backgroundColor:"gainsboro","&:hover":{backgroundColor:"lightgray"}}}}}),bC=Mn("div",{padding:"$2",border:"1px dashed $white",textAlign:"center",margin:"0 0 $2 0"}),SC=Mn("div",{padding:"$1","&:not(:last-child)":{borderBottom:"1px solid $white"},"&:hover":{backgroundColor:"$hover"},variants:{selected:{true:{backgroundColor:"red"}}}}),EC=Mn("div",{borderRadius:"$1",border:"1px solid $white",margin:"0 0 $2 0"}),ix=["https://protomaps-static.sfo3.digitaloceanspaces.com/osm_carto.pmtiles","https://protomaps-static.sfo3.digitaloceanspaces.com/mantle-trial.pmtiles","https://protomaps-static.sfo3.digitaloceanspaces.com/cb_2018_us_zcta510_500k_nolimit.pmtiles","https://protomaps-static.sfo3.digitaloceanspaces.com/cb_2018_us_zcta510_500k_gzip.pmtiles"];function TC(e){const n=re.exports.useCallback(j=>{e.setFile(new Oh(new XP(j[0])))},[]),{acceptedFiles:o,getRootProps:h,getInputProps:g}=ib({onDrop:n});let[v,S]=re.exports.useState("");re.exports.useState(1);const u=j=>{S(j.target.value)},I=j=>()=>{e.setFile(new Oh(ix[j]))};return wi(xC,{children:[_t(vC,{children:"PMTiles Viewer"}),_t(Fm,{htmlFor:"remoteUrl",children:"Specify a remote URL"}),_t(yC,{id:"remoteUrl",placeholder:"https://example.com/my_archive.pmtiles",onChange:u}),_t(wC,{color:"gray",onClick:()=>{e.setFile(new Oh(v))},children:"Load URL"}),_t(Fm,{htmlFor:"localFile",children:"Select a local file"}),wi(bC,Ra(ai({},h()),{children:[_t("input",ai({},g())),_t("p",{children:"Drag + drop a file here, or click to select"})]})),_t(Fm,{children:"Load an example"}),_t(EC,{children:ix.map((j,q)=>_t(SC,{onClick:I(q),children:j},q))})]})}var To=Uint8Array,xu=Uint16Array,sb=Uint32Array,ab=new To([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lb=new To([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PC=new To([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ub=function(e,n){for(var o=new xu(31),h=0;h<31;++h)o[h]=n+=1<<e[h-1];for(var g=new sb(o[30]),h=1;h<30;++h)for(var v=o[h];v<o[h+1];++v)g[v]=v-o[h]<<5|h;return[o,g]},cb=ub(ab,2),hb=cb[0],kC=cb[1];hb[28]=258,kC[258]=28;var CC=ub(lb,0),IC=CC[0],Wg=new xu(32768);for(var ti=0;ti<32768;++ti){var vl=(ti&43690)>>>1|(ti&21845)<<1;vl=(vl&52428)>>>2|(vl&13107)<<2,vl=(vl&61680)>>>4|(vl&3855)<<4,Wg[ti]=((vl&65280)>>>8|(vl&255)<<8)>>>1}var Uh=function(e,n,o){for(var h=e.length,g=0,v=new xu(n);g<h;++g)e[g]&&++v[e[g]-1];var S=new xu(n);for(g=0;g<n;++g)S[g]=S[g-1]+v[g-1]<<1;var u;if(o){u=new xu(1<<n);var I=15-n;for(g=0;g<h;++g)if(e[g])for(var N=g<<4|e[g],j=n-e[g],q=S[e[g]-1]++<<j,V=q|(1<<j)-1;q<=V;++q)u[Wg[q]>>>I]=N}else for(u=new xu(h),g=0;g<h;++g)e[g]&&(u[g]=Wg[S[e[g]-1]++]>>>15-e[g]);return u},fd=new To(288);for(var ti=0;ti<144;++ti)fd[ti]=8;for(var ti=144;ti<256;++ti)fd[ti]=9;for(var ti=256;ti<280;++ti)fd[ti]=7;for(var ti=280;ti<288;++ti)fd[ti]=8;var db=new To(32);for(var ti=0;ti<32;++ti)db[ti]=5;var zC=Uh(fd,9,1),AC=Uh(db,5,1),Om=function(e){for(var n=e[0],o=1;o<e.length;++o)e[o]>n&&(n=e[o]);return n},ws=function(e,n,o){var h=n/8|0;return(e[h]|e[h+1]<<8)>>(n&7)&o},Nm=function(e,n){var o=n/8|0;return(e[o]|e[o+1]<<8|e[o+2]<<16)>>(n&7)},MC=function(e){return(e+7)/8|0},LC=function(e,n,o){(n==null||n<0)&&(n=0),(o==null||o>e.length)&&(o=e.length);var h=new(e.BYTES_PER_ELEMENT==2?xu:e.BYTES_PER_ELEMENT==4?sb:To)(o-n);return h.set(e.subarray(n,o)),h},DC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ts=function(e,n,o){var h=new Error(n||DC[e]);if(h.code=e,Error.captureStackTrace&&Error.captureStackTrace(h,Ts),!o)throw h;return h},J_=function(e,n,o){var h=e.length;if(!h||o&&o.f&&!o.l)return n||new To(0);var g=!n||o,v=!o||o.i;o||(o={}),n||(n=new To(h*3));var S=function(Ct){var gn=n.length;if(Ct>gn){var Ln=new To(Math.max(gn*2,Ct));Ln.set(n),n=Ln}},u=o.f||0,I=o.p||0,N=o.b||0,j=o.l,q=o.d,V=o.m,he=o.n,ge=h*8;do{if(!j){u=ws(e,I,1);var pe=ws(e,I+1,3);if(I+=3,pe)if(pe==1)j=zC,q=AC,V=9,he=5;else if(pe==2){var te=ws(e,I,31)+257,Te=ws(e,I+10,15)+4,Ae=te+ws(e,I+5,31)+1;I+=14;for(var $e=new To(Ae),Ne=new To(19),Be=0;Be<Te;++Be)Ne[PC[Be]]=ws(e,I+Be*3,7);I+=Te*3;for(var lt=Om(Ne),dt=(1<<lt)-1,Pt=Uh(Ne,lt,1),Be=0;Be<Ae;){var Lt=Pt[ws(e,I,dt)];I+=Lt&15;var Ee=Lt>>>4;if(Ee<16)$e[Be++]=Ee;else{var on=0,At=0;for(Ee==16?(At=3+ws(e,I,3),I+=2,on=$e[Be-1]):Ee==17?(At=3+ws(e,I,7),I+=3):Ee==18&&(At=11+ws(e,I,127),I+=7);At--;)$e[Be++]=on}}var cn=$e.subarray(0,te),Ke=$e.subarray(te);V=Om(cn),he=Om(Ke),j=Uh(cn,V,1),q=Uh(Ke,he,1)}else Ts(1);else{var Ee=MC(I)+4,ne=e[Ee-4]|e[Ee-3]<<8,Q=Ee+ne;if(Q>h){v&&Ts(0);break}g&&S(N+ne),n.set(e.subarray(Ee,Q),N),o.b=N+=ne,o.p=I=Q*8,o.f=u;continue}if(I>ge){v&&Ts(0);break}}g&&S(N+131072);for(var En=(1<<V)-1,Fe=(1<<he)-1,ct=I;;ct=I){var on=j[Nm(e,I)&En],qe=on>>>4;if(I+=on&15,I>ge){v&&Ts(0);break}if(on||Ts(2),qe<256)n[N++]=qe;else if(qe==256){ct=I,j=null;break}else{var wt=qe-254;if(qe>264){var Be=qe-257,It=ab[Be];wt=ws(e,I,(1<<It)-1)+hb[Be],I+=It}var Qt=q[Nm(e,I)&Fe],Rt=Qt>>>4;Qt||Ts(3),I+=Qt&15;var Ke=IC[Rt];if(Rt>3){var It=lb[Rt];Ke+=Nm(e,I)&(1<<It)-1,I+=It}if(I>ge){v&&Ts(0);break}g&&S(N+131072);for(var Nt=N+wt;N<Nt;N+=4)n[N]=n[N-Ke],n[N+1]=n[N+1-Ke],n[N+2]=n[N+2-Ke],n[N+3]=n[N+3-Ke];N=Nt}}o.l=j,o.p=ct,o.b=N,o.f=u,j&&(u=1,o.m=V,o.d=q,o.n=he)}while(!u);return N==n.length?n:LC(n,0,N)},RC=new To(0),BC=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Ts(6,"invalid gzip data");var n=e[3],o=10;n&4&&(o+=e[10]|(e[11]<<8)+2);for(var h=(n>>3&1)+(n>>4&1);h>0;h-=!e[o++]);return o+(n&2)},FC=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},OC=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&Ts(6,"invalid zlib data"),e[1]&32&&Ts(6,"invalid zlib data: preset dictionaries not supported")};function NC(e,n){return J_(e,n)}function UC(e,n){return J_(e.subarray(BC(e),-8),n||new To(FC(e)))}function VC(e,n){return J_((OC(e),e.subarray(2,-4)),n)}function $C(e,n){return e[0]==31&&e[1]==139&&e[2]==8?UC(e,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?NC(e,n):VC(e,n)}var ZC=typeof TextDecoder!="undefined"&&new TextDecoder,jC=0;try{ZC.decode(RC,{stream:!0}),jC=1}catch{}var Q_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Q_.read=function(e,n,o,h,g){var v,S,u=g*8-h-1,I=(1<<u)-1,N=I>>1,j=-7,q=o?g-1:0,V=o?-1:1,he=e[n+q];for(q+=V,v=he&(1<<-j)-1,he>>=-j,j+=u;j>0;v=v*256+e[n+q],q+=V,j-=8);for(S=v&(1<<-j)-1,v>>=-j,j+=h;j>0;S=S*256+e[n+q],q+=V,j-=8);if(v===0)v=1-N;else{if(v===I)return S?NaN:(he?-1:1)*(1/0);S=S+Math.pow(2,h),v=v-N}return(he?-1:1)*S*Math.pow(2,v-h)};Q_.write=function(e,n,o,h,g,v){var S,u,I,N=v*8-g-1,j=(1<<N)-1,q=j>>1,V=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=h?0:v-1,ge=h?1:-1,pe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,S=j):(S=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-S))<1&&(S--,I*=2),S+q>=1?n+=V/I:n+=V*Math.pow(2,1-q),n*I>=2&&(S++,I/=2),S+q>=j?(u=0,S=j):S+q>=1?(u=(n*I-1)*Math.pow(2,g),S=S+q):(u=n*Math.pow(2,q-1)*Math.pow(2,g),S=0));g>=8;e[o+he]=u&255,he+=ge,u/=256,g-=8);for(S=S<<g|u,N+=g;N>0;e[o+he]=S&255,he+=ge,S/=256,N-=8);e[o+he-ge]|=pe*128};var GC=In,rp=Q_;function In(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}In.Varint=0;In.Fixed64=1;In.Bytes=2;In.Fixed32=5;var qg=(1<<16)*(1<<16),rx=1/qg,WC=12,pb=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");In.prototype={destroy:function(){this.buf=null},readFields:function(e,n,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),g=h>>3,v=this.pos;this.type=h&7,e(g,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(e,n){return this.readFields(e,n,this.readVarint()+this.pos)},readFixed32:function(){var e=op(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=sx(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=op(this.buf,this.pos)+op(this.buf,this.pos+4)*qg;return this.pos+=8,e},readSFixed64:function(){var e=op(this.buf,this.pos)+sx(this.buf,this.pos+4)*qg;return this.pos+=8,e},readFloat:function(){var e=rp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=rp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var n=this.buf,o,h;return h=n[this.pos++],o=h&127,h<128||(h=n[this.pos++],o|=(h&127)<<7,h<128)||(h=n[this.pos++],o|=(h&127)<<14,h<128)||(h=n[this.pos++],o|=(h&127)<<21,h<128)?o:(h=n[this.pos],o|=(h&15)<<28,qC(o,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=WC&&pb?aI(this.buf,n,e):sI(this.buf,n,e)},readBytes:function(){var e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n},readPackedVarint:function(e,n){if(this.type!==In.Bytes)return e.push(this.readVarint(n));var o=Fa(this);for(e=e||[];this.pos<o;)e.push(this.readVarint(n));return e},readPackedSVarint:function(e){if(this.type!==In.Bytes)return e.push(this.readSVarint());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==In.Bytes)return e.push(this.readBoolean());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==In.Bytes)return e.push(this.readFloat());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==In.Bytes)return e.push(this.readDouble());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==In.Bytes)return e.push(this.readFixed32());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==In.Bytes)return e.push(this.readSFixed32());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==In.Bytes)return e.push(this.readFixed64());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==In.Bytes)return e.push(this.readSFixed64());var n=Fa(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed64());return e},skip:function(e){var n=e&7;if(n===In.Varint)for(;this.buf[this.pos++]>127;);else if(n===In.Bytes)this.pos=this.readVarint()+this.pos;else if(n===In.Fixed32)this.pos+=4;else if(n===In.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+n)},writeTag:function(e,n){this.writeVarint(e<<3|n)},realloc:function(e){for(var n=this.length||16;n<this.pos+e;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),oc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),oc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),oc(this.buf,e&-1,this.pos),oc(this.buf,Math.floor(e*rx),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),oc(this.buf,e&-1,this.pos),oc(this.buf,Math.floor(e*rx),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){HC(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var n=this.pos;this.pos=lI(this.buf,e,this.pos);var o=this.pos-n;o>=128&&ox(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(e){this.realloc(4),rp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),rp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var n=e.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=e[o]},writeRawMessage:function(e,n){this.pos++;var o=this.pos;e(n,this);var h=this.pos-o;h>=128&&ox(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(e,n,o){this.writeTag(e,In.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(e,n){n.length&&this.writeMessage(e,YC,n)},writePackedSVarint:function(e,n){n.length&&this.writeMessage(e,JC,n)},writePackedBoolean:function(e,n){n.length&&this.writeMessage(e,tI,n)},writePackedFloat:function(e,n){n.length&&this.writeMessage(e,QC,n)},writePackedDouble:function(e,n){n.length&&this.writeMessage(e,eI,n)},writePackedFixed32:function(e,n){n.length&&this.writeMessage(e,nI,n)},writePackedSFixed32:function(e,n){n.length&&this.writeMessage(e,iI,n)},writePackedFixed64:function(e,n){n.length&&this.writeMessage(e,rI,n)},writePackedSFixed64:function(e,n){n.length&&this.writeMessage(e,oI,n)},writeBytesField:function(e,n){this.writeTag(e,In.Bytes),this.writeBytes(n)},writeFixed32Field:function(e,n){this.writeTag(e,In.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(e,n){this.writeTag(e,In.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(e,n){this.writeTag(e,In.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(e,n){this.writeTag(e,In.Fixed64),this.writeSFixed64(n)},writeVarintField:function(e,n){this.writeTag(e,In.Varint),this.writeVarint(n)},writeSVarintField:function(e,n){this.writeTag(e,In.Varint),this.writeSVarint(n)},writeStringField:function(e,n){this.writeTag(e,In.Bytes),this.writeString(n)},writeFloatField:function(e,n){this.writeTag(e,In.Fixed32),this.writeFloat(n)},writeDoubleField:function(e,n){this.writeTag(e,In.Fixed64),this.writeDouble(n)},writeBooleanField:function(e,n){this.writeVarintField(e,Boolean(n))}};function qC(e,n,o){var h=o.buf,g,v;if(v=h[o.pos++],g=(v&112)>>4,v<128||(v=h[o.pos++],g|=(v&127)<<3,v<128)||(v=h[o.pos++],g|=(v&127)<<10,v<128)||(v=h[o.pos++],g|=(v&127)<<17,v<128)||(v=h[o.pos++],g|=(v&127)<<24,v<128)||(v=h[o.pos++],g|=(v&1)<<31,v<128))return rc(e,g,n);throw new Error("Expected varint not more than 10 bytes")}function Fa(e){return e.type===In.Bytes?e.readVarint()+e.pos:e.pos+1}function rc(e,n,o){return o?n*4294967296+(e>>>0):(n>>>0)*4294967296+(e>>>0)}function HC(e,n){var o,h;if(e>=0?(o=e%4294967296|0,h=e/4294967296|0):(o=~(-e%4294967296),h=~(-e/4294967296),o^4294967295?o=o+1|0:(o=0,h=h+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),XC(o,h,n),KC(h,n)}function XC(e,n,o){o.buf[o.pos++]=e&127|128,e>>>=7,o.buf[o.pos++]=e&127|128,e>>>=7,o.buf[o.pos++]=e&127|128,e>>>=7,o.buf[o.pos++]=e&127|128,e>>>=7,o.buf[o.pos]=e&127}function KC(e,n){var o=(e&7)<<4;n.buf[n.pos++]|=o|((e>>>=3)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127)))))}function ox(e,n,o){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(Math.LN2*7));o.realloc(h);for(var g=o.pos-1;g>=e;g--)o.buf[g+h]=o.buf[g]}function YC(e,n){for(var o=0;o<e.length;o++)n.writeVarint(e[o])}function JC(e,n){for(var o=0;o<e.length;o++)n.writeSVarint(e[o])}function QC(e,n){for(var o=0;o<e.length;o++)n.writeFloat(e[o])}function eI(e,n){for(var o=0;o<e.length;o++)n.writeDouble(e[o])}function tI(e,n){for(var o=0;o<e.length;o++)n.writeBoolean(e[o])}function nI(e,n){for(var o=0;o<e.length;o++)n.writeFixed32(e[o])}function iI(e,n){for(var o=0;o<e.length;o++)n.writeSFixed32(e[o])}function rI(e,n){for(var o=0;o<e.length;o++)n.writeFixed64(e[o])}function oI(e,n){for(var o=0;o<e.length;o++)n.writeSFixed64(e[o])}function op(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+e[n+3]*16777216}function oc(e,n,o){e[o]=n,e[o+1]=n>>>8,e[o+2]=n>>>16,e[o+3]=n>>>24}function sx(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+(e[n+3]<<24)}function sI(e,n,o){for(var h="",g=n;g<o;){var v=e[g],S=null,u=v>239?4:v>223?3:v>191?2:1;if(g+u>o)break;var I,N,j;u===1?v<128&&(S=v):u===2?(I=e[g+1],(I&192)===128&&(S=(v&31)<<6|I&63,S<=127&&(S=null))):u===3?(I=e[g+1],N=e[g+2],(I&192)===128&&(N&192)===128&&(S=(v&15)<<12|(I&63)<<6|N&63,(S<=2047||S>=55296&&S<=57343)&&(S=null))):u===4&&(I=e[g+1],N=e[g+2],j=e[g+3],(I&192)===128&&(N&192)===128&&(j&192)===128&&(S=(v&15)<<18|(I&63)<<12|(N&63)<<6|j&63,(S<=65535||S>=1114112)&&(S=null))),S===null?(S=65533,u=1):S>65535&&(S-=65536,h+=String.fromCharCode(S>>>10&1023|55296),S=56320|S&1023),h+=String.fromCharCode(S),g+=u}return h}function aI(e,n,o){return pb.decode(e.subarray(n,o))}function lI(e,n,o){for(var h=0,g,v;h<n.length;h++){if(g=n.charCodeAt(h),g>55295&&g<57344)if(v)if(g<56320){e[o++]=239,e[o++]=191,e[o++]=189,v=g;continue}else g=v-55296<<10|g-56320|65536,v=null;else{g>56319||h+1===n.length?(e[o++]=239,e[o++]=191,e[o++]=189):v=g;continue}else v&&(e[o++]=239,e[o++]=191,e[o++]=189,v=null);g<128?e[o++]=g:(g<2048?e[o++]=g>>6|192:(g<65536?e[o++]=g>>12|224:(e[o++]=g>>18|240,e[o++]=g>>12&63|128),e[o++]=g>>6&63|128),e[o++]=g&63|128)}return o}var uI=Cc;function Cc(e,n){this.x=e,this.y=n}Cc.prototype={clone:function(){return new Cc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,n){return this.clone()._rotateAround(e,n)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var n=e.x-this.x,o=e.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,n){return Math.atan2(this.x*n-this.y*e,this.x*e+this.y*n)},_matMult:function(e){var n=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=n,this.y=o,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var n=Math.cos(e),o=Math.sin(e),h=n*this.x-o*this.y,g=o*this.x+n*this.y;return this.x=h,this.y=g,this},_rotateAround:function(e,n){var o=Math.cos(e),h=Math.sin(e),g=n.x+o*(this.x-n.x)-h*(this.y-n.y),v=n.y+h*(this.x-n.x)+o*(this.y-n.y);return this.x=g,this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Cc.convert=function(e){return e instanceof Cc?e:Array.isArray(e)?new Cc(e[0],e[1]):e};var cI=uI,hI=Rc;function Rc(e,n,o,h,g){this.properties={},this.extent=o,this.type=0,this._pbf=e,this._geometry=-1,this._keys=h,this._values=g,e.readFields(dI,this,n)}function dI(e,n,o){e==1?n.id=o.readVarint():e==2?pI(o,n):e==3?n.type=o.readVarint():e==4&&(n._geometry=o.pos)}function pI(e,n){for(var o=e.readVarint()+e.pos;e.pos<o;){var h=n._keys[e.readVarint()],g=n._values[e.readVarint()];n.properties[h]=g}}Rc.types=["Unknown","Point","LineString","Polygon"];Rc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,o=1,h=0,g=0,v=0,S=[],u;e.pos<n;){if(h<=0){var I=e.readVarint();o=I&7,h=I>>3}if(h--,o===1||o===2)g+=e.readSVarint(),v+=e.readSVarint(),o===1&&(u&&S.push(u),u=[]),u.push(new cI(g,v));else if(o===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+o)}return u&&S.push(u),S};Rc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,o=1,h=0,g=0,v=0,S=1/0,u=-1/0,I=1/0,N=-1/0;e.pos<n;){if(h<=0){var j=e.readVarint();o=j&7,h=j>>3}if(h--,o===1||o===2)g+=e.readSVarint(),v+=e.readSVarint(),g<S&&(S=g),g>u&&(u=g),v<I&&(I=v),v>N&&(N=v);else if(o!==7)throw new Error("unknown command "+o)}return[S,I,u,N]};Rc.prototype.toGeoJSON=function(e,n,o){var h=this.extent*Math.pow(2,o),g=this.extent*e,v=this.extent*n,S=this.loadGeometry(),u=Rc.types[this.type],I,N;function j(he){for(var ge=0;ge<he.length;ge++){var pe=he[ge],Ee=180-(pe.y+v)*360/h;he[ge]=[(pe.x+g)*360/h-180,360/Math.PI*Math.atan(Math.exp(Ee*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(I=0;I<S.length;I++)q[I]=S[I][0];S=q,j(S);break;case 2:for(I=0;I<S.length;I++)j(S[I]);break;case 3:for(S=fI(S),I=0;I<S.length;I++)for(N=0;N<S[I].length;N++)j(S[I][N]);break}S.length===1?S=S[0]:u="Multi"+u;var V={type:"Feature",geometry:{type:u,coordinates:S},properties:this.properties};return"id"in this&&(V.id=this.id),V};function fI(e){var n=e.length;if(n<=1)return[e];for(var o=[],h,g,v=0;v<n;v++){var S=mI(e[v]);S!==0&&(g===void 0&&(g=S<0),g===S<0?(h&&o.push(h),h=[e[v]]):h.push(e[v]))}return h&&o.push(h),o}function mI(e){for(var n=0,o=0,h=e.length,g=h-1,v,S;o<h;g=o++)v=e[o],S=e[g],n+=(S.x-v.x)*(v.y+S.y);return n}var gI=hI,_I=fb;function fb(e,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(yI,this,n),this.length=this._features.length}function yI(e,n,o){e===15?n.version=o.readVarint():e===1?n.name=o.readString():e===5?n.extent=o.readVarint():e===2?n._features.push(o.pos):e===3?n._keys.push(o.readString()):e===4&&n._values.push(vI(o))}function vI(e){for(var n=null,o=e.readVarint()+e.pos;e.pos<o;){var h=e.readVarint()>>3;n=h===1?e.readString():h===2?e.readFloat():h===3?e.readDouble():h===4?e.readVarint64():h===5?e.readVarint():h===6?e.readSVarint():h===7?e.readBoolean():null}return n}fb.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var n=this._pbf.readVarint()+this._pbf.pos;return new gI(this._pbf,n,this.extent,this._keys,this._values)};var xI=_I,wI=bI;function bI(e,n){this.layers=e.readFields(SI,{},n)}function SI(e,n,o){if(e===3){var h=new xI(o,o.readVarint()+o.pos);h.length&&(n[h.name]=h)}}var EI=wI;const Hg=Math.PI,Xg=2*Hg,mu=1e-6,TI=Xg-mu;function Kg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mb(){return new Kg}Kg.prototype=mb.prototype={constructor:Kg,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,o,h){this._+="Q"+ +e+","+ +n+","+(this._x1=+o)+","+(this._y1=+h)},bezierCurveTo:function(e,n,o,h,g,v){this._+="C"+ +e+","+ +n+","+ +o+","+ +h+","+(this._x1=+g)+","+(this._y1=+v)},arcTo:function(e,n,o,h,g){e=+e,n=+n,o=+o,h=+h,g=+g;var v=this._x1,S=this._y1,u=o-e,I=h-n,N=v-e,j=S-n,q=N*N+j*j;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(q>mu)if(!(Math.abs(j*u-I*N)>mu)||!g)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var V=o-v,he=h-S,ge=u*u+I*I,pe=V*V+he*he,Ee=Math.sqrt(ge),ne=Math.sqrt(q),Q=g*Math.tan((Hg-Math.acos((ge+q-pe)/(2*Ee*ne)))/2),te=Q/ne,Te=Q/Ee;Math.abs(te-1)>mu&&(this._+="L"+(e+te*N)+","+(n+te*j)),this._+="A"+g+","+g+",0,0,"+ +(j*V>N*he)+","+(this._x1=e+Te*u)+","+(this._y1=n+Te*I)}},arc:function(e,n,o,h,g,v){e=+e,n=+n,o=+o,v=!!v;var S=o*Math.cos(h),u=o*Math.sin(h),I=e+S,N=n+u,j=1^v,q=v?h-g:g-h;if(o<0)throw new Error("negative radius: "+o);this._x1===null?this._+="M"+I+","+N:(Math.abs(this._x1-I)>mu||Math.abs(this._y1-N)>mu)&&(this._+="L"+I+","+N),o&&(q<0&&(q=q%Xg+Xg),q>TI?this._+="A"+o+","+o+",0,1,"+j+","+(e-S)+","+(n-u)+"A"+o+","+o+",0,1,"+j+","+(this._x1=I)+","+(this._y1=N):q>mu&&(this._+="A"+o+","+o+",0,"+ +(q>=Hg)+","+j+","+(this._x1=e+o*Math.cos(g))+","+(this._y1=n+o*Math.sin(g))))},rect:function(e,n,o,h){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +o+"v"+ +h+"h"+-o+"Z"},toString:function(){return this._}};function PI(e){for(var n=e.length/6|0,o=new Array(n),h=0;h<n;)o[h]="#"+e.slice(h*6,++h*6);return o}var kI=PI("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");const CI=Mn("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"50%",padding:"$2"}),II=Mn("div",{width:"50%",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",backgroundSize:"20px 20px",backgroundImage:"linear-gradient(to right, #111 1px, transparent 1px),linear-gradient(to bottom, #111 1px, transparent 1px);"}),zI=Mn("tr",{cursor:"pointer"},{"&:hover":{color:"red"}}),AI=Mn("div",{display:"flex"}),MI=e=>wi(zI,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[_t("td",{children:e.entry.z}),_t("td",{children:e.entry.x}),_t("td",{children:e.entry.y}),_t("td",{children:e.entry.offset}),_t("td",{children:e.entry.length}),_t("td",{children:e.entry.is_dir})]});let LI=(e,n)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0;const DI=e=>{let[n,o]=re.exports.useState(!1),h="none",g="";e.feature.type===3?h=n?"white":"currentColor":g=n?"white":"currentColor";let v=()=>{o(!0)},S=()=>{o(!1)},u=()=>{e.setSelectedFeature(e.feature)};return _t("path",{d:e.feature.path,stroke:g,strokeWidth:10,fill:h,fillOpacity:.5,onMouseOver:v,onMouseOut:S,onMouseDown:u})},RI=e=>{let n=e.layer.features.map((o,h)=>_t(DI,{feature:o,setSelectedFeature:e.setSelectedFeature},h));return _t("g",{color:e.color,children:n})},BI=Mn("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),FI=e=>{let n=[];for(var o in e.feature.properties)n.push([o,e.feature.properties[o]]);const h=n.map((g,v)=>wi("tr",{children:[_t("td",{children:g[0]}),_t("td",{children:g[1]})]},v));return wi(BI,{children:[e.feature.layerName,_t("table",{children:_t("tbody",{children:h})})]})},OI=e=>{let[n,o]=re.exports.useState([]),[h,g]=re.exports.useState(null);re.exports.useEffect(()=>{let S=async u=>{let I=await e.file.source.getBytes(u.offset,u.length);e.tileType==Ga.MVT_GZ&&(I=new DataView($C(new Uint8Array(I.buffer)).buffer));let N=new EI(new GC(new Uint8Array(I.buffer,I.byteOffset,I.byteLength))),j=[];for(let[he,ge]of Object.entries(N.layers)){let pe=[];for(var q=0;q<ge.length;q++){let Ee=ge.feature(q),ne=mb(),Q=Ee.loadGeometry();if(Ee.type===1)for(let te of Q)for(let Te of te)ne.arc(Te.x,Te.y,20,0,2*Math.PI);else for(let te of Q){ne.moveTo(te[0].x,te[0].y);for(var V=1;V<te.length;V++)ne.lineTo(te[V].x,te[V].y);Ee.type===3&&ne.closePath()}pe.push({path:ne.toString(),type:Ee.type,id:Ee.id,properties:Ee.properties,layerName:he})}j.push({features:pe,name:he})}j.sort(LI),o(j)};e.entry&&S(e.entry)},[e.entry]);let v=n.map((S,u)=>_t(RI,{layer:S,color:kI[u%12],setSelectedFeature:g},u));return wi("div",{children:[_t("svg",{viewBox:"0 0 4096 4096",width:800,height:800,children:v}),h?_t(FI,{feature:h}):null]})},NI=e=>{let[n,o]=re.exports.useState("");return re.exports.useEffect(()=>{let h=async g=>{let v=await e.file.source.getBytes(g.offset,g.length),S=new Blob([v]);var u=window.URL.createObjectURL(S);o(u)};e.entry&&h(e.entry)},[e.entry]),_t("img",{src:n})};function UI(e){let[n,o]=re.exports.useState([]),[h,g]=re.exports.useState(null),[v,S]=re.exports.useState(Ga.UNKNOWN);re.exports.useEffect(()=>{(async()=>{let j=await e.file.root_entries(),q=await iy(e.file);o(j),S(q)})()},[e.file]);let u=n.map((N,j)=>_t(MI,{entry:N,setSelectedEntry:g},j)),I=_t("div",{});return h&&v&&(v===Ga.MVT||v===Ga.MVT_GZ?I=_t(OI,{file:e.file,entry:h,tileType:v}):I=_t(NI,{file:e.file,entry:h})),wi(AI,{children:[_t(CI,{children:wi("table",{children:[_t("thead",{children:wi("tr",{children:[_t("th",{children:"z"}),_t("th",{children:"x"}),_t("th",{children:"y"}),_t("th",{children:"offset"}),_t("th",{children:"length"}),_t("th",{children:"is directory"})]})}),_t("tbody",{children:u})]})}),_t(II,{children:I})]})}var Yg={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(o,h){h(n)})(wx,function(o){var h="1.8.0";function g(a){var d,w,P,D;for(w=1,P=arguments.length;w<P;w++){D=arguments[w];for(d in D)a[d]=D[d]}return a}var v=Object.create||function(){function a(){}return function(d){return a.prototype=d,new a}}();function S(a,d){var w=Array.prototype.slice;if(a.bind)return a.bind.apply(a,w.call(arguments,1));var P=w.call(arguments,2);return function(){return a.apply(d,P.length?P.concat(w.call(arguments)):arguments)}}var u=0;function I(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function N(a,d,w){var P,D,G,ue;return ue=function(){P=!1,D&&(G.apply(w,D),D=!1)},G=function(){P?D=arguments:(a.apply(w,arguments),setTimeout(ue,d),P=!0)},G}function j(a,d,w){var P=d[1],D=d[0],G=P-D;return a===P&&w?a:((a-D)%G+G)%G+D}function q(){return!1}function V(a,d){if(d===!1)return a;var w=Math.pow(10,d===void 0?6:d);return Math.round(a*w)/w}function he(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function ge(a){return he(a).split(/\s+/)}function pe(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?v(a.options):{});for(var w in d)a.options[w]=d[w];return a.options}function Ee(a,d,w){var P=[];for(var D in a)P.push(encodeURIComponent(w?D.toUpperCase():D)+"="+encodeURIComponent(a[D]));return(!d||d.indexOf("?")===-1?"?":"&")+P.join("&")}var ne=/\{ *([\w_ -]+) *\}/g;function Q(a,d){return a.replace(ne,function(w,P){var D=d[P];if(D===void 0)throw new Error("No value provided for variable "+w);return typeof D=="function"&&(D=D(d)),D})}var te=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function Te(a,d){for(var w=0;w<a.length;w++)if(a[w]===d)return w;return-1}var Ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $e(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Ne=0;function Be(a){var d=+new Date,w=Math.max(0,16-(d-Ne));return Ne=d+w,window.setTimeout(a,w)}var lt=window.requestAnimationFrame||$e("RequestAnimationFrame")||Be,dt=window.cancelAnimationFrame||$e("CancelAnimationFrame")||$e("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Pt(a,d,w){if(w&&lt===Be)a.call(d);else return lt.call(window,S(a,d))}function Lt(a){a&&dt.call(window,a)}var on={__proto__:null,extend:g,create:v,bind:S,get lastId(){return u},stamp:I,throttle:N,wrapNum:j,falseFn:q,formatNum:V,trim:he,splitWords:ge,setOptions:pe,getParamString:Ee,template:Q,isArray:te,indexOf:Te,emptyImageUrl:Ae,requestFn:lt,cancelFn:dt,requestAnimFrame:Pt,cancelAnimFrame:Lt};function At(){}At.extend=function(a){var d=function(){pe(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=d.__super__=this.prototype,P=v(w);P.constructor=d,d.prototype=P;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(d[D]=this[D]);return a.statics&&g(d,a.statics),a.includes&&(cn(a.includes),g.apply(null,[P].concat(a.includes))),g(P,a),delete P.statics,delete P.includes,P.options&&(P.options=w.options?v(w.options):{},g(P.options,a.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var G=0,ue=P._initHooks.length;G<ue;G++)P._initHooks[G].call(this)}},d},At.include=function(a){var d=this.prototype.options;return g(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},At.mergeOptions=function(a){return g(this.prototype.options,a),this},At.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),w=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function cn(a){if(!(typeof L=="undefined"||!L||!L.Mixin)){a=te(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ke={on:function(a,d,w){if(typeof a=="object")for(var P in a)this._on(P,a[P],d);else{a=ge(a);for(var D=0,G=a.length;D<G;D++)this._on(a[D],d,w)}return this},off:function(a,d,w){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var P in a)this._off(P,a[P],d);else{a=ge(a);for(var D=arguments.length===1,G=0,ue=a.length;G<ue;G++)D?this._off(a[G]):this._off(a[G],d,w)}return this},_on:function(a,d,w){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}this._events=this._events||{};var P=this._events[a];P||(P=[],this._events[a]=P),w===this&&(w=void 0);for(var D={fn:d,ctx:w},G=P,ue=0,be=G.length;ue<be;ue++)if(G[ue].fn===d&&G[ue].ctx===w)return;G.push(D)},_off:function(a,d,w){var P,D,G;if(!!this._events&&(P=this._events[a],!!P)){if(arguments.length===1){if(this._firingCount)for(D=0,G=P.length;D<G;D++)P[D].fn=q;delete this._events[a];return}if(w===this&&(w=void 0),typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}for(D=0,G=P.length;D<G;D++){var ue=P[D];if(ue.ctx===w&&ue.fn===d){this._firingCount&&(ue.fn=q,this._events[a]=P=P.slice()),P.splice(D,1);return}}console.warn("listener not found")}},fire:function(a,d,w){if(!this.listens(a,w))return this;var P=g({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var D=this._events[a];if(D){this._firingCount=this._firingCount+1||1;for(var G=0,ue=D.length;G<ue;G++){var be=D[G];be.fn.call(be.ctx||this,P)}this._firingCount--}}return w&&this._propagateEvent(P),this},listens:function(a,d){typeof a!="string"&&console.warn('"string" type argument expected');var w=this._events&&this._events[a];if(w&&w.length)return!0;if(d){for(var P in this._eventParents)if(this._eventParents[P].listens(a,d))return!0}return!1},once:function(a,d,w){if(typeof a=="object"){for(var P in a)this.once(P,a[P],d);return this}var D=S(function(){this.off(a,d,w).off(a,D,w)},this);return this.on(a,d,w).on(a,D,w)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[I(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[I(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,g({layer:a.target,propagatedFrom:a.target},a),!0)}};Ke.addEventListener=Ke.on,Ke.removeEventListener=Ke.clearAllEventListeners=Ke.off,Ke.addOneTimeEventListener=Ke.once,Ke.fireEvent=Ke.fire,Ke.hasEventListeners=Ke.listens;var En=At.extend(Ke);function Fe(a,d,w){this.x=w?Math.round(a):a,this.y=w?Math.round(d):d}var ct=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Fe.prototype={clone:function(){return new Fe(this.x,this.y)},add:function(a){return this.clone()._add(qe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(qe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Fe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Fe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ct(this.x),this.y=ct(this.y),this},distanceTo:function(a){a=qe(a);var d=a.x-this.x,w=a.y-this.y;return Math.sqrt(d*d+w*w)},equals:function(a){return a=qe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=qe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+V(this.x)+", "+V(this.y)+")"}};function qe(a,d,w){return a instanceof Fe?a:te(a)?new Fe(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Fe(a.x,a.y):new Fe(a,d,w)}function wt(a,d){if(!!a)for(var w=d?[a,d]:a,P=0,D=w.length;P<D;P++)this.extend(w[P])}wt.prototype={extend:function(a){return a=qe(a),!this.min&&!this.max?(this.min=a.clone(),this.max=a.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(a){return new Fe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new Fe(this.min.x,this.max.y)},getTopRight:function(){return new Fe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,w;return typeof a[0]=="number"||a instanceof Fe?a=qe(a):a=It(a),a instanceof wt?(d=a.min,w=a.max):d=w=a,d.x>=this.min.x&&w.x<=this.max.x&&d.y>=this.min.y&&w.y<=this.max.y},intersects:function(a){a=It(a);var d=this.min,w=this.max,P=a.min,D=a.max,G=D.x>=d.x&&P.x<=w.x,ue=D.y>=d.y&&P.y<=w.y;return G&&ue},overlaps:function(a){a=It(a);var d=this.min,w=this.max,P=a.min,D=a.max,G=D.x>d.x&&P.x<w.x,ue=D.y>d.y&&P.y<w.y;return G&&ue},isValid:function(){return!!(this.min&&this.max)}};function It(a,d){return!a||a instanceof wt?a:new wt(a,d)}function Qt(a,d){if(!!a)for(var w=d?[a,d]:a,P=0,D=w.length;P<D;P++)this.extend(w[P])}Qt.prototype={extend:function(a){var d=this._southWest,w=this._northEast,P,D;if(a instanceof Nt)P=a,D=a;else if(a instanceof Qt){if(P=a._southWest,D=a._northEast,!P||!D)return this}else return a?this.extend(Ct(a)||Rt(a)):this;return!d&&!w?(this._southWest=new Nt(P.lat,P.lng),this._northEast=new Nt(D.lat,D.lng)):(d.lat=Math.min(P.lat,d.lat),d.lng=Math.min(P.lng,d.lng),w.lat=Math.max(D.lat,w.lat),w.lng=Math.max(D.lng,w.lng)),this},pad:function(a){var d=this._southWest,w=this._northEast,P=Math.abs(d.lat-w.lat)*a,D=Math.abs(d.lng-w.lng)*a;return new Qt(new Nt(d.lat-P,d.lng-D),new Nt(w.lat+P,w.lng+D))},getCenter:function(){return new Nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Nt||"lat"in a?a=Ct(a):a=Rt(a);var d=this._southWest,w=this._northEast,P,D;return a instanceof Qt?(P=a.getSouthWest(),D=a.getNorthEast()):P=D=a,P.lat>=d.lat&&D.lat<=w.lat&&P.lng>=d.lng&&D.lng<=w.lng},intersects:function(a){a=Rt(a);var d=this._southWest,w=this._northEast,P=a.getSouthWest(),D=a.getNorthEast(),G=D.lat>=d.lat&&P.lat<=w.lat,ue=D.lng>=d.lng&&P.lng<=w.lng;return G&&ue},overlaps:function(a){a=Rt(a);var d=this._southWest,w=this._northEast,P=a.getSouthWest(),D=a.getNorthEast(),G=D.lat>d.lat&&P.lat<w.lat,ue=D.lng>d.lng&&P.lng<w.lng;return G&&ue},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=Rt(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Rt(a,d){return a instanceof Qt?a:new Qt(a,d)}function Nt(a,d,w){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,w!==void 0&&(this.alt=+w)}Nt.prototype={equals:function(a,d){if(!a)return!1;a=Ct(a);var w=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return w<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+V(this.lat,a)+", "+V(this.lng,a)+")"},distanceTo:function(a){return Ln.distance(this,Ct(a))},wrap:function(){return Ln.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,w=d/Math.cos(Math.PI/180*this.lat);return Rt([this.lat-d,this.lng-w],[this.lat+d,this.lng+w])},clone:function(){return new Nt(this.lat,this.lng,this.alt)}};function Ct(a,d,w){return a instanceof Nt?a:te(a)&&typeof a[0]!="object"?a.length===3?new Nt(a[0],a[1],a[2]):a.length===2?new Nt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Nt(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new Nt(a,d,w)}var gn={latLngToPoint:function(a,d){var w=this.projection.project(a),P=this.scale(d);return this.transformation._transform(w,P)},pointToLatLng:function(a,d){var w=this.scale(d),P=this.transformation.untransform(a,w);return this.projection.unproject(P)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,w=this.scale(a),P=this.transformation.transform(d.min,w),D=this.transformation.transform(d.max,w);return new wt(P,D)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?j(a.lng,this.wrapLng,!0):a.lng,w=this.wrapLat?j(a.lat,this.wrapLat,!0):a.lat,P=a.alt;return new Nt(w,d,P)},wrapLatLngBounds:function(a){var d=a.getCenter(),w=this.wrapLatLng(d),P=d.lat-w.lat,D=d.lng-w.lng;if(P===0&&D===0)return a;var G=a.getSouthWest(),ue=a.getNorthEast(),be=new Nt(G.lat-P,G.lng-D),Le=new Nt(ue.lat-P,ue.lng-D);return new Qt(be,Le)}},Ln=g({},gn,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var w=Math.PI/180,P=a.lat*w,D=d.lat*w,G=Math.sin((d.lat-a.lat)*w/2),ue=Math.sin((d.lng-a.lng)*w/2),be=G*G+Math.cos(P)*Math.cos(D)*ue*ue,Le=2*Math.atan2(Math.sqrt(be),Math.sqrt(1-be));return this.R*Le}}),qr=6378137,Tr={R:qr,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,w=this.MAX_LATITUDE,P=Math.max(Math.min(w,a.lat),-w),D=Math.sin(P*d);return new Fe(this.R*a.lng*d,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(a){var d=180/Math.PI;return new Nt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:function(){var a=qr*Math.PI;return new wt([-a,-a],[a,a])}()};function hr(a,d,w,P){if(te(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=w,this._d=P}hr.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new Fe((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function Li(a,d,w,P){return new hr(a,d,w,P)}var Nn=g({},Ln,{code:"EPSG:3857",projection:Tr,transformation:function(){var a=.5/(Math.PI*Tr.R);return Li(a,.5,-a,.5)}()}),Pr=g({},Nn,{code:"EPSG:900913"});function uo(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function kr(a,d){var w="",P,D,G,ue,be,Le;for(P=0,G=a.length;P<G;P++){for(be=a[P],D=0,ue=be.length;D<ue;D++)Le=be[D],w+=(D?"L":"M")+Le.x+" "+Le.y;w+=d?bt.svg?"z":"x":""}return w||"M0 0"}var ui=document.documentElement.style,Cr="ActiveXObject"in window,$i=Cr&&!document.addEventListener,ki="msLaunchUri"in navigator&&!("documentMode"in document),Zi=ri("webkit"),zo=ri("android"),Ht=ri("android 2")||ri("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Et=zo&&ri("Google")&&it<537&&!("AudioNode"in window),yn=!!window.opera,Fn=!ki&&ri("chrome"),ke=ri("gecko")&&!Zi&&!yn&&!Cr,Qe=!Fn&&ri("safari"),Di=ri("phantom"),ji="OTransition"in ui,hn=navigator.platform.indexOf("Win")===0,Si=Cr&&"transition"in ui,Wn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ht,dr="MozPerspective"in ui,vn=!window.L_DISABLE_3D&&(Si||Wn||dr)&&!ji&&!Di,Xe=typeof orientation!="undefined"||ri("mobile"),Ut=Xe&&Zi,Ft=Xe&&Wn,Ci=!window.PointerEvent&&window.MSPointerEvent,pr=!!(window.PointerEvent||Ci),Vt="ontouchstart"in window||!!window.TouchEvent,es=!window.L_NO_TOUCH&&(Vt||pr),Ir=Xe&&yn,co=Xe&&ke,ii=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tn=function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",q,d),window.removeEventListener("testPassiveEventSupport",q,d)}catch{}return a}(),fr=function(){return!!document.createElement("canvas").getContext}(),ho=!!(document.createElementNS&&uo("svg").createSVGRect),ci=!!ho&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zr=!ho&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}();function ri(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var bt={ie:Cr,ielt9:$i,edge:ki,webkit:Zi,android:zo,android23:Ht,androidStock:Et,opera:yn,chrome:Fn,gecko:ke,safari:Qe,phantom:Di,opera12:ji,win:hn,ie3d:Si,webkit3d:Wn,gecko3d:dr,any3d:vn,mobile:Xe,mobileWebkit:Ut,mobileWebkit3d:Ft,msPointer:Ci,pointer:pr,touch:es,touchNative:Vt,mobileOpera:Ir,mobileGecko:co,retina:ii,passiveEvents:Tn,canvas:fr,svg:ho,vml:zr,inlineSvg:ci},ts=bt.msPointer?"MSPointerDown":"pointerdown",ns=bt.msPointer?"MSPointerMove":"pointermove",J=bt.msPointer?"MSPointerUp":"pointerup",M=bt.msPointer?"MSPointerCancel":"pointercancel",B={touchstart:ts,touchmove:ns,touchend:J,touchcancel:M},X={touchstart:ft,touchmove:Ce,touchend:Ce,touchcancel:Ce},ee={},ie=!1;function fe(a,d,w){return d==="touchstart"&&Ze(),X[d]?(w=X[d].bind(this,w),a.addEventListener(B[d],w,!1),w):(console.warn("wrong event specified:",d),L.Util.falseFn)}function ce(a,d,w){if(!B[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(B[d],w,!1)}function de(a){ee[a.pointerId]=a}function me(a){ee[a.pointerId]&&(ee[a.pointerId]=a)}function Me(a){delete ee[a.pointerId]}function Ze(){ie||(document.addEventListener(ts,de,!0),document.addEventListener(ns,me,!0),document.addEventListener(J,Me,!0),document.addEventListener(M,Me,!0),ie=!0)}function Ce(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var w in ee)d.touches.push(ee[w]);d.changedTouches=[d],a(d)}}function ft(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Bt(d),Ce(a,d)}function rt(a){var d={},w,P;for(P in a)w=a[P],d[P]=w&&w.bind?w.bind(a):w;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var gt=200;function Tt(a,d){a.addEventListener("dblclick",d);var w=0,P;function D(G){if(G.detail!==1){P=G.detail;return}if(!(G.pointerType==="mouse"||G.sourceCapabilities&&!G.sourceCapabilities.firesTouchEvents)){var ue=Date.now();ue-w<=gt?(P++,P===2&&d(rt(G))):P=1,w=ue}}return a.addEventListener("click",D),{dblclick:d,simDblclick:D}}function ln(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var qt=Ms(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jt=Ms(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$t=jt==="webkitTransition"||jt==="OTransition"?jt+"End":"transitionend";function Ot(a){return typeof a=="string"?document.getElementById(a):a}function Dn(a,d){var w=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!w||w==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(a,null);w=P?P[d]:null}return w==="auto"?null:w}function zt(a,d,w){var P=document.createElement(a);return P.className=d||"",w&&w.appendChild(P),P}function Xt(a){var d=a.parentNode;d&&d.removeChild(a)}function oi(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ao(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function Mo(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function xn(a,d){if(a.classList!==void 0)return a.classList.contains(d);var w=As(a);return w.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(w)}function Kt(a,d){if(a.classList!==void 0)for(var w=ge(d),P=0,D=w.length;P<D;P++)a.classList.add(w[P]);else if(!xn(a,d)){var G=As(a);Ul(a,(G?G+" ":"")+d)}}function Un(a,d){a.classList!==void 0?a.classList.remove(d):Ul(a,he((" "+As(a)+" ").replace(" "+d+" "," ")))}function Ul(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function As(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ji(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Vl(a,d)}function Vl(a,d){var w=!1,P="DXImageTransform.Microsoft.Alpha";try{w=a.filters.item(P)}catch{if(d===1)return}d=Math.round(d*100),w?(w.Enabled=d!==100,w.Opacity=d):a.style.filter+=" progid:"+P+"(opacity="+d+")"}function Ms(a){for(var d=document.documentElement.style,w=0;w<a.length;w++)if(a[w]in d)return a[w];return!1}function po(a,d,w){var P=d||new Fe(0,0);a.style[qt]=(bt.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(w?" scale("+w+")":"")}function Kn(a,d){a._leaflet_pos=d,bt.any3d?po(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function Lo(a){return a._leaflet_pos||new Fe(0,0)}var Ar,Do,Ro;if("onselectstart"in document)Ar=function(){Gt(window,"selectstart",Bt)},Do=function(){Pn(window,"selectstart",Bt)};else{var fo=Ms(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ar=function(){if(fo){var a=document.documentElement.style;Ro=a[fo],a[fo]="none"}},Do=function(){fo&&(document.documentElement.style[fo]=Ro,Ro=void 0)}}function Ls(){Gt(window,"dragstart",Bt)}function Ds(){Pn(window,"dragstart",Bt)}var Bo,Rs;function is(a){for(;a.tabIndex===-1;)a=a.parentNode;!a.style||(Vn(),Bo=a,Rs=a.style.outline,a.style.outline="none",Gt(window,"keydown",Vn))}function Vn(){!Bo||(Bo.style.outline=Rs,Bo=void 0,Rs=void 0,Pn(window,"keydown",Vn))}function Bs(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function aa(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var Mu={__proto__:null,TRANSFORM:qt,TRANSITION:jt,TRANSITION_END:$t,get:Ot,getStyle:Dn,create:zt,remove:Xt,empty:oi,toFront:Ao,toBack:Mo,hasClass:xn,addClass:Kt,removeClass:Un,setClass:Ul,getClass:As,setOpacity:Ji,testProp:Ms,setTransform:po,setPosition:Kn,getPosition:Lo,get disableTextSelection(){return Ar},get enableTextSelection(){return Do},disableImageDrag:Ls,enableImageDrag:Ds,preventOutline:is,restoreOutline:Vn,getSizedParentNode:Bs,getScale:aa};function Gt(a,d,w,P){if(d&&typeof d=="object")for(var D in d)la(a,D,d[D],w);else{d=ge(d);for(var G=0,ue=d.length;G<ue;G++)la(a,d[G],w,P)}return this}var Qi="_leaflet_events";function Pn(a,d,w,P){if(arguments.length===1)Lu(a),delete a[Qi];else if(d&&typeof d=="object")for(var D in d)ua(a,D,d[D],w);else if(d=ge(d),arguments.length===2)Lu(a,function(be){return Te(d,be)!==-1});else for(var G=0,ue=d.length;G<ue;G++)ua(a,d[G],w,P);return this}function Lu(a,d){for(var w in a[Qi]){var P=w.split(/\d/)[0];(!d||d(P))&&ua(a,P,null,null,w)}}var $l={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(a,d,w,P){var D=d+I(w)+(P?"_"+I(P):"");if(a[Qi]&&a[Qi][D])return this;var G=function(be){return w.call(P||a,be||window.event)},ue=G;!bt.touchNative&&bt.pointer&&d.indexOf("touch")===0?G=fe(a,d,G):bt.touch&&d==="dblclick"?G=Tt(a,G):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener($l[d]||d,G,bt.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(G=function(be){be=be||window.event,Ri(a,be)&&ue(be)},a.addEventListener($l[d],G,!1)):a.addEventListener(d,ue,!1):a.attachEvent("on"+d,G),a[Qi]=a[Qi]||{},a[Qi][D]=G}function ua(a,d,w,P,D){D=D||d+I(w)+(P?"_"+I(P):"");var G=a[Qi]&&a[Qi][D];if(!G)return this;!bt.touchNative&&bt.pointer&&d.indexOf("touch")===0?ce(a,d,G):bt.touch&&d==="dblclick"?ln(a,G):"removeEventListener"in a?a.removeEventListener($l[d]||d,G,!1):a.detachEvent("on"+d,G),a[Qi][D]=null}function mo(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ca(a){return la(a,"wheel",mo),this}function Fs(a){return Gt(a,"mousedown touchstart dblclick contextmenu",mo),a._leaflet_disable_click=!0,this}function Bt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function rs(a){return Bt(a),mo(a),this}function Os(a,d){if(!d)return new Fe(a.clientX,a.clientY);var w=aa(d),P=w.boundingClientRect;return new Fe((a.clientX-P.left)/w.x-d.clientLeft,(a.clientY-P.top)/w.y-d.clientTop)}var ha=bt.win&&bt.chrome?2*window.devicePixelRatio:bt.gecko?window.devicePixelRatio:1;function Zl(a){return bt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/ha:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ri(a,d){var w=d.relatedTarget;if(!w)return!0;try{for(;w&&w!==a;)w=w.parentNode}catch{return!1}return w!==a}var jl={__proto__:null,on:Gt,off:Pn,stopPropagation:mo,disableScrollPropagation:ca,disableClickPropagation:Fs,preventDefault:Bt,stop:rs,getMousePosition:Os,getWheelDelta:Zl,isExternalTarget:Ri,addListener:Gt,removeListener:Pn},da=En.extend({run:function(a,d,w,P){this.stop(),this._el=a,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Lo(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Pt(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,w=this._duration*1e3;d<w?this._runFrame(this._easeOut(d/w),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var w=this._startPos.add(this._offset.multiplyBy(a));d&&w._round(),Kn(this._el,w),this.fire("step")},_complete:function(){Lt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),rn=En.extend({options:{crs:Nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=pe(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=S(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Ct(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jt&&bt.any3d&&!bt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Gt(this._proxy,$t,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,w){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(Ct(a),d,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=g({animate:w.animate},w.zoom),w.pan=g({animate:w.animate,duration:w.duration},w.pan));var P=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,w.zoom):this._tryAnimatedPan(a,w.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,w){var P=this.getZoomScale(d),D=this.getSize().divideBy(2),G=a instanceof Fe?a:this.latLngToContainerPoint(a),ue=G.subtract(D).multiplyBy(1-1/P),be=this.containerPointToLatLng(D.add(ue));return this.setView(be,d,{zoom:w})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Rt(a);var w=qe(d.paddingTopLeft||d.padding||[0,0]),P=qe(d.paddingBottomRight||d.padding||[0,0]),D=this.getBoundsZoom(a,!1,w.add(P));if(D=typeof d.maxZoom=="number"?Math.min(d.maxZoom,D):D,D===1/0)return{center:a.getCenter(),zoom:D};var G=P.subtract(w).divideBy(2),ue=this.project(a.getSouthWest(),D),be=this.project(a.getNorthEast(),D),Le=this.unproject(ue.add(be).divideBy(2).add(G),D);return{center:Le,zoom:D}},fitBounds:function(a,d){if(a=Rt(a),!a.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(a,d);return this.setView(w.center,w.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=qe(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new da,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Kt(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,w,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,w){if(w=w||{},w.animate===!1||!bt.any3d)return this.setView(a,d,w);this._stop();var P=this.project(this.getCenter()),D=this.project(a),G=this.getSize(),ue=this._zoom;a=Ct(a),d=d===void 0?ue:d;var be=Math.max(G.x,G.y),Le=be*this.getZoomScale(ue,d),Se=D.distanceTo(P)||1,je=1.42,Wt=je*je;function en(f){var i=f?-1:1,l=f?Le:be,p=Le*Le-be*be+i*Wt*Wt*Se*Se,_=2*l*Wt*Se,b=p/_,T=Math.sqrt(b*b+1)-b,C=T<1e-9?-18:Math.log(T);return C}function Dr(f){return(Math.exp(f)-Math.exp(-f))/2}function Rn(f){return(Math.exp(f)+Math.exp(-f))/2}function Qr(f){return Dr(f)/Rn(f)}var Yn=en(0);function ou(f){return be*(Rn(Yn)/Rn(Yn+je*f))}function Ta(f){return be*(Rn(Yn)*Qr(Yn+je*f)-Dr(Yn))/Wt}function An(f){return 1-Math.pow(1-f,1.5)}var hi=Date.now(),su=(en(1)-Yn)/je,Ks=w.duration?1e3*w.duration:1e3*su*.8;function Ys(){var f=(Date.now()-hi)/Ks,i=An(f)*su;f<=1?(this._flyToFrame=Pt(Ys,this),this._move(this.unproject(P.add(D.subtract(P).multiplyBy(Ta(i)/Se)),ue),this.getScaleZoom(be/ou(i),ue),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Ys.call(this),this},flyToBounds:function(a,d){var w=this._getBoundsCenterZoom(a,d);return this.flyTo(w.center,w.zoom,d)},setMaxBounds:function(a){if(a=Rt(a),a.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var w=this.getCenter(),P=this._limitCenter(w,this._zoom,Rt(a));return w.equals(P)||this.panTo(P,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var w=qe(d.paddingTopLeft||d.padding||[0,0]),P=qe(d.paddingBottomRight||d.padding||[0,0]),D=this.project(this.getCenter()),G=this.project(a),ue=this.getPixelBounds(),be=It([ue.min.add(w),ue.max.subtract(P)]),Le=be.getSize();if(!be.contains(G)){this._enforcingBounds=!0;var Se=G.subtract(be.getCenter()),je=be.extend(G).getSize().subtract(Le);D.x+=Se.x<0?-je.x:je.x,D.y+=Se.y<0?-je.y:je.y,this.panTo(this.unproject(D),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=g({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),P=d.divideBy(2).round(),D=w.divideBy(2).round(),G=P.subtract(D);return!G.x&&!G.y?this:(a.animate&&a.pan?this.panBy(G):(a.pan&&this._rawPanBy(G),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(S(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=g({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=S(this._handleGeolocationResponse,this),w=S(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,w,a):navigator.geolocation.getCurrentPosition(d,w,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(!!this._container._leaflet_id){var d=a.code,w=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(a){if(!!this._container._leaflet_id){var d=a.coords.latitude,w=a.coords.longitude,P=new Nt(d,w),D=P.toBounds(a.coords.accuracy*2),G=this._locateOptions;if(G.setView){var ue=this.getBoundsZoom(D);this.setView(P,G.maxZoom?Math.min(ue,G.maxZoom):ue)}var be={latlng:P,bounds:D,timestamp:a.timestamp};for(var Le in a.coords)typeof a.coords[Le]=="number"&&(be[Le]=a.coords[Le]);this.fire("locationfound",be)}},addHandler:function(a,d){if(!d)return this;var w=this[a]=new d(this);return this._handlers.push(w),this.options[a]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Lt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Xt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var w="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),P=zt("div",w,d||this._mapPane);return a&&(this._panes[a]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),w=this.unproject(a.getTopRight());return new Qt(d,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,w){a=Rt(a),w=qe(w||[0,0]);var P=this.getZoom()||0,D=this.getMinZoom(),G=this.getMaxZoom(),ue=a.getNorthWest(),be=a.getSouthEast(),Le=this.getSize().subtract(w),Se=It(this.project(be,P),this.project(ue,P)).getSize(),je=bt.any3d?this.options.zoomSnap:1,Wt=Le.x/Se.x,en=Le.y/Se.y,Dr=d?Math.max(Wt,en):Math.min(Wt,en);return P=this.getScaleZoom(Dr,P),je&&(P=Math.round(P/(je/100))*(je/100),P=d?Math.ceil(P/je)*je:Math.floor(P/je)*je),Math.max(D,Math.min(G,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Fe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var w=this._getTopLeftPoint(a,d);return new wt(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var w=this.options.crs;return d=d===void 0?this._zoom:d,w.scale(a)/w.scale(d)},getScaleZoom:function(a,d){var w=this.options.crs;d=d===void 0?this._zoom:d;var P=w.zoom(a*w.scale(d));return isNaN(P)?1/0:P},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Ct(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(qe(a),d)},layerPointToLatLng:function(a){var d=qe(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(Ct(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Ct(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Rt(a))},distance:function(a,d){return this.options.crs.distance(Ct(a),Ct(d))},containerPointToLayerPoint:function(a){return qe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return qe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(qe(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ct(a)))},mouseEventToContainerPoint:function(a){return Os(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=Ot(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Gt(d,"scroll",this._onScroll,this),this._containerId=I(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&bt.any3d,Kt(a,"leaflet-container"+(bt.touch?" leaflet-touch":"")+(bt.retina?" leaflet-retina":"")+(bt.ielt9?" leaflet-oldie":"")+(bt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Dn(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kn(this._mapPane,new Fe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Kt(a.markerPane,"leaflet-zoom-hide"),Kt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d){Kn(this._mapPane,new Fe(0,0));var w=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var P=this._zoom!==d;this._moveStart(P,!1)._move(a,d)._moveEnd(P),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,w,P){d===void 0&&(d=this._zoom);var D=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),P?w&&w.pinch&&this.fire("zoom",w):((D||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Lt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Kn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[I(this._container)]=this;var d=a?Pn:Gt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),bt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Lt(this._resizeRequest),this._resizeRequest=Pt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var w=[],P,D=d==="mouseout"||d==="mouseover",G=a.target||a.srcElement,ue=!1;G;){if(P=this._targets[I(G)],P&&(d==="click"||d==="preclick")&&this._draggableMoved(P)){ue=!0;break}if(P&&P.listens(d,!0)&&(D&&!Ri(G,a)||(w.push(P),D))||G===this._container)break;G=G.parentNode}return!w.length&&!ue&&!D&&this.listens(d,!0)&&(w=[this]),w},_isClickDisabled:function(a){for(;a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var w=a.type;w==="mousedown"&&is(d),this._fireDOMEvent(a,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,w){if(a.type==="click"){var P=g({},a);P.type="preclick",this._fireDOMEvent(P,P.type,w)}var D=this._findEventTargets(a,d);if(w){for(var G=[],ue=0;ue<w.length;ue++)w[ue].listens(d,!0)&&G.push(w[ue]);D=G.concat(D)}if(!!D.length){d==="contextmenu"&&Bt(a);var be=D[0],Le={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Se=be.getLatLng&&(!be._radius||be._radius<=10);Le.containerPoint=Se?this.latLngToContainerPoint(be.getLatLng()):this.mouseEventToContainerPoint(a),Le.layerPoint=this.containerPointToLayerPoint(Le.containerPoint),Le.latlng=Se?be.getLatLng():this.layerPointToLatLng(Le.layerPoint)}for(ue=0;ue<D.length;ue++)if(D[ue].fire(d,Le,!0),Le.originalEvent._stopped||D[ue].options.bubblingMouseEvents===!1&&Te(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return Lo(this._mapPane)||new Fe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var w=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var w=this.getSize()._divideBy(2);return this.project(a,d)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,w){var P=this._getNewPixelOrigin(w,d);return this.project(a,d)._subtract(P)},_latLngBoundsToNewLayerBounds:function(a,d,w){var P=this._getNewPixelOrigin(w,d);return It([this.project(a.getSouthWest(),d)._subtract(P),this.project(a.getNorthWest(),d)._subtract(P),this.project(a.getSouthEast(),d)._subtract(P),this.project(a.getNorthEast(),d)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,w){if(!w)return a;var P=this.project(a,d),D=this.getSize().divideBy(2),G=new wt(P.subtract(D),P.add(D)),ue=this._getBoundsOffset(G,w,d);return ue.round().equals([0,0])?a:this.unproject(P.add(ue),d)},_limitOffset:function(a,d){if(!d)return a;var w=this.getPixelBounds(),P=new wt(w.min.add(a),w.max.add(a));return a.add(this._getBoundsOffset(P,d))},_getBoundsOffset:function(a,d,w){var P=It(this.project(d.getNorthEast(),w),this.project(d.getSouthWest(),w)),D=P.min.subtract(a.min),G=P.max.subtract(a.max),ue=this._rebound(D.x,-G.x),be=this._rebound(D.y,-G.y);return new Fe(ue,be)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),w=this.getMaxZoom(),P=bt.any3d?this.options.zoomSnap:1;return P&&(a=Math.round(a/P)*P),Math.max(d,Math.min(w,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Un(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var w=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,d),!0)},_createAnimProxy:function(){var a=this._proxy=zt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var w=qt,P=this._proxy.style[w];po(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),P===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();po(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(d),D=this._getCenterOffset(a)._divideBy(1-1/P);return w.animate!==!0&&!this.getSize().contains(D)?!1:(Pt(function(){this._moveStart(!0,!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,w,P){!this._mapPane||(w&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,Kt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(S(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Un(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gl(a,d){return new rn(a,d)}var er=At.extend({options:{position:"topright"},initialize:function(a){pe(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),w=this.getPosition(),P=a._controlCorners[w];return Kt(d,"leaflet-control"),w.indexOf("bottom")!==-1?P.insertBefore(d,P.firstChild):P.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fo=function(a){return new er(a)};rn.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",w=this._controlContainer=zt("div",d+"control-container",this._container);function P(D,G){var ue=d+D+" "+d+G;a[D+G]=zt("div",ue,w)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Xt(this._controlCorners[a]);Xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ya=er.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,w,P){return w<P?-1:P<w?1:0}},initialize:function(a,d,w){pe(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var P in a)this._addLayer(a[P],P);for(P in d)this._addLayer(d[P],P,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return er.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(I(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Kt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Kt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Un(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Un(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=zt("div",a),w=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Fs(d),ca(d);var P=this._section=zt("section",a+"-list");w&&(this._map.on("click",this.collapse,this),Gt(d,{mouseenter:function(){Gt(P,"click",Bt),this.expand(),setTimeout(function(){Pn(P,"click",Bt)})},mouseleave:this.collapse},this));var D=this._layersLink=zt("a",a+"-toggle",d);D.href="#",D.title="Layers",D.setAttribute("role","button"),Gt(D,"click",Bt),Gt(D,"focus",this.expand,this),w||this.expand(),this._baseLayersList=zt("div",a+"-base",P),this._separator=zt("div",a+"-separator",P),this._overlaysList=zt("div",a+"-overlays",P),d.appendChild(P)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&I(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,w){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:w}),this.options.sortLayers&&this._layers.sort(S(function(P,D){return this.options.sortFunction(P.layer,D.layer,P.name,D.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oi(this._baseLayersList),oi(this._overlaysList),this._layerControlInputs=[];var a,d,w,P,D=0;for(w=0;w<this._layers.length;w++)P=this._layers[w],this._addItem(P),d=d||P.overlay,a=a||!P.overlay,D+=P.overlay?0:1;return this.options.hideSingleBase&&(a=a&&D>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(I(a.target)),w=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;w&&this._map.fire(w,d)},_createRadioElement:function(a,d){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=w,P.firstChild},_addItem:function(a){var d=document.createElement("label"),w=this._map.hasLayer(a.layer),P;a.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=w):P=this._createRadioElement("leaflet-base-layers_"+I(this),w),this._layerControlInputs.push(P),P.layerId=I(a.layer),Gt(P,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+a.name;var G=document.createElement("span");d.appendChild(G),G.appendChild(P),G.appendChild(D);var ue=a.overlay?this._overlaysList:this._baseLayersList;return ue.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){var a=this._layerControlInputs,d,w,P=[],D=[];this._handlingClick=!0;for(var G=a.length-1;G>=0;G--)d=a[G],w=this._getLayer(d.layerId).layer,d.checked?P.push(w):d.checked||D.push(w);for(G=0;G<D.length;G++)this._map.hasLayer(D[G])&&this._map.removeLayer(D[G]);for(G=0;G<P.length;G++)this._map.hasLayer(P[G])||this._map.addLayer(P[G]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,w,P=this._map.getZoom(),D=a.length-1;D>=0;D--)d=a[D],w=this._getLayer(d.layerId).layer,d.disabled=w.options.minZoom!==void 0&&P<w.options.minZoom||w.options.maxZoom!==void 0&&P>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Wl=function(a,d,w){return new Ya(a,d,w)},Ns=er.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",w=zt("div",d+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,d+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,d+"-out",w,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,w,P,D){var G=zt("a",w,P);return G.innerHTML=a,G.href="#",G.title=d,G.setAttribute("role","button"),G.setAttribute("aria-label",d),Fs(G),Gt(G,"click",rs),Gt(G,"click",D,this),Gt(G,"click",this._refocusOnMap,this),G},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";Un(this._zoomInButton,d),Un(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Kt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Kt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});rn.mergeOptions({zoomControl:!0}),rn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ns,this.addControl(this.zoomControl))});var Du=function(a){return new Ns(a)},ql=er.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",w=zt("div",d),P=this.options;return this._addScales(P,d+"-line",w),a.on(P.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),w},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,w){a.metric&&(this._mScale=zt("div",d,w)),a.imperial&&(this._iScale=zt("div",d,w))},_update:function(){var a=this._map,d=a.getSize().y/2,w=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(w)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),w=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,w,d/a)},_updateImperial:function(a){var d=a*3.2808399,w,P,D;d>5280?(w=d/5280,P=this._getRoundNum(w),this._updateScale(this._iScale,P+" mi",P/w)):(D=this._getRoundNum(d),this._updateScale(this._iScale,D+" ft",D/d))},_updateScale:function(a,d,w){a.style.width=Math.round(this.options.maxWidth*w)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),w=a/d;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,d*w}}),Us=function(a){return new ql(a)},$c='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hl=er.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bt.inlineSvg?$c+" ":"")+"Leaflet</a>"},initialize:function(a){pe(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=zt("div","leaflet-control-attribution"),Fs(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(!!this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var w=[];this.options.prefix&&w.push(this.options.prefix),a.length&&w.push(a.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});rn.mergeOptions({attributionControl:!0}),rn.addInitHook(function(){this.options.attributionControl&&new Hl().addTo(this)});var Zc=function(a){return new Hl(a)};er.Layers=Ya,er.Zoom=Ns,er.Scale=ql,er.Attribution=Hl,Fo.layers=Wl,Fo.zoom=Du,Fo.scale=Us,Fo.attribution=Zc;var Hr=At.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Hr.addTo=function(a,d){return a.addHandler(d,this),this};var jc={Events:Ke},Ru=bt.touch?"touchstart mousedown":"mousedown",Xr=En.extend({options:{clickTolerance:3},initialize:function(a,d,w,P){pe(this,P),this._element=a,this._dragStartTarget=d||a,this._preventOutline=w},enable:function(){this._enabled||(Gt(this._dragStartTarget,Ru,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Xr._dragging===this&&this.finishDrag(!0),Pn(this._dragStartTarget,Ru,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!!this._enabled&&(this._moved=!1,!xn(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Xr._dragging===this&&this.finishDrag();return}if(!(Xr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Xr._dragging=this,this._preventOutline&&is(this._element),Ls(),Ar(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,w=Bs(this._element);this._startPoint=new Fe(d.clientX,d.clientY),this._startPos=Lo(this._element),this._parentScale=aa(w);var P=a.type==="mousedown";Gt(document,P?"mousemove":"touchmove",this._onMove,this),Gt(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(!!this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,w=new Fe(d.clientX,d.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Bt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Kt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Kt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Kn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(a){Un(document.body,"leaflet-dragging"),this._lastTarget&&(Un(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pn(document,"mousemove touchmove",this._onMove,this),Pn(document,"mouseup touchend touchcancel",this._onUp,this),Ds(),Do(),this._moved&&this._moving&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Xr._dragging=!1}});function Ja(a,d){if(!d||!a.length)return a.slice();var w=d*d;return a=ss(a,w),a=Fu(a,w),a}function os(a,d,w){return Math.sqrt(Mt(a,d,w,!0))}function Bu(a,d,w){return Mt(a,d,w)}function Fu(a,d){var w=a.length,P=typeof Uint8Array!=void 0+""?Uint8Array:Array,D=new P(w);D[0]=D[w-1]=1,pa(a,D,d,0,w-1);var G,ue=[];for(G=0;G<w;G++)D[G]&&ue.push(a[G]);return ue}function pa(a,d,w,P,D){var G=0,ue,be,Le;for(be=P+1;be<=D-1;be++)Le=Mt(a[be],a[P],a[D],!0),Le>G&&(ue=be,G=Le);G>w&&(d[ue]=1,pa(a,d,w,P,ue),pa(a,d,w,ue,D))}function ss(a,d){for(var w=[a[0]],P=1,D=0,G=a.length;P<G;P++)Kl(a[P],a[D])>d&&(w.push(a[P]),D=P);return D<G-1&&w.push(a[G-1]),w}var Xl;function Oo(a,d,w,P,D){var G=P?Xl:No(a,w),ue=No(d,w),be,Le,Se;for(Xl=ue;;){if(!(G|ue))return[a,d];if(G&ue)return!1;be=G||ue,Le=go(a,d,be,w,D),Se=No(Le,w),be===G?(a=Le,G=Se):(d=Le,ue=Se)}}function go(a,d,w,P,D){var G=d.x-a.x,ue=d.y-a.y,be=P.min,Le=P.max,Se,je;return w&8?(Se=a.x+G*(Le.y-a.y)/ue,je=Le.y):w&4?(Se=a.x+G*(be.y-a.y)/ue,je=be.y):w&2?(Se=Le.x,je=a.y+ue*(Le.x-a.x)/G):w&1&&(Se=be.x,je=a.y+ue*(be.x-a.x)/G),new Fe(Se,je,D)}function No(a,d){var w=0;return a.x<d.min.x?w|=1:a.x>d.max.x&&(w|=2),a.y<d.min.y?w|=4:a.y>d.max.y&&(w|=8),w}function Kl(a,d){var w=d.x-a.x,P=d.y-a.y;return w*w+P*P}function Mt(a,d,w,P){var D=d.x,G=d.y,ue=w.x-D,be=w.y-G,Le=ue*ue+be*be,Se;return Le>0&&(Se=((a.x-D)*ue+(a.y-G)*be)/Le,Se>1?(D=w.x,G=w.y):Se>0&&(D+=ue*Se,G+=be*Se)),ue=a.x-D,be=a.y-G,P?ue*ue+be*be:new Fe(D,G)}function mr(a){return!te(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]!="undefined"}function dn(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mr(a)}var Qa={__proto__:null,simplify:Ja,pointToSegmentDistance:os,closestPointOnSegment:Bu,clipSegment:Oo,_getEdgeIntersection:go,_getBitCode:No,_sqClosestPointOnSegment:Mt,isFlat:mr,_flat:dn};function zn(a,d,w){var P,D=[1,4,2,8],G,ue,be,Le,Se,je,Wt,en;for(G=0,je=a.length;G<je;G++)a[G]._code=No(a[G],d);for(be=0;be<4;be++){for(Wt=D[be],P=[],G=0,je=a.length,ue=je-1;G<je;ue=G++)Le=a[G],Se=a[ue],Le._code&Wt?Se._code&Wt||(en=go(Se,Le,Wt,d,w),en._code=No(en,d),P.push(en)):(Se._code&Wt&&(en=go(Se,Le,Wt,d,w),en._code=No(en,d),P.push(en)),P.push(Le));a=P}return a}var qn={__proto__:null,clipPolygon:zn},Vs={project:function(a){return new Fe(a.lng,a.lat)},unproject:function(a){return new Nt(a.y,a.x)},bounds:new wt([-180,-90],[180,90])},fa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new wt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,w=this.R,P=a.lat*d,D=this.R_MINOR/w,G=Math.sqrt(1-D*D),ue=G*Math.sin(P),be=Math.tan(Math.PI/4-P/2)/Math.pow((1-ue)/(1+ue),G/2);return P=-w*Math.log(Math.max(be,1e-10)),new Fe(a.lng*d*w,P)},unproject:function(a){for(var d=180/Math.PI,w=this.R,P=this.R_MINOR/w,D=Math.sqrt(1-P*P),G=Math.exp(-a.y/w),ue=Math.PI/2-2*Math.atan(G),be=0,Le=.1,Se;be<15&&Math.abs(Le)>1e-7;be++)Se=D*Math.sin(ue),Se=Math.pow((1-Se)/(1+Se),D/2),Le=Math.PI/2-2*Math.atan(G*Se)-ue,ue+=Le;return new Nt(ue*d,a.x*d/w)}},Gc={__proto__:null,LonLat:Vs,Mercator:fa,SphericalMercator:Tr},Yl=g({},Ln,{code:"EPSG:3395",projection:fa,transformation:function(){var a=.5/(Math.PI*fa.R);return Li(a,.5,-a,.5)}()}),ma=g({},Ln,{code:"EPSG:4326",projection:Vs,transformation:Li(1/180,1,-1/180,.5)}),el=g({},gn,{projection:Vs,transformation:Li(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var w=d.lng-a.lng,P=d.lat-a.lat;return Math.sqrt(w*w+P*P)},infinite:!0});gn.Earth=Ln,gn.EPSG3395=Yl,gn.EPSG3857=Nn,gn.EPSG900913=Pr,gn.EPSG4326=ma,gn.Simple=el;var Gi=En.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[I(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[I(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(!!d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var w=this.getEvents();d.on(w,this),this.once("remove",function(){d.off(w,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});rn.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=I(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=I(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return I(a)in this._layers},eachLayer:function(a,d){for(var w in this._layers)a.call(d,this._layers[w]);return this},_addLayers:function(a){a=a?te(a)?a:[a]:[];for(var d=0,w=a.length;d<w;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[I(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=I(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,w=this._getZoomSpan();for(var P in this._zoomBoundLayers){var D=this._zoomBoundLayers[P].options;a=D.minZoom===void 0?a:Math.min(a,D.minZoom),d=D.maxZoom===void 0?d:Math.max(d,D.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _o=Gi.extend({initialize:function(a,d){pe(this,d),this._layers={};var w,P;if(a)for(w=0,P=a.length;w<P;w++)this.addLayer(a[w])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),w,P;for(w in this._layers)P=this._layers[w],P[a]&&P[a].apply(P,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var w in this._layers)a.call(d,this._layers[w]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return I(a)}}),Jl=function(a,d){return new _o(a,d)},Mr=_o.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),_o.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),_o.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Qt;for(var d in this._layers){var w=this._layers[d];a.extend(w.getBounds?w.getBounds():w.getLatLng())}return a}}),tl=function(a,d){return new Mr(a,d)},Ii=At.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){pe(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var w=this._getIconUrl(a);if(!w){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(w,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(P,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(a,d){var w=this.options,P=w[d+"Size"];typeof P=="number"&&(P=[P,P]);var D=qe(P),G=qe(d==="shadow"&&w.shadowAnchor||w.iconAnchor||D&&D.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(w.className||""),G&&(a.style.marginLeft=-G.x+"px",a.style.marginTop=-G.y+"px"),D&&(a.style.width=D.x+"px",a.style.height=D.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return bt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Ou(a){return new Ii(a)}var $s=Ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof $s.imagePath!="string"&&($s.imagePath=this._detectIconPath()),(this.options.imagePath||$s.imagePath)+Ii.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(w,P,D){var G=P.exec(w);return G&&G[D]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=zt("div","leaflet-default-icon-path",document.body),d=Dn(a,"background-image")||Dn(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Ql=Hr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Xr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Kt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Un(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,w=d._map,P=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,G=Lo(d._icon),ue=w.getPixelBounds(),be=w.getPixelOrigin(),Le=It(ue.min._subtract(be).add(D),ue.max._subtract(be).subtract(D));if(!Le.contains(G)){var Se=qe((Math.max(Le.max.x,G.x)-Le.max.x)/(ue.max.x-Le.max.x)-(Math.min(Le.min.x,G.x)-Le.min.x)/(ue.min.x-Le.min.x),(Math.max(Le.max.y,G.y)-Le.max.y)/(ue.max.y-Le.max.y)-(Math.min(Le.min.y,G.y)-Le.min.y)/(ue.min.y-Le.min.y)).multiplyBy(P);w.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),Kn(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Pt(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Lt(this._panRequest),this._panRequest=Pt(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,w=d._shadow,P=Lo(d._icon),D=d._map.layerPointToLatLng(P);w&&Kn(w,P),d._latlng=D,a.latlng=D,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Lt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),yo=Gi.extend({options:{icon:new $s,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){pe(this,d),this._latlng=Ct(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Ct(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=a.icon.createIcon(this._icon),P=!1;w!==this._icon&&(this._icon&&this._removeIcon(),P=!0,a.title&&(w.title=a.title),w.tagName==="IMG"&&(w.alt=a.alt||"")),Kt(w,d),a.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gt(w,"focus",this._panOnFocus,this);var D=a.icon.createShadow(this._shadow),G=!1;D!==this._shadow&&(this._removeShadow(),G=!0),D&&(Kt(D,d),D.alt=""),this._shadow=D,a.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&G&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pn(this._icon,"focus",this._panOnFocus,this),Xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Kn(this._icon,a),this._shadow&&Kn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(!!this.options.interactive&&(Kt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ql)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ql(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ji(this._icon,a),this._shadow&&Ji(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(!!a){var d=this.options.icon.options,w=d.iconSize?qe(d.iconSize):qe(0,0),P=d.iconAnchor?qe(d.iconAnchor):qe(0,0);a.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:w.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nl(a,d){return new yo(a,d)}var Kr=Gi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return pe(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=Kr.extend({options:{fill:!0,radius:10},initialize:function(a,d){pe(this,d),this._latlng=Ct(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Ct(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Kr.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,w=this._clickTolerance(),P=[a+w,d+w];this._pxBounds=new wt(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function il(a,d){return new ga(a,d)}var Zs=ga.extend({initialize:function(a,d,w){if(typeof d=="number"&&(d=g({},w,{radius:d})),pe(this,d),this._latlng=Ct(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Qt(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Kr.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,w=this._map,P=w.options.crs;if(P.distance===Ln.distance){var D=Math.PI/180,G=this._mRadius/Ln.R/D,ue=w.project([d+G,a]),be=w.project([d-G,a]),Le=ue.add(be).divideBy(2),Se=w.unproject(Le).lat,je=Math.acos((Math.cos(G*D)-Math.sin(d*D)*Math.sin(Se*D))/(Math.cos(d*D)*Math.cos(Se*D)))/D;(isNaN(je)||je===0)&&(je=G/Math.cos(Math.PI/180*d)),this._point=Le.subtract(w.getPixelOrigin()),this._radius=isNaN(je)?0:Le.x-w.project([Se,a-je]).x,this._radiusY=Le.y-ue.y}else{var Wt=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(Wt).x}this._updateBounds()}});function Nu(a,d,w){return new Zs(a,d,w)}var tr=Kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){pe(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,w=null,P=Mt,D,G,ue=0,be=this._parts.length;ue<be;ue++)for(var Le=this._parts[ue],Se=1,je=Le.length;Se<je;Se++){D=Le[Se-1],G=Le[Se];var Wt=P(a,D,G,!0);Wt<d&&(d=Wt,w=P(a,D,G))}return w&&(w.distance=Math.sqrt(d)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,w,P,D,G,ue,be=this._rings[0],Le=be.length;if(!Le)return null;for(a=0,d=0;a<Le-1;a++)d+=be[a].distanceTo(be[a+1])/2;if(d===0)return this._map.layerPointToLatLng(be[0]);for(a=0,P=0;a<Le-1;a++)if(D=be[a],G=be[a+1],w=D.distanceTo(G),P+=w,P>d)return ue=(P-d)/w,this._map.layerPointToLatLng([G.x-ue*(G.x-D.x),G.y-ue*(G.y-D.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Ct(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Qt,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return mr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],w=mr(a),P=0,D=a.length;P<D;P++)w?(d[P]=Ct(a[P]),this._bounds.extend(d[P])):d[P]=this._convertLatLngs(a[P]);return d},_project:function(){var a=new wt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new Fe(a,a);!this._rawPxBounds||(this._pxBounds=new wt([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,w){var P=a[0]instanceof Nt,D=a.length,G,ue;if(P){for(ue=[],G=0;G<D;G++)ue[G]=this._map.latLngToLayerPoint(a[G]),w.extend(ue[G]);d.push(ue)}else for(G=0;G<D;G++)this._projectLatlngs(a[G],d,w)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,w,P,D,G,ue,be,Le;for(w=0,D=0,G=this._rings.length;w<G;w++)for(Le=this._rings[w],P=0,ue=Le.length;P<ue-1;P++)be=Oo(Le[P],Le[P+1],a,P,!0),be&&(d[D]=d[D]||[],d[D].push(be[0]),(be[1]!==Le[P+1]||P===ue-2)&&(d[D].push(be[1]),D++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,w=0,P=a.length;w<P;w++)a[w]=Ja(a[w],d)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var w,P,D,G,ue,be,Le=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(w=0,G=this._parts.length;w<G;w++)for(be=this._parts[w],P=0,ue=be.length,D=ue-1;P<ue;D=P++)if(!(!d&&P===0)&&os(a,be[D],be[P])<=Le)return!0;return!1}});function eu(a,d){return new tr(a,d)}tr._flat=dn;var vo=tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,w,P,D,G,ue,be,Le,Se=this._rings[0],je=Se.length;if(!je)return null;for(G=ue=be=0,a=0,d=je-1;a<je;d=a++)w=Se[a],P=Se[d],D=w.y*P.x-P.y*w.x,ue+=(w.x+P.x)*D,be+=(w.y+P.y)*D,G+=D*3;return G===0?Le=Se[0]:Le=[ue/G,be/G],this._map.layerPointToLatLng(Le)},_convertLatLngs:function(a){var d=tr.prototype._convertLatLngs.call(this,a),w=d.length;return w>=2&&d[0]instanceof Nt&&d[0].equals(d[w-1])&&d.pop(),d},_setLatLngs:function(a){tr.prototype._setLatLngs.call(this,a),mr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,w=new Fe(d,d);if(a=new wt(a.min.subtract(w),a.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,D=this._rings.length,G;P<D;P++)G=zn(this._rings[P],a,!0),G.length&&this._parts.push(G)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,w,P,D,G,ue,be,Le,Se;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(G=0,Le=this._parts.length;G<Le;G++)for(w=this._parts[G],ue=0,Se=w.length,be=Se-1;ue<Se;be=ue++)P=w[ue],D=w[be],P.y>a.y!=D.y>a.y&&a.x<(D.x-P.x)*(a.y-P.y)/(D.y-P.y)+P.x&&(d=!d);return d||tr.prototype._containsPoint.call(this,a,!0)}});function rl(a,d){return new vo(a,d)}var Wi=Mr.extend({initialize:function(a,d){pe(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=te(a)?a:a.features,w,P,D;if(d){for(w=0,P=d.length;w<P;w++)D=d[w],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var G=this.options;if(G.filter&&!G.filter(a))return this;var ue=as(a,G);return ue?(ue.feature=va(a),ue.defaultOptions=ue.options,this.resetStyle(ue),G.onEachFeature&&G.onEachFeature(a,ue),this.addLayer(ue)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=g({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function as(a,d){var w=a.type==="Feature"?a.geometry:a,P=w?w.coordinates:null,D=[],G=d&&d.pointToLayer,ue=d&&d.coordsToLatLng||ls,be,Le,Se,je;if(!P&&!w)return null;switch(w.type){case"Point":return be=ue(P),tu(G,a,be,d);case"MultiPoint":for(Se=0,je=P.length;Se<je;Se++)be=ue(P[Se]),D.push(tu(G,a,be,d));return new Mr(D);case"LineString":case"MultiLineString":return Le=_a(P,w.type==="LineString"?0:1,ue),new tr(Le,d);case"Polygon":case"MultiPolygon":return Le=_a(P,w.type==="Polygon"?1:2,ue),new vo(Le,d);case"GeometryCollection":for(Se=0,je=w.geometries.length;Se<je;Se++){var Wt=as({geometry:w.geometries[Se],type:"Feature",properties:a.properties},d);Wt&&D.push(Wt)}return new Mr(D);default:throw new Error("Invalid GeoJSON object.")}}function tu(a,d,w,P){return a?a(d,w):new yo(w,P&&P.markersInheritOptions&&P)}function ls(a){return new Nt(a[1],a[0],a[2])}function _a(a,d,w){for(var P=[],D=0,G=a.length,ue;D<G;D++)ue=d?_a(a[D],d-1,w):(w||ls)(a[D]),P.push(ue);return P}function ol(a,d){return a=Ct(a),a.alt!==void 0?[V(a.lng,d),V(a.lat,d),V(a.alt,d)]:[V(a.lng,d),V(a.lat,d)]}function ya(a,d,w,P){for(var D=[],G=0,ue=a.length;G<ue;G++)D.push(d?ya(a[G],d-1,w,P):ol(a[G],P));return!d&&w&&D.push(D[0]),D}function Lr(a,d){return a.feature?g({},a.feature,{geometry:d}):va(d)}function va(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var us={toGeoJSON:function(a){return Lr(this,{type:"Point",coordinates:ol(this.getLatLng(),a)})}};yo.include(us),Zs.include(us),ga.include(us),tr.include({toGeoJSON:function(a){var d=!mr(this._latlngs),w=ya(this._latlngs,d?1:0,!1,a);return Lr(this,{type:(d?"Multi":"")+"LineString",coordinates:w})}}),vo.include({toGeoJSON:function(a){var d=!mr(this._latlngs),w=d&&!mr(this._latlngs[0]),P=ya(this._latlngs,w?2:d?1:0,!0,a);return d||(P=[P]),Lr(this,{type:(w?"Multi":"")+"Polygon",coordinates:P})}}),_o.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(w){d.push(w.toGeoJSON(a).geometry.coordinates)}),Lr(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var w=d==="GeometryCollection",P=[];return this.eachLayer(function(D){if(D.toGeoJSON){var G=D.toGeoJSON(a);if(w)P.push(G.geometry);else{var ue=va(G);ue.type==="FeatureCollection"?P.push.apply(P,ue.features):P.push(ue)}}}),w?Lr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function js(a,d){return new Wi(a,d)}var nr=js,Ei=Gi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,w){this._url=a,this._bounds=Rt(d),pe(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Kt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ao(this._image),this},bringToBack:function(){return this._map&&Mo(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Rt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:zt("img");if(Kt(d,"leaflet-image-layer"),this._zoomAnimated&&Kt(d,"leaflet-zoom-animated"),this.options.className&&Kt(d,this.options.className),d.onselectstart=q,d.onmousemove=q,d.onload=S(this.fire,this,"load"),d.onerror=S(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;po(this._image,w,d)},_reset:function(){var a=this._image,d=new wt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=d.getSize();Kn(a,d.min),a.style.width=w.x+"px",a.style.height=w.y+"px"},_updateOpacity:function(){Ji(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Wc=function(a,d,w){return new Ei(a,d,w)},Uo=Ei.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:zt("video");if(Kt(d,"leaflet-image-layer"),this._zoomAnimated&&Kt(d,"leaflet-zoom-animated"),this.options.className&&Kt(d,this.options.className),d.onselectstart=q,d.onmousemove=q,d.onloadeddata=S(this.fire,this,"load"),a){for(var w=d.getElementsByTagName("source"),P=[],D=0;D<w.length;D++)P.push(w[D].src);this._url=w.length>0?P:[d.src];return}te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var G=0;G<this._url.length;G++){var ue=zt("source");ue.src=this._url[G],d.appendChild(ue)}}});function Uu(a,d,w){return new Uo(a,d,w)}var cs=Ei.extend({_initImage:function(){var a=this._image=this._url;Kt(a,"leaflet-image-layer"),this._zoomAnimated&&Kt(a,"leaflet-zoom-animated"),this.options.className&&Kt(a,this.options.className),a.onselectstart=q,a.onmousemove=q}});function hs(a,d,w){return new cs(a,d,w)}var Yr=Gi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(a,d){pe(this,a),this._source=d},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ji(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ji(this._container,1),this.bringToFront(),this.options.interactive&&(Kt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ji(this._container,0),this._removeTimeout=setTimeout(S(Xt,void 0,this._container),200)):Xt(this._container),this.options.interactive&&(Un(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Ct(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ao(this._container),this},bringToBack:function(){return this._map&&Mo(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof Mr){d=null;var w=this._source._layers;for(var P in w)if(w[P]._map){d=w[P];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=qe(this.options.offset),w=this._getAnchor();this._zoomAnimated?Kn(this._container,a.add(w)):d=d.add(a).add(w);var P=this._containerBottom=-d.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=P+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});rn.include({_initOverlay:function(a,d,w,P){var D=d;return D instanceof a||(D=new a(P).setContent(d)),w&&D.setLatLng(w),D}}),Gi.include({_initOverlay:function(a,d,w,P){var D=w;return D instanceof a?(pe(D,P),D._source=this):(D=d&&!P?d:new a(P,this),D.setContent(w)),D}});var Gs=Yr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Yr.prototype.openOn.call(this,a)},onAdd:function(a){Yr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kr||this._source.on("preclick",mo))},onRemove:function(a){Yr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kr||this._source.off("preclick",mo))},getEvents:function(){var a=Yr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=zt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=zt("div",a+"-content-wrapper",d);if(this._contentNode=zt("div",a+"-content",w),Fs(d),ca(this._contentNode),Gt(d,"contextmenu",mo),this._tipContainer=zt("div",a+"-tip-container",d),this._tip=zt("div",a+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=zt("a",a+"-close-button",d);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',Gt(P,"click",this.close,this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var w=a.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),d.width=w+1+"px",d.whiteSpace="",d.height="";var P=a.offsetHeight,D=this.options.maxHeight,G="leaflet-popup-scrolled";D&&P>D?(d.height=D+"px",Kt(a,G)):Un(a,G),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),w=this._getAnchor();Kn(this._container,d.add(w))},_adjustPan:function(a){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var d=this._map,w=parseInt(Dn(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+w,D=this._containerWidth,G=new Fe(this._containerLeft,-P-this._containerBottom);G._add(Lo(this._container));var ue=d.layerPointToContainerPoint(G),be=qe(this.options.autoPanPadding),Le=qe(this.options.autoPanPaddingTopLeft||be),Se=qe(this.options.autoPanPaddingBottomRight||be),je=d.getSize(),Wt=0,en=0;ue.x+D+Se.x>je.x&&(Wt=ue.x+D-je.x+Se.x),ue.x-Wt-Le.x<0&&(Wt=ue.x-Le.x),ue.y+P+Se.y>je.y&&(en=ue.y+P-je.y+Se.y),ue.y-en-Le.y<0&&(en=ue.y-Le.y),(Wt||en)&&d.fire("autopanstart").panBy([Wt,en],{animate:a&&a.type==="moveend"})}},_getAnchor:function(){return qe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qc=function(a,d){return new Gs(a,d)};rn.mergeOptions({closePopupOnClick:!0}),rn.include({openPopup:function(a,d,w){return this._initOverlay(Gs,a,d,w).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Gi.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Gs,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&this._popup._prepareOpen(a)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){rs(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var xa=Yr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Yr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Yr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Yr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=zt("div",d)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,w,P=this._map,D=this._container,G=P.latLngToContainerPoint(P.getCenter()),ue=P.layerPointToContainerPoint(a),be=this.options.direction,Le=D.offsetWidth,Se=D.offsetHeight,je=qe(this.options.offset),Wt=this._getAnchor();be==="top"?(d=Le/2,w=Se):be==="bottom"?(d=Le/2,w=0):be==="center"?(d=Le/2,w=Se/2):be==="right"?(d=0,w=Se/2):be==="left"?(d=Le,w=Se/2):ue.x<G.x?(be="right",d=0,w=Se/2):(be="left",d=Le+(je.x+Wt.x)*2,w=Se/2),a=a.subtract(qe(d,w,!0)).add(je).add(Wt),Un(D,"leaflet-tooltip-right"),Un(D,"leaflet-tooltip-left"),Un(D,"leaflet-tooltip-top"),Un(D,"leaflet-tooltip-bottom"),Kt(D,"leaflet-tooltip-"+be),Kn(D,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ji(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return qe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ds=function(a,d){return new xa(a,d)};rn.include({openTooltip:function(a,d,w){return this._initOverlay(xa,a,d,w).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Gi.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xa,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[d](w),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&this._tooltip._prepareOpen(a)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0))},_moveTooltip:function(a){var d=a.latlng,w,P;this._tooltip.options.sticky&&a.originalEvent&&(w=this._map.mouseEventToContainerPoint(a.originalEvent),P=this._map.containerPointToLayerPoint(w),d=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(d)}});var ps=Ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),w=this.options;if(w.html instanceof Element?(oi(d),d.appendChild(w.html)):d.innerHTML=w.html!==!1?w.html:"",w.bgPos){var P=qe(w.bgPos);d.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function ut(a){return new ps(a)}Ii.Default=$s;var fs=Gi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){pe(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Xt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ao(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Mo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=N(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Fe?a:new Fe(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,w=-a(-1/0,1/0),P=0,D=d.length,G;P<D;P++)G=d[P].style.zIndex,d[P]!==this._container&&G&&(w=a(w,+G));isFinite(w)&&(this.options.zIndex=w+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!bt.ielt9){Ji(this._container,this.options.opacity);var a=+new Date,d=!1,w=!1;for(var P in this._tiles){var D=this._tiles[P];if(!(!D.current||!D.loaded)){var G=Math.min(1,(a-D.loaded)/200);Ji(D.el,G),G<1?d=!0:(D.active?w=!0:this._onOpaqueTile(D),D.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),d&&(Lt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this))}},_onOpaqueTile:q,_initContainer:function(){this._container||(this._container=zt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===a?(this._levels[w].el.style.zIndex=d-Math.abs(a-w),this._onUpdateLevel(w)):(Xt(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var P=this._levels[a],D=this._map;return P||(P=this._levels[a]={},P.el=zt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=d,P.origin=D.project(D.unproject(D.getPixelOrigin()),a).round(),P.zoom=a,this._setZoomTransform(P,D.getCenter(),D.getZoom()),q(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:q,_onRemoveLevel:q,_onCreateLevel:q,_pruneTiles:function(){if(!!this._map){var a,d,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var P=d.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Xt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,w,P){var D=Math.floor(a/2),G=Math.floor(d/2),ue=w-1,be=new Fe(+D,+G);be.z=+ue;var Le=this._tileCoordsToKey(be),Se=this._tiles[Le];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),ue>P?this._retainParent(D,G,ue,P):!1)},_retainChildren:function(a,d,w,P){for(var D=2*a;D<2*a+2;D++)for(var G=2*d;G<2*d+2;G++){var ue=new Fe(D,G);ue.z=w+1;var be=this._tileCoordsToKey(ue),Le=this._tiles[be];if(Le&&Le.active){Le.retain=!0;continue}else Le&&Le.loaded&&(Le.retain=!0);w+1<P&&this._retainChildren(D,G,w+1,P)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,w,P){var D=Math.round(d);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var G=this.options.updateWhenZooming&&D!==this._tileZoom;(!P||G)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(a),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var w in this._levels)this._setZoomTransform(this._levels[w],a,d)},_setZoomTransform:function(a,d,w){var P=this._map.getZoomScale(w,a.zoom),D=a.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(d,w)).round();bt.any3d?po(a.el,D,P):Kn(a.el,D)},_resetGrid:function(){var a=this._map,d=a.options.crs,w=this._tileSize=this.getTileSize(),P=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],P).x/w.x),Math.ceil(a.project([0,d.wrapLng[1]],P).x/w.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],P).y/w.x),Math.ceil(a.project([d.wrapLat[1],0],P).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,w=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),P=d.getZoomScale(w,this._tileZoom),D=d.project(a,this._tileZoom).floor(),G=d.getSize().divideBy(P*2);return new wt(D.subtract(G),D.add(G))},_update:function(a){var d=this._map;if(!!d){var w=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(a),D=this._pxBoundsToTileRange(P),G=D.getCenter(),ue=[],be=this.options.keepBuffer,Le=new wt(D.getBottomLeft().subtract([be,-be]),D.getTopRight().add([be,-be]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var je=this._tiles[Se].coords;(je.z!==this._tileZoom||!Le.contains(new Fe(je.x,je.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(a,w);return}for(var Wt=D.min.y;Wt<=D.max.y;Wt++)for(var en=D.min.x;en<=D.max.x;en++){var Dr=new Fe(en,Wt);if(Dr.z=this._tileZoom,!!this._isValidTile(Dr)){var Rn=this._tiles[this._tileCoordsToKey(Dr)];Rn?Rn.current=!0:ue.push(Dr)}}if(ue.sort(function(Yn,ou){return Yn.distanceTo(G)-ou.distanceTo(G)}),ue.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qr=document.createDocumentFragment();for(en=0;en<ue.length;en++)this._addTile(ue[en],Qr);this._level.el.appendChild(Qr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var w=this._globalTileRange;if(!d.wrapLng&&(a.x<w.min.x||a.x>w.max.x)||!d.wrapLat&&(a.y<w.min.y||a.y>w.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(a);return Rt(this.options.bounds).overlaps(P)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,w=this.getTileSize(),P=a.scaleBy(w),D=P.add(w),G=d.unproject(P,a.z),ue=d.unproject(D,a.z);return[G,ue]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),w=new Qt(d[0],d[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),w=new Fe(+d[0],+d[1]);return w.z=+d[2],w},_removeTile:function(a){var d=this._tiles[a];!d||(Xt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Kt(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=q,a.onmousemove=q,bt.ielt9&&this.options.opacity<1&&Ji(a,this.options.opacity)},_addTile:function(a,d){var w=this._getTilePos(a),P=this._tileCoordsToKey(a),D=this.createTile(this._wrapCoords(a),S(this._tileReady,this,a));this._initTile(D),this.createTile.length<2&&Pt(S(this._tileReady,this,a,null,D)),Kn(D,w),this._tiles[P]={el:D,coords:a,current:!0},d.appendChild(D),this.fire("tileloadstart",{tile:D,coords:a})},_tileReady:function(a,d,w){d&&this.fire("tileerror",{error:d,tile:w,coords:a});var P=this._tileCoordsToKey(a);w=this._tiles[P],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Ji(w.el,0),Lt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),d||(Kt(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bt.ielt9||!this._map._fadeAnimated?Pt(this._pruneTiles,this):setTimeout(S(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new Fe(this._wrapX?j(a.x,this._wrapX):a.x,this._wrapY?j(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new wt(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function wa(a){return new fs(a)}var gr=fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=pe(this,d),d.detectRetina&&bt.retina&&d.maxZoom>0&&(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom++):(d.zoomOffset++,d.maxZoom--),d.minZoom=Math.max(0,d.minZoom)),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var w=document.createElement("img");return Gt(w,"load",S(this._tileOnLoad,this,d,w)),Gt(w,"error",S(this._tileOnError,this,d,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.setAttribute("role","presentation"),w.src=this.getTileUrl(a),w},getTileUrl:function(a){var d={r:bt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=w),d["-y"]=w}return Q(this._url,g(d,this.options))},_tileOnLoad:function(a,d){bt.ielt9?setTimeout(S(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,w){var P=this.options.errorTileUrl;P&&d.getAttribute("src")!==P&&(d.src=P),a(w,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,w=this.options.zoomReverse,P=this.options.zoomOffset;return w&&(a=d-a),a+P},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=q,d.onerror=q,!d.complete)){d.src=Ae;var w=this._tiles[a].coords;Xt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:w})}},_removeTile:function(a){var d=this._tiles[a];if(!!d)return d.el.setAttribute("src",Ae),fs.prototype._removeTile.call(this,a)},_tileReady:function(a,d,w){if(!(!this._map||w&&w.getAttribute("src")===Ae))return fs.prototype._tileReady.call(this,a,d,w)}});function Ws(a,d){return new gr(a,d)}var tt=gr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var w=g({},this.defaultWmsParams);for(var P in d)P in this.options||(w[P]=d[P]);d=pe(this,d);var D=d.detectRetina&&bt.retina?2:1,G=this.getTileSize();w.width=G.x*D,w.height=G.y*D,this.wmsParams=w},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,gr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),w=this._crs,P=It(w.project(d[0]),w.project(d[1])),D=P.min,G=P.max,ue=(this._wmsVersion>=1.3&&this._crs===ma?[D.y,D.x,G.y,G.x]:[D.x,D.y,G.x,G.y]).join(","),be=gr.prototype.getTileUrl.call(this,a);return be+Ee(this.wmsParams,be,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ue},setParams:function(a,d){return g(this.wmsParams,a),d||this.redraw(),this}});function nu(a,d){return new tt(a,d)}gr.WMS=tt,Ws.wms=nu;var Jr=Gi.extend({options:{padding:.1},initialize:function(a){pe(this,a),I(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Kt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var w=this._map.getZoomScale(d,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,d),G=P.multiplyBy(-w).add(D).subtract(this._map._getNewPixelOrigin(a,d));bt.any3d?po(this._container,G,w):Kn(this._container,G)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),w=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new wt(w,w.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vu=Jr.extend({options:{tolerance:0},getEvents:function(){var a=Jr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Gt(a,"mousemove",this._onMouseMove,this),Gt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Gt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Lt(this._redrawRequest),delete this._ctx,Xt(this._container),Pn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var a=this._bounds,d=this._container,w=a.getSize(),P=bt.retina?2:1;Kn(d,a.min),d.width=P*w.x,d.height=P*w.y,d.style.width=w.x+"px",d.style.height=w.y+"px",bt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Jr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[I(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,w=d.next,P=d.prev;w?w.prev=P:this._drawLast=P,P?P.next=w:this._drawFirst=w,delete a._order,delete this._layers[I(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),w=[],P,D;for(D=0;D<d.length;D++){if(P=Number(d[D]),isNaN(P))return;w.push(P)}a.options._dashArray=w}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){!this._map||(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Pt(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new wt,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var w=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)a=P.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(!!this._drawing){var w,P,D,G,ue=a._parts,be=ue.length,Le=this._ctx;if(!!be){for(Le.beginPath(),w=0;w<be;w++){for(P=0,D=ue[w].length;P<D;P++)G=ue[w][P],Le[P?"lineTo":"moveTo"](G.x,G.y);d&&Le.closePath()}this._fillStroke(Le,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,w=this._ctx,P=Math.max(Math.round(a._radius),1),D=(Math.max(Math.round(a._radiusY),1)||P)/P;D!==1&&(w.save(),w.scale(1,D)),w.beginPath(),w.arc(d.x,d.y/D,P,0,Math.PI*2,!1),D!==1&&w.restore(),this._fillStroke(w,a)}},_fillStroke:function(a,d){var w=d.options;w.fill&&(a.globalAlpha=w.fillOpacity,a.fillStyle=w.fillColor||w.color,a.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=w.opacity,a.lineWidth=w.weight,a.strokeStyle=w.color,a.lineCap=w.lineCap,a.lineJoin=w.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),w,P,D=this._drawFirst;D;D=D.next)w=D.layer,w.options.interactive&&w._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(w))&&(P=w);this._fireEvent(P?[P]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(Un(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var w,P,D=this._drawFirst;D;D=D.next)w=D.layer,w.options.interactive&&w._containsPoint(d)&&(P=w);P!==this._hoveredLayer&&(this._handleMouseOut(a),P&&(Kt(this._container,"leaflet-interactive"),this._fireEvent([P],a,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(S(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,w){this._map._fireDOMEvent(d,w||d.type,a)},_bringToFront:function(a){var d=a._order;if(!!d){var w=d.next,P=d.prev;if(w)w.prev=P;else return;P?P.next=w:w&&(this._drawFirst=w),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(!!d){var w=d.next,P=d.prev;if(P)P.next=w;else return;w?w.prev=P:P&&(this._drawLast=P),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function qs(a){return bt.canvas?new Vu(a):null}var Hs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$u={_initContainer:function(){this._container=zt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=Hs("shape");Kt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=Hs("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[I(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;Xt(d),a.removeInteractiveTarget(d),delete this._layers[I(a)]},_updateStyle:function(a){var d=a._stroke,w=a._fill,P=a.options,D=a._container;D.stroked=!!P.stroke,D.filled=!!P.fill,P.stroke?(d||(d=a._stroke=Hs("stroke")),D.appendChild(d),d.weight=P.weight+"px",d.color=P.color,d.opacity=P.opacity,P.dashArray?d.dashStyle=te(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=P.lineCap.replace("butt","flat"),d.joinstyle=P.lineJoin):d&&(D.removeChild(d),a._stroke=null),P.fill?(w||(w=a._fill=Hs("fill")),D.appendChild(w),w.color=P.fillColor||P.color,w.opacity=P.fillOpacity):w&&(D.removeChild(w),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),w=Math.round(a._radius),P=Math.round(a._radiusY||w);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+w+","+P+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){Ao(a._container)},_bringToBack:function(a){Mo(a._container)}},sl=bt.vml?Hs:uo,ba=Jr.extend({_initContainer:function(){this._container=sl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xt(this._container),Pn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,w.setAttribute("width",d.x),w.setAttribute("height",d.y)),Kn(w,a.min),w.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=sl("path");a.options.className&&Kt(d,a.options.className),a.options.interactive&&Kt(d,"leaflet-interactive"),this._updateStyle(a),this._layers[I(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Xt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[I(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,w=a.options;!d||(w.stroke?(d.setAttribute("stroke",w.color),d.setAttribute("stroke-opacity",w.opacity),d.setAttribute("stroke-width",w.weight),d.setAttribute("stroke-linecap",w.lineCap),d.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?d.setAttribute("stroke-dasharray",w.dashArray):d.removeAttribute("stroke-dasharray"),w.dashOffset?d.setAttribute("stroke-dashoffset",w.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),w.fill?(d.setAttribute("fill",w.fillColor||w.color),d.setAttribute("fill-opacity",w.fillOpacity),d.setAttribute("fill-rule",w.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,kr(a._parts,d))},_updateCircle:function(a){var d=a._point,w=Math.max(Math.round(a._radius),1),P=Math.max(Math.round(a._radiusY),1)||w,D="a"+w+","+P+" 0 1,0 ",G=a._empty()?"M0 0":"M"+(d.x-w)+","+d.y+D+w*2+",0 "+D+-w*2+",0 ";this._setPath(a,G)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){Ao(a._path)},_bringToBack:function(a){Mo(a._path)}});bt.vml&&ba.include($u);function Sa(a){return bt.svg||bt.vml?new ba(a):null}rn.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&qs(a)||Sa(a)}});var al=vo.extend({initialize:function(a,d){vo.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Rt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function iu(a,d){return new al(a,d)}ba.create=sl,ba.pointsToPath=kr,Wi.geometryToLayer=as,Wi.coordsToLatLng=ls,Wi.coordsToLatLngs=_a,Wi.latLngToCoords=ol,Wi.latLngsToCoords=ya,Wi.getFeature=Lr,Wi.asFeature=va,rn.mergeOptions({boxZoom:!0});var ll=Hr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ar(),Ls(),this._startPoint=this._map.mouseEventToContainerPoint(a),Gt(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=zt("div","leaflet-zoom-box",this._container),Kt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new wt(this._point,this._startPoint),w=d.getSize();Kn(this._box,d.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(Xt(this._box),Un(this._container,"leaflet-crosshair")),Do(),Ds(),Pn(document,{contextmenu:rs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(S(this._resetState,this),0);var d=new Qt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});rn.addInitHook("addHandler","boxZoom",ll),rn.mergeOptions({doubleClickZoom:!0});var Bi=Hr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,w=d.getZoom(),P=d.options.zoomDelta,D=a.originalEvent.shiftKey?w-P:w+P;d.options.doubleClickZoom==="center"?d.setZoom(D):d.setZoomAround(a.containerPoint,D)}});rn.addInitHook("addHandler","doubleClickZoom",Bi),rn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xo=Hr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Xr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Kt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Un(this._map._container,"leaflet-grab"),Un(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Rt(this._map.options.maxBounds);this._offsetLimit=It(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),w=this._initialWorldOffset,P=this._draggable._newPos.x,D=(P-d+w)%a+d-w,G=(P+d+w)%a-d-w,ue=Math.abs(D+w)<Math.abs(G+w)?D:G;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ue},_onDragEnd:function(a){var d=this._map,w=d.options,P=!w.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),P)d.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),G=(this._lastTime-this._times[0])/1e3,ue=w.easeLinearity,be=D.multiplyBy(ue/G),Le=be.distanceTo([0,0]),Se=Math.min(w.inertiaMaxSpeed,Le),je=be.multiplyBy(Se/Le),Wt=Se/(w.inertiaDeceleration*ue),en=je.multiplyBy(-Wt/2).round();!en.x&&!en.y?d.fire("moveend"):(en=d._limitOffset(en,d.options.maxBounds),Pt(function(){d.panBy(en,{duration:Wt,easeLinearity:ue,noMoveStart:!0,animate:!0})}))}}});rn.addInitHook("addHandler","dragging",xo),rn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ru=Hr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Gt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,w=a.scrollTop||d.scrollTop,P=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(P,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},w=this.keyCodes,P,D;for(P=0,D=w.left.length;P<D;P++)d[w.left[P]]=[-1*a,0];for(P=0,D=w.right.length;P<D;P++)d[w.right[P]]=[a,0];for(P=0,D=w.down.length;P<D;P++)d[w.down[P]]=[0,a];for(P=0,D=w.up.length;P<D;P++)d[w.up[P]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},w=this.keyCodes,P,D;for(P=0,D=w.zoomIn.length;P<D;P++)d[w.zoomIn[P]]=a;for(P=0,D=w.zoomOut.length;P<D;P++)d[w.zoomOut[P]]=-a},_addHooks:function(){Gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,w=this._map,P;if(d in this._panKeys)(!w._panAnim||!w._panAnim._inProgress)&&(P=this._panKeys[d],a.shiftKey&&(P=qe(P).multiplyBy(3)),w.panBy(P),w.options.maxBounds&&w.panInsideBounds(w.options.maxBounds));else if(d in this._zoomKeys)w.setZoom(w.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;rs(a)}}});rn.addInitHook("addHandler","keyboard",ru),rn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ul=Hr.extend({addHooks:function(){Gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Zl(a),w=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var P=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(S(this._performZoom,this),P),rs(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),w=this._map.options.zoomSnap||0;a._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,G=w?Math.ceil(D/w)*w:D,ue=a._limitZoom(d+(this._delta>0?G:-G))-d;this._delta=0,this._startTime=null,ue&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ue):a.setZoomAround(this._lastMousePos,d+ue))}});rn.addInitHook("addHandler","scrollWheelZoom",ul);var Xs=600;rn.mergeOptions({tapHold:bt.touchNative&&bt.safari&&bt.mobile,tapTolerance:15});var cl=Hr.extend({addHooks:function(){Gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new Fe(d.clientX,d.clientY),this._holdTimeout=setTimeout(S(function(){this._cancel(),this._isTapValid()&&(Gt(document,"touchend",Bt),Gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Xs),Gt(document,"touchend touchcancel contextmenu",this._cancel,this),Gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Pn(document,"touchend",Bt),Pn(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Pn(document,"touchend touchcancel contextmenu",this._cancel,this),Pn(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new Fe(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var w=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});w._simulated=!0,d.target.dispatchEvent(w)}});rn.addInitHook("addHandler","tapHold",cl),rn.mergeOptions({touchZoom:bt.touch,bounceAtZoomLimits:!0});var Ea=Hr.extend({addHooks:function(){Kt(this._map._container,"leaflet-touch-zoom"),Gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Un(this._map._container,"leaflet-touch-zoom"),Pn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var w=d.mouseEventToContainerPoint(a.touches[0]),P=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(w.add(P)._divideBy(2))),this._startDist=w.distanceTo(P),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Gt(document,"touchmove",this._onTouchMove,this),Gt(document,"touchend touchcancel",this._onTouchEnd,this),Bt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,w=d.mouseEventToContainerPoint(a.touches[0]),P=d.mouseEventToContainerPoint(a.touches[1]),D=w.distanceTo(P)/this._startDist;if(this._zoom=d.getScaleZoom(D,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&D<1||this._zoom>d.getMaxZoom()&&D>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var G=w._add(P)._divideBy(2)._subtract(this._centerPoint);if(D===1&&G.x===0&&G.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(G),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Lt(this._animRequest);var ue=S(d._move,d,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Pt(ue,this,!0),Bt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Lt(this._animRequest),Pn(document,"touchmove",this._onTouchMove,this),Pn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});rn.addInitHook("addHandler","touchZoom",Ea),rn.BoxZoom=ll,rn.DoubleClickZoom=Bi,rn.Drag=xo,rn.Keyboard=ru,rn.ScrollWheelZoom=ul,rn.TapHold=cl,rn.TouchZoom=Ea,o.Bounds=wt,o.Browser=bt,o.CRS=gn,o.Canvas=Vu,o.Circle=Zs,o.CircleMarker=ga,o.Class=At,o.Control=er,o.DivIcon=ps,o.DivOverlay=Yr,o.DomEvent=jl,o.DomUtil=Mu,o.Draggable=Xr,o.Evented=En,o.FeatureGroup=Mr,o.GeoJSON=Wi,o.GridLayer=fs,o.Handler=Hr,o.Icon=Ii,o.ImageOverlay=Ei,o.LatLng=Nt,o.LatLngBounds=Qt,o.Layer=Gi,o.LayerGroup=_o,o.LineUtil=Qa,o.Map=rn,o.Marker=yo,o.Mixin=jc,o.Path=Kr,o.Point=Fe,o.PolyUtil=qn,o.Polygon=vo,o.Polyline=tr,o.Popup=Gs,o.PosAnimation=da,o.Projection=Gc,o.Rectangle=al,o.Renderer=Jr,o.SVG=ba,o.SVGOverlay=cs,o.TileLayer=gr,o.Tooltip=xa,o.Transformation=hr,o.Util=on,o.VideoOverlay=Uo,o.bind=S,o.bounds=It,o.canvas=qs,o.circle=Nu,o.circleMarker=il,o.control=Fo,o.divIcon=ut,o.extend=g,o.featureGroup=tl,o.geoJSON=js,o.geoJson=nr,o.gridLayer=wa,o.icon=Ou,o.imageOverlay=Wc,o.latLng=Ct,o.latLngBounds=Rt,o.layerGroup=Jl,o.map=Gl,o.marker=nl,o.point=qe,o.polygon=rl,o.polyline=eu,o.popup=qc,o.rectangle=iu,o.setOptions=pe,o.stamp=I,o.svg=Sa,o.svgOverlay=hs,o.tileLayer=Ws,o.tooltip=ds,o.transformation=Li,o.version=h,o.videoOverlay=Uu;var _r=window.L;o.noConflict=function(){return window.L=_r,this},window.L=o})})(Yg,Yg.exports);var VI=Yg.exports;const $I=Mn("div",{height:"calc(100vh - $4 - $4)"});function ZI(e){var n,o;return re.exports.useEffect(()=>(n=VI.map("map").setView([0,0],0),()=>{n.remove()}),[]),re.exports.useEffect(()=>{o&&o.remove(),(async()=>{if(n){let g=await iy(e.file);g===Ga.PNG||g==Ga.JPG?(o=JP(e.file,{attribution:'\xA9 <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}),o.addTo(n)):console.error("leaflet vector preview not yet implemented")}})()},[]),_t($I,{id:"map"})}var gb={exports:{}};(function(e,n){(function(o,h){e.exports=h()})(wx,function(){var o,h,g;function v(u,I){if(!o)o=I;else if(!h)h=I;else{var N="var sharedChunk = {}; ("+o+")(sharedChunk); ("+h+")(sharedChunk);",j={};o(j),g=I(j),typeof window!="undefined"&&(g.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}v(["exports"],function(u){var I=N;function N(r,t,s,c){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=s,this.p2y=c}function j(r,t,s,c){const m=new I(r,t,s,c);return function(y){return m.solve(y)}}N.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,c=0;c<8;c++){var m=this.sampleCurveX(s)-r;if(Math.abs(m)<t)return s;var y=this.sampleCurveDerivativeX(s);if(Math.abs(y)<1e-6)break;s-=m/y}var x=0,E=1;for(s=r,c=0;c<20&&(m=this.sampleCurveX(s),!(Math.abs(m-r)<t));c++)r>m?x=s:E=s,s=.5*(E-x)+x;return s},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};const q=j(.25,.1,.25,1);function V(r,t,s){return Math.min(s,Math.max(t,r))}function he(r,t,s){const c=s-t,m=((r-t)%c+c)%c+t;return m===t?s:m}function ge(r,...t){for(const s of t)for(const c in s)r[c]=s[c];return r}let pe=1;function Ee(r,t){r.forEach(s=>{t[s]&&(t[s]=t[s].bind(t))})}function ne(r,t,s){const c={};for(const m in r)c[m]=t.call(s||this,r[m],m,r);return c}function Q(r,t,s){const c={};for(const m in r)t.call(s||this,r[m],m,r)&&(c[m]=r[m]);return c}function te(r){return Array.isArray(r)?r.map(te):typeof r=="object"&&r?ne(r,te):r}const Te={};function Ae(r){Te[r]||(typeof console!="undefined"&&console.warn(r),Te[r]=!0)}function $e(r,t,s){return(s.y-r.y)*(t.x-r.x)>(t.y-r.y)*(s.x-r.x)}function Ne(r){let t=0;for(let s,c,m=0,y=r.length,x=y-1;m<y;x=m++)s=r[m],c=r[x],t+=(c.x-s.x)*(s.y+c.y);return t}function Be(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function lt(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,m,y)=>{const x=m||y;return t[c]=!x||x.toLowerCase(),""}),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t}let dt,Pt,Lt=null;function on(r){if(Lt==null){const t=r.navigator?r.navigator.userAgent:null;Lt=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Lt}function At(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}const cn={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const t=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(r,t=0){const s=window.document.createElement("canvas"),c=s.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,c.drawImage(r,0,0,r.width,r.height),c.getImageData(-t,-t,r.width+2*t,r.height+2*t)},resolveURL:r=>(dt||(dt=document.createElement("a")),dt.href=r,dt.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Pt==null&&(Pt=matchMedia("(prefers-reduced-motion: reduce)")),Pt.matches)}};var Ke=En;function En(r,t){this.x=r,this.y=t}En.prototype={clone:function(){return new En(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,s=r.y-this.y;return t*t+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),s=Math.sin(r),c=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=c,this},_rotateAround:function(r,t){var s=Math.cos(r),c=Math.sin(r),m=t.y+c*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-c*(this.y-t.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},En.convert=function(r){return r instanceof En?r:Array.isArray(r)?new En(r[0],r[1]):r};const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},ct="mapbox-tiles";let qe,wt,It=500,Qt=50;function Rt(){typeof caches=="undefined"||qe||(qe=caches.open(ct))}let Nt=1/0;const Ct={supported:!1,testSupport:function(r){!qr&&Ln&&(Tr?hr(r):gn=r)}};let gn,Ln,qr=!1,Tr=!1;function hr(r){const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Ln),r.isContextLost())return;Ct.supported=!0}catch{}r.deleteTexture(t),qr=!0}typeof document!="undefined"&&(Ln=document.createElement("img"),Ln.onload=function(){gn&&hr(gn),gn=null,Tr=!0},Ln.onerror=function(){qr=!0,gn=null},Ln.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Li={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Li);class Nn extends Error{constructor(t,s,c,m){super(`AJAXError: ${s} (${t}): ${c}`),this.status=t,this.statusText=s,this.url=c,this.body=m}}const Pr=Be()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function uo(r,t){const s=new AbortController,c=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Pr(),signal:s.signal});let m=!1,y=!1;return r.type==="json"&&c.headers.set("Accept","application/json"),((x,E,k)=>{if(y)return;const A=Date.now();fetch(c).then(F=>F.ok?((O,$,W)=>{(r.type==="arrayBuffer"?O.arrayBuffer():r.type==="json"?O.json():O.text()).then(H=>{y||($&&W&&function(ae,le,xe){if(Rt(),!qe)return;const Ie={status:le.status,statusText:le.statusText,headers:new Headers};le.headers.forEach((Re,Ge)=>Ie.headers.set(Ge,Re));const Pe=lt(le.headers.get("Cache-Control")||"");Pe["no-store"]||(Pe["max-age"]&&Ie.headers.set("Expires",new Date(xe+1e3*Pe["max-age"]).toUTCString()),new Date(Ie.headers.get("Expires")).getTime()-xe<42e4||function(Re,Ge){if(wt===void 0)try{new Response(new ReadableStream),wt=!0}catch{wt=!1}wt?Ge(Re.body):Re.blob().then(Ge)}(le,Re=>{const Ge=new Response(Re,Ie);Rt(),qe&&qe.then(Ve=>Ve.put(function(pt){const vt=pt.indexOf("?");return vt<0?pt:pt.slice(0,vt)}(ae.url),Ge)).catch(Ve=>Ae(Ve.message))}))}(c,$,W),m=!0,t(null,H,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(H=>{y||t(new Error(H.message))})})(F,null,A):F.blob().then(O=>t(new Nn(F.status,F.statusText,r.url,O)))).catch(F=>{F.code!==20&&t(new Error(F.message))})})(),{cancel:()=>{y=!0,m||s.abort()}}}const kr=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(Be()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t);if(!Be()){const c=r.url.substring(0,r.url.indexOf("://"));return(Fe.REGISTERED_PROTOCOLS[c]||uo)(r,t)}}if(!(/^file:/.test(s=r.url)||/^file:/.test(Pr())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return uo(r,t);if(Be()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t,void 0,!0)}var s;return function(c,m){const y=new XMLHttpRequest;y.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in c.headers)y.setRequestHeader(x,c.headers[x]);return c.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=c.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(c.type==="json")try{x=JSON.parse(y.response)}catch(E){return m(E)}m(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const x=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new Nn(y.status,y.statusText,c.url,x))}},y.send(c.body),{cancel:()=>y.abort()}}(r,t)},ui=function(r,t){return kr(ge(r,{type:"arrayBuffer"}),t)};function Cr(r){const t=window.document.createElement("a");return t.href=r,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const $i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ki,Zi;ki=[],Zi=0;const zo=function(r,t){if(Ct.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Zi>=Fe.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:r,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ki.push(y),y}Zi++;let s=!1;const c=()=>{if(!s)for(s=!0,Zi--;ki.length&&Zi<Fe.MAX_PARALLEL_IMAGE_REQUESTS;){const y=ki.shift(),{requestParameters:x,callback:E,cancelled:k}=y;k||(y.cancel=zo(x,E).cancel)}},m=ui(r,(y,x,E,k)=>{c(),y?t(y):x&&function(A,F){typeof createImageBitmap=="function"?function(O,$){const W=new Blob([new Uint8Array(O)],{type:"image/png"});createImageBitmap(W).then(H=>{$(null,H)}).catch(H=>{$(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(A,F):function(O,$){const W=new Image;W.onload=()=>{$(null,W),URL.revokeObjectURL(W.src),W.onload=null,window.requestAnimationFrame(()=>{W.src=$i})},W.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(O)],{type:"image/png"});W.src=O.byteLength?URL.createObjectURL(H):$i}(A,F)}(x,(A,F)=>{A!=null?t(A):F!=null&&t(null,F,{cacheControl:E,expires:k})})});return{cancel:()=>{m.cancel(),c()}}};function Ht(r,t,s){s[r]&&s[r].indexOf(t)!==-1||(s[r]=s[r]||[],s[r].push(t))}function it(r,t,s){if(s&&s[r]){const c=s[r].indexOf(t);c!==-1&&s[r].splice(c,1)}}class Et{constructor(t,s={}){ge(this,s),this.type=t}}class yn extends Et{constructor(t,s={}){super("error",ge({error:t},s))}}class Fn{on(t,s){return this._listeners=this._listeners||{},Ht(t,s,this._listeners),this}off(t,s){return it(t,s,this._listeners),it(t,s,this._oneTimeListeners),this}once(t,s){return this._oneTimeListeners=this._oneTimeListeners||{},Ht(t,s,this._oneTimeListeners),this}fire(t,s){typeof t=="string"&&(t=new Et(t,s||{}));const c=t.type;if(this.listens(c)){t.target=this;const m=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const E of m)E.call(this,t);const y=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const E of y)it(c,E,this._oneTimeListeners),E.call(this,t);const x=this._eventedParent;x&&(ge(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(t))}else t instanceof yn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Qe{constructor(t,s,c,m){this.message=(t?`${t}: `:"")+c,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Di(r){const t=r.value;return t?[new Qe(r.key,t,"constants have been deprecated as of v8")]:[]}function ji(r,...t){for(const s of t)for(const c in s)r[c]=s[c];return r}function hn(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Si(r){if(Array.isArray(r))return r.map(Si);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const s in r)t[s]=Si(r[s]);return t}return hn(r)}class Wn extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}class dr{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[c,m]of s)this.bindings[c]=m}concat(t){return new dr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const vn={kind:"null"},Xe={kind:"number"},Ut={kind:"string"},Ft={kind:"boolean"},Ci={kind:"color"},pr={kind:"object"},Vt={kind:"value"},es={kind:"collator"},Ir={kind:"formatted"},co={kind:"resolvedImage"};function ii(r,t){return{kind:"array",itemType:r,N:t}}function Tn(r){if(r.kind==="array"){const t=Tn(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const fr=[vn,Xe,Ut,Ft,Ci,Ir,pr,ii(Vt),co];function ho(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ho(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const s of fr)if(!ho(s,t))return null}}return`Expected ${Tn(r)} but found ${Tn(t)} instead.`}function ci(r,t){return t.some(s=>s.kind===r.kind)}function zr(r,t){return t.some(s=>s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r)}var ri,bt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ts(r){return(r=Math.round(r))<0?0:r>255?255:r}function ns(r){return ts(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function J(r){return(t=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:t>1?1:t;var t}function M(r,t,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?r+(t-r)*s*6:2*s<1?t:3*s<2?r+(t-r)*(2/3-s)*6:r}try{ri={}.parseCSSColor=function(r){var t,s=r.replace(/ /g,"").toLowerCase();if(s in bt)return bt[s].slice();if(s[0]==="#")return s.length===4?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:s.length===7&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var c=s.indexOf("("),m=s.indexOf(")");if(c!==-1&&m+1===s.length){var y=s.substr(0,c),x=s.substr(c+1,m-(c+1)).split(","),E=1;switch(y){case"rgba":if(x.length!==4)return null;E=J(x.pop());case"rgb":return x.length!==3?null:[ns(x[0]),ns(x[1]),ns(x[2]),E];case"hsla":if(x.length!==4)return null;E=J(x.pop());case"hsl":if(x.length!==3)return null;var k=(parseFloat(x[0])%360+360)%360/360,A=J(x[1]),F=J(x[2]),O=F<=.5?F*(A+1):F+A-F*A,$=2*F-O;return[ts(255*M($,O,k+1/3)),ts(255*M($,O,k)),ts(255*M($,O,k-1/3)),E];default:return null}}return null}}catch{}class B{constructor(t,s,c,m=1){this.r=t,this.g=s,this.b=c,this.a=m}static parse(t){if(!t)return;if(t instanceof B)return t;if(typeof t!="string")return;const s=ri(t);return s?new B(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[t,s,c,m]=this.toArray();return`rgba(${Math.round(t)},${Math.round(s)},${Math.round(c)},${m})`}toArray(){const{r:t,g:s,b:c,a:m}=this;return m===0?[0,0,0,0]:[255*t/m,255*s/m,255*c/m,m]}}B.black=new B(0,0,0,1),B.white=new B(1,1,1,1),B.transparent=new B(0,0,0,0),B.red=new B(1,0,0,1);class X{constructor(t,s,c){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ee{constructor(t,s,c,m,y){this.text=t,this.image=s,this.scale=c,this.fontStack=m,this.textColor=y}}class ie{constructor(t){this.sections=t}static fromString(t){return new ie([new ee(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ie?t:ie.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const s of this.sections){if(s.image){t.push(["image",s.image.name]);continue}t.push(s.text);const c={};s.fontStack&&(c["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(c["font-scale"]=s.scale),s.textColor&&(c["text-color"]=["rgba"].concat(s.textColor.toArray())),t.push(c)}return t}}class fe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new fe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function ce(r,t,s,c){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[r,t,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[r,t,s,c]:[r,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function de(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof B||r instanceof X||r instanceof ie||r instanceof fe)return!0;if(Array.isArray(r)){for(const t of r)if(!de(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!de(r[t]))return!1;return!0}return!1}function me(r){if(r===null)return vn;if(typeof r=="string")return Ut;if(typeof r=="boolean")return Ft;if(typeof r=="number")return Xe;if(r instanceof B)return Ci;if(r instanceof X)return es;if(r instanceof ie)return Ir;if(r instanceof fe)return co;if(Array.isArray(r)){const t=r.length;let s;for(const c of r){const m=me(c);if(s){if(s===m)continue;s=Vt;break}s=m}return ii(s||Vt,t)}return pr}function Me(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof B||r instanceof ie||r instanceof fe?r.toString():JSON.stringify(r)}class Ze{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(t.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!de(t[1]))return s.error("invalid value");const c=t[1];let m=me(c);const y=s.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Ze(m,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof B?["rgba"].concat(this.value.toArray()):this.value instanceof ie?this.value.serialize():this.value}}class Ce{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ft={string:Ut,number:Xe,boolean:Ft,object:pr};class rt{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let c,m=1;const y=t[0];if(y==="array"){let E,k;if(t.length>2){const A=t[1];if(typeof A!="string"||!(A in ft)||A==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);E=ft[A],m++}else E=Vt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);k=t[2],m++}c=ii(E,k)}else c=ft[y];const x=[];for(;m<t.length;m++){const E=s.parse(t[m],m,Vt);if(!E)return null;x.push(E)}return new rt(c,x)}evaluate(t){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(t);if(!ho(this.type,me(c)))return c;if(s===this.args.length-1)throw new Ce(`Expected value to be of type ${Tn(this.type)}, but found ${Tn(me(c))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,s=[t.kind];if(t.kind==="array"){const c=t.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){s.push(c.kind);const m=t.N;(typeof m=="number"||this.args.length>1)&&s.push(m)}}return s.concat(this.args.map(c=>c.serialize()))}}class gt{constructor(t){this.type=Ir,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return s.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=t.length-1;++x){const E=t[x];if(y&&typeof E=="object"&&!Array.isArray(E)){y=!1;let k=null;if(E["font-scale"]&&(k=s.parse(E["font-scale"],1,Xe),!k))return null;let A=null;if(E["text-font"]&&(A=s.parse(E["text-font"],1,ii(Ut)),!A))return null;let F=null;if(E["text-color"]&&(F=s.parse(E["text-color"],1,Ci),!F))return null;const O=m[m.length-1];O.scale=k,O.font=A,O.textColor=F}else{const k=s.parse(t[x],1,Vt);if(!k)return null;const A=k.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:k,scale:null,font:null,textColor:null})}}return new gt(m)}evaluate(t){return new ie(this.sections.map(s=>{const c=s.content.evaluate(t);return me(c)===co?new ee("",c,null,null,null):new ee(Me(c),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null)}))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const s of this.sections){t.push(s.content.serialize());const c={};s.scale&&(c["font-scale"]=s.scale.serialize()),s.font&&(c["text-font"]=s.font.serialize()),s.textColor&&(c["text-color"]=s.textColor.serialize()),t.push(c)}return t}}class Tt{constructor(t){this.type=co,this.input=t}static parse(t,s){if(t.length!==2)return s.error("Expected two arguments.");const c=s.parse(t[1],1,Ut);return c?new Tt(c):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),c=fe.fromString(s);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(s)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ln={"to-boolean":Ft,"to-color":Ci,"to-number":Xe,"to-string":Ut};class qt{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const c=t[0];if((c==="to-boolean"||c==="to-string")&&t.length!==2)return s.error("Expected one argument.");const m=ln[c],y=[];for(let x=1;x<t.length;x++){const E=s.parse(t[x],x,Vt);if(!E)return null;y.push(E)}return new qt(m,y)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let s,c;for(const m of this.args){if(s=m.evaluate(t),c=null,s instanceof B)return s;if(typeof s=="string"){const y=t.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ce(s[0],s[1],s[2],s[3]),!c))return new B(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Ce(c||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const c of this.args){if(s=c.evaluate(t),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new Ce(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?ie.fromString(Me(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?fe.fromString(Me(this.args[0].evaluate(t))):Me(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new gt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tt(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(s=>{t.push(s.serialize())}),t}}const jt=["Unknown","Point","LineString","Polygon"];class $t{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let s=this._parseColorCache[t];return s||(s=this._parseColorCache[t]=B.parse(t)),s}}class Ot{constructor(t,s,c,m){this.name=t,this.type=s,this._evaluate=c,this.args=m}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,s){const c=t[0],m=Ot.definitions[c];if(!m)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter(([A])=>!Array.isArray(A)||A.length===t.length-1);let k=null;for(const[A,F]of E){k=new Ds(s.registry,s.path,null,s.scope);const O=[];let $=!1;for(let W=1;W<t.length;W++){const H=t[W],ae=Array.isArray(A)?A[W-1]:A.type,le=k.parse(H,1+O.length,ae);if(!le){$=!0;break}O.push(le)}if(!$)if(Array.isArray(A)&&A.length!==O.length)k.error(`Expected ${A.length} arguments, but found ${O.length} instead.`);else{for(let W=0;W<O.length;W++){const H=Array.isArray(A)?A[W]:A.type,ae=O[W];k.concat(W+1).checkSubtype(H,ae.type)}if(k.errors.length===0)return new Ot(c,y,F,O)}}if(E.length===1)s.errors.push(...k.errors);else{const A=(E.length?E:x).map(([O])=>{return $=O,Array.isArray($)?`(${$.map(Tn).join(", ")})`:`(${Tn($.type)}...)`;var $}).join(" | "),F=[];for(let O=1;O<t.length;O++){const $=s.parse(t[O],1+F.length);if(!$)return null;F.push(Tn($.type))}s.error(`Expected arguments of type ${A}, but found (${F.join(", ")}) instead.`)}return null}static register(t,s){Ot.definitions=s;for(const c in s)t[c]=Ot}}class Dn{constructor(t,s,c){this.type=es,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(t.length!==2)return s.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return s.error("Collator options argument must be an object.");const m=s.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Ft);if(!m)return null;const y=s.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Ft);if(!y)return null;let x=null;return c.locale&&(x=s.parse(c.locale,1,Ut),!x)?null:new Dn(m,y,x)}evaluate(t){return new X(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const zt=8192;function Xt(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function oi(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function Ao(r,t){const s=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,t.z);return[Math.round(s*m*zt),Math.round(c*m*zt)]}function Mo(r,t,s){const c=r[0]-t[0],m=r[1]-t[1],y=r[0]-s[0],x=r[1]-s[1];return c*x-y*m==0&&c*y<=0&&m*x<=0}function xn(r,t){let s=!1;for(let x=0,E=t.length;x<E;x++){const k=t[x];for(let A=0,F=k.length;A<F-1;A++){if(Mo(r,k[A],k[A+1]))return!1;(m=k[A])[1]>(c=r)[1]!=(y=k[A+1])[1]>c[1]&&c[0]<(y[0]-m[0])*(c[1]-m[1])/(y[1]-m[1])+m[0]&&(s=!s)}}var c,m,y;return s}function Kt(r,t){for(let s=0;s<t.length;s++)if(xn(r,t[s]))return!0;return!1}function Un(r,t,s,c){const m=c[0]-s[0],y=c[1]-s[1],x=(r[0]-s[0])*y-m*(r[1]-s[1]),E=(t[0]-s[0])*y-m*(t[1]-s[1]);return x>0&&E<0||x<0&&E>0}function Ul(r,t,s){for(const A of s)for(let F=0;F<A.length-1;++F)if((E=[(x=A[F+1])[0]-(y=A[F])[0],x[1]-y[1]])[0]*(k=[(m=t)[0]-(c=r)[0],m[1]-c[1]])[1]-E[1]*k[0]!=0&&Un(c,m,y,x)&&Un(y,x,c,m))return!0;var c,m,y,x,E,k;return!1}function As(r,t){for(let s=0;s<r.length;++s)if(!xn(r[s],t))return!1;for(let s=0;s<r.length-1;++s)if(Ul(r[s],r[s+1],t))return!1;return!0}function Ji(r,t){for(let s=0;s<t.length;s++)if(As(r,t[s]))return!0;return!1}function Vl(r,t,s){const c=[];for(let m=0;m<r.length;m++){const y=[];for(let x=0;x<r[m].length;x++){const E=Ao(r[m][x],s);Xt(t,E),y.push(E)}c.push(y)}return c}function Ms(r,t,s){const c=[];for(let m=0;m<r.length;m++){const y=Vl(r[m],t,s);c.push(y)}return c}function po(r,t,s,c){if(r[0]<s[0]||r[0]>s[2]){const m=.5*c;let y=r[0]-s[0]>m?-c:s[0]-r[0]>m?c:0;y===0&&(y=r[0]-s[2]>m?-c:s[2]-r[0]>m?c:0),r[0]+=y}Xt(t,r)}function Kn(r,t,s,c){const m=Math.pow(2,c.z)*zt,y=[c.x*zt,c.y*zt],x=[];for(const E of r)for(const k of E){const A=[k.x+y[0],k.y+y[1]];po(A,t,s,m),x.push(A)}return x}function Lo(r,t,s,c){const m=Math.pow(2,c.z)*zt,y=[c.x*zt,c.y*zt],x=[];for(const k of r){const A=[];for(const F of k){const O=[F.x+y[0],F.y+y[1]];Xt(t,O),A.push(O)}x.push(A)}if(t[2]-t[0]<=m/2){(E=t)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const k of x)for(const A of k)po(A,t,s,m)}var E;return x}class Ar{constructor(t,s){this.type=Ft,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(de(t[1])){const c=t[1];if(c.type==="FeatureCollection")for(let m=0;m<c.features.length;++m){const y=c.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Ar(c,c.features[m].geometry)}else if(c.type==="Feature"){const m=c.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ar(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Ar(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(s,c){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const E=Vl(c.coordinates,y,x),k=Kn(s.geometry(),m,y,x);if(!oi(m,y))return!1;for(const A of k)if(!xn(A,E))return!1}if(c.type==="MultiPolygon"){const E=Ms(c.coordinates,y,x),k=Kn(s.geometry(),m,y,x);if(!oi(m,y))return!1;for(const A of k)if(!Kt(A,E))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(s,c){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const E=Vl(c.coordinates,y,x),k=Lo(s.geometry(),m,y,x);if(!oi(m,y))return!1;for(const A of k)if(!As(A,E))return!1}if(c.type==="MultiPolygon"){const E=Ms(c.coordinates,y,x),k=Lo(s.geometry(),m,y,x);if(!oi(m,y))return!1;for(const A of k)if(!Ji(A,E))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Do(r){if(r instanceof Ot&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Ar)return!1;let t=!0;return r.eachChild(s=>{t&&!Do(s)&&(t=!1)}),t}function Ro(r){if(r instanceof Ot&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(s=>{t&&!Ro(s)&&(t=!1)}),t}function fo(r,t){if(r instanceof Ot&&t.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild(c=>{s&&!fo(c,t)&&(s=!1)}),s}class Ls{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const c=t[1];return s.scope.has(c)?new Ls(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ds{constructor(t,s=[],c,m=new dr,y=[]){this.registry=t,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=y,this.expectedType=c}parse(t,s,c,m,y={}){return s?this.concat(s,c,m)._parse(t,y):this._parse(t,y)}_parse(t,s){function c(m,y,x){return x==="assert"?new rt(y,[m]):x==="coerce"?new qt(y,[m]):m}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=t[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(t,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,k=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||k.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string"){if(this.checkSubtype(E,k))return null}else x=c(x,E,s.typeAnnotation||"coerce");else x=c(x,E,s.typeAnnotation||"assert")}if(!(x instanceof Ze)&&x.type.kind!=="resolvedImage"&&Bo(x)){const E=new $t;try{x=new Ze(x.type,x.evaluate(E))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,c){const m=typeof t=="number"?this.path.concat(t):this.path,y=c?this.scope.concat(c):this.scope;return new Ds(this.registry,m,s||null,y,this.errors)}error(t,...s){const c=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Wn(c,t))}checkSubtype(t,s){const c=ho(t,s);return c&&this.error(c),c}}function Bo(r){if(r instanceof Ls)return Bo(r.boundExpression);if(r instanceof Ot&&r.name==="error"||r instanceof Dn||r instanceof Ar)return!1;const t=r instanceof qt||r instanceof rt;let s=!0;return r.eachChild(c=>{s=t?s&&Bo(c):s&&c instanceof Ze}),!!s&&Do(r)&&fo(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Rs(r,t){const s=r.length-1;let c,m,y=0,x=s,E=0;for(;y<=x;)if(E=Math.floor((y+x)/2),c=r[E],m=r[E+1],c<=t){if(E===s||t<m)return E;y=E+1}else{if(!(c>t))throw new Ce("Input is not a number.");x=E-1}return 0}class is{constructor(t,s,c){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[m,y]of c)this.labels.push(m),this.outputs.push(y)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(t[1],1,Xe);if(!c)return null;const m=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<t.length;x+=2){const E=x===1?-1/0:t[x],k=t[x+1],A=x,F=x+1;if(typeof E!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(m.length&&m[m.length-1][0]>=E)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const O=s.parse(k,F,y);if(!O)return null;y=y||O.type,m.push([E,O])}return new is(y,c,m)}evaluate(t){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(t);const m=this.input.evaluate(t);if(m<=s[0])return c[0].evaluate(t);const y=s.length;return m>=s[y-1]?c[y-1].evaluate(t):c[Rs(s,m)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&t.push(this.labels[s]),t.push(this.outputs[s].serialize());return t}}function Vn(r,t,s){return r*(1-s)+t*s}var Bs=Object.freeze({__proto__:null,number:Vn,color:function(r,t,s){return new B(Vn(r.r,t.r,s),Vn(r.g,t.g,s),Vn(r.b,t.b,s),Vn(r.a,t.a,s))},array:function(r,t,s){return r.map((c,m)=>Vn(c,t[m],s))}});const aa=.95047,Mu=1.08883,Gt=4/29,Qi=6/29,Pn=3*Qi*Qi,Lu=Math.PI/180,$l=180/Math.PI;function la(r){return r>.008856451679035631?Math.pow(r,1/3):r/Pn+Gt}function ua(r){return r>Qi?r*r*r:Pn*(r-Gt)}function mo(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function ca(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Fs(r){const t=ca(r.r),s=ca(r.g),c=ca(r.b),m=la((.4124564*t+.3575761*s+.1804375*c)/aa),y=la((.2126729*t+.7151522*s+.072175*c)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-la((.0193339*t+.119192*s+.9503041*c)/Mu)),alpha:r.a}}function Bt(r){let t=(r.l+16)/116,s=isNaN(r.a)?t:t+r.a/500,c=isNaN(r.b)?t:t-r.b/200;return t=1*ua(t),s=aa*ua(s),c=Mu*ua(c),new B(mo(3.2404542*s-1.5371385*t-.4985314*c),mo(-.969266*s+1.8760108*t+.041556*c),mo(.0556434*s-.2040259*t+1.0572252*c),r.alpha)}function rs(r,t,s){const c=t-r;return r+s*(c>180||c<-180?c-360*Math.round(c/360):c)}const Os={forward:Fs,reverse:Bt,interpolate:function(r,t,s){return{l:Vn(r.l,t.l,s),a:Vn(r.a,t.a,s),b:Vn(r.b,t.b,s),alpha:Vn(r.alpha,t.alpha,s)}}},ha={forward:function(r){const{l:t,a:s,b:c}=Fs(r),m=Math.atan2(c,s)*$l;return{h:m<0?m+360:m,c:Math.sqrt(s*s+c*c),l:t,alpha:r.a}},reverse:function(r){const t=r.h*Lu,s=r.c;return Bt({l:r.l,a:Math.cos(t)*s,b:Math.sin(t)*s,alpha:r.alpha})},interpolate:function(r,t,s){return{h:rs(r.h,t.h,s),c:Vn(r.c,t.c,s),l:Vn(r.l,t.l,s),alpha:Vn(r.alpha,t.alpha,s)}}};var Zl=Object.freeze({__proto__:null,lab:Os,hcl:ha});class Ri{constructor(t,s,c,m,y){this.type=t,this.operator=s,this.interpolation=c,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of y)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(t,s,c,m){let y=0;if(t.name==="exponential")y=jl(s,t.base,c,m);else if(t.name==="linear")y=jl(s,1,c,m);else if(t.name==="cubic-bezier"){const x=t.controlPoints;y=new I(x[0],x[1],x[2],x[3]).solve(jl(s,1,c,m))}return y}static parse(t,s){let[c,m,y,...x]=t;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const A=m[1];if(typeof A!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:A}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const A=m.slice(1);if(A.length!==4||A.some(F=>typeof F!="number"||F<0||F>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:A}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Xe),!y)return null;const E=[];let k=null;c==="interpolate-hcl"||c==="interpolate-lab"?k=Ci:s.expectedType&&s.expectedType.kind!=="value"&&(k=s.expectedType);for(let A=0;A<x.length;A+=2){const F=x[A],O=x[A+1],$=A+3,W=A+4;if(typeof F!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(E.length&&E[E.length-1][0]>=F)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const H=s.parse(O,W,k);if(!H)return null;k=k||H.type,E.push([F,H])}return k.kind==="number"||k.kind==="color"||k.kind==="array"&&k.itemType.kind==="number"&&typeof k.N=="number"?new Ri(k,c,m,y,E):s.error(`Type ${Tn(k)} is not interpolatable.`)}evaluate(t){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(t);const m=this.input.evaluate(t);if(m<=s[0])return c[0].evaluate(t);const y=s.length;if(m>=s[y-1])return c[y-1].evaluate(t);const x=Rs(s,m),E=Ri.interpolationFactor(this.interpolation,m,s[x],s[x+1]),k=c[x].evaluate(t),A=c[x+1].evaluate(t);return this.operator==="interpolate"?Bs[this.type.kind.toLowerCase()](k,A,E):this.operator==="interpolate-hcl"?ha.reverse(ha.interpolate(ha.forward(k),ha.forward(A),E)):Os.reverse(Os.interpolate(Os.forward(k),Os.forward(A),E))}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,t,this.input.serialize()];for(let c=0;c<this.labels.length;c++)s.push(this.labels[c],this.outputs[c].serialize());return s}}function jl(r,t,s,c){const m=c-s,y=r-s;return m===0?0:t===1?y/m:(Math.pow(t,y)-1)/(Math.pow(t,m)-1)}class da{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expectected at least one argument.");let c=null;const m=s.expectedType;m&&m.kind!=="value"&&(c=m);const y=[];for(const E of t.slice(1)){const k=s.parse(E,1+y.length,c,void 0,{typeAnnotation:"omit"});if(!k)return null;c=c||k.type,y.push(k)}const x=m&&y.some(E=>ho(m,E.type));return new da(x?Vt:c,y)}evaluate(t){let s,c=null,m=0;for(const y of this.args)if(m++,c=y.evaluate(t),c&&c instanceof fe&&!c.available&&(s||(s=c.name),c=null,m===this.args.length&&(c=s)),c!==null)break;return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(s=>{t.push(s.serialize())}),t}}class rn{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let y=1;y<t.length-1;y+=2){const x=t[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const E=s.parse(t[y+1],y+1);if(!E)return null;c.push([x,E])}const m=s.parse(t[t.length-1],t.length-1,s.expectedType,c);return m?new rn(c,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[s,c]of this.bindings)t.push(s,c.serialize());return t.push(this.result.serialize()),t}}class Gl{constructor(t,s,c){this.type=t,this.index=s,this.input=c}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Xe),m=s.parse(t[2],2,ii(s.expectedType||Vt));return c&&m?new Gl(m.type.itemType,c,m):null}evaluate(t){const s=this.index.evaluate(t),c=this.input.evaluate(t);if(s<0)throw new Ce(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new Ce(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new Ce(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class er{constructor(t,s){this.type=Ft,this.needle=t,this.haystack=s}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Vt),m=s.parse(t[2],2,Vt);return c&&m?ci(c.type,[Ft,Ut,Xe,vn,Vt])?new er(c,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tn(c.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!c)return!1;if(!zr(s,["boolean","string","number","null"]))throw new Ce(`Expected first argument to be of type boolean, string, number or null, but found ${Tn(me(s))} instead.`);if(!zr(c,["string","array"]))throw new Ce(`Expected second argument to be of type array or string, but found ${Tn(me(c))} instead.`);return c.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Fo{constructor(t,s,c){this.type=Xe,this.needle=t,this.haystack=s,this.fromIndex=c}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Vt),m=s.parse(t[2],2,Vt);if(!c||!m)return null;if(!ci(c.type,[Ft,Ut,Xe,vn,Vt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tn(c.type)} instead`);if(t.length===4){const y=s.parse(t[3],3,Xe);return y?new Fo(c,m,y):null}return new Fo(c,m)}evaluate(t){const s=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!zr(s,["boolean","string","number","null"]))throw new Ce(`Expected first argument to be of type boolean, string, number or null, but found ${Tn(me(s))} instead.`);if(!zr(c,["string","array"]))throw new Ce(`Expected second argument to be of type array or string, but found ${Tn(me(c))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(t);return c.indexOf(s,m)}return c.indexOf(s)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ya{constructor(t,s,c,m,y,x){this.inputType=t,this.type=s,this.input=c,this.cases=m,this.outputs=y,this.otherwise=x}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let c,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const y={},x=[];for(let A=2;A<t.length-1;A+=2){let F=t[A];const O=t[A+1];Array.isArray(F)||(F=[F]);const $=s.concat(A);if(F.length===0)return $.error("Expected at least one branch label.");for(const H of F){if(typeof H!="number"&&typeof H!="string")return $.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return $.error("Numeric branch labels must be integer values.");if(c){if($.checkSubtype(c,me(H)))return null}else c=me(H);if(y[String(H)]!==void 0)return $.error("Branch labels must be unique.");y[String(H)]=x.length}const W=s.parse(O,A,m);if(!W)return null;m=m||W.type,x.push(W)}const E=s.parse(t[1],1,Vt);if(!E)return null;const k=s.parse(t[t.length-1],t.length-1,m);return k?E.type.kind!=="value"&&s.concat(1).checkSubtype(c,E.type)?null:new Ya(c,m,E,y,x,k):null}evaluate(t){const s=this.input.evaluate(t);return(me(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),c=[],m={};for(const x of s){const E=m[this.cases[x]];E===void 0?(m[this.cases[x]]=c.length,c.push([this.cases[x],[x]])):c[E][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,E]of c)t.push(E.length===1?y(E[0]):E.map(y)),t.push(this.outputs[x].serialize());return t.push(this.otherwise.serialize()),t}}class Wl{constructor(t,s,c){this.type=t,this.branches=s,this.otherwise=c}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&s.expectedType.kind!=="value"&&(c=s.expectedType);const m=[];for(let x=1;x<t.length-1;x+=2){const E=s.parse(t[x],x,Ft);if(!E)return null;const k=s.parse(t[x+1],x+1,c);if(!k)return null;m.push([E,k]),c=c||k.type}const y=s.parse(t[t.length-1],t.length-1,c);return y?new Wl(c,m,y):null}evaluate(t){for(const[s,c]of this.branches)if(s.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,c]of this.branches)t(s),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(s=>{t.push(s.serialize())}),t}}class Ns{constructor(t,s,c,m){this.type=t,this.input=s,this.beginIndex=c,this.endIndex=m}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=s.parse(t[1],1,Vt),m=s.parse(t[2],2,Xe);if(!c||!m)return null;if(!ci(c.type,[ii(Vt),Ut,Vt]))return s.error(`Expected first argument to be of type array or string, but found ${Tn(c.type)} instead`);if(t.length===4){const y=s.parse(t[3],3,Xe);return y?new Ns(c.type,c,m,y):null}return new Ns(c.type,c,m)}evaluate(t){const s=this.input.evaluate(t),c=this.beginIndex.evaluate(t);if(!zr(s,["string","array"]))throw new Ce(`Expected first argument to be of type array or string, but found ${Tn(me(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(t);return s.slice(c,m)}return s.slice(c)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Du(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ql(r,t,s,c){return c.compare(t,s)===0}function Us(r,t,s){const c=r!=="=="&&r!=="!=";return class _b{constructor(y,x,E){this.type=Ft,this.lhs=y,this.rhs=x,this.collator=E,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const E=y[0];let k=x.parse(y[1],1,Vt);if(!k)return null;if(!Du(E,k.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Tn(k.type)}'.`);let A=x.parse(y[2],2,Vt);if(!A)return null;if(!Du(E,A.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Tn(A.type)}'.`);if(k.type.kind!==A.type.kind&&k.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${Tn(k.type)}' and '${Tn(A.type)}'.`);c&&(k.type.kind==="value"&&A.type.kind!=="value"?k=new rt(A.type,[k]):k.type.kind!=="value"&&A.type.kind==="value"&&(A=new rt(k.type,[A])));let F=null;if(y.length===4){if(k.type.kind!=="string"&&A.type.kind!=="string"&&k.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(F=x.parse(y[3],3,es),!F)return null}return new _b(k,A,F)}evaluate(y){const x=this.lhs.evaluate(y),E=this.rhs.evaluate(y);if(c&&this.hasUntypedArgument){const k=me(x),A=me(E);if(k.kind!==A.kind||k.kind!=="string"&&k.kind!=="number")throw new Ce(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${k.kind}, ${A.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const k=me(x),A=me(E);if(k.kind!=="string"||A.kind!=="string")return t(y,x,E)}return this.collator?s(y,x,E,this.collator.evaluate(y)):t(y,x,E)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[r];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const $c=Us("==",function(r,t,s){return t===s},ql),Hl=Us("!=",function(r,t,s){return t!==s},function(r,t,s,c){return!ql(0,t,s,c)}),Zc=Us("<",function(r,t,s){return t<s},function(r,t,s,c){return c.compare(t,s)<0}),Hr=Us(">",function(r,t,s){return t>s},function(r,t,s,c){return c.compare(t,s)>0}),jc=Us("<=",function(r,t,s){return t<=s},function(r,t,s,c){return c.compare(t,s)<=0}),Ru=Us(">=",function(r,t,s){return t>=s},function(r,t,s,c){return c.compare(t,s)>=0});class Xr{constructor(t,s,c,m,y){this.type=Ut,this.number=t,this.locale=s,this.currency=c,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(t,s){if(t.length!==3)return s.error("Expected two arguments.");const c=s.parse(t[1],1,Xe);if(!c)return null;const m=t[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=s.parse(m.locale,1,Ut),!y))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Ut),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=s.parse(m["min-fraction-digits"],1,Xe),!E))return null;let k=null;return m["max-fraction-digits"]&&(k=s.parse(m["max-fraction-digits"],1,Xe),!k)?null:new Xr(c,y,x,E,k)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ja{constructor(t){this.type=Xe,this.input=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=s.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Tn(c.type)} instead.`):new Ja(c):null}evaluate(t){const s=this.input.evaluate(t);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Ce(`Expected value to be of type string or array, but found ${Tn(me(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(s=>{t.push(s.serialize())}),t}}const os={"==":$c,"!=":Hl,">":Hr,"<":Zc,">=":Ru,"<=":jc,array:rt,at:Gl,boolean:rt,case:Wl,coalesce:da,collator:Dn,format:gt,image:Tt,in:er,"index-of":Fo,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:Ja,let:rn,literal:Ze,match:Ya,number:rt,"number-format":Xr,object:rt,slice:Ns,step:is,string:rt,"to-boolean":qt,"to-color":qt,"to-number":qt,"to-string":qt,var:Ls,within:Ar};function Bu(r,[t,s,c,m]){t=t.evaluate(r),s=s.evaluate(r),c=c.evaluate(r);const y=m?m.evaluate(r):1,x=ce(t,s,c,y);if(x)throw new Ce(x);return new B(t/255*y,s/255*y,c/255*y,y)}function Fu(r,t){return r in t}function pa(r,t){const s=t[r];return s===void 0?null:s}function ss(r){return{type:r}}function Xl(r){return{result:"success",value:r}}function Oo(r){return{result:"error",value:r}}function go(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function No(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Kl(r){return!!r.expression&&r.expression.interpolated}function Mt(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function mr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function dn(r){return r}function Qa(r,t){const s=t.type==="color",c=r.stops&&typeof r.stops[0][0]=="object",m=c||!(c||r.property!==void 0),y=r.type||(Kl(t)?"exponential":"interval");if(s&&((r=ji({},r)).stops&&(r.stops=r.stops.map(A=>[A[0],B.parse(A[1])])),r.default=B.parse(r.default?r.default:t.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!Zl[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let x,E,k;if(y==="exponential")x=fa;else if(y==="interval")x=Vs;else if(y==="categorical"){x=qn,E=Object.create(null);for(const A of r.stops)E[A[0]]=A[1];k=typeof r.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=Gc}if(c){const A={},F=[];for(let W=0;W<r.stops.length;W++){const H=r.stops[W],ae=H[0].zoom;A[ae]===void 0&&(A[ae]={zoom:ae,type:r.type,property:r.property,default:r.default,stops:[]},F.push(ae)),A[ae].stops.push([H[0].value,H[1]])}const O=[];for(const W of F)O.push([A[W].zoom,Qa(A[W],t)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Ri.interpolationFactor.bind(void 0,$),zoomStops:O.map(W=>W[0]),evaluate:({zoom:W},H)=>fa({stops:O,base:r.base},t,W).evaluate(W,H)}}if(m){const A=y==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:Ri.interpolationFactor.bind(void 0,A),zoomStops:r.stops.map(F=>F[0]),evaluate:({zoom:F})=>x(r,t,F,E,k)}}return{kind:"source",evaluate(A,F){const O=F&&F.properties?F.properties[r.property]:void 0;return O===void 0?zn(r.default,t.default):x(r,t,O,E,k)}}}function zn(r,t,s){return r!==void 0?r:t!==void 0?t:s!==void 0?s:void 0}function qn(r,t,s,c,m){return zn(typeof s===m?c[s]:void 0,r.default,t.default)}function Vs(r,t,s){if(Mt(s)!=="number")return zn(r.default,t.default);const c=r.stops.length;if(c===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[c-1][0])return r.stops[c-1][1];const m=Rs(r.stops.map(y=>y[0]),s);return r.stops[m][1]}function fa(r,t,s){const c=r.base!==void 0?r.base:1;if(Mt(s)!=="number")return zn(r.default,t.default);const m=r.stops.length;if(m===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[m-1][0])return r.stops[m-1][1];const y=Rs(r.stops.map(F=>F[0]),s),x=function(F,O,$,W){const H=W-$,ae=F-$;return H===0?0:O===1?ae/H:(Math.pow(O,ae)-1)/(Math.pow(O,H)-1)}(s,c,r.stops[y][0],r.stops[y+1][0]),E=r.stops[y][1],k=r.stops[y+1][1];let A=Bs[t.type]||dn;if(r.colorSpace&&r.colorSpace!=="rgb"){const F=Zl[r.colorSpace];A=(O,$)=>F.reverse(F.interpolate(F.forward(O),F.forward($),x))}return typeof E.evaluate=="function"?{evaluate(...F){const O=E.evaluate.apply(void 0,F),$=k.evaluate.apply(void 0,F);if(O!==void 0&&$!==void 0)return A(O,$,x)}}:A(E,k,x)}function Gc(r,t,s){return t.type==="color"?s=B.parse(s):t.type==="formatted"?s=ie.fromString(s.toString()):t.type==="resolvedImage"?s=fe.fromString(s.toString()):Mt(s)===t.type||t.type==="enum"&&t.values[s]||(s=void 0),zn(s,r.default,t.default)}Ot.register(os,{error:[{kind:"error"},[Ut],(r,[t])=>{throw new Ce(t.evaluate(r))}],typeof:[Ut,[Vt],(r,[t])=>Tn(me(t.evaluate(r)))],"to-rgba":[ii(Xe,4),[Ci],(r,[t])=>t.evaluate(r).toArray()],rgb:[Ci,[Xe,Xe,Xe],Bu],rgba:[Ci,[Xe,Xe,Xe,Xe],Bu],has:{type:Ft,overloads:[[[Ut],(r,[t])=>Fu(t.evaluate(r),r.properties())],[[Ut,pr],(r,[t,s])=>Fu(t.evaluate(r),s.evaluate(r))]]},get:{type:Vt,overloads:[[[Ut],(r,[t])=>pa(t.evaluate(r),r.properties())],[[Ut,pr],(r,[t,s])=>pa(t.evaluate(r),s.evaluate(r))]]},"feature-state":[Vt,[Ut],(r,[t])=>pa(t.evaluate(r),r.featureState||{})],properties:[pr,[],r=>r.properties()],"geometry-type":[Ut,[],r=>r.geometryType()],id:[Vt,[],r=>r.id()],zoom:[Xe,[],r=>r.globals.zoom],"heatmap-density":[Xe,[],r=>r.globals.heatmapDensity||0],"line-progress":[Xe,[],r=>r.globals.lineProgress||0],accumulated:[Vt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Xe,ss(Xe),(r,t)=>{let s=0;for(const c of t)s+=c.evaluate(r);return s}],"*":[Xe,ss(Xe),(r,t)=>{let s=1;for(const c of t)s*=c.evaluate(r);return s}],"-":{type:Xe,overloads:[[[Xe,Xe],(r,[t,s])=>t.evaluate(r)-s.evaluate(r)],[[Xe],(r,[t])=>-t.evaluate(r)]]},"/":[Xe,[Xe,Xe],(r,[t,s])=>t.evaluate(r)/s.evaluate(r)],"%":[Xe,[Xe,Xe],(r,[t,s])=>t.evaluate(r)%s.evaluate(r)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(r,[t,s])=>Math.pow(t.evaluate(r),s.evaluate(r))],sqrt:[Xe,[Xe],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[Xe,[Xe],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[Xe,[Xe],(r,[t])=>Math.log(t.evaluate(r))],log2:[Xe,[Xe],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[Xe,[Xe],(r,[t])=>Math.sin(t.evaluate(r))],cos:[Xe,[Xe],(r,[t])=>Math.cos(t.evaluate(r))],tan:[Xe,[Xe],(r,[t])=>Math.tan(t.evaluate(r))],asin:[Xe,[Xe],(r,[t])=>Math.asin(t.evaluate(r))],acos:[Xe,[Xe],(r,[t])=>Math.acos(t.evaluate(r))],atan:[Xe,[Xe],(r,[t])=>Math.atan(t.evaluate(r))],min:[Xe,ss(Xe),(r,t)=>Math.min(...t.map(s=>s.evaluate(r)))],max:[Xe,ss(Xe),(r,t)=>Math.max(...t.map(s=>s.evaluate(r)))],abs:[Xe,[Xe],(r,[t])=>Math.abs(t.evaluate(r))],round:[Xe,[Xe],(r,[t])=>{const s=t.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Xe,[Xe],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[Xe,[Xe],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Ft,[Ut,Vt],(r,[t,s])=>r.properties()[t.value]===s.value],"filter-id-==":[Ft,[Vt],(r,[t])=>r.id()===t.value],"filter-type-==":[Ft,[Ut],(r,[t])=>r.geometryType()===t.value],"filter-<":[Ft,[Ut,Vt],(r,[t,s])=>{const c=r.properties()[t.value],m=s.value;return typeof c==typeof m&&c<m}],"filter-id-<":[Ft,[Vt],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s<c}],"filter->":[Ft,[Ut,Vt],(r,[t,s])=>{const c=r.properties()[t.value],m=s.value;return typeof c==typeof m&&c>m}],"filter-id->":[Ft,[Vt],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s>c}],"filter-<=":[Ft,[Ut,Vt],(r,[t,s])=>{const c=r.properties()[t.value],m=s.value;return typeof c==typeof m&&c<=m}],"filter-id-<=":[Ft,[Vt],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s<=c}],"filter->=":[Ft,[Ut,Vt],(r,[t,s])=>{const c=r.properties()[t.value],m=s.value;return typeof c==typeof m&&c>=m}],"filter-id->=":[Ft,[Vt],(r,[t])=>{const s=r.id(),c=t.value;return typeof s==typeof c&&s>=c}],"filter-has":[Ft,[Vt],(r,[t])=>t.value in r.properties()],"filter-has-id":[Ft,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ft,[ii(Ut)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ft,[ii(Vt)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Ft,[Ut,ii(Vt)],(r,[t,s])=>s.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Ft,[Ut,ii(Vt)],(r,[t,s])=>function(c,m,y,x){for(;y<=x;){const E=y+x>>1;if(m[E]===c)return!0;m[E]>c?x=E-1:y=E+1}return!1}(r.properties()[t.value],s.value,0,s.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(r,[t,s])=>t.evaluate(r)&&s.evaluate(r)],[ss(Ft),(r,t)=>{for(const s of t)if(!s.evaluate(r))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(r,[t,s])=>t.evaluate(r)||s.evaluate(r)],[ss(Ft),(r,t)=>{for(const s of t)if(s.evaluate(r))return!0;return!1}]]},"!":[Ft,[Ft],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Ft,[Ut],(r,[t])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(t.evaluate(r))}],upcase:[Ut,[Ut],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Ut,[Ut],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Ut,ss(Vt),(r,t)=>t.map(s=>Me(s.evaluate(r))).join("")],"resolved-locale":[Ut,[es],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Yl{constructor(t,s){this.expression=t,this._warningHistory={},this._evaluator=new $t,this._defaultValue=s?function(c){return c.type==="color"&&mr(c.default)?new B(0,0,0,0):c.type==="color"?B.parse(c.default)||null:c.default===void 0?null:c.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(t,s,c,m,y,x){return this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(t,s,c,m,y,x){this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Ce(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console!="undefined"&&console.warn(E.message)),this._defaultValue}}}function ma(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in os}function el(r,t){const s=new Ds(os,[],t?function(m){const y={color:Ci,string:Ut,number:Xe,enum:Ut,boolean:Ft,formatted:Ir,resolvedImage:co};return m.type==="array"?ii(y[m.value]||Vt,m.length):y[m.type]}(t):void 0),c=s.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Xl(new Yl(c,t)):Oo(s.errors)}class Gi{constructor(t,s){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!Ro(s.expression)}evaluateWithoutErrorHandling(t,s,c,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,s,c,m,y,x)}evaluate(t,s,c,m,y,x){return this._styleExpression.evaluate(t,s,c,m,y,x)}}class _o{constructor(t,s,c,m){this.kind=t,this.zoomStops=c,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!Ro(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(t,s,c,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,s,c,m,y,x)}evaluate(t,s,c,m,y,x){return this._styleExpression.evaluate(t,s,c,m,y,x)}interpolationFactor(t,s,c){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,t,s,c):0}}function Jl(r,t){const s=el(r,t);if(s.result==="error")return s;const c=s.value.expression,m=Do(c);if(!m&&!go(t))return Oo([new Wn("","data expressions not supported")]);const y=fo(c,["zoom"]);if(!y&&!No(t))return Oo([new Wn("","zoom expressions not supported")]);const x=tl(c);return x||y?x instanceof Wn?Oo([x]):x instanceof Ri&&!Kl(t)?Oo([new Wn("",'"interpolate" expressions cannot be used with this property')]):Xl(x?new _o(m?"camera":"composite",s.value,x.labels,x instanceof Ri?x.interpolation:void 0):new Gi(m?"constant":"source",s.value)):Oo([new Wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mr{constructor(t,s){this._parameters=t,this._specification=s,ji(this,Qa(this._parameters,this._specification))}static deserialize(t){return new Mr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function tl(r){let t=null;if(r instanceof rn)t=tl(r.result);else if(r instanceof da){for(const s of r.args)if(t=tl(s),t)break}else(r instanceof is||r instanceof Ri)&&r.input instanceof Ot&&r.input.name==="zoom"&&(t=r);return t instanceof Wn||r.eachChild(s=>{const c=tl(s);c instanceof Wn?t=c:!t&&c?t=new Wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new Wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Ii(r){const t=r.key,s=r.value,c=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,x=r.styleSpec;let E=[];const k=Mt(s);if(k!=="object")return[new Qe(t,s,`object expected, ${k} found`)];for(const A in s){const F=A.split(".")[0],O=c[F]||c["*"];let $;if(m[F])$=m[F];else if(c[F])$=Ei;else if(m["*"])$=m["*"];else{if(!c["*"]){E.push(new Qe(t,s[A],`unknown property "${A}"`));continue}$=Ei}E=E.concat($({key:(t&&`${t}.`)+A,value:s[A],valueSpec:O,style:y,styleSpec:x,object:s,objectKey:A},s))}for(const A in c)m[A]||c[A].required&&c[A].default===void 0&&s[A]===void 0&&E.push(new Qe(t,s,`missing required property "${A}"`));return E}function Ou(r){const t=r.value,s=r.valueSpec,c=r.style,m=r.styleSpec,y=r.key,x=r.arrayElementValidator||Ei;if(Mt(t)!=="array")return[new Qe(y,t,`array expected, ${Mt(t)} found`)];if(s.length&&t.length!==s.length)return[new Qe(y,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Qe(y,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let E={type:s.value,values:s.values};m.$version<7&&(E.function=s.function),Mt(s.value)==="object"&&(E=s.value);let k=[];for(let A=0;A<t.length;A++)k=k.concat(x({array:t,arrayIndex:A,value:t[A],valueSpec:E,style:c,styleSpec:m,key:`${y}[${A}]`}));return k}function $s(r){const t=r.key,s=r.value,c=r.valueSpec;let m=Mt(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Qe(t,s,`number expected, ${m} found`)]:"minimum"in c&&s<c.minimum?[new Qe(t,s,`${s} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&s>c.maximum?[new Qe(t,s,`${s} is greater than the maximum value ${c.maximum}`)]:[]}function Ql(r){const t=r.valueSpec,s=hn(r.value.type);let c,m,y,x={};const E=s!=="categorical"&&r.value.property===void 0,k=!E,A=Mt(r.value.stops)==="array"&&Mt(r.value.stops[0])==="array"&&Mt(r.value.stops[0][0])==="object",F=Ii({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(W){if(s==="identity")return[new Qe(W.key,W.value,'identity function may not have a "stops" property')];let H=[];const ae=W.value;return H=H.concat(Ou({key:W.key,value:ae,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:O})),Mt(ae)==="array"&&ae.length===0&&H.push(new Qe(W.key,ae,"array must have at least one stop")),H},default:function(W){return Ei({key:W.key,value:W.value,valueSpec:t,style:W.style,styleSpec:W.styleSpec})}}});return s==="identity"&&E&&F.push(new Qe(r.key,r.value,'missing required property "property"')),s==="identity"||r.value.stops||F.push(new Qe(r.key,r.value,'missing required property "stops"')),s==="exponential"&&r.valueSpec.expression&&!Kl(r.valueSpec)&&F.push(new Qe(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(k&&!go(r.valueSpec)?F.push(new Qe(r.key,r.value,"property functions not supported")):E&&!No(r.valueSpec)&&F.push(new Qe(r.key,r.value,"zoom functions not supported"))),s!=="categorical"&&!A||r.value.property!==void 0||F.push(new Qe(r.key,r.value,'"property" property is required')),F;function O(W){let H=[];const ae=W.value,le=W.key;if(Mt(ae)!=="array")return[new Qe(le,ae,`array expected, ${Mt(ae)} found`)];if(ae.length!==2)return[new Qe(le,ae,`array length 2 expected, length ${ae.length} found`)];if(A){if(Mt(ae[0])!=="object")return[new Qe(le,ae,`object expected, ${Mt(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Qe(le,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Qe(le,ae,"object stop key must have value")];if(y&&y>hn(ae[0].zoom))return[new Qe(le,ae[0].zoom,"stop zoom values must appear in ascending order")];hn(ae[0].zoom)!==y&&(y=hn(ae[0].zoom),m=void 0,x={}),H=H.concat(Ii({key:`${le}[0]`,value:ae[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:$s,value:$}}))}else H=H.concat($({key:`${le}[0]`,value:ae[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},ae));return ma(Si(ae[1]))?H.concat([new Qe(`${le}[1]`,ae[1],"expressions are not allowed in function stops.")]):H.concat(Ei({key:`${le}[1]`,value:ae[1],valueSpec:t,style:W.style,styleSpec:W.styleSpec}))}function $(W,H){const ae=Mt(W.value),le=hn(W.value),xe=W.value!==null?W.value:H;if(c){if(ae!==c)return[new Qe(W.key,xe,`${ae} stop domain type must match previous stop domain type ${c}`)]}else c=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Qe(W.key,xe,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&s!=="categorical"){let Ie=`number expected, ${ae} found`;return go(t)&&s===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(W.key,xe,Ie)]}return s!=="categorical"||ae!=="number"||isFinite(le)&&Math.floor(le)===le?s!=="categorical"&&ae==="number"&&m!==void 0&&le<m?[new Qe(W.key,xe,"stop domain values must appear in ascending order")]:(m=le,s==="categorical"&&le in x?[new Qe(W.key,xe,"stop domain values must be unique")]:(x[le]=!0,[])):[new Qe(W.key,xe,`integer expected, found ${le}`)]}}function yo(r){const t=(r.expressionContext==="property"?Jl:el)(Si(r.value),r.valueSpec);if(t.result==="error")return t.value.map(c=>new Qe(`${r.key}${c.key}`,r.value,c.message));const s=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new Qe(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ro(s))return[new Qe(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ro(s))return[new Qe(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!fo(s,["zoom","feature-state"]))return[new Qe(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Do(s))return[new Qe(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nl(r){const t=r.key,s=r.value,c=r.valueSpec,m=[];return Array.isArray(c.values)?c.values.indexOf(hn(s))===-1&&m.push(new Qe(t,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(c.values).indexOf(hn(s))===-1&&m.push(new Qe(t,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Kr(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Kr(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const ga={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function il(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Kr(r)||(r=tr(r));const t=el(r,ga);if(t.result==="error")throw new Error(t.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,c,m)=>t.value.evaluate(s,c,{},m),needGeometry:Nu(r)}}function Zs(r,t){return r<t?-1:r>t?1:0}function Nu(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let t=1;t<r.length;t++)if(Nu(r[t]))return!0;return!1}function tr(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?eu(r[1],r[2],"=="):t==="!="?Wi(eu(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?eu(r[1],r[2],t):t==="any"?(s=r.slice(1),["any"].concat(s.map(tr))):t==="all"?["all"].concat(r.slice(1).map(tr)):t==="none"?["all"].concat(r.slice(1).map(tr).map(Wi)):t==="in"?vo(r[1],r.slice(2)):t==="!in"?Wi(vo(r[1],r.slice(2))):t==="has"?rl(r[1]):t==="!has"?Wi(rl(r[1])):t!=="within"||r;var s}function eu(r,t,s){switch(r){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,r,t]}}function vo(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(s=>typeof s!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Zs)]]:["filter-in-small",r,["literal",t]]}}function rl(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Wi(r){return["!",r]}function as(r){return Kr(Si(r.value))?yo(ji({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tu(r)}function tu(r){const t=r.value,s=r.key;if(Mt(t)!=="array")return[new Qe(s,t,`array expected, ${Mt(t)} found`)];const c=r.styleSpec;let m,y=[];if(t.length<1)return[new Qe(s,t,"filter array must have at least 1 element")];switch(y=y.concat(nl({key:`${s}[0]`,value:t[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),hn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&hn(t[1])==="$type"&&y.push(new Qe(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&y.push(new Qe(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(m=Mt(t[1]),m!=="string"&&y.push(new Qe(`${s}[1]`,t[1],`string expected, ${m} found`)));for(let x=2;x<t.length;x++)m=Mt(t[x]),hn(t[1])==="$type"?y=y.concat(nl({key:`${s}[${x}]`,value:t[x],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new Qe(`${s}[${x}]`,t[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<t.length;x++)y=y.concat(tu({key:`${s}[${x}]`,value:t[x],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":m=Mt(t[1]),t.length!==2?y.push(new Qe(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new Qe(`${s}[1]`,t[1],`string expected, ${m} found`));break;case"within":m=Mt(t[1]),t.length!==2?y.push(new Qe(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new Qe(`${s}[1]`,t[1],`object expected, ${m} found`))}return y}function ls(r,t){const s=r.key,c=r.style,m=r.styleSpec,y=r.value,x=r.objectKey,E=m[`${t}_${r.layerType}`];if(!E)return[];const k=x.match(/^(.*)-transition$/);if(t==="paint"&&k&&E[k[1]]&&E[k[1]].transition)return Ei({key:s,value:y,valueSpec:m.transition,style:c,styleSpec:m});const A=r.valueSpec||E[x];if(!A)return[new Qe(s,y,`unknown property "${x}"`)];let F;if(Mt(y)==="string"&&go(A)&&!A.tokens&&(F=/^{([^}]+)}$/.exec(y)))return[new Qe(s,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const O=[];return r.layerType==="symbol"&&(x==="text-field"&&c&&!c.glyphs&&O.push(new Qe(s,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&mr(Si(y))&&hn(y.type)==="identity"&&O.push(new Qe(s,y,'"text-font" does not support identity functions'))),O.concat(Ei({key:r.key,value:y,valueSpec:A,style:c,styleSpec:m,expressionContext:"property",propertyType:t,propertyKey:x}))}function _a(r){return ls(r,"paint")}function ol(r){return ls(r,"layout")}function ya(r){let t=[];const s=r.value,c=r.key,m=r.style,y=r.styleSpec;s.type||s.ref||t.push(new Qe(c,s,'either "type" or "ref" is required'));let x=hn(s.type);const E=hn(s.ref);if(s.id){const k=hn(s.id);for(let A=0;A<r.arrayIndex;A++){const F=m.layers[A];hn(F.id)===k&&t.push(new Qe(c,s.id,`duplicate layer id "${s.id}", previously used at line ${F.id.__line__}`))}}if("ref"in s){let k;["type","source","source-layer","filter","layout"].forEach(A=>{A in s&&t.push(new Qe(c,s[A],`"${A}" is prohibited for ref layers`))}),m.layers.forEach(A=>{hn(A.id)===E&&(k=A)}),k?k.ref?t.push(new Qe(c,s.ref,"ref cannot reference another ref layer")):x=hn(k.type):t.push(new Qe(c,s.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(s.source){const k=m.sources&&m.sources[s.source],A=k&&hn(k.type);k?A==="vector"&&x==="raster"?t.push(new Qe(c,s.source,`layer "${s.id}" requires a raster source`)):A==="raster"&&x!=="raster"?t.push(new Qe(c,s.source,`layer "${s.id}" requires a vector source`)):A!=="vector"||s["source-layer"]?A==="raster-dem"&&x!=="hillshade"?t.push(new Qe(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||A==="geojson"&&k.lineMetrics||t.push(new Qe(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Qe(c,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Qe(c,s.source,`source "${s.source}" not found`))}else t.push(new Qe(c,s,'missing required property "source"'));return t=t.concat(Ii({key:c,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ei({key:`${c}.type`,value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"}),filter:as,layout:k=>Ii({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":A=>ol(ji({layerType:x},A))}}),paint:k=>Ii({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":A=>_a(ji({layerType:x},A))}})}})),t}function Lr(r){const t=r.value,s=r.key,c=Mt(t);return c!=="string"?[new Qe(s,t,`string expected, ${c} found`)]:[]}const va={promoteId:function({key:r,value:t}){if(Mt(t)==="string")return Lr({key:r,value:t});{const s=[];for(const c in t)s.push(...Lr({key:`${r}.${c}`,value:t[c]}));return s}}};function us(r){const t=r.value,s=r.key,c=r.styleSpec,m=r.style;if(!t.type)return[new Qe(s,t,'"type" is required')];const y=hn(t.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=Ii({key:s,value:t,valueSpec:c[`source_${y.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:va}),x;case"geojson":if(x=Ii({key:s,value:t,valueSpec:c.source_geojson,style:m,styleSpec:c,objectElementValidators:va}),t.cluster)for(const E in t.clusterProperties){const[k,A]=t.clusterProperties[E],F=typeof k=="string"?[k,["accumulated"],["get",E]]:k;x.push(...yo({key:`${s}.${E}.map`,value:A,expressionContext:"cluster-map"})),x.push(...yo({key:`${s}.${E}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return x;case"video":return Ii({key:s,value:t,valueSpec:c.source_video,style:m,styleSpec:c});case"image":return Ii({key:s,value:t,valueSpec:c.source_image,style:m,styleSpec:c});case"canvas":return[new Qe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nl({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:c})}}function js(r){const t=r.value,s=r.styleSpec,c=s.light,m=r.style;let y=[];const x=Mt(t);if(t===void 0)return y;if(x!=="object")return y=y.concat([new Qe("light",t,`object expected, ${x} found`)]),y;for(const E in t){const k=E.match(/^(.*)-transition$/);y=y.concat(k&&c[k[1]]&&c[k[1]].transition?Ei({key:E,value:t[E],valueSpec:s.transition,style:m,styleSpec:s}):c[E]?Ei({key:E,value:t[E],valueSpec:c[E],style:m,styleSpec:s}):[new Qe(E,t[E],`unknown property "${E}"`)])}return y}const nr={"*":()=>[],array:Ou,boolean:function(r){const t=r.value,s=r.key,c=Mt(t);return c!=="boolean"?[new Qe(s,t,`boolean expected, ${c} found`)]:[]},number:$s,color:function(r){const t=r.key,s=r.value,c=Mt(s);return c!=="string"?[new Qe(t,s,`color expected, ${c} found`)]:ri(s)===null?[new Qe(t,s,`color expected, "${s}" found`)]:[]},constants:Di,enum:nl,filter:as,function:Ql,layer:ya,object:Ii,source:us,light:js,string:Lr,formatted:function(r){return Lr(r).length===0?[]:yo(r)},resolvedImage:function(r){return Lr(r).length===0?[]:yo(r)}};function Ei(r){const t=r.value,s=r.valueSpec,c=r.styleSpec;return s.expression&&mr(hn(t))?Ql(r):s.expression&&ma(Si(t))?yo(r):s.type&&nr[s.type]?nr[s.type](r):Ii(ji({},r,{valueSpec:s.type?c[s.type]:s}))}function Wc(r){const t=r.value,s=r.key,c=Lr(r);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Qe(s,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Qe(s,t,'"glyphs" url must include a "{range}" token'))),c}function Uo(r,t=ke){let s=[];return s=s.concat(Ei({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,objectElementValidators:{glyphs:Wc,"*":()=>[]}})),r.constants&&(s=s.concat(Di({key:"constants",value:r.constants,style:r,styleSpec:t}))),Uu(s)}function Uu(r){return[].concat(r).sort((t,s)=>t.line-s.line)}function cs(r){return function(...t){return Uu(r.apply(this,t))}}Uo.source=cs(us),Uo.light=cs(js),Uo.layer=cs(ya),Uo.filter=cs(as),Uo.paintProperty=cs(_a),Uo.layoutProperty=cs(ol);const hs=Uo,Yr=hs.light,Gs=hs.paintProperty,qc=hs.layoutProperty;function xa(r,t){let s=!1;if(t&&t.length)for(const c of t)r.fire(new yn(new Error(c.message))),s=!0;return s}class ds{constructor(t,s,c){const m=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const x=new Int32Array(this.arrayBuffer);t=x[0],this.d=(s=x[1])+2*(c=x[2]);for(let k=0;k<this.d*this.d;k++){const A=x[3+k],F=x[3+k+1];m.push(A===F?null:x.subarray(A,F))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=s+2*c;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=c,this.scale=s/t,this.uid=0;const y=c/s*t;this.min=-y,this.max=t+y}insert(t,s,c,m,y){this._forEachCell(s,c,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,s,c,m,y,x){this.cells[y].push(x)}query(t,s,c,m,y){const x=this.min,E=this.max;if(t<=x&&s<=x&&E<=c&&E<=m&&!y)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(t,s,c,m,this._queryCell,k,{},y),k}}_queryCell(t,s,c,m,y,x,E,k){const A=this.cells[y];if(A!==null){const F=this.keys,O=this.bboxes;for(let $=0;$<A.length;$++){const W=A[$];if(E[W]===void 0){const H=4*W;(k?k(O[H+0],O[H+1],O[H+2],O[H+3]):t<=O[H+2]&&s<=O[H+3]&&c>=O[H+0]&&m>=O[H+1])?(E[W]=!0,x.push(F[W])):E[W]=!1}}}}_forEachCell(t,s,c,m,y,x,E,k){const A=this._convertToCellCoord(t),F=this._convertToCellCoord(s),O=this._convertToCellCoord(c),$=this._convertToCellCoord(m);for(let W=A;W<=O;W++)for(let H=F;H<=$;H++){const ae=this.d*H+W;if((!k||k(this._convertFromCellCoord(W),this._convertFromCellCoord(H),this._convertFromCellCoord(W+1),this._convertFromCellCoord(H+1)))&&y.call(this,t,s,c,m,ae,x,E,k))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,s=3+this.cells.length+1+1;let c=0;for(let x=0;x<this.cells.length;x++)c+=this.cells[x].length;const m=new Int32Array(s+c+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=s;for(let x=0;x<t.length;x++){const E=t[x];m[3+x]=y,m.set(E,y),y+=E.length}return m[3+t.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+t.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(t,s){const c=t.toArrayBuffer();return s&&s.push(c),{buffer:c}}static deserialize(t){return new ds(t.buffer)}}const ps={};function ut(r,t,s={}){Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),ps[r]={klass:t,omit:s.omit||[],shallow:s.shallow||[]}}ut("Object",Object),ut("TransferableGridIndex",ds),ut("Color",B),ut("Error",Error),ut("AJAXError",Nn),ut("ResolvedImage",fe),ut("StylePropertyFunction",Mr),ut("StyleExpression",Yl,{omit:["_evaluator"]}),ut("ZoomDependentExpression",_o),ut("ZoomConstantExpression",Gi),ut("CompoundExpression",Ot,{omit:["_evaluate"]});for(const r in os)os[r]._classRegistryKey||ut(`Expression_${r}`,os[r]);function fs(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function wa(r,t){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(fs(r)||At(r))return t&&t.push(r),r;if(ArrayBuffer.isView(r)){const s=r;return t&&t.push(s.buffer),s}if(r instanceof ImageData)return t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const s=[];for(const c of r)s.push(wa(c,t));return s}if(typeof r=="object"){const s=r.constructor,c=s._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");const m=s.serialize?s.serialize(r,t):{};if(!s.serialize){for(const y in r){if(!r.hasOwnProperty(y)||ps[c].omit.indexOf(y)>=0)continue;const x=r[y];m[y]=ps[c].shallow.indexOf(y)>=0?x:wa(x,t)}r instanceof Error&&(m.message=r.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(m.$name=c),m}throw new Error("can't serialize object of type "+typeof r)}function gr(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||fs(r)||At(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(gr);if(typeof r=="object"){const t=r.$name||"Object";if(!ps[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:s}=ps[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(r);const c=Object.create(s.prototype);for(const m of Object.keys(r)){if(m==="$name")continue;const y=r[m];c[m]=ps[t].shallow.indexOf(m)>=0?y:gr(y)}return c}throw new Error("can't deserialize object of type "+typeof r)}class Ws{constructor(){this.first=!0}update(t,s){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const tt={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function nu(r){for(const t of r)if(qs(t.charCodeAt(0)))return!0;return!1}function Jr(r){for(const t of r)if(!Vu(t.charCodeAt(0)))return!1;return!0}function Vu(r){return!(tt.Arabic(r)||tt["Arabic Supplement"](r)||tt["Arabic Extended-A"](r)||tt["Arabic Presentation Forms-A"](r)||tt["Arabic Presentation Forms-B"](r))}function qs(r){return!(r!==746&&r!==747&&(r<4352||!(tt["Bopomofo Extended"](r)||tt.Bopomofo(r)||tt["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||tt["CJK Compatibility Ideographs"](r)||tt["CJK Compatibility"](r)||tt["CJK Radicals Supplement"](r)||tt["CJK Strokes"](r)||!(!tt["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||tt["CJK Unified Ideographs Extension A"](r)||tt["CJK Unified Ideographs"](r)||tt["Enclosed CJK Letters and Months"](r)||tt["Hangul Compatibility Jamo"](r)||tt["Hangul Jamo Extended-A"](r)||tt["Hangul Jamo Extended-B"](r)||tt["Hangul Jamo"](r)||tt["Hangul Syllables"](r)||tt.Hiragana(r)||tt["Ideographic Description Characters"](r)||tt.Kanbun(r)||tt["Kangxi Radicals"](r)||tt["Katakana Phonetic Extensions"](r)||tt.Katakana(r)&&r!==12540||!(!tt["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!tt["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||tt["Unified Canadian Aboriginal Syllabics"](r)||tt["Unified Canadian Aboriginal Syllabics Extended"](r)||tt["Vertical Forms"](r)||tt["Yijing Hexagram Symbols"](r)||tt["Yi Syllables"](r)||tt["Yi Radicals"](r))))}function Hs(r){return!(qs(r)||function(t){return!!(tt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||tt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||tt["Letterlike Symbols"](t)||tt["Number Forms"](t)||tt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||tt["Control Pictures"](t)&&t!==9251||tt["Optical Character Recognition"](t)||tt["Enclosed Alphanumerics"](t)||tt["Geometric Shapes"](t)||tt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||tt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||tt["CJK Symbols and Punctuation"](t)||tt.Katakana(t)||tt["Private Use Area"](t)||tt["CJK Compatibility Forms"](t)||tt["Small Form Variants"](t)||tt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}function $u(r){return r>=1424&&r<=2303||tt["Arabic Presentation Forms-A"](r)||tt["Arabic Presentation Forms-B"](r)}function sl(r,t){return!(!t&&$u(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||tt.Khmer(r))}function ba(r){for(const t of r)if($u(t.charCodeAt(0)))return!0;return!1}const Sa="deferred",al="loading",iu="loaded";let ll=null,Bi="unavailable",xo=null;const ru=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Bi="error"),ll&&ll(r)};function ul(){Xs.fire(new Et("pluginStateChange",{pluginStatus:Bi,pluginURL:xo}))}const Xs=new Fn,cl=function(){return Bi},Ea=function(){if(Bi!==Sa||!xo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bi=al,ul(),xo&&ui({url:xo},r=>{r?ru(r):(Bi=iu,ul())})},_r={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Bi===iu||_r.applyArabicShaping!=null,isLoading:()=>Bi===al,setState(r){Bi=r.pluginStatus,xo=r.pluginURL},isParsed:()=>_r.applyArabicShaping!=null&&_r.processBidirectionalText!=null&&_r.processStyledBidirectionalText!=null,getPluginURL:()=>xo};class a{constructor(t,s){this.zoom=t,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ws,this.transition={})}isSupportedScript(t){return function(s,c){for(const m of s)if(!sl(m.charCodeAt(0),c))return!1;return!0}(t,_r.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class d{constructor(t,s){this.property=t,this.value=s,this.expression=function(c,m){if(mr(c))return new Mr(c,m);if(ma(c)){const y=Jl(c,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=c;return typeof c=="string"&&m.type==="color"&&(y=B.parse(c)),{kind:"constant",evaluate:()=>y}}}(s===void 0?t.specification.default:s,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,s,c){return this.property.possiblyEvaluate(this,t,s,c)}}class w{constructor(t){this.property=t,this.value=new d(t,void 0)}transitioned(t,s){return new D(this.property,this.value,s,ge({},t.transition,this.transition),t.now)}untransitioned(){return new D(this.property,this.value,null,{},0)}}class P{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return te(this._values[t].value.value)}setValue(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new w(this._values[t].property)),this._values[t].value=new d(this._values[t].property,s===null?void 0:te(s))}getTransition(t){return te(this._values[t].transition)}setTransition(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new w(this._values[t].property)),this._values[t].transition=te(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(t[s]=c);const m=this.getTransition(s);m!==void 0&&(t[`${s}-transition`]=m)}return t}transitioned(t,s){const c=new G(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].transitioned(t,s._values[m]);return c}untransitioned(){const t=new G(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class D{constructor(t,s,c,m,y){this.property=t,this.value=s,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,t.specification.transition&&(m.delay||m.duration)&&(this.prior=c)}possiblyEvaluate(t,s,c){const m=t.now||0,y=this.value.possiblyEvaluate(t,s,c),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(t,s,c);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(t,s,c),y,function(k){if(k<=0)return 0;if(k>=1)return 1;const A=k*k,F=A*k;return 4*(k<.5?F:3*(k-A)+F-.75)}(E))}}return y}}class G{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,c){const m=new Le(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(t,s,c);return m}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class ue{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return te(this._values[t].value)}setValue(t,s){this._values[t]=new d(this._values[t].property,s===null?void 0:te(s))}serialize(){const t={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(t[s]=c)}return t}possiblyEvaluate(t,s,c){const m=new Le(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(t,s,c);return m}}class be{constructor(t,s,c){this.property=t,this.value=s,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,s,c,m){return this.property.evaluate(this.value,this.parameters,t,s,c,m)}}class Le{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Se{constructor(t){this.specification=t}possiblyEvaluate(t,s){return t.expression.evaluate(s)}interpolate(t,s,c){const m=Bs[this.specification.type];return m?m(t,s,c):t}}class je{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,c,m){return new be(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},c,m)}:t.expression,s)}interpolate(t,s,c){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new be(this,{kind:"constant",value:void 0},t.parameters);const m=Bs[this.specification.type];return m?new be(this,{kind:"constant",value:m(t.value.value,s.value.value,c)},t.parameters):t}evaluate(t,s,c,m,y,x){return t.kind==="constant"?t.value:t.evaluate(s,c,m,y,x)}}class Wt extends je{possiblyEvaluate(t,s,c,m){if(t.value===void 0)return new be(this,{kind:"constant",value:void 0},s);if(t.expression.kind==="constant"){const y=t.expression.evaluate(s,null,{},c,m),x=t.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,E=this._calculate(x,x,x,s);return new be(this,{kind:"constant",value:E},s)}if(t.expression.kind==="camera"){const y=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new be(this,{kind:"constant",value:y},s)}return new be(this,t.expression,s)}evaluate(t,s,c,m,y,x){if(t.kind==="source"){const E=t.evaluate(s,c,m,y,x);return this._calculate(E,E,E,s)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},c,m),t.evaluate({zoom:Math.floor(s.zoom)},c,m),t.evaluate({zoom:Math.floor(s.zoom)+1},c,m),s):t.value}_calculate(t,s,c,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:c,to:s}}interpolate(t){return t}}class en{constructor(t){this.specification=t}possiblyEvaluate(t,s,c,m){if(t.value!==void 0){if(t.expression.kind==="constant"){const y=t.expression.evaluate(s,null,{},c,m);return this._calculate(y,y,y,s)}return this._calculate(t.expression.evaluate(new a(Math.floor(s.zoom-1),s)),t.expression.evaluate(new a(Math.floor(s.zoom),s)),t.expression.evaluate(new a(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,c,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:c,to:s}}interpolate(t){return t}}class Dr{constructor(t){this.specification=t}possiblyEvaluate(t,s,c,m){return!!t.expression.evaluate(s,null,{},c,m)}interpolate(){return!1}}class Rn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in t){const c=t[s];c.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new d(c,void 0),y=this.defaultTransitionablePropertyValues[s]=new w(c);this.defaultTransitioningPropertyValues[s]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}ut("DataDrivenProperty",je),ut("DataConstantProperty",Se),ut("CrossFadedDataDrivenProperty",Wt),ut("CrossFadedProperty",en),ut("ColorRampProperty",Dr);const Qr="-transition";class Yn extends Fn{constructor(t,s){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),s.layout&&(this._unevaluatedLayout=new ue(s.layout)),s.paint)){this._transitionablePaint=new P(s.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Le(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,s,c={}){s!=null&&this._validate(qc,`layers.${this.id}.layout.${t}`,t,s,c)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return t.endsWith(Qr)?this._transitionablePaint.getTransition(t.slice(0,-Qr.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,c={}){if(s!=null&&this._validate(Gs,`layers.${this.id}.paint.${t}`,t,s,c))return!1;if(t.endsWith(Qr))return this._transitionablePaint.setTransition(t.slice(0,-Qr.length),s||void 0),!1;{const m=this._transitionablePaint._values[t],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const k=this._transitionablePaint._values[t].value;return k.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(t,E,k)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,s,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Q(t,(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}_validate(t,s,c,m,y={}){return(!y||y.validate!==!1)&&xa(this,t.call(hs,{key:s,layerType:this.type,objectKey:c,value:m,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof be&&go(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const ou={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ta{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class An{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function hi(r,t=1){let s=0,c=0;return{members:r.map(m=>{const y=ou[m.type].BYTES_PER_ELEMENT,x=s=su(s,Math.max(t,y)),E=m.components||1;return c=Math.max(c,y),s+=y*E,{name:m.name,type:m.type,components:E,offset:x}}),size:su(s,Math.max(c,t)),alignment:t}}function su(r,t){return Math.ceil(r/t)*t}class Ks extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const m=2*t;return this.int16[m+0]=s,this.int16[m+1]=c,t}}Ks.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",Ks);class Ys extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,m)}emplace(t,s,c,m,y){const x=4*t;return this.int16[x+0]=s,this.int16[x+1]=c,this.int16[x+2]=m,this.int16[x+3]=y,t}}Ys.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",Ys);class f extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,s,c,m,y,x)}emplace(t,s,c,m,y,x,E){const k=6*t;return this.int16[k+0]=s,this.int16[k+1]=c,this.int16[k+2]=m,this.int16[k+3]=y,this.int16[k+4]=x,this.int16[k+5]=E,t}}f.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",f);class i extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,s,c,m,y,x)}emplace(t,s,c,m,y,x,E){const k=4*t,A=8*t;return this.int16[k+0]=s,this.int16[k+1]=c,this.uint8[A+4]=m,this.uint8[A+5]=y,this.uint8[A+6]=x,this.uint8[A+7]=E,t}}i.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",i);class l extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const m=2*t;return this.float32[m+0]=s,this.float32[m+1]=c,t}}l.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",l);class p extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x,E,k,A,F){const O=this.length;return this.resize(O+1),this.emplace(O,t,s,c,m,y,x,E,k,A,F)}emplace(t,s,c,m,y,x,E,k,A,F,O){const $=10*t;return this.uint16[$+0]=s,this.uint16[$+1]=c,this.uint16[$+2]=m,this.uint16[$+3]=y,this.uint16[$+4]=x,this.uint16[$+5]=E,this.uint16[$+6]=k,this.uint16[$+7]=A,this.uint16[$+8]=F,this.uint16[$+9]=O,t}}p.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",p);class _ extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x,E,k,A,F,O,$){const W=this.length;return this.resize(W+1),this.emplace(W,t,s,c,m,y,x,E,k,A,F,O,$)}emplace(t,s,c,m,y,x,E,k,A,F,O,$,W){const H=12*t;return this.int16[H+0]=s,this.int16[H+1]=c,this.int16[H+2]=m,this.int16[H+3]=y,this.uint16[H+4]=x,this.uint16[H+5]=E,this.uint16[H+6]=k,this.uint16[H+7]=A,this.int16[H+8]=F,this.int16[H+9]=O,this.int16[H+10]=$,this.int16[H+11]=W,t}}_.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",_);class b extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,s,c)}emplace(t,s,c,m){const y=3*t;return this.float32[y+0]=s,this.float32[y+1]=c,this.float32[y+2]=m,t}}b.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",b);class T extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}T.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",T);class C extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x,E,k,A){const F=this.length;return this.resize(F+1),this.emplace(F,t,s,c,m,y,x,E,k,A)}emplace(t,s,c,m,y,x,E,k,A,F){const O=10*t,$=5*t;return this.int16[O+0]=s,this.int16[O+1]=c,this.int16[O+2]=m,this.int16[O+3]=y,this.int16[O+4]=x,this.int16[O+5]=E,this.uint32[$+3]=k,this.uint16[O+8]=A,this.uint16[O+9]=F,t}}C.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",C);class z extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,s,c,m,y,x)}emplace(t,s,c,m,y,x,E){const k=6*t;return this.int16[k+0]=s,this.int16[k+1]=c,this.int16[k+2]=m,this.int16[k+3]=y,this.int16[k+4]=x,this.int16[k+5]=E,t}}z.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",z);class R extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,s,c,m,y)}emplace(t,s,c,m,y,x){const E=4*t,k=8*t;return this.float32[E+0]=s,this.float32[E+1]=c,this.float32[E+2]=m,this.int16[k+6]=y,this.int16[k+7]=x,t}}R.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",R);class U extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,m)}emplace(t,s,c,m,y){const x=12*t,E=3*t;return this.uint8[x+0]=s,this.uint8[x+1]=c,this.float32[E+1]=m,this.float32[E+2]=y,t}}U.prototype.bytesPerElement=12,ut("StructArrayLayout2ub2f12",U);class Z extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,s,c)}emplace(t,s,c,m){const y=3*t;return this.uint16[y+0]=s,this.uint16[y+1]=c,this.uint16[y+2]=m,t}}Z.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",Z);class K extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe)}emplace(t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe,Ie){const Pe=24*t,Re=12*t,Ge=48*t;return this.int16[Pe+0]=s,this.int16[Pe+1]=c,this.uint16[Pe+2]=m,this.uint16[Pe+3]=y,this.uint32[Re+2]=x,this.uint32[Re+3]=E,this.uint32[Re+4]=k,this.uint16[Pe+10]=A,this.uint16[Pe+11]=F,this.uint16[Pe+12]=O,this.float32[Re+7]=$,this.float32[Re+8]=W,this.uint8[Ge+36]=H,this.uint8[Ge+37]=ae,this.uint8[Ge+38]=le,this.uint32[Re+10]=xe,this.int16[Pe+22]=Ie,t}}K.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",K);class se extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe,Ie,Pe,Re,Ge,Ve,pt,vt,ot,st,et,ht){const at=this.length;return this.resize(at+1),this.emplace(at,t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe,Ie,Pe,Re,Ge,Ve,pt,vt,ot,st,et,ht)}emplace(t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae,le,xe,Ie,Pe,Re,Ge,Ve,pt,vt,ot,st,et,ht,at){const He=34*t,kt=17*t;return this.int16[He+0]=s,this.int16[He+1]=c,this.int16[He+2]=m,this.int16[He+3]=y,this.int16[He+4]=x,this.int16[He+5]=E,this.int16[He+6]=k,this.int16[He+7]=A,this.uint16[He+8]=F,this.uint16[He+9]=O,this.uint16[He+10]=$,this.uint16[He+11]=W,this.uint16[He+12]=H,this.uint16[He+13]=ae,this.uint16[He+14]=le,this.uint16[He+15]=xe,this.uint16[He+16]=Ie,this.uint16[He+17]=Pe,this.uint16[He+18]=Re,this.uint16[He+19]=Ge,this.uint16[He+20]=Ve,this.uint16[He+21]=pt,this.uint16[He+22]=vt,this.uint32[kt+12]=ot,this.float32[kt+13]=st,this.float32[kt+14]=et,this.float32[kt+15]=ht,this.float32[kt+16]=at,t}}se.prototype.bytesPerElement=68,ut("StructArrayLayout8i15ui1ul4f68",se);class Y extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}Y.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",Y);class oe extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,s,c)}emplace(t,s,c,m){const y=3*t;return this.int16[y+0]=s,this.int16[y+1]=c,this.int16[y+2]=m,t}}oe.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",oe);class _e extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,s,c)}emplace(t,s,c,m){const y=4*t;return this.uint32[2*t+0]=s,this.uint16[y+2]=c,this.uint16[y+3]=m,t}}_e.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",_e);class ye extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const c=this.length;return this.resize(c+1),this.emplace(c,t,s)}emplace(t,s,c){const m=2*t;return this.uint16[m+0]=s,this.uint16[m+1]=c,t}}ye.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",ye);class we extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}we.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",we);class ve extends An{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,s,c,m)}emplace(t,s,c,m,y){const x=4*t;return this.float32[x+0]=s,this.float32[x+1]=c,this.float32[x+2]=m,this.float32[x+3]=y,t}}ve.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",ve);class Ue extends Ta{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ke(this.anchorPointX,this.anchorPointY)}}Ue.prototype.size=20;class ze extends C{get(t){return new Ue(this,t)}}ut("CollisionBoxArray",ze);class De extends Ta{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}De.prototype.size=48;class We extends K{get(t){return new De(this,t)}}ut("PlacedSymbolArray",We);class Je extends Ta{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Je.prototype.size=68;class Oe extends se{get(t){return new Je(this,t)}}ut("SymbolInstanceArray",Oe);class mt extends Y{getoffsetX(t){return this.float32[1*t+0]}}ut("GlyphOffsetArray",mt);class nt extends oe{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ut("SymbolLineVertexArray",nt);class Dt extends Ta{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Dt.prototype.size=8;class un extends _e{get(t){return new Dt(this,t)}}ut("FeatureIndexArray",un);class Jt extends Ks{}class sn extends Ks{}class Jn extends f{}class Zt extends i{}class pn extends l{}class kn extends p{}class Fi extends _{}class Rr extends b{}class eo extends T{}class to extends z{}class Js extends U{}class yr extends Z{}class Vo extends ye{}const Pa=hi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Br}=Pa;class fn{constructor(t=[]){this.segments=t}prepareSegment(t,s,c,m){let y=this.segments[this.segments.length-1];return t>fn.MAX_VERTEX_ARRAY_LENGTH&&Ae(`Max vertices per segment is ${fn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!y||y.vertexLength+t>fn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,c,m){return new fn([{vertexOffset:t,primitiveOffset:s,vertexLength:c,primitiveLength:m,vaos:{},sortKey:0}])}}function wn(r,t){return 256*(r=V(Math.floor(r),0,255))+V(Math.floor(t),0,255)}fn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",fn);const _i=hi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ir={exports:{}},$n={exports:{}};$n.exports=function(r,t){var s,c,m,y,x,E,k,A;for(c=r.length-(s=3&r.length),m=t,x=3432918353,E=461845907,A=0;A<c;)k=255&r.charCodeAt(A)|(255&r.charCodeAt(++A))<<8|(255&r.charCodeAt(++A))<<16|(255&r.charCodeAt(++A))<<24,++A,m=27492+(65535&(y=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*E+(((k>>>16)*E&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(k=0,s){case 3:k^=(255&r.charCodeAt(A+2))<<16;case 2:k^=(255&r.charCodeAt(A+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&r.charCodeAt(A)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*E+(((k>>>16)*E&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var ka={exports:{}};ka.exports=function(r,t){for(var s,c=r.length,m=t^c,y=0;c>=4;)s=1540483477*(65535&(s=255&r.charCodeAt(y)|(255&r.charCodeAt(++y))<<8|(255&r.charCodeAt(++y))<<16|(255&r.charCodeAt(++y))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),c-=4,++y;switch(c){case 3:m^=(255&r.charCodeAt(y+2))<<16;case 2:m^=(255&r.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var $o=$n.exports,Zu=ka.exports;ir.exports=$o,ir.exports.murmur3=$o,ir.exports.murmur2=Zu;var Hc=ir.exports;class ju{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,c,m){this.ids.push(gd(t)),this.positions.push(s,c,m)}getPositions(t){const s=gd(t);let c=0,m=this.ids.length-1;for(;c<m;){const x=c+m>>1;this.ids[x]>=s?m=x:c=x+1}const y=[];for(;this.ids[c]===s;)y.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return y}static serialize(t,s){const c=new Float64Array(t.ids),m=new Uint32Array(t.positions);return Ca(c,m,0,c.length-1),s&&s.push(c.buffer,m.buffer),{ids:c,positions:m}}static deserialize(t){const s=new ju;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function gd(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Hc(String(r))}function Ca(r,t,s,c){for(;s<c;){const m=r[s+c>>1];let y=s-1,x=c+1;for(;;){do y++;while(r[y]<m);do x--;while(r[x]>m);if(y>=x)break;Gu(r,y,x),Gu(t,3*y,3*x),Gu(t,3*y+1,3*x+1),Gu(t,3*y+2,3*x+2)}x-s<c-x?(Ca(r,t,s,x),s=x+1):(Ca(r,t,x+1,c),c=x)}}function Gu(r,t,s){const c=r[t];r[t]=r[s],r[s]=c}ut("FeaturePositionMap",ju);class Zo{constructor(t,s){this.gl=t.gl,this.location=s}}class hl extends Zo{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ry extends Zo{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class oy extends Zo{constructor(t,s){super(t,s),this.current=B.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Fb=new Float32Array(16);function Sf(r){return[wn(255*r.r,255*r.g),wn(255*r.b,255*r.a)]}class Xc{constructor(t,s,c){this.value=t,this.uniformNames=s.map(m=>`u_${m}`),this.type=c}setUniform(t,s,c){t.set(c.constantOr(this.value))}getBinding(t,s,c){return this.type==="color"?new oy(t,s):new hl(t,s)}}class Wu{constructor(t,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr}setUniform(t,s,c,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&t.set(y)}getBinding(t,s,c){return c.substr(0,9)==="u_pattern"?new ry(t,s):new hl(t,s)}}class Ia{constructor(t,s,c,m){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,s,c,m,y){const x=this.paintVertexArray.length,E=this.expression.evaluate(new a(0),s,{},m,[],y);this.paintVertexArray.resize(t),this._setPaintValue(x,t,E)}updatePaintArray(t,s,c,m){const y=this.expression.evaluate({zoom:0},c,m);this._setPaintValue(t,s,y)}_setPaintValue(t,s,c){if(this.type==="color"){const m=Sf(c);for(let y=t;y<s;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=t;m<s;m++)this.paintVertexArray.emplace(m,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ms{constructor(t,s,c,m,y,x){this.expression=t,this.uniformNames=s.map(E=>`u_${E}_t`),this.type=c,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(E=>({name:`a_${E}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,s,c,m,y){const x=this.expression.evaluate(new a(this.zoom),s,{},m,[],y),E=this.expression.evaluate(new a(this.zoom+1),s,{},m,[],y),k=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(k,t,x,E)}updatePaintArray(t,s,c,m){const y=this.expression.evaluate({zoom:this.zoom},c,m),x=this.expression.evaluate({zoom:this.zoom+1},c,m);this._setPaintValue(t,s,y,x)}_setPaintValue(t,s,c,m){if(this.type==="color"){const y=Sf(c),x=Sf(m);for(let E=t;E<s;E++)this.paintVertexArray.emplace(E,y[0],y[1],x[0],x[1])}else{for(let y=t;y<s;y++)this.paintVertexArray.emplace(y,c,m);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(m))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=V(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(m)}getBinding(t,s,c){return new hl(t,s)}}class dl{constructor(t,s,c,m,y,x){this.expression=t,this.type=s,this.useIntegerZoom=c,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(t,s,c){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(m,t,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(t,s,c,m,y){this._setPaintValues(t,s,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(t,s,c,m){if(!m||!c)return;const{min:y,mid:x,max:E}=c,k=m[y],A=m[x],F=m[E];if(k&&A&&F)for(let O=t;O<s;O++)this.zoomInPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],A.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],A.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,_i.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,_i.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class sy{constructor(t,s,c){this.binders={},this._buffers=[];const m=[];for(const y in t.paint._values){if(!c(y))continue;const x=t.paint.get(y);if(!(x instanceof be&&go(x.property.specification)))continue;const E=Ob(y,t.type),k=x.value,A=x.property.specification.type,F=x.property.useIntegerZoom,O=x.property.specification["property-type"],$=O==="cross-faded"||O==="cross-faded-data-driven";if(k.kind==="constant")this.binders[y]=$?new Wu(k.value,E):new Xc(k.value,E,A),m.push(`/u_${y}`);else if(k.kind==="source"||$){const W=ay(y,A,"source");this.binders[y]=$?new dl(k,A,F,s,W,t.id):new Ia(k,E,A,W),m.push(`/a_${y}`)}else{const W=ay(y,A,"composite");this.binders[y]=new ms(k,E,A,F,s,W),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof Ia||s instanceof ms?s.maxValue:0}populatePaintArrays(t,s,c,m,y){for(const x in this.binders){const E=this.binders[x];(E instanceof Ia||E instanceof ms||E instanceof dl)&&E.populatePaintArray(t,s,c,m,y)}}setConstantPatternPositions(t,s){for(const c in this.binders){const m=this.binders[c];m instanceof Wu&&m.setConstantPatternPositions(t,s)}}updatePaintArrays(t,s,c,m,y){let x=!1;for(const E in t){const k=s.getPositions(E);for(const A of k){const F=c.feature(A.index);for(const O in this.binders){const $=this.binders[O];if(($ instanceof Ia||$ instanceof ms||$ instanceof dl)&&$.expression.isStateDependent===!0){const W=m.paint.get(O);$.expression=W.value,$.updatePaintArray(A.start,A.end,F,t[E],y),x=!0}}}}return x}defines(){const t=[];for(const s in this.binders){const c=this.binders[s];(c instanceof Xc||c instanceof Wu)&&t.push(...c.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Ia||c instanceof ms)for(let m=0;m<c.paintVertexAttributes.length;m++)t.push(c.paintVertexAttributes[m].name);else if(c instanceof dl)for(let m=0;m<_i.members.length;m++)t.push(_i.members[m].name)}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Xc||c instanceof Wu||c instanceof ms)for(const m of c.uniformNames)t.push(m)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const c=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof Xc||y instanceof Wu||y instanceof ms){for(const x of y.uniformNames)if(s[x]){const E=y.getBinding(t,s[x],x);c.push({name:x,property:m,binding:E})}}}return c}setUniforms(t,s,c,m){for(const{name:y,property:x,binding:E}of s)this.binders[x].setUniform(E,m,c.get(x),y)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(t&&c instanceof dl){const m=t.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(c instanceof Ia||c instanceof ms)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const s in this.binders){const c=this.binders[s];(c instanceof Ia||c instanceof ms||c instanceof dl)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof Ia||s instanceof ms||s instanceof dl)&&s.destroy()}}}class au{constructor(t,s,c=()=>!0){this.programConfigurations={};for(const m of t)this.programConfigurations[m.id]=new sy(m,s,c);this.needsUpload=!1,this._featureMap=new ju,this._bufferOffset=0}populatePaintArrays(t,s,c,m,y,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(t,s,m,y,x);s.id!==void 0&&this._featureMap.add(s.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,c,m){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(t,this._featureMap,s,y,m)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ob(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function ay(r,t,s){const c={color:{source:l,composite:ve},number:{source:Y,composite:l}},m=function(y){return{"line-pattern":{source:kn,composite:kn},"fill-pattern":{source:kn,composite:kn},"fill-extrusion-pattern":{source:kn,composite:kn}}[y]}(r);return m&&m[s]||c[t][s]}ut("ConstantBinder",Xc),ut("CrossFadedConstantBinder",Wu),ut("SourceExpressionBinder",Ia),ut("CrossFadedCompositeBinder",dl),ut("CompositeExpressionBinder",ms),ut("ProgramConfiguration",sy,{omit:["_buffers"]}),ut("ProgramConfigurationSet",au);var Ti=8192;const Ef=Math.pow(2,14)-1,ly=-Ef-1;function lu(r){const t=Ti/r.extent,s=r.loadGeometry();for(let c=0;c<s.length;c++){const m=s[c];for(let y=0;y<m.length;y++){const x=m[y],E=Math.round(x.x*t),k=Math.round(x.y*t);x.x=V(E,ly,Ef),x.y=V(k,ly,Ef),(E<x.x||E>x.x+1||k<x.y||k>x.y+1)&&Ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function uu(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?lu(r):[]}}function _d(r,t,s,c,m){r.emplaceBack(2*t+(c+1)/2,2*s+(m+1)/2)}class Tf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new yr,this.segments=new fn,this.programConfigurations=new au(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c){const m=this.layers[0],y=[];let x=null,E=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),E=!x.isConstant());for(const{feature:k,id:A,index:F,sourceLayerIndex:O}of t){const $=this.layers[0]._featureFilter.needGeometry,W=uu(k,$);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),W,c))continue;const H=E?x.evaluate(W,{},c):void 0,ae={id:A,properties:k.properties,type:k.type,sourceLayerIndex:O,index:F,geometry:$?W.geometry:lu(k),patterns:{},sortKey:H};y.push(ae)}E&&y.sort((k,A)=>k.sortKey-A.sortKey);for(const k of y){const{geometry:A,index:F,sourceLayerIndex:O}=k,$=t[F].feature;this.addFeature(k,A,F,c),s.featureIndex.insert($,A,F,O,this.index)}}update(t,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Br),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,c,m){for(const y of s)for(const x of y){const E=x.x,k=x.y;if(E<0||E>=Ti||k<0||k>=Ti)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),F=A.vertexLength;_d(this.layoutVertexArray,E,k,-1,-1),_d(this.layoutVertexArray,E,k,1,-1),_d(this.layoutVertexArray,E,k,1,1),_d(this.layoutVertexArray,E,k,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},m)}}function uy(r,t){for(let s=0;s<r.length;s++)if(qu(t,r[s]))return!0;for(let s=0;s<t.length;s++)if(qu(r,t[s]))return!0;return!!Pf(r,t)}function Nb(r,t,s){return!!qu(r,t)||!!kf(t,r,s)}function cy(r,t){if(r.length===1)return dy(t,r[0]);for(let s=0;s<t.length;s++){const c=t[s];for(let m=0;m<c.length;m++)if(qu(r,c[m]))return!0}for(let s=0;s<r.length;s++)if(dy(t,r[s]))return!0;for(let s=0;s<t.length;s++)if(Pf(r,t[s]))return!0;return!1}function Ub(r,t,s){if(r.length>1){if(Pf(r,t))return!0;for(let c=0;c<t.length;c++)if(kf(t[c],r,s))return!0}for(let c=0;c<r.length;c++)if(kf(r[c],t,s))return!0;return!1}function Pf(r,t){if(r.length===0||t.length===0)return!1;for(let s=0;s<r.length-1;s++){const c=r[s],m=r[s+1];for(let y=0;y<t.length-1;y++)if(Vb(c,m,t[y],t[y+1]))return!0}return!1}function Vb(r,t,s,c){return $e(r,s,c)!==$e(t,s,c)&&$e(r,t,s)!==$e(r,t,c)}function kf(r,t,s){const c=s*s;if(t.length===1)return r.distSqr(t[0])<c;for(let m=1;m<t.length;m++)if(hy(r,t[m-1],t[m])<c)return!0;return!1}function hy(r,t,s){const c=t.distSqr(s);if(c===0)return r.distSqr(t);const m=((r.x-t.x)*(s.x-t.x)+(r.y-t.y)*(s.y-t.y))/c;return r.distSqr(m<0?t:m>1?s:s.sub(t)._mult(m)._add(t))}function dy(r,t){let s,c,m,y=!1;for(let x=0;x<r.length;x++){s=r[x];for(let E=0,k=s.length-1;E<s.length;k=E++)c=s[E],m=s[k],c.y>t.y!=m.y>t.y&&t.x<(m.x-c.x)*(t.y-c.y)/(m.y-c.y)+c.x&&(y=!y)}return y}function qu(r,t){let s=!1;for(let c=0,m=r.length-1;c<r.length;m=c++){const y=r[c],x=r[m];y.y>t.y!=x.y>t.y&&t.x<(x.x-y.x)*(t.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function $b(r,t,s){const c=s[0],m=s[2];if(r.x<c.x&&t.x<c.x||r.x>m.x&&t.x>m.x||r.y<c.y&&t.y<c.y||r.y>m.y&&t.y>m.y)return!1;const y=$e(r,t,s[0]);return y!==$e(r,t,s[1])||y!==$e(r,t,s[2])||y!==$e(r,t,s[3])}function Kc(r,t,s){const c=t.paint.get(r).value;return c.kind==="constant"?c.value:s.programConfigurations.get(t.id).getMaxValue(r)}function yd(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function vd(r,t,s,c,m){if(!t[0]&&!t[1])return r;const y=Ke.convert(t)._mult(m);s==="viewport"&&y._rotate(-c);const x=[];for(let E=0;E<r.length;E++)x.push(r[E].sub(y));return x}ut("CircleBucket",Tf,{omit:["layers"]});const Zb=new Rn({"circle-sort-key":new je(ke.layout_circle["circle-sort-key"])});var jb={paint:new Rn({"circle-radius":new je(ke.paint_circle["circle-radius"]),"circle-color":new je(ke.paint_circle["circle-color"]),"circle-blur":new je(ke.paint_circle["circle-blur"]),"circle-opacity":new je(ke.paint_circle["circle-opacity"]),"circle-translate":new Se(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Se(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Se(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Se(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new je(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new je(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new je(ke.paint_circle["circle-stroke-opacity"])}),layout:Zb},Hu=typeof Float32Array!="undefined"?Float32Array:Array;function Cf(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function py(r,t,s){var c=t[0],m=t[1],y=t[2],x=t[3],E=t[4],k=t[5],A=t[6],F=t[7],O=t[8],$=t[9],W=t[10],H=t[11],ae=t[12],le=t[13],xe=t[14],Ie=t[15],Pe=s[0],Re=s[1],Ge=s[2],Ve=s[3];return r[0]=Pe*c+Re*E+Ge*O+Ve*ae,r[1]=Pe*m+Re*k+Ge*$+Ve*le,r[2]=Pe*y+Re*A+Ge*W+Ve*xe,r[3]=Pe*x+Re*F+Ge*H+Ve*Ie,r[4]=(Pe=s[4])*c+(Re=s[5])*E+(Ge=s[6])*O+(Ve=s[7])*ae,r[5]=Pe*m+Re*k+Ge*$+Ve*le,r[6]=Pe*y+Re*A+Ge*W+Ve*xe,r[7]=Pe*x+Re*F+Ge*H+Ve*Ie,r[8]=(Pe=s[8])*c+(Re=s[9])*E+(Ge=s[10])*O+(Ve=s[11])*ae,r[9]=Pe*m+Re*k+Ge*$+Ve*le,r[10]=Pe*y+Re*A+Ge*W+Ve*xe,r[11]=Pe*x+Re*F+Ge*H+Ve*Ie,r[12]=(Pe=s[12])*c+(Re=s[13])*E+(Ge=s[14])*O+(Ve=s[15])*ae,r[13]=Pe*m+Re*k+Ge*$+Ve*le,r[14]=Pe*y+Re*A+Ge*W+Ve*xe,r[15]=Pe*x+Re*F+Ge*H+Ve*Ie,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Yc,Gb=py;function xd(r,t,s){var c=t[0],m=t[1],y=t[2],x=t[3];return r[0]=s[0]*c+s[4]*m+s[8]*y+s[12]*x,r[1]=s[1]*c+s[5]*m+s[9]*y+s[13]*x,r[2]=s[2]*c+s[6]*m+s[10]*y+s[14]*x,r[3]=s[3]*c+s[7]*m+s[11]*y+s[15]*x,r}function fy(r,t){const s=xd([],[r.x,r.y,0,1],t);return new Ke(s[0]/s[3],s[1]/s[3])}Yc=new Hu(4),Hu!=Float32Array&&(Yc[0]=0,Yc[1]=0,Yc[2]=0,Yc[3]=0);class my extends Tf{}ut("HeatmapBucket",my,{omit:["layers"]});var Wb={paint:new Rn({"heatmap-radius":new je(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new je(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Se(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dr(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Se(ke.paint_heatmap["heatmap-opacity"])})};function If(r,{width:t,height:s},c,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==t*s*c)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${t*s*c}`)}else m=new Uint8Array(t*s*c);return r.width=t,r.height=s,r.data=m,r}function gy(r,{width:t,height:s},c){if(t===r.width&&s===r.height)return;const m=If({},{width:t,height:s},c);zf(r,m,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,s)},c),r.width=t,r.height=s,r.data=m.data}function zf(r,t,s,c,m,y){if(m.width===0||m.height===0)return t;if(m.width>r.width||m.height>r.height||s.x>r.width-m.width||s.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>t.width||m.height>t.height||c.x>t.width-m.width||c.y>t.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=r.data,E=t.data;for(let k=0;k<m.height;k++){const A=((s.y+k)*r.width+s.x)*y,F=((c.y+k)*t.width+c.x)*y;for(let O=0;O<m.width*y;O++)E[F+O]=x[A+O]}return t}class Jc{constructor(t,s){If(this,t,1,s)}resize(t){gy(this,t,1)}clone(){return new Jc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,c,m,y){zf(t,s,c,m,y,1)}}class wo{constructor(t,s){If(this,t,4,s)}resize(t){gy(this,t,4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new wo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,c,m,y){zf(t,s,c,m,y,4)}}function _y(r){const t={},s=r.resolution||256,c=r.clips?r.clips.length:1,m=r.image||new wo({width:s,height:c}),y=(x,E,k)=>{t[r.evaluationKey]=k;const A=r.expression.evaluate(t);m.data[x+E+0]=Math.floor(255*A.r/A.a),m.data[x+E+1]=Math.floor(255*A.g/A.a),m.data[x+E+2]=Math.floor(255*A.b/A.a),m.data[x+E+3]=Math.floor(255*A.a)};if(r.clips)for(let x=0,E=0;x<c;++x,E+=4*s)for(let k=0,A=0;k<s;k++,A+=4){const F=k/(s-1),{start:O,end:$}=r.clips[x];y(E,A,O*(1-F)+$*F)}else for(let x=0,E=0;x<s;x++,E+=4)y(0,E,x/(s-1));return m}ut("AlphaImage",Jc),ut("RGBAImage",wo);var qb={paint:new Rn({"hillshade-illumination-direction":new Se(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Se(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Se(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Se(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Se(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Se(ke.paint_hillshade["hillshade-accent-color"])})};const Hb=hi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xb}=Hb;var Af={exports:{}};function wd(r,t,s){s=s||2;var c,m,y,x,E,k,A,F=t&&t.length,O=F?t[0]*s:r.length,$=yy(r,0,O,s,!0),W=[];if(!$||$.next===$.prev)return W;if(F&&($=function(ae,le,xe,Ie){var Pe,Re,Ge,Ve=[];for(Pe=0,Re=le.length;Pe<Re;Pe++)(Ge=yy(ae,le[Pe]*Ie,Pe<Re-1?le[Pe+1]*Ie:ae.length,Ie,!1))===Ge.next&&(Ge.steiner=!0),Ve.push(i2(Ge));for(Ve.sort(e2),Pe=0;Pe<Ve.length;Pe++)xe=pl(xe=t2(Ve[Pe],xe),xe.next);return xe}(r,t,$,s)),r.length>80*s){c=y=r[0],m=x=r[1];for(var H=s;H<O;H+=s)(E=r[H])<c&&(c=E),(k=r[H+1])<m&&(m=k),E>y&&(y=E),k>x&&(x=k);A=(A=Math.max(y-c,x-m))!==0?1/A:0}return Qc($,W,s,c,m,A),W}function yy(r,t,s,c,m){var y,x;if(m===Df(r,t,s,c)>0)for(y=t;y<s;y+=c)x=wy(y,r[y],r[y+1],x);else for(y=s-c;y>=t;y-=c)x=wy(y,r[y],r[y+1],x);return x&&bd(x,x.next)&&(th(x),x=x.next),x}function pl(r,t){if(!r)return r;t||(t=r);var s,c=r;do if(s=!1,c.steiner||!bd(c,c.next)&&di(c.prev,c,c.next)!==0)c=c.next;else{if(th(c),(c=t=c.prev)===c.next)break;s=!0}while(s||c!==t);return t}function Qc(r,t,s,c,m,y,x){if(r){!x&&y&&function(F,O,$,W){var H=F;do H.z===null&&(H.z=Mf(H.x,H.y,O,$,W)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==F);H.prevZ.nextZ=null,H.prevZ=null,function(ae){var le,xe,Ie,Pe,Re,Ge,Ve,pt,vt=1;do{for(xe=ae,ae=null,Re=null,Ge=0;xe;){for(Ge++,Ie=xe,Ve=0,le=0;le<vt&&(Ve++,Ie=Ie.nextZ);le++);for(pt=vt;Ve>0||pt>0&&Ie;)Ve!==0&&(pt===0||!Ie||xe.z<=Ie.z)?(Pe=xe,xe=xe.nextZ,Ve--):(Pe=Ie,Ie=Ie.nextZ,pt--),Re?Re.nextZ=Pe:ae=Pe,Pe.prevZ=Re,Re=Pe;xe=Ie}Re.nextZ=null,vt*=2}while(Ge>1)}(H)}(r,c,m,y);for(var E,k,A=r;r.prev!==r.next;)if(E=r.prev,k=r.next,y?Yb(r,c,m,y):Kb(r))t.push(E.i/s),t.push(r.i/s),t.push(k.i/s),th(r),r=k.next,A=k.next;else if((r=k)===A){x?x===1?Qc(r=Jb(pl(r),t,s),t,s,c,m,y,2):x===2&&Qb(r,t,s,c,m,y):Qc(pl(r),t,s,c,m,y,1);break}}}function Kb(r){var t=r.prev,s=r,c=r.next;if(di(t,s,c)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(Xu(t.x,t.y,s.x,s.y,c.x,c.y,m.x,m.y)&&di(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Yb(r,t,s,c){var m=r.prev,y=r,x=r.next;if(di(m,y,x)>=0)return!1;for(var E=m.x>y.x?m.x>x.x?m.x:x.x:y.x>x.x?y.x:x.x,k=m.y>y.y?m.y>x.y?m.y:x.y:y.y>x.y?y.y:x.y,A=Mf(m.x<y.x?m.x<x.x?m.x:x.x:y.x<x.x?y.x:x.x,m.y<y.y?m.y<x.y?m.y:x.y:y.y<x.y?y.y:x.y,t,s,c),F=Mf(E,k,t,s,c),O=r.prevZ,$=r.nextZ;O&&O.z>=A&&$&&$.z<=F;){if(O!==r.prev&&O!==r.next&&Xu(m.x,m.y,y.x,y.y,x.x,x.y,O.x,O.y)&&di(O.prev,O,O.next)>=0||(O=O.prevZ,$!==r.prev&&$!==r.next&&Xu(m.x,m.y,y.x,y.y,x.x,x.y,$.x,$.y)&&di($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;O&&O.z>=A;){if(O!==r.prev&&O!==r.next&&Xu(m.x,m.y,y.x,y.y,x.x,x.y,O.x,O.y)&&di(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;$&&$.z<=F;){if($!==r.prev&&$!==r.next&&Xu(m.x,m.y,y.x,y.y,x.x,x.y,$.x,$.y)&&di($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function Jb(r,t,s){var c=r;do{var m=c.prev,y=c.next.next;!bd(m,y)&&vy(m,c,c.next,y)&&eh(m,y)&&eh(y,m)&&(t.push(m.i/s),t.push(c.i/s),t.push(y.i/s),th(c),th(c.next),c=r=y),c=c.next}while(c!==r);return pl(c)}function Qb(r,t,s,c,m,y){var x=r;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&r2(x,E)){var k=xy(x,E);return x=pl(x,x.next),k=pl(k,k.next),Qc(x,t,s,c,m,y),void Qc(k,t,s,c,m,y)}E=E.next}x=x.next}while(x!==r)}function e2(r,t){return r.x-t.x}function t2(r,t){var s=function(y,x){var E,k=x,A=y.x,F=y.y,O=-1/0;do{if(F<=k.y&&F>=k.next.y&&k.next.y!==k.y){var $=k.x+(F-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if($<=A&&$>O){if(O=$,$===A){if(F===k.y)return k;if(F===k.next.y)return k.next}E=k.x<k.next.x?k:k.next}}k=k.next}while(k!==x);if(!E)return null;if(A===O)return E;var W,H=E,ae=E.x,le=E.y,xe=1/0;k=E;do A>=k.x&&k.x>=ae&&A!==k.x&&Xu(F<le?A:O,F,ae,le,F<le?O:A,F,k.x,k.y)&&(W=Math.abs(F-k.y)/(A-k.x),eh(k,y)&&(W<xe||W===xe&&(k.x>E.x||k.x===E.x&&n2(E,k)))&&(E=k,xe=W)),k=k.next;while(k!==H);return E}(r,t);if(!s)return t;var c=xy(s,r),m=pl(s,s.next);return pl(c,c.next),t===s?m:t}function n2(r,t){return di(r.prev,r,t.prev)<0&&di(t.next,r,r.next)<0}function Mf(r,t,s,c,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*m)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function i2(r){var t=r,s=r;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==r);return s}function Xu(r,t,s,c,m,y,x,E){return(m-x)*(t-E)-(r-x)*(y-E)>=0&&(r-x)*(c-E)-(s-x)*(t-E)>=0&&(s-x)*(y-E)-(m-x)*(c-E)>=0}function r2(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(s,c){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==c.i&&m.next.i!==c.i&&vy(m,m.next,s,c))return!0;m=m.next}while(m!==s);return!1}(r,t)&&(eh(r,t)&&eh(t,r)&&function(s,c){var m=s,y=!1,x=(s.x+c.x)/2,E=(s.y+c.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(r,t)&&(di(r.prev,r,t.prev)||di(r,t.prev,t))||bd(r,t)&&di(r.prev,r,r.next)>0&&di(t.prev,t,t.next)>0)}function di(r,t,s){return(t.y-r.y)*(s.x-t.x)-(t.x-r.x)*(s.y-t.y)}function bd(r,t){return r.x===t.x&&r.y===t.y}function vy(r,t,s,c){var m=Ed(di(r,t,s)),y=Ed(di(r,t,c)),x=Ed(di(s,c,r)),E=Ed(di(s,c,t));return m!==y&&x!==E||!(m!==0||!Sd(r,s,t))||!(y!==0||!Sd(r,c,t))||!(x!==0||!Sd(s,r,c))||!(E!==0||!Sd(s,t,c))}function Sd(r,t,s){return t.x<=Math.max(r.x,s.x)&&t.x>=Math.min(r.x,s.x)&&t.y<=Math.max(r.y,s.y)&&t.y>=Math.min(r.y,s.y)}function Ed(r){return r>0?1:r<0?-1:0}function eh(r,t){return di(r.prev,r,r.next)<0?di(r,t,r.next)>=0&&di(r,r.prev,t)>=0:di(r,t,r.prev)<0||di(r,r.next,t)<0}function xy(r,t){var s=new Lf(r.i,r.x,r.y),c=new Lf(t.i,t.x,t.y),m=r.next,y=t.prev;return r.next=t,t.prev=r,s.next=m,m.prev=s,c.next=s,s.prev=c,y.next=c,c.prev=y,c}function wy(r,t,s,c){var m=new Lf(r,t,s);return c?(m.next=c.next,m.prev=c,c.next.prev=m,c.next=m):(m.prev=m,m.next=m),m}function th(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Lf(r,t,s){this.i=r,this.x=t,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Df(r,t,s,c){for(var m=0,y=t,x=s-c;y<s;y+=c)m+=(r[x]-r[y])*(r[y+1]+r[x+1]),x=y;return m}Af.exports=wd,Af.exports.default=wd,wd.deviation=function(r,t,s,c){var m=t&&t.length,y=Math.abs(Df(r,0,m?t[0]*s:r.length,s));if(m)for(var x=0,E=t.length;x<E;x++)y-=Math.abs(Df(r,t[x]*s,x<E-1?t[x+1]*s:r.length,s));var k=0;for(x=0;x<c.length;x+=3){var A=c[x]*s,F=c[x+1]*s,O=c[x+2]*s;k+=Math.abs((r[A]-r[O])*(r[F+1]-r[A+1])-(r[A]-r[F])*(r[O+1]-r[A+1]))}return y===0&&k===0?0:Math.abs((k-y)/y)},wd.flatten=function(r){for(var t=r[0][0].length,s={vertices:[],holes:[],dimensions:t},c=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var x=0;x<t;x++)s.vertices.push(r[m][y][x]);m>0&&s.holes.push(c+=r[m-1].length)}return s};var by=Af.exports;function o2(r,t,s,c,m){Sy(r,t,s||0,c||r.length-1,m||s2)}function Sy(r,t,s,c,m){for(;c>s;){if(c-s>600){var y=c-s+1,x=t-s+1,E=Math.log(y),k=.5*Math.exp(2*E/3),A=.5*Math.sqrt(E*k*(y-k)/y)*(x-y/2<0?-1:1);Sy(r,t,Math.max(s,Math.floor(t-x*k/y+A)),Math.min(c,Math.floor(t+(y-x)*k/y+A)),m)}var F=r[t],O=s,$=c;for(nh(r,s,t),m(r[c],F)>0&&nh(r,s,c);O<$;){for(nh(r,O,$),O++,$--;m(r[O],F)<0;)O++;for(;m(r[$],F)>0;)$--}m(r[s],F)===0?nh(r,s,$):nh(r,++$,c),$<=t&&(s=$+1),t<=$&&(c=$-1)}}function nh(r,t,s){var c=r[t];r[t]=r[s],r[s]=c}function s2(r,t){return r<t?-1:r>t?1:0}function Rf(r,t){const s=r.length;if(s<=1)return[r];const c=[];let m,y;for(let x=0;x<s;x++){const E=Ne(r[x]);E!==0&&(r[x].area=Math.abs(E),y===void 0&&(y=E<0),y===E<0?(m&&c.push(m),m=[r[x]]):m.push(r[x]))}if(m&&c.push(m),t>1)for(let x=0;x<c.length;x++)c[x].length<=t||(o2(c[x],t,1,c[x].length-1,a2),c[x]=c[x].slice(0,t));return c}function a2(r,t){return t.area-r.area}function Bf(r,t,s){const c=s.patternDependencies;let m=!1;for(const y of t){const x=y.paint.get(`${r}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,c[E.to]=!0,c[E.from]=!0)}return m}function Ff(r,t,s,c,m){const y=m.patternDependencies;for(const x of t){const E=x.paint.get(`${r}-pattern`).value;if(E.kind!=="constant"){let k=E.evaluate({zoom:c-1},s,{},m.availableImages),A=E.evaluate({zoom:c},s,{},m.availableImages),F=E.evaluate({zoom:c+1},s,{},m.availableImages);k=k&&k.name?k.name:k,A=A&&A.name?A.name:A,F=F&&F.name?F.name:F,y[k]=!0,y[A]=!0,y[F]=!0,s.patterns[x.id]={min:k,mid:A,max:F}}}return s}class Of{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sn,this.indexArray=new yr,this.indexArray2=new Vo,this.programConfigurations=new au(t.layers,t.zoom),this.segments=new fn,this.segments2=new fn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c){this.hasPattern=Bf("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),x=[];for(const{feature:E,id:k,index:A,sourceLayerIndex:F}of t){const O=this.layers[0]._featureFilter.needGeometry,$=uu(E,O);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),$,c))continue;const W=y?m.evaluate($,{},c,s.availableImages):void 0,H={id:k,properties:E.properties,type:E.type,sourceLayerIndex:F,index:A,geometry:O?$.geometry:lu(E),patterns:{},sortKey:W};x.push(H)}y&&x.sort((E,k)=>E.sortKey-k.sortKey);for(const E of x){const{geometry:k,index:A,sourceLayerIndex:F}=E;if(this.hasPattern){const O=Ff("fill",this.layers,E,this.zoom,s);this.patternFeatures.push(O)}else this.addFeature(E,k,A,c,{});s.featureIndex.insert(t[A].feature,k,A,F,this.index)}}update(t,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c)}addFeatures(t,s,c){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xb),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,c,m,y){for(const x of Rf(s,500)){let E=0;for(const W of x)E+=W.length;const k=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),A=k.vertexLength,F=[],O=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&O.push(F.length/2);const H=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),ae=H.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(ae+W.length-1,ae),F.push(W[0].x),F.push(W[0].y);for(let le=1;le<W.length;le++)this.layoutVertexArray.emplaceBack(W[le].x,W[le].y),this.indexArray2.emplaceBack(ae+le-1,ae+le),F.push(W[le].x),F.push(W[le].y);H.vertexLength+=W.length,H.primitiveLength+=W.length}const $=by(F,O);for(let W=0;W<$.length;W+=3)this.indexArray.emplaceBack(A+$[W],A+$[W+1],A+$[W+2]);k.vertexLength+=E,k.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}}ut("FillBucket",Of,{omit:["layers","patternFeatures"]});const l2=new Rn({"fill-sort-key":new je(ke.layout_fill["fill-sort-key"])});var u2={paint:new Rn({"fill-antialias":new Se(ke.paint_fill["fill-antialias"]),"fill-opacity":new je(ke.paint_fill["fill-opacity"]),"fill-color":new je(ke.paint_fill["fill-color"]),"fill-outline-color":new je(ke.paint_fill["fill-outline-color"]),"fill-translate":new Se(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Se(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wt(ke.paint_fill["fill-pattern"])}),layout:l2};const c2=hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:h2}=c2;var fl={},d2=Ke,Ey=Ku;function Ku(r,t,s,c,m){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=m,r.readFields(p2,this,t)}function p2(r,t,s){r==1?t.id=s.readVarint():r==2?function(c,m){for(var y=c.readVarint()+c.pos;c.pos<y;){var x=m._keys[c.readVarint()],E=m._values[c.readVarint()];m.properties[x]=E}}(s,t):r==3?t.type=s.readVarint():r==4&&(t._geometry=s.pos)}function f2(r){for(var t,s,c=0,m=0,y=r.length,x=y-1;m<y;x=m++)c+=((s=r[x]).x-(t=r[m]).x)*(t.y+s.y);return c}Ku.types=["Unknown","Point","LineString","Polygon"],Ku.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,s=r.readVarint()+r.pos,c=1,m=0,y=0,x=0,E=[];r.pos<s;){if(m<=0){var k=r.readVarint();c=7&k,m=k>>3}if(m--,c===1||c===2)y+=r.readSVarint(),x+=r.readSVarint(),c===1&&(t&&E.push(t),t=[]),t.push(new d2(y,x));else{if(c!==7)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&E.push(t),E},Ku.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,s=1,c=0,m=0,y=0,x=1/0,E=-1/0,k=1/0,A=-1/0;r.pos<t;){if(c<=0){var F=r.readVarint();s=7&F,c=F>>3}if(c--,s===1||s===2)(m+=r.readSVarint())<x&&(x=m),m>E&&(E=m),(y+=r.readSVarint())<k&&(k=y),y>A&&(A=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,k,E,A]},Ku.prototype.toGeoJSON=function(r,t,s){var c,m,y=this.extent*Math.pow(2,s),x=this.extent*r,E=this.extent*t,k=this.loadGeometry(),A=Ku.types[this.type];function F(W){for(var H=0;H<W.length;H++){var ae=W[H];W[H]=[360*(ae.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+E)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(c=0;c<k.length;c++)O[c]=k[c][0];F(k=O);break;case 2:for(c=0;c<k.length;c++)F(k[c]);break;case 3:for(k=function(W){var H=W.length;if(H<=1)return[W];for(var ae,le,xe=[],Ie=0;Ie<H;Ie++){var Pe=f2(W[Ie]);Pe!==0&&(le===void 0&&(le=Pe<0),le===Pe<0?(ae&&xe.push(ae),ae=[W[Ie]]):ae.push(W[Ie]))}return ae&&xe.push(ae),xe}(k),c=0;c<k.length;c++)for(m=0;m<k[c].length;m++)F(k[c][m])}k.length===1?k=k[0]:A="Multi"+A;var $={type:"Feature",geometry:{type:A,coordinates:k},properties:this.properties};return"id"in this&&($.id=this.id),$};var m2=Ey,Ty=Py;function Py(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(g2,this,t),this.length=this._features.length}function g2(r,t,s){r===15?t.version=s.readVarint():r===1?t.name=s.readString():r===5?t.extent=s.readVarint():r===2?t._features.push(s.pos):r===3?t._keys.push(s.readString()):r===4&&t._values.push(function(c){for(var m=null,y=c.readVarint()+c.pos;c.pos<y;){var x=c.readVarint()>>3;m=x===1?c.readString():x===2?c.readFloat():x===3?c.readDouble():x===4?c.readVarint64():x===5?c.readVarint():x===6?c.readSVarint():x===7?c.readBoolean():null}return m}(s))}Py.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new m2(this._pbf,t,this.extent,this._keys,this._values)};var _2=Ty;function y2(r,t,s){if(r===3){var c=new _2(s,s.readVarint()+s.pos);c.length&&(t[c.name]=c)}}fl.VectorTile=function(r,t){this.layers=r.readFields(y2,{},t)},fl.VectorTileFeature=Ey,fl.VectorTileLayer=Ty;const v2=fl.VectorTileFeature.types,Nf=Math.pow(2,13);function ih(r,t,s,c,m,y,x,E){r.emplaceBack(t,s,2*Math.floor(c*Nf)+x,m*Nf*2,y*Nf*2,Math.round(E))}class Uf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new yr,this.programConfigurations=new au(t.layers,t.zoom),this.segments=new fn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c){this.features=[],this.hasPattern=Bf("fill-extrusion",this.layers,s);for(const{feature:m,id:y,index:x,sourceLayerIndex:E}of t){const k=this.layers[0]._featureFilter.needGeometry,A=uu(m,k);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),A,c))continue;const F={id:y,sourceLayerIndex:E,index:x,geometry:k?A.geometry:lu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Ff("fill-extrusion",this.layers,F,this.zoom,s)):this.addFeature(F,F.geometry,x,c,{}),s.featureIndex.insert(m,F.geometry,x,E,this.index,!0)}}addFeatures(t,s,c){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,s,c)}}update(t,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,h2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,c,m,y){for(const x of Rf(s,500)){let E=0;for(const W of x)E+=W.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const W of x){if(W.length===0||w2(W))continue;let H=0;for(let ae=0;ae<W.length;ae++){const le=W[ae];if(ae>=1){const xe=W[ae-1];if(!x2(le,xe)){k.vertexLength+4>fn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ie=le.sub(xe)._perp()._unit(),Pe=xe.dist(le);H+Pe>32768&&(H=0),ih(this.layoutVertexArray,le.x,le.y,Ie.x,Ie.y,0,0,H),ih(this.layoutVertexArray,le.x,le.y,Ie.x,Ie.y,0,1,H),H+=Pe,ih(this.layoutVertexArray,xe.x,xe.y,Ie.x,Ie.y,0,0,H),ih(this.layoutVertexArray,xe.x,xe.y,Ie.x,Ie.y,0,1,H);const Re=k.vertexLength;this.indexArray.emplaceBack(Re,Re+2,Re+1),this.indexArray.emplaceBack(Re+1,Re+2,Re+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+E>fn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),v2[t.type]!=="Polygon")continue;const A=[],F=[],O=k.vertexLength;for(const W of x)if(W.length!==0){W!==x[0]&&F.push(A.length/2);for(let H=0;H<W.length;H++){const ae=W[H];ih(this.layoutVertexArray,ae.x,ae.y,0,0,1,1,0),A.push(ae.x),A.push(ae.y)}}const $=by(A,F);for(let W=0;W<$.length;W+=3)this.indexArray.emplaceBack(O+$[W],O+$[W+2],O+$[W+1]);k.primitiveLength+=$.length/3,k.vertexLength+=E}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}}function x2(r,t){return r.x===t.x&&(r.x<0||r.x>Ti)||r.y===t.y&&(r.y<0||r.y>Ti)}function w2(r){return r.every(t=>t.x<0)||r.every(t=>t.x>Ti)||r.every(t=>t.y<0)||r.every(t=>t.y>Ti)}ut("FillExtrusionBucket",Uf,{omit:["layers","features"]});var b2={paint:new Rn({"fill-extrusion-opacity":new Se(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new je(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Se(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Se(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wt(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new je(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new je(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Se(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function rh(r,t){return r.x*t.x+r.y*t.y}function ky(r,t){if(r.length===1){let s=0;const c=t[s++];let m;for(;!m||c.equals(m);)if(m=t[s++],!m)return 1/0;for(;s<t.length;s++){const y=t[s],x=r[0],E=m.sub(c),k=y.sub(c),A=x.sub(c),F=rh(E,E),O=rh(E,k),$=rh(k,k),W=rh(A,E),H=rh(A,k),ae=F*$-O*O,le=($*W-O*H)/ae,xe=(F*H-O*W)/ae,Ie=c.z*(1-le-xe)+m.z*le+y.z*xe;if(isFinite(Ie))return Ie}return 1/0}{let s=1/0;for(const c of t)s=Math.min(s,c.z);return s}}const S2=hi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:E2}=S2,T2=hi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:P2}=T2,k2=fl.VectorTileFeature.types,C2=Math.cos(Math.PI/180*37.5),Cy=Math.pow(2,14)/.5;class Vf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Zt,this.layoutVertexArray2=new pn,this.indexArray=new yr,this.programConfigurations=new au(t.layers,t.zoom),this.segments=new fn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,c){this.hasPattern=Bf("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),x=[];for(const{feature:E,id:k,index:A,sourceLayerIndex:F}of t){const O=this.layers[0]._featureFilter.needGeometry,$=uu(E,O);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),$,c))continue;const W=y?m.evaluate($,{},c):void 0,H={id:k,properties:E.properties,type:E.type,sourceLayerIndex:F,index:A,geometry:O?$.geometry:lu(E),patterns:{},sortKey:W};x.push(H)}y&&x.sort((E,k)=>E.sortKey-k.sortKey);for(const E of x){const{geometry:k,index:A,sourceLayerIndex:F}=E;if(this.hasPattern){const O=Ff("line",this.layers,E,this.zoom,s);this.patternFeatures.push(O)}else this.addFeature(E,k,A,c,{});s.featureIndex.insert(t[A].feature,k,A,F,this.index)}}update(t,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,c)}addFeatures(t,s,c){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,P2)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,E2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,c,m,y){const x=this.layers[0].layout,E=x.get("line-join").evaluate(t,{}),k=x.get("line-cap"),A=x.get("line-miter-limit"),F=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const O of s)this.addLine(O,t,E,k,A,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}addLine(t,s,c,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<t.length-1;xe++)this.totalDistance+=t[xe].dist(t[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=k2[s.type]==="Polygon";let k=t.length;for(;k>=2&&t[k-1].equals(t[k-2]);)k--;let A=0;for(;A<k-1&&t[A].equals(t[A+1]);)A++;if(k<(E?3:2))return;c==="bevel"&&(y=1.05);const F=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let $,W,H,ae,le;this.e1=this.e2=-1,E&&($=t[k-2],le=t[A].sub($)._unit()._perp());for(let xe=A;xe<k;xe++){if(H=xe===k-1?E?t[A+1]:void 0:t[xe+1],H&&t[xe].equals(H))continue;le&&(ae=le),$&&(W=$),$=t[xe],le=H?H.sub($)._unit()._perp():ae,ae=ae||le;let Ie=ae.add(le);Ie.x===0&&Ie.y===0||Ie._unit();const Pe=ae.x*le.x+ae.y*le.y,Re=Ie.x*le.x+Ie.y*le.y,Ge=Re!==0?1/Re:1/0,Ve=2*Math.sqrt(2-2*Re),pt=Re<C2&&W&&H,vt=ae.x*le.y-ae.y*le.x>0;if(pt&&xe>A){const et=$.dist(W);if(et>2*F){const ht=$.sub($.sub(W)._mult(F/et)._round());this.updateDistance(W,ht),this.addCurrentVertex(ht,ae,0,0,O),W=ht}}const ot=W&&H;let st=ot?c:E?"butt":m;if(ot&&st==="round"&&(Ge<x?st="miter":Ge<=2&&(st="fakeround")),st==="miter"&&Ge>y&&(st="bevel"),st==="bevel"&&(Ge>2&&(st="flipbevel"),Ge<y&&(st="miter")),W&&this.updateDistance(W,$),st==="miter")Ie._mult(Ge),this.addCurrentVertex($,Ie,0,0,O);else if(st==="flipbevel"){if(Ge>100)Ie=le.mult(-1);else{const et=Ge*ae.add(le).mag()/ae.sub(le).mag();Ie._perp()._mult(et*(vt?-1:1))}this.addCurrentVertex($,Ie,0,0,O),this.addCurrentVertex($,Ie.mult(-1),0,0,O)}else if(st==="bevel"||st==="fakeround"){const et=-Math.sqrt(Ge*Ge-1),ht=vt?et:0,at=vt?0:et;if(W&&this.addCurrentVertex($,ae,ht,at,O),st==="fakeround"){const He=Math.round(180*Ve/Math.PI/20);for(let kt=1;kt<He;kt++){let St=kt/He;if(St!==.5){const bn=St-.5;St+=St*bn*(St-1)*((1.0904+Pe*(Pe*(3.55645-1.43519*Pe)-3.2452))*bn*bn+(.848013+Pe*(.215638*Pe-1.06021)))}const an=le.sub(ae)._mult(St)._add(ae)._unit()._mult(vt?-1:1);this.addHalfVertex($,an.x,an.y,!1,vt,0,O)}}H&&this.addCurrentVertex($,le,-ht,-at,O)}else if(st==="butt")this.addCurrentVertex($,Ie,0,0,O);else if(st==="square"){const et=W?1:-1;this.addCurrentVertex($,Ie,et,et,O)}else st==="round"&&(W&&(this.addCurrentVertex($,ae,0,0,O),this.addCurrentVertex($,ae,1,1,O,!0)),H&&(this.addCurrentVertex($,le,-1,-1,O,!0),this.addCurrentVertex($,le,0,0,O)));if(pt&&xe<k-1){const et=$.dist(H);if(et>2*F){const ht=$.add(H.sub($)._mult(F/et)._round());this.updateDistance($,ht),this.addCurrentVertex(ht,le,0,0,O),$=ht}}}}addCurrentVertex(t,s,c,m,y,x=!1){const E=s.y*m-s.x,k=-s.y-s.x*m;this.addHalfVertex(t,s.x+s.y*c,s.y-s.x*c,x,!1,c,y),this.addHalfVertex(t,E,k,x,!0,-m,y),this.distance>Cy/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,s,c,m,y,x))}addHalfVertex({x:t,y:s},c,m,y,x,E,k){const A=.5*(this.lineClips?this.scaledDistance*(Cy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),k.primitiveLength++),x?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}}ut("LineBucket",Vf,{omit:["layers","patternFeatures"]});const I2=new Rn({"line-cap":new Se(ke.layout_line["line-cap"]),"line-join":new je(ke.layout_line["line-join"]),"line-miter-limit":new Se(ke.layout_line["line-miter-limit"]),"line-round-limit":new Se(ke.layout_line["line-round-limit"]),"line-sort-key":new je(ke.layout_line["line-sort-key"])});var Iy={paint:new Rn({"line-opacity":new je(ke.paint_line["line-opacity"]),"line-color":new je(ke.paint_line["line-color"]),"line-translate":new Se(ke.paint_line["line-translate"]),"line-translate-anchor":new Se(ke.paint_line["line-translate-anchor"]),"line-width":new je(ke.paint_line["line-width"]),"line-gap-width":new je(ke.paint_line["line-gap-width"]),"line-offset":new je(ke.paint_line["line-offset"]),"line-blur":new je(ke.paint_line["line-blur"]),"line-dasharray":new en(ke.paint_line["line-dasharray"]),"line-pattern":new Wt(ke.paint_line["line-pattern"]),"line-gradient":new Dr(ke.paint_line["line-gradient"])}),layout:I2};const zy=new class extends je{possiblyEvaluate(r,t){return t=new a(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(r,t)}evaluate(r,t,s,c){return t=ge({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(r,t,s,c)}}(Iy.paint.properties["line-width"].specification);function Ay(r,t){return t>0?t+2*r:r}zy.useIntegerZoom=!0;const z2=hi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),A2=hi([{name:"a_projected_pos",components:3,type:"Float32"}],4);hi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const M2=hi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);hi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const My=hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),L2=hi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function D2(r,t,s){return r.sections.forEach(c=>{c.text=function(m,y,x){const E=y.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),_r.applyArabicShaping&&(m=_r.applyArabicShaping(m)),m}(c.text,t,s)}),r}hi([{name:"triangle",components:3,type:"Uint16"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hi([{type:"Float32",name:"offsetX"}]),hi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const oh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Oi=24,$f=Cn,Ly=function(r,t,s,c,m){var y,x,E=8*m-c-1,k=(1<<E)-1,A=k>>1,F=-7,O=s?m-1:0,$=s?-1:1,W=r[t+O];for(O+=$,y=W&(1<<-F)-1,W>>=-F,F+=E;F>0;y=256*y+r[t+O],O+=$,F-=8);for(x=y&(1<<-F)-1,y>>=-F,F+=c;F>0;x=256*x+r[t+O],O+=$,F-=8);if(y===0)y=1-A;else{if(y===k)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,c),y-=A}return(W?-1:1)*x*Math.pow(2,y-c)},Dy=function(r,t,s,c,m,y){var x,E,k,A=8*y-m-1,F=(1<<A)-1,O=F>>1,$=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=c?0:y-1,H=c?1:-1,ae=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,x=F):(x=Math.floor(Math.log(t)/Math.LN2),t*(k=Math.pow(2,-x))<1&&(x--,k*=2),(t+=x+O>=1?$/k:$*Math.pow(2,1-O))*k>=2&&(x++,k/=2),x+O>=F?(E=0,x=F):x+O>=1?(E=(t*k-1)*Math.pow(2,m),x+=O):(E=t*Math.pow(2,O-1)*Math.pow(2,m),x=0));m>=8;r[s+W]=255&E,W+=H,E/=256,m-=8);for(x=x<<m|E,A+=m;A>0;r[s+W]=255&x,W+=H,x/=256,A-=8);r[s+W-H]|=128*ae};function Cn(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Cn.Varint=0,Cn.Fixed64=1,Cn.Bytes=2,Cn.Fixed32=5;var ml,Zf=4294967296,Ry=1/Zf,By=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function za(r){return r.type===Cn.Bytes?r.readVarint()+r.pos:r.pos+1}function Yu(r,t,s){return s?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function Fy(r,t,s){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(c);for(var m=s.pos-1;m>=r;m--)s.buf[m+c]=s.buf[m]}function R2(r,t){for(var s=0;s<r.length;s++)t.writeVarint(r[s])}function B2(r,t){for(var s=0;s<r.length;s++)t.writeSVarint(r[s])}function F2(r,t){for(var s=0;s<r.length;s++)t.writeFloat(r[s])}function O2(r,t){for(var s=0;s<r.length;s++)t.writeDouble(r[s])}function N2(r,t){for(var s=0;s<r.length;s++)t.writeBoolean(r[s])}function U2(r,t){for(var s=0;s<r.length;s++)t.writeFixed32(r[s])}function V2(r,t){for(var s=0;s<r.length;s++)t.writeSFixed32(r[s])}function $2(r,t){for(var s=0;s<r.length;s++)t.writeFixed64(r[s])}function Z2(r,t){for(var s=0;s<r.length;s++)t.writeSFixed64(r[s])}function Td(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function Ju(r,t,s){r[s]=t,r[s+1]=t>>>8,r[s+2]=t>>>16,r[s+3]=t>>>24}function Oy(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}function j2(r,t,s){r===1&&s.readMessage(G2,t)}function G2(r,t,s){if(r===3){const{id:c,bitmap:m,width:y,height:x,left:E,top:k,advance:A}=s.readMessage(W2,{});t.push({id:c,bitmap:new Jc({width:y+6,height:x+6},m),metrics:{width:y,height:x,left:E,top:k,advance:A}})}}function W2(r,t,s){r===1?t.id=s.readVarint():r===2?t.bitmap=s.readBytes():r===3?t.width=s.readVarint():r===4?t.height=s.readVarint():r===5?t.left=s.readSVarint():r===6?t.top=s.readSVarint():r===7&&(t.advance=s.readVarint())}function Ny(r){let t=0,s=0;for(const x of r)t+=x.w*x.h,s=Math.max(s,x.w);r.sort((x,E)=>E.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let m=0,y=0;for(const x of r)for(let E=c.length-1;E>=0;E--){const k=c[E];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===k.w&&x.h===k.h){const A=c.pop();E<c.length&&(c[E]=A)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(c.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:m,h:y,fill:t/(m*y)||0}}Cn.prototype={destroy:function(){this.buf=null},readFields:function(r,t,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),m=c>>3,y=this.pos;this.type=7&c,r(m,t,this),this.pos===y&&this.skip(c)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=Td(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Oy(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Td(this.buf,this.pos)+Td(this.buf,this.pos+4)*Zf;return this.pos+=8,r},readSFixed64:function(){var r=Td(this.buf,this.pos)+Oy(this.buf,this.pos+4)*Zf;return this.pos+=8,r},readFloat:function(){var r=Ly(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ly(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,s,c=this.buf;return t=127&(s=c[this.pos++]),s<128?t:(t|=(127&(s=c[this.pos++]))<<7,s<128?t:(t|=(127&(s=c[this.pos++]))<<14,s<128?t:(t|=(127&(s=c[this.pos++]))<<21,s<128?t:function(m,y,x){var E,k,A=x.buf;if(E=(112&(k=A[x.pos++]))>>4,k<128||(E|=(127&(k=A[x.pos++]))<<3,k<128)||(E|=(127&(k=A[x.pos++]))<<10,k<128)||(E|=(127&(k=A[x.pos++]))<<17,k<128)||(E|=(127&(k=A[x.pos++]))<<24,k<128)||(E|=(1&(k=A[x.pos++]))<<31,k<128))return Yu(m,E,y);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(s=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&By?function(s,c,m){return By.decode(s.subarray(c,m))}(this.buf,t,r):function(s,c,m){for(var y="",x=c;x<m;){var E,k,A,F=s[x],O=null,$=F>239?4:F>223?3:F>191?2:1;if(x+$>m)break;$===1?F<128&&(O=F):$===2?(192&(E=s[x+1]))==128&&(O=(31&F)<<6|63&E)<=127&&(O=null):$===3?(k=s[x+2],(192&(E=s[x+1]))==128&&(192&k)==128&&((O=(15&F)<<12|(63&E)<<6|63&k)<=2047||O>=55296&&O<=57343)&&(O=null)):$===4&&(k=s[x+2],A=s[x+3],(192&(E=s[x+1]))==128&&(192&k)==128&&(192&A)==128&&((O=(15&F)<<18|(63&E)<<12|(63&k)<<6|63&A)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,$=1):O>65535&&(O-=65536,y+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),y+=String.fromCharCode(O),x+=$}return y}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==Cn.Bytes)return r.push(this.readVarint(t));var s=za(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==Cn.Bytes)return r.push(this.readSVarint());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Cn.Bytes)return r.push(this.readBoolean());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Cn.Bytes)return r.push(this.readFloat());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Cn.Bytes)return r.push(this.readDouble());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Cn.Bytes)return r.push(this.readFixed32());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Cn.Bytes)return r.push(this.readSFixed32());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Cn.Bytes)return r.push(this.readFixed64());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Cn.Bytes)return r.push(this.readSFixed64());var t=za(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===Cn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Cn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Cn.Fixed32)this.pos+=4;else{if(t!==Cn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var s=new Uint8Array(t);s.set(this.buf),this.buf=s,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Ju(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Ju(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Ju(this.buf,-1&r,this.pos),Ju(this.buf,Math.floor(r*Ry),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Ju(this.buf,-1&r,this.pos),Ju(this.buf,Math.floor(r*Ry),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,s){var c,m;if(t>=0?(c=t%4294967296|0,m=t/4294967296|0):(m=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,m=m+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,E){E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,E.buf[E.pos]=127&(y>>>=7)}(c,0,s),function(y,x){var E=(7&y)<<4;x.buf[x.pos++]|=E|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(c,m,y){for(var x,E,k=0;k<m.length;k++){if((x=m.charCodeAt(k))>55295&&x<57344){if(!E){x>56319||k+1===m.length?(c[y++]=239,c[y++]=191,c[y++]=189):E=x;continue}if(x<56320){c[y++]=239,c[y++]=191,c[y++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(c[y++]=239,c[y++]=191,c[y++]=189,E=null);x<128?c[y++]=x:(x<2048?c[y++]=x>>6|192:(x<65536?c[y++]=x>>12|224:(c[y++]=x>>18|240,c[y++]=x>>12&63|128),c[y++]=x>>6&63|128),c[y++]=63&x|128)}return y}(this.buf,r,this.pos);var s=this.pos-t;s>=128&&Fy(t,s,this),this.pos=t-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),Dy(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Dy(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var s=0;s<t;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,t){this.pos++;var s=this.pos;r(t,this);var c=this.pos-s;c>=128&&Fy(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,t,s){this.writeTag(r,Cn.Bytes),this.writeRawMessage(t,s)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,R2,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,B2,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,N2,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,F2,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,O2,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,U2,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,V2,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,$2,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,Z2,t)},writeBytesField:function(r,t){this.writeTag(r,Cn.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,Cn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,Cn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,Cn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,Cn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,Cn.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,Cn.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,Cn.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,Cn.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,Cn.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,Boolean(t))}};class jf{constructor(t,{pixelRatio:s,version:c,stretchX:m,stretchY:y,content:x}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=x,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Uy{constructor(t,s){const c={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(t,c,y),this.addImages(s,m,y);const{w:x,h:E}=Ny(y),k=new wo({width:x||1,height:E||1});for(const A in t){const F=t[A],O=c[A].paddedRect;wo.copy(F.data,k,{x:0,y:0},{x:O.x+1,y:O.y+1},F.data)}for(const A in s){const F=s[A],O=m[A].paddedRect,$=O.x+1,W=O.y+1,H=F.data.width,ae=F.data.height;wo.copy(F.data,k,{x:0,y:0},{x:$,y:W},F.data),wo.copy(F.data,k,{x:0,y:ae-1},{x:$,y:W-1},{width:H,height:1}),wo.copy(F.data,k,{x:0,y:0},{x:$,y:W+ae},{width:H,height:1}),wo.copy(F.data,k,{x:H-1,y:0},{x:$-1,y:W},{width:1,height:ae}),wo.copy(F.data,k,{x:0,y:0},{x:$+H,y:W},{width:1,height:ae})}this.image=k,this.iconPositions=c,this.patternPositions=m}addImages(t,s,c){for(const m in t){const y=t[m],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};c.push(x),s[m]=new jf(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(t,s){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),s)}patchUpdatedImage(t,s,c){if(!t||!s||t.version===s.version)return;t.version=s.version;const[m,y]=t.tl;c.update(s.data,void 0,{x:m,y})}}ut("ImagePosition",jf),ut("ImageAtlas",Uy),u.WritingMode=void 0,(ml=u.WritingMode||(u.WritingMode={}))[ml.none=0]="none",ml[ml.horizontal=1]="horizontal",ml[ml.vertical=2]="vertical",ml[ml.horizontalOnly=3]="horizontalOnly";const Pd=-17;class sh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,s){const c=new sh;return c.scale=t||1,c.fontStack=s,c}static forImage(t){const s=new sh;return s.imageName=t,s}}class Qu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,s){const c=new Qu;for(let m=0;m<t.sections.length;m++){const y=t.sections[m];y.image?c.addImageSection(y):c.addTextSection(y,s)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let s="";for(let c=0;c<t.length;c++){const m=t.charCodeAt(c+1)||null,y=t.charCodeAt(c-1)||null;s+=m&&Hs(m)&&!oh[t[c+1]]||y&&Hs(y)&&!oh[t[c-1]]||!oh[t[c]]?t[c]:oh[t[c]]}return s}(this.text)}trim(){let t=0;for(let c=0;c<this.text.length&&Cd[this.text.charCodeAt(c)];c++)t++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&Cd[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(t,s),this.sectionIndex=this.sectionIndex.slice(t,s)}substring(t,s){const c=new Qu;return c.text=this.text.substring(t,s),c.sectionIndex=this.sectionIndex.slice(t,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,s)=>Math.max(t,this.sections[s].scale),0)}addTextSection(t,s){this.text+=t.text,this.sections.push(sh.forText(t.scale,t.fontStack||s));const c=this.sections.length-1;for(let m=0;m<t.text.length;++m)this.sectionIndex.push(c)}addImageSection(t){const s=t.image?t.image.name:"";if(s.length===0)return void Ae("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(sh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ae("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function kd(r,t,s,c,m,y,x,E,k,A,F,O,$,W,H,ae){const le=Qu.fromFeature(r,m);let xe;O===u.WritingMode.vertical&&le.verticalizePunctuation();const{processBidirectionalText:Ie,processStyledBidirectionalText:Pe}=_r;if(Ie&&le.sections.length===1){xe=[];const Ve=Ie(le.toString(),Gf(le,A,y,t,c,W,H));for(const pt of Ve){const vt=new Qu;vt.text=pt,vt.sections=le.sections;for(let ot=0;ot<pt.length;ot++)vt.sectionIndex.push(0);xe.push(vt)}}else if(Pe){xe=[];const Ve=Pe(le.text,le.sectionIndex,Gf(le,A,y,t,c,W,H));for(const pt of Ve){const vt=new Qu;vt.text=pt[0],vt.sectionIndex=pt[1],vt.sections=le.sections,xe.push(vt)}}else xe=function(Ve,pt){const vt=[],ot=Ve.text;let st=0;for(const et of pt)vt.push(Ve.substring(st,et)),st=et;return st<ot.length&&vt.push(Ve.substring(st,ot.length)),vt}(le,Gf(le,A,y,t,c,W,H));const Re=[],Ge={positionedLines:Re,text:le.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Ve,pt,vt,ot,st,et,ht,at,He,kt,St,an){let bn=0,Zn=Pd,jn=0,qi=0;const yi=at==="right"?1:at==="left"?0:.5;let vi=0;for(const xi of st){xi.trim();const Xi=xi.getMaxScale(),or=(Xi-1)*Oi,vr={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[vi]=vr;const Or=vr.positionedGlyphs;let Nr=0;if(!xi.length()){Zn+=et,++vi;continue}for(let Ai=0;Ai<xi.length();Ai++){const tn=xi.getSection(Ai),no=xi.getSectionIndex(Ai),Ki=xi.getCharCode(Ai);let sr=0,Go=null,gs=null,_s=null,Ma=Oi;const Wo=!(He===u.WritingMode.horizontal||!St&&!qs(Ki)||St&&(Cd[Ki]||(zi=Ki,tt.Arabic(zi)||tt["Arabic Supplement"](zi)||tt["Arabic Extended-A"](zi)||tt["Arabic Presentation Forms-A"](zi)||tt["Arabic Presentation Forms-B"](zi))));if(tn.imageName){const bo=ot[tn.imageName];if(!bo)continue;_s=tn.imageName,Ve.iconsInText=Ve.iconsInText||!0,gs=bo.paddedRect;const Ur=bo.displaySize;tn.scale=tn.scale*Oi/an,Go={width:Ur[0],height:Ur[1],left:1,top:-3,advance:Wo?Ur[1]:Ur[0]},sr=or+(Oi-Ur[1]*tn.scale),Ma=Go.advance;const La=Wo?Ur[0]*tn.scale-Oi*Xi:Ur[1]*tn.scale-Oi*Xi;La>0&&La>Nr&&(Nr=La)}else{const bo=vt[tn.fontStack],Ur=bo&&bo[Ki];if(Ur&&Ur.rect)gs=Ur.rect,Go=Ur.metrics;else{const La=pt[tn.fontStack],uh=La&&La[Ki];if(!uh)continue;Go=uh.metrics}sr=(Xi-tn.scale)*Oi}Wo?(Ve.verticalizable=!0,Or.push({glyph:Ki,imageName:_s,x:bn,y:Zn+sr,vertical:Wo,scale:tn.scale,fontStack:tn.fontStack,sectionIndex:no,metrics:Go,rect:gs}),bn+=Ma*tn.scale+kt):(Or.push({glyph:Ki,imageName:_s,x:bn,y:Zn+sr,vertical:Wo,scale:tn.scale,fontStack:tn.fontStack,sectionIndex:no,metrics:Go,rect:gs}),bn+=Go.advance*tn.scale+kt)}Or.length!==0&&(jn=Math.max(bn-kt,jn),X2(Or,0,Or.length-1,yi,Nr)),bn=0;const Hn=et*Xi+Nr;vr.lineOffset=Math.max(Nr,or),Zn+=Hn,qi=Math.max(Hn,qi),++vi}var zi;const Hi=Zn-Pd,{horizontalAlign:rr,verticalAlign:Fr}=Wf(ht);(function(xi,Xi,or,vr,Or,Nr,Hn,Ai,tn){const no=(Xi-or)*Or;let Ki=0;Ki=Nr!==Hn?-Ai*vr-Pd:(-vr*tn+.5)*Hn;for(const sr of xi)for(const Go of sr.positionedGlyphs)Go.x+=no,Go.y+=Ki})(Ve.positionedLines,yi,rr,Fr,jn,qi,et,Hi,st.length),Ve.top+=-Fr*Hi,Ve.bottom=Ve.top+Hi,Ve.left+=-rr*jn,Ve.right=Ve.left+jn}(Ge,t,s,c,xe,x,E,k,O,A,$,ae),!function(Ve){for(const pt of Ve)if(pt.positionedGlyphs.length!==0)return!1;return!0}(Re)&&Ge}const Cd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},q2={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Vy(r,t,s,c,m,y){if(t.imageName){const x=c[t.imageName];return x?x.displaySize[0]*t.scale*Oi/y+m:0}{const x=s[t.fontStack],E=x&&x[r];return E?E.metrics.advance*t.scale+m:0}}function $y(r,t,s,c){const m=Math.pow(r-t,2);return c?r<t?m/2:2*m:m+Math.abs(s)*s}function H2(r,t,s){let c=0;return r===10&&(c-=1e4),s&&(c+=150),r!==40&&r!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function Zy(r,t,s,c,m,y){let x=null,E=$y(t,s,m,y);for(const k of c){const A=$y(t-k.x,s,m,y)+k.badness;A<=E&&(x=k,E=A)}return{index:r,x:t,priorBreak:x,badness:E}}function jy(r){return r?jy(r.priorBreak).concat(r.index):[]}function Gf(r,t,s,c,m,y,x){if(y!=="point")return[];if(!r)return[];const E=[],k=function($,W,H,ae,le,xe){let Ie=0;for(let Pe=0;Pe<$.length();Pe++){const Re=$.getSection(Pe);Ie+=Vy($.getCharCode(Pe),Re,ae,le,W,xe)}return Ie/Math.max(1,Math.ceil(Ie/H))}(r,t,s,c,m,x),A=r.text.indexOf("\u200B")>=0;let F=0;for(let $=0;$<r.length();$++){const W=r.getSection($),H=r.getCharCode($);if(Cd[H]||(F+=Vy(H,W,c,m,t,x)),$<r.length()-1){const ae=!((O=H)<11904||!(tt["Bopomofo Extended"](O)||tt.Bopomofo(O)||tt["CJK Compatibility Forms"](O)||tt["CJK Compatibility Ideographs"](O)||tt["CJK Compatibility"](O)||tt["CJK Radicals Supplement"](O)||tt["CJK Strokes"](O)||tt["CJK Symbols and Punctuation"](O)||tt["CJK Unified Ideographs Extension A"](O)||tt["CJK Unified Ideographs"](O)||tt["Enclosed CJK Letters and Months"](O)||tt["Halfwidth and Fullwidth Forms"](O)||tt.Hiragana(O)||tt["Ideographic Description Characters"](O)||tt["Kangxi Radicals"](O)||tt["Katakana Phonetic Extensions"](O)||tt.Katakana(O)||tt["Vertical Forms"](O)||tt["Yi Radicals"](O)||tt["Yi Syllables"](O)));(q2[H]||ae||W.imageName)&&E.push(Zy($+1,F,k,E,H2(H,r.getCharCode($+1),ae&&A),!1))}}var O;return jy(Zy(r.length(),F,k,E,0,!0))}function Wf(r){let t=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function X2(r,t,s,c,m){if(!c&&!m)return;const y=r[s],x=(r[s].x+y.metrics.advance*y.scale)*c;for(let E=t;E<=s;E++)r[E].x-=x,r[E].y+=m}function K2(r,t,s){const{horizontalAlign:c,verticalAlign:m}=Wf(s),y=t[0]-r.displaySize[0]*c,x=t[1]-r.displaySize[1]*m;return{image:r,top:x,bottom:x+r.displaySize[1],left:y,right:y+r.displaySize[0]}}function Gy(r,t,s,c,m,y){const x=r.image;let E;if(x.content){const le=x.content,xe=x.pixelRatio||1;E=[le[0]/xe,le[1]/xe,x.displaySize[0]-le[2]/xe,x.displaySize[1]-le[3]/xe]}const k=t.left*y,A=t.right*y;let F,O,$,W;s==="width"||s==="both"?(W=m[0]+k-c[3],O=m[0]+A+c[1]):(W=m[0]+(k+A-x.displaySize[0])/2,O=W+x.displaySize[0]);const H=t.top*y,ae=t.bottom*y;return s==="height"||s==="both"?(F=m[1]+H-c[0],$=m[1]+ae+c[2]):(F=m[1]+(H+ae-x.displaySize[1])/2,$=F+x.displaySize[1]),{image:x,top:F,right:O,bottom:$,left:W,collisionPadding:E}}const Aa=128;function Wy(r,t){const{expression:s}=t;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new a(r+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:m}=s;let y=0;for(;y<c.length&&c[y]<=r;)y++;y=Math.max(0,y-1);let x=y;for(;x<c.length&&c[x]<r+1;)x++;x=Math.min(c.length-1,x);const E=c[y],k=c[x];return s.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:k,minSize:s.evaluate(new a(E)),maxSize:s.evaluate(new a(k)),interpolationType:m}}}class gl extends Ke{constructor(t,s,c,m){super(t,s),this.angle=c,m!==void 0&&(this.segment=m)}clone(){return new gl(this.x,this.y,this.angle,this.segment)}}function qy(r,t,s,c,m){if(t.segment===void 0)return!0;let y=t,x=t.segment+1,E=0;for(;E>-s/2;){if(x--,x<0)return!1;E-=r[x].dist(y),y=r[x]}E+=r[x].dist(r[x+1]),x++;const k=[];let A=0;for(;E<s/2;){const F=r[x],O=r[x+1];if(!O)return!1;let $=r[x-1].angleTo(F)-F.angleTo(O);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:E,angleDelta:$}),A+=$;E-k[0].distance>c;)A-=k.shift().angleDelta;if(A>m)return!1;x++,E+=F.dist(O)}return!0}function Hy(r){let t=0;for(let s=0;s<r.length-1;s++)t+=r[s].dist(r[s+1]);return t}function Xy(r,t,s){return r?.6*t*s:0}function Ky(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function Y2(r,t,s,c,m,y){const x=Xy(s,m,y),E=Ky(s,c)*y;let k=0;const A=Hy(r)/2;for(let F=0;F<r.length-1;F++){const O=r[F],$=r[F+1],W=O.dist($);if(k+W>A){const H=(A-k)/W,ae=Vn(O.x,$.x,H),le=Vn(O.y,$.y,H),xe=new gl(ae,le,$.angleTo(O),F);return xe._round(),!x||qy(r,xe,E,x,t)?xe:void 0}k+=W}}function J2(r,t,s,c,m,y,x,E,k){const A=Xy(c,y,x),F=Ky(c,m),O=F*x,$=r[0].x===0||r[0].x===k||r[0].y===0||r[0].y===k;return t-O<t/4&&(t=O+t/4),Yy(r,$?t/2*E%t:(F/2+2*y)*x*E%t,t,A,s,O,$,!1,k)}function Yy(r,t,s,c,m,y,x,E,k){const A=y/2,F=Hy(r);let O=0,$=t-s,W=[];for(let H=0;H<r.length-1;H++){const ae=r[H],le=r[H+1],xe=ae.dist(le),Ie=le.angleTo(ae);for(;$+s<O+xe;){$+=s;const Pe=($-O)/xe,Re=Vn(ae.x,le.x,Pe),Ge=Vn(ae.y,le.y,Pe);if(Re>=0&&Re<k&&Ge>=0&&Ge<k&&$-A>=0&&$+A<=F){const Ve=new gl(Re,Ge,Ie,H);Ve._round(),c&&!qy(r,Ve,y,c,m)||W.push(Ve)}}O+=xe}return E||W.length||x||(W=Yy(r,O/2,s,c,m,y,x,!0,k)),W}function Jy(r,t,s,c,m){const y=[];for(let x=0;x<r.length;x++){const E=r[x];let k;for(let A=0;A<E.length-1;A++){let F=E[A],O=E[A+1];F.x<t&&O.x<t||(F.x<t?F=new Ke(t,F.y+(t-F.x)/(O.x-F.x)*(O.y-F.y))._round():O.x<t&&(O=new Ke(t,F.y+(t-F.x)/(O.x-F.x)*(O.y-F.y))._round()),F.y<s&&O.y<s||(F.y<s?F=new Ke(F.x+(s-F.y)/(O.y-F.y)*(O.x-F.x),s)._round():O.y<s&&(O=new Ke(F.x+(s-F.y)/(O.y-F.y)*(O.x-F.x),s)._round()),F.x>=c&&O.x>=c||(F.x>=c?F=new Ke(c,F.y+(c-F.x)/(O.x-F.x)*(O.y-F.y))._round():O.x>=c&&(O=new Ke(c,F.y+(c-F.x)/(O.x-F.x)*(O.y-F.y))._round()),F.y>=m&&O.y>=m||(F.y>=m?F=new Ke(F.x+(m-F.y)/(O.y-F.y)*(O.x-F.x),m)._round():O.y>=m&&(O=new Ke(F.x+(m-F.y)/(O.y-F.y)*(O.x-F.x),m)._round()),k&&F.equals(k[k.length-1])||(k=[F],y.push(k)),k.push(O)))))}}return y}function Qy(r,t,s,c){const m=[],y=r.image,x=y.pixelRatio,E=y.paddedRect.w-2,k=y.paddedRect.h-2,A=r.right-r.left,F=r.bottom-r.top,O=y.stretchX||[[0,E]],$=y.stretchY||[[0,k]],W=(et,ht)=>et+ht[1]-ht[0],H=O.reduce(W,0),ae=$.reduce(W,0),le=E-H,xe=k-ae;let Ie=0,Pe=H,Re=0,Ge=ae,Ve=0,pt=le,vt=0,ot=xe;if(y.content&&c){const et=y.content;Ie=Id(O,0,et[0]),Re=Id($,0,et[1]),Pe=Id(O,et[0],et[2]),Ge=Id($,et[1],et[3]),Ve=et[0]-Ie,vt=et[1]-Re,pt=et[2]-et[0]-Pe,ot=et[3]-et[1]-Ge}const st=(et,ht,at,He)=>{const kt=zd(et.stretch-Ie,Pe,A,r.left),St=Ad(et.fixed-Ve,pt,et.stretch,H),an=zd(ht.stretch-Re,Ge,F,r.top),bn=Ad(ht.fixed-vt,ot,ht.stretch,ae),Zn=zd(at.stretch-Ie,Pe,A,r.left),jn=Ad(at.fixed-Ve,pt,at.stretch,H),qi=zd(He.stretch-Re,Ge,F,r.top),yi=Ad(He.fixed-vt,ot,He.stretch,ae),vi=new Ke(kt,an),zi=new Ke(Zn,an),Hi=new Ke(Zn,qi),rr=new Ke(kt,qi),Fr=new Ke(St/x,bn/x),xi=new Ke(jn/x,yi/x),Xi=t*Math.PI/180;if(Xi){const Or=Math.sin(Xi),Nr=Math.cos(Xi),Hn=[Nr,-Or,Or,Nr];vi._matMult(Hn),zi._matMult(Hn),rr._matMult(Hn),Hi._matMult(Hn)}const or=et.stretch+et.fixed,vr=ht.stretch+ht.fixed;return{tl:vi,tr:zi,bl:rr,br:Hi,tex:{x:y.paddedRect.x+1+or,y:y.paddedRect.y+1+vr,w:at.stretch+at.fixed-or,h:He.stretch+He.fixed-vr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fr,pixelOffsetBR:xi,minFontScaleX:pt/x/A,minFontScaleY:ot/x/F,isSDF:s}};if(c&&(y.stretchX||y.stretchY)){const et=ev(O,le,H),ht=ev($,xe,ae);for(let at=0;at<et.length-1;at++){const He=et[at],kt=et[at+1];for(let St=0;St<ht.length-1;St++)m.push(st(He,ht[St],kt,ht[St+1]))}}else m.push(st({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:k+1}));return m}function Id(r,t,s){let c=0;for(const m of r)c+=Math.max(t,Math.min(s,m[1]))-Math.max(t,Math.min(s,m[0]));return c}function ev(r,t,s){const c=[{fixed:-1,stretch:0}];for(const[m,y]of r){const x=c[c.length-1];c.push({fixed:m-x.stretch,stretch:x.stretch}),c.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return c.push({fixed:t+1,stretch:s}),c}function zd(r,t,s,c){return r/t*s+c}function Ad(r,t,s,c){return r-t*s/c}ut("Anchor",gl);class Md{constructor(t,s,c,m,y,x,E,k,A,F){if(this.boxStartIndex=t.length,A){let O=x.top,$=x.bottom;const W=x.collisionPadding;W&&(O-=W[1],$+=W[3]);let H=$-O;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let O=x.top*E-k,$=x.bottom*E+k,W=x.left*E-k,H=x.right*E+k;const ae=x.collisionPadding;if(ae&&(W-=ae[0]*E,O-=ae[1]*E,H+=ae[2]*E,$+=ae[3]*E),F){const le=new Ke(W,O),xe=new Ke(H,O),Ie=new Ke(W,$),Pe=new Ke(H,$),Re=F*Math.PI/180;le._rotate(Re),xe._rotate(Re),Ie._rotate(Re),Pe._rotate(Re),W=Math.min(le.x,xe.x,Ie.x,Pe.x),H=Math.max(le.x,xe.x,Ie.x,Pe.x),O=Math.min(le.y,xe.y,Ie.y,Pe.y),$=Math.max(le.y,xe.y,Ie.y,Pe.y)}t.emplaceBack(s.x,s.y,W,O,H,$,c,m,y)}this.boxEndIndex=t.length}}class Q2{constructor(t=[],s=eS){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:c}=this,m=s[t];for(;t>0;){const y=t-1>>1,x=s[y];if(c(m,x)>=0)break;s[t]=x,t=y}s[t]=m}_down(t){const{data:s,compare:c}=this,m=this.length>>1,y=s[t];for(;t<m;){let x=1+(t<<1),E=s[x];const k=x+1;if(k<this.length&&c(s[k],E)<0&&(x=k,E=s[k]),c(E,y)>=0)break;s[t]=E,t=x}s[t]=y}}function eS(r,t){return r<t?-1:r>t?1:0}function tS(r,t=1,s=!1){let c=1/0,m=1/0,y=-1/0,x=-1/0;const E=r[0];for(let W=0;W<E.length;W++){const H=E[W];(!W||H.x<c)&&(c=H.x),(!W||H.y<m)&&(m=H.y),(!W||H.x>y)&&(y=H.x),(!W||H.y>x)&&(x=H.y)}const k=Math.min(y-c,x-m);let A=k/2;const F=new Q2([],nS);if(k===0)return new Ke(c,m);for(let W=c;W<y;W+=k)for(let H=m;H<x;H+=k)F.push(new ec(W+A,H+A,A,r));let O=function(W){let H=0,ae=0,le=0;const xe=W[0];for(let Ie=0,Pe=xe.length,Re=Pe-1;Ie<Pe;Re=Ie++){const Ge=xe[Ie],Ve=xe[Re],pt=Ge.x*Ve.y-Ve.x*Ge.y;ae+=(Ge.x+Ve.x)*pt,le+=(Ge.y+Ve.y)*pt,H+=3*pt}return new ec(ae/H,le/H,0,W)}(r),$=F.length;for(;F.length;){const W=F.pop();(W.d>O.d||!O.d)&&(O=W,s&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,$)),W.max-O.d<=t||(A=W.h/2,F.push(new ec(W.p.x-A,W.p.y-A,A,r)),F.push(new ec(W.p.x+A,W.p.y-A,A,r)),F.push(new ec(W.p.x-A,W.p.y+A,A,r)),F.push(new ec(W.p.x+A,W.p.y+A,A,r)),$+=4)}return s&&(console.log(`num probes: ${$}`),console.log(`best distance: ${O.d}`)),O.p}function nS(r,t){return t.max-r.max}function ec(r,t,s,c){this.p=new Ke(r,t),this.h=s,this.d=function(m,y){let x=!1,E=1/0;for(let k=0;k<y.length;k++){const A=y[k];for(let F=0,O=A.length,$=O-1;F<O;$=F++){const W=A[F],H=A[$];W.y>m.y!=H.y>m.y&&m.x<(H.x-W.x)*(m.y-W.y)/(H.y-W.y)+W.x&&(x=!x),E=Math.min(E,hy(m,W,H))}}return(x?1:-1)*Math.sqrt(E)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const qf=Number.POSITIVE_INFINITY;function tv(r,t){return t[1]!==qf?function(s,c,m){let y=0,x=0;switch(c=Math.abs(c),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-c;break;case"top-left":case"bottom-left":case"left":y=c}return[y,x]}(r,t[0],t[1]):function(s,c){let m=0,y=0;c<0&&(c=0);const x=c/Math.sqrt(2);switch(s){case"top-right":case"top-left":y=x-7;break;case"bottom-right":case"bottom-left":y=7-x;break;case"bottom":y=7-c;break;case"top":y=c-7}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=c;break;case"right":m=-c}return[m,y]}(r,t[0])}function Hf(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iS(r,t,s,c,m,y,x,E,k,A,F){let O=y.textMaxSize.evaluate(t,{});O===void 0&&(O=x);const $=r.layers[0].layout,W=$.get("icon-offset").evaluate(t,{},F),H=iv(s.horizontal),ae=x/24,le=r.tilePixelRatio*ae,xe=r.tilePixelRatio*O/24,Ie=r.tilePixelRatio*E,Pe=r.tilePixelRatio*$.get("symbol-spacing"),Re=$.get("text-padding")*r.tilePixelRatio,Ge=$.get("icon-padding")*r.tilePixelRatio,Ve=$.get("text-max-angle")/180*Math.PI,pt=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",vt=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",ot=$.get("symbol-placement"),st=Pe/2,et=$.get("icon-text-fit");let ht;c&&et!=="none"&&(r.allowVerticalPlacement&&s.vertical&&(ht=Gy(c,s.vertical,et,$.get("icon-text-fit-padding"),W,ae)),H&&(c=Gy(c,H,et,$.get("icon-text-fit-padding"),W,ae)));const at=(He,kt)=>{kt.x<0||kt.x>=Ti||kt.y<0||kt.y>=Ti||function(St,an,bn,Zn,jn,qi,yi,vi,zi,Hi,rr,Fr,xi,Xi,or,vr,Or,Nr,Hn,Ai,tn,no,Ki,sr,Go){const gs=St.addToLineVertexArray(an,bn);let _s,Ma,Wo,bo,Ur=0,La=0,uh=0,vv=0,rm=-1,om=-1;const Da={};let xv=Hc(""),sm=0,am=0;if(vi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[sm,am]=vi.layout.get("text-offset").evaluate(tn,{},sr).map(Vr=>Vr*Oi):(sm=vi.layout.get("text-radial-offset").evaluate(tn,{},sr)*Oi,am=qf),St.allowVerticalPlacement&&Zn.vertical){const Vr=vi.layout.get("text-rotate").evaluate(tn,{},sr)+90;Wo=new Md(zi,an,Hi,rr,Fr,Zn.vertical,xi,Xi,or,Vr),yi&&(bo=new Md(zi,an,Hi,rr,Fr,yi,Or,Nr,or,Vr))}if(jn){const Vr=vi.layout.get("icon-rotate").evaluate(tn,{}),Qs=vi.layout.get("icon-text-fit")!=="none",ch=Qy(jn,Vr,Ki,Qs),hh=yi?Qy(yi,Vr,Ki,Qs):void 0;Ma=new Md(zi,an,Hi,rr,Fr,jn,Or,Nr,!1,Vr),Ur=4*ch.length;const Sv=St.iconSizeData;let hu=null;Sv.kind==="source"?(hu=[Aa*vi.layout.get("icon-size").evaluate(tn,{})],hu[0]>_l&&Ae(`${St.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Sv.kind==="composite"&&(hu=[Aa*no.compositeIconSizes[0].evaluate(tn,{},sr),Aa*no.compositeIconSizes[1].evaluate(tn,{},sr)],(hu[0]>_l||hu[1]>_l)&&Ae(`${St.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),St.addSymbols(St.icon,ch,hu,Ai,Hn,tn,u.WritingMode.none,an,gs.lineStartIndex,gs.lineLength,-1,sr),rm=St.icon.placedSymbolArray.length-1,hh&&(La=4*hh.length,St.addSymbols(St.icon,hh,hu,Ai,Hn,tn,u.WritingMode.vertical,an,gs.lineStartIndex,gs.lineLength,-1,sr),om=St.icon.placedSymbolArray.length-1)}const wv=Object.keys(Zn.horizontal);for(const Vr of wv){const Qs=Zn.horizontal[Vr];if(!_s){xv=Hc(Qs.text);const hh=vi.layout.get("text-rotate").evaluate(tn,{},sr);_s=new Md(zi,an,Hi,rr,Fr,Qs,xi,Xi,or,hh)}const ch=Qs.positionedLines.length===1;if(uh+=nv(St,an,Qs,qi,vi,or,tn,vr,gs,Zn.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,ch?wv:[Vr],Da,rm,no,sr),ch)break}Zn.vertical&&(vv+=nv(St,an,Zn.vertical,qi,vi,or,tn,vr,gs,u.WritingMode.vertical,["vertical"],Da,om,no,sr));const gS=_s?_s.boxStartIndex:St.collisionBoxArray.length,_S=_s?_s.boxEndIndex:St.collisionBoxArray.length,yS=Wo?Wo.boxStartIndex:St.collisionBoxArray.length,vS=Wo?Wo.boxEndIndex:St.collisionBoxArray.length,xS=Ma?Ma.boxStartIndex:St.collisionBoxArray.length,wS=Ma?Ma.boxEndIndex:St.collisionBoxArray.length,bS=bo?bo.boxStartIndex:St.collisionBoxArray.length,SS=bo?bo.boxEndIndex:St.collisionBoxArray.length;let ys=-1;const Fd=(Vr,Qs)=>Vr&&Vr.circleDiameter?Math.max(Vr.circleDiameter,Qs):Qs;ys=Fd(_s,ys),ys=Fd(Wo,ys),ys=Fd(Ma,ys),ys=Fd(bo,ys);const bv=ys>-1?1:0;bv&&(ys*=Go/Oi),St.glyphOffsetArray.length>=tc.MAX_GLYPHS&&Ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),tn.sortKey!==void 0&&St.addToSortKeyRanges(St.symbolInstances.length,tn.sortKey),St.symbolInstances.emplaceBack(an.x,an.y,Da.right>=0?Da.right:-1,Da.center>=0?Da.center:-1,Da.left>=0?Da.left:-1,Da.vertical||-1,rm,om,xv,gS,_S,yS,vS,xS,wS,bS,SS,Hi,uh,vv,Ur,La,bv,0,xi,sm,am,ys)}(r,kt,He,s,c,m,ht,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,le,Re,pt,k,Ie,Ge,vt,W,t,y,A,F,x)};if(ot==="line")for(const He of Jy(t.geometry,0,0,Ti,Ti)){const kt=J2(He,Pe,Ve,s.vertical||H,c,24,xe,r.overscaling,Ti);for(const St of kt){const an=H;an&&rS(r,an.text,st,St)||at(He,St)}}else if(ot==="line-center"){for(const He of t.geometry)if(He.length>1){const kt=Y2(He,Ve,s.vertical||H,c,24,xe);kt&&at(He,kt)}}else if(t.type==="Polygon")for(const He of Rf(t.geometry,0)){const kt=tS(He,16);at(He[0],new gl(kt.x,kt.y,0))}else if(t.type==="LineString")for(const He of t.geometry)at(He,new gl(He[0].x,He[0].y,0));else if(t.type==="Point")for(const He of t.geometry)for(const kt of He)at([kt],new gl(kt.x,kt.y,0))}const _l=32640;function nv(r,t,s,c,m,y,x,E,k,A,F,O,$,W,H){const ae=function(Ie,Pe,Re,Ge,Ve,pt,vt,ot){const st=Ge.layout.get("text-rotate").evaluate(pt,{})*Math.PI/180,et=[];for(const ht of Pe.positionedLines)for(const at of ht.positionedGlyphs){if(!at.rect)continue;const He=at.rect||{};let kt=4,St=!0,an=1,bn=0;const Zn=(Ve||ot)&&at.vertical,jn=at.metrics.advance*at.scale/2;if(ot&&Pe.verticalizable){const Hn=(at.scale-1)*Oi,Ai=(Oi-at.metrics.width*at.scale)/2;bn=ht.lineOffset/2-(at.imageName?-Ai:Hn)}if(at.imageName){const Hn=vt[at.imageName];St=Hn.sdf,an=Hn.pixelRatio,kt=1/an}const qi=Ve?[at.x+jn,at.y]:[0,0];let yi=Ve?[0,0]:[at.x+jn+Re[0],at.y+Re[1]-bn],vi=[0,0];Zn&&(vi=yi,yi=[0,0]);const zi=(at.metrics.left-kt)*at.scale-jn+yi[0],Hi=(-at.metrics.top-kt)*at.scale+yi[1],rr=zi+He.w*at.scale/an,Fr=Hi+He.h*at.scale/an,xi=new Ke(zi,Hi),Xi=new Ke(rr,Hi),or=new Ke(zi,Fr),vr=new Ke(rr,Fr);if(Zn){const Hn=new Ke(-jn,jn-Pd),Ai=-Math.PI/2,tn=12-jn,no=new Ke(22-tn,-(at.imageName?tn:0)),Ki=new Ke(...vi);xi._rotateAround(Ai,Hn)._add(no)._add(Ki),Xi._rotateAround(Ai,Hn)._add(no)._add(Ki),or._rotateAround(Ai,Hn)._add(no)._add(Ki),vr._rotateAround(Ai,Hn)._add(no)._add(Ki)}if(st){const Hn=Math.sin(st),Ai=Math.cos(st),tn=[Ai,-Hn,Hn,Ai];xi._matMult(tn),Xi._matMult(tn),or._matMult(tn),vr._matMult(tn)}const Or=new Ke(0,0),Nr=new Ke(0,0);et.push({tl:xi,tr:Xi,bl:or,br:vr,tex:He,writingMode:Pe.writingMode,glyphOffset:qi,sectionIndex:at.sectionIndex,isSDF:St,pixelOffsetTL:Or,pixelOffsetBR:Nr,minFontScaleX:0,minFontScaleY:0})}return et}(0,s,E,m,y,x,c,r.allowVerticalPlacement),le=r.textSizeData;let xe=null;le.kind==="source"?(xe=[Aa*m.layout.get("text-size").evaluate(x,{})],xe[0]>_l&&Ae(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(xe=[Aa*W.compositeTextSizes[0].evaluate(x,{},H),Aa*W.compositeTextSizes[1].evaluate(x,{},H)],(xe[0]>_l||xe[1]>_l)&&Ae(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,ae,xe,E,y,x,A,t,k.lineStartIndex,k.lineLength,$,H);for(const Ie of F)O[Ie]=r.text.placedSymbolArray.length-1;return 4*ae.length}function iv(r){for(const t in r)return r[t];return null}function rS(r,t,s,c){const m=r.compareText;if(t in m){const y=m[t];for(let x=y.length-1;x>=0;x--)if(c.dist(y[x])<s)return!0}else m[t]=[];return m[t].push(c),!1}const oS=fl.VectorTileFeature.types,sS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ld(r,t,s,c,m,y,x,E,k,A,F,O,$){const W=E?Math.min(_l,Math.round(E[0])):0,H=E?Math.min(_l,Math.round(E[1])):0;r.emplaceBack(t,s,Math.round(32*c),Math.round(32*m),y,x,(W<<1)+(k?1:0),H,16*A,16*F,256*O,256*$)}function Xf(r,t,s){r.emplaceBack(t.x,t.y,s),r.emplaceBack(t.x,t.y,s),r.emplaceBack(t.x,t.y,s),r.emplaceBack(t.x,t.y,s)}function aS(r){for(const t of r.sections)if(ba(t.text))return!0;return!1}class Kf{constructor(t){this.layoutVertexArray=new Fi,this.indexArray=new yr,this.programConfigurations=t,this.segments=new fn,this.dynamicLayoutVertexArray=new Rr,this.opacityVertexArray=new eo,this.placedSymbolArray=new We}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,s,c,m){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,z2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,A2.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sS,!0),this.opacityVertexBuffer.itemSize=1),(c||m)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",Kf);class Yf{constructor(t,s,c){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new c,this.segments=new fn,this.collisionVertexArray=new Js}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,M2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",Yf);class tc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(x=>x.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cf([]),this.placementViewportMatrix=Cf([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Wy(this.zoom,s["text-size"]),this.iconSizeData=Wy(this.zoom,s["icon-size"]);const c=this.layers[0].layout,m=c.get("symbol-sort-key"),y=c.get("symbol-z-order");this.canOverlap=Qf(c,"text-overlap","text-allow-overlap")!=="never"||Qf(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(x=>u.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=t.sourceID}createArrays(){this.text=new Kf(new au(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Kf(new au(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new mt,this.lineVertexArray=new nt,this.symbolInstances=new Oe}calculateGlyphDependencies(t,s,c,m,y){for(let x=0;x<t.length;x++)if(s[t.charCodeAt(x)]=!0,(c||m)&&y){const E=oh[t.charAt(x)];E&&(s[E.charCodeAt(0)]=!0)}}populate(t,s,c){const m=this.layers[0],y=m.layout,x=y.get("text-font"),E=y.get("text-field"),k=y.get("icon-image"),A=(E.value.kind!=="constant"||E.value.value instanceof ie&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),F=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,O=y.get("symbol-sort-key");if(this.features=[],!A&&!F)return;const $=s.iconDependencies,W=s.glyphDependencies,H=s.availableImages,ae=new a(this.zoom);for(const{feature:le,id:xe,index:Ie,sourceLayerIndex:Pe}of t){const Re=m._featureFilter.needGeometry,Ge=uu(le,Re);if(!m._featureFilter.filter(ae,Ge,c))continue;let Ve,pt;if(Re||(Ge.geometry=lu(le)),A){const ot=m.getValueAndResolveTokens("text-field",Ge,c,H),st=ie.factory(ot);aS(st)&&(this.hasRTLText=!0),(!this.hasRTLText||cl()==="unavailable"||this.hasRTLText&&_r.isParsed())&&(Ve=D2(st,m,Ge))}if(F){const ot=m.getValueAndResolveTokens("icon-image",Ge,c,H);pt=ot instanceof fe?ot:fe.fromString(ot)}if(!Ve&&!pt)continue;const vt=this.sortFeaturesByKey?O.evaluate(Ge,{},c):void 0;if(this.features.push({id:xe,text:Ve,icon:pt,index:Ie,sourceLayerIndex:Pe,geometry:Ge.geometry,properties:le.properties,type:oS[le.type],sortKey:vt}),pt&&($[pt.name]=!0),Ve){const ot=x.evaluate(Ge,{},c).join(","),st=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const et of Ve.sections)if(et.image)$[et.image.name]=!0;else{const ht=nu(Ve.toString()),at=et.fontStack||ot,He=W[at]=W[at]||{};this.calculateGlyphDependencies(et.text,He,st,this.allowVerticalPlacement,ht)}}}y.get("symbol-placement")==="line"&&(this.features=function(le){const xe={},Ie={},Pe=[];let Re=0;function Ge(ot){Pe.push(le[ot]),Re++}function Ve(ot,st,et){const ht=Ie[ot];return delete Ie[ot],Ie[st]=ht,Pe[ht].geometry[0].pop(),Pe[ht].geometry[0]=Pe[ht].geometry[0].concat(et[0]),ht}function pt(ot,st,et){const ht=xe[st];return delete xe[st],xe[ot]=ht,Pe[ht].geometry[0].shift(),Pe[ht].geometry[0]=et[0].concat(Pe[ht].geometry[0]),ht}function vt(ot,st,et){const ht=et?st[0][st[0].length-1]:st[0][0];return`${ot}:${ht.x}:${ht.y}`}for(let ot=0;ot<le.length;ot++){const st=le[ot],et=st.geometry,ht=st.text?st.text.toString():null;if(!ht){Ge(ot);continue}const at=vt(ht,et),He=vt(ht,et,!0);if(at in Ie&&He in xe&&Ie[at]!==xe[He]){const kt=pt(at,He,et),St=Ve(at,He,Pe[kt].geometry);delete xe[at],delete Ie[He],Ie[vt(ht,Pe[St].geometry,!0)]=St,Pe[kt].geometry=null}else at in Ie?Ve(at,He,et):He in xe?pt(at,He,et):(Ge(ot),xe[at]=Re-1,Ie[He]=Re-1)}return Pe.filter(ot=>ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,xe)=>le.sortKey-xe.sortKey)}update(t,s,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,c),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const c=this.lineVertexArray.length;if(t.segment!==void 0){let m=t.dist(s[t.segment+1]),y=t.dist(s[t.segment]);const x={};for(let E=t.segment+1;E<s.length;E++)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:m},E<s.length-1&&(m+=s[E+1].dist(s[E]));for(let E=t.segment||0;E>=0;E--)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:y},E>0&&(y+=s[E-1].dist(s[E]));for(let E=0;E<s.length;E++){const k=x[E];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,s,c,m,y,x,E,k,A,F,O,$){const W=t.indexArray,H=t.layoutVertexArray,ae=t.segments.prepareSegment(4*s.length,H,W,this.canOverlap?x.sortKey:void 0),le=this.glyphOffsetArray.length,xe=ae.vertexLength,Ie=this.allowVerticalPlacement&&E===u.WritingMode.vertical?Math.PI/2:0,Pe=x.text&&x.text.sections;for(let Re=0;Re<s.length;Re++){const{tl:Ge,tr:Ve,bl:pt,br:vt,tex:ot,pixelOffsetTL:st,pixelOffsetBR:et,minFontScaleX:ht,minFontScaleY:at,glyphOffset:He,isSDF:kt,sectionIndex:St}=s[Re],an=ae.vertexLength,bn=He[1];Ld(H,k.x,k.y,Ge.x,bn+Ge.y,ot.x,ot.y,c,kt,st.x,st.y,ht,at),Ld(H,k.x,k.y,Ve.x,bn+Ve.y,ot.x+ot.w,ot.y,c,kt,et.x,st.y,ht,at),Ld(H,k.x,k.y,pt.x,bn+pt.y,ot.x,ot.y+ot.h,c,kt,st.x,et.y,ht,at),Ld(H,k.x,k.y,vt.x,bn+vt.y,ot.x+ot.w,ot.y+ot.h,c,kt,et.x,et.y,ht,at),Xf(t.dynamicLayoutVertexArray,k,Ie),W.emplaceBack(an,an+1,an+2),W.emplaceBack(an+1,an+2,an+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(He[0]),Re!==s.length-1&&St===s[Re+1].sectionIndex||t.programConfigurations.populatePaintArrays(H.length,x,x.index,{},$,Pe&&Pe[St])}t.placedSymbolArray.emplaceBack(k.x,k.y,le,this.glyphOffsetArray.length-le,xe,A,F,k.segment,c?c[0]:0,c?c[1]:0,m[0],m[1],E,0,!1,0,O)}_addCollisionDebugVertex(t,s,c,m,y,x){return s.emplaceBack(0,0),t.emplaceBack(c.x,c.y,m,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(t,s,c,m,y,x,E){const k=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),A=k.vertexLength,F=y.layoutVertexArray,O=y.collisionVertexArray,$=E.anchorX,W=E.anchorY;this._addCollisionDebugVertex(F,O,x,$,W,new Ke(t,s)),this._addCollisionDebugVertex(F,O,x,$,W,new Ke(c,s)),this._addCollisionDebugVertex(F,O,x,$,W,new Ke(c,m)),this._addCollisionDebugVertex(F,O,x,$,W,new Ke(t,m)),k.vertexLength+=4;const H=y.indexArray;H.emplaceBack(A,A+1),H.emplaceBack(A+1,A+2),H.emplaceBack(A+2,A+3),H.emplaceBack(A+3,A),k.primitiveLength+=4}addDebugCollisionBoxes(t,s,c,m){for(let y=t;y<s;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yf(to,My.members,Vo),this.iconCollisionBox=new Yf(to,My.members,Vo);for(let t=0;t<this.symbolInstances.length;t++){const s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(t,s,c,m,y,x,E,k,A){const F={};for(let O=s;O<c;O++){const $=t.get(O);F.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.textFeatureIndex=$.featureIndex;break}for(let O=m;O<y;O++){const $=t.get(O);F.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalTextFeatureIndex=$.featureIndex;break}for(let O=x;O<E;O++){const $=t.get(O);F.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.iconFeatureIndex=$.featureIndex;break}for(let O=k;O<A;O++){const $=t.get(O);F.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalIconFeatureIndex=$.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const c=t.placedSymbolArray.get(s),m=c.vertexStartIndex+4*c.numGlyphs;for(let y=c.vertexStartIndex;y<m;y+=4)t.indexArray.emplaceBack(y,y+1,y+2),t.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(t),c=Math.cos(t),m=[],y=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const k=this.symbolInstances.get(E);m.push(0|Math.round(s*k.anchorX+c*k.anchorY)),y.push(k.featureIndex)}return x.sort((E,k)=>m[E]-m[k]||y[k]-y[E]),x}addToSortKeyRanges(t,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ut("SymbolBucket",tc,{omit:["layers","collisionBoxArray","features","compareText"]}),tc.MAX_GLYPHS=65535,tc.addDynamicAttributes=Xf;const lS=new Rn({"symbol-placement":new Se(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Se(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Se(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new je(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Se(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Se(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Se(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Se(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Se(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Se(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new je(ke.layout_symbol["icon-size"]),"icon-text-fit":new Se(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Se(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new je(ke.layout_symbol["icon-image"]),"icon-rotate":new je(ke.layout_symbol["icon-rotate"]),"icon-padding":new Se(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Se(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new je(ke.layout_symbol["icon-offset"]),"icon-anchor":new je(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Se(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Se(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Se(ke.layout_symbol["text-rotation-alignment"]),"text-field":new je(ke.layout_symbol["text-field"]),"text-font":new je(ke.layout_symbol["text-font"]),"text-size":new je(ke.layout_symbol["text-size"]),"text-max-width":new je(ke.layout_symbol["text-max-width"]),"text-line-height":new Se(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new je(ke.layout_symbol["text-letter-spacing"]),"text-justify":new je(ke.layout_symbol["text-justify"]),"text-radial-offset":new je(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Se(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new je(ke.layout_symbol["text-anchor"]),"text-max-angle":new Se(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Se(ke.layout_symbol["text-writing-mode"]),"text-rotate":new je(ke.layout_symbol["text-rotate"]),"text-padding":new Se(ke.layout_symbol["text-padding"]),"text-keep-upright":new Se(ke.layout_symbol["text-keep-upright"]),"text-transform":new je(ke.layout_symbol["text-transform"]),"text-offset":new je(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Se(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new Se(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new Se(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Se(ke.layout_symbol["text-optional"])});var Jf={paint:new Rn({"icon-opacity":new je(ke.paint_symbol["icon-opacity"]),"icon-color":new je(ke.paint_symbol["icon-color"]),"icon-halo-color":new je(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new je(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new je(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Se(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Se(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new je(ke.paint_symbol["text-opacity"]),"text-color":new je(ke.paint_symbol["text-color"],{runtimeType:Ci,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new je(ke.paint_symbol["text-halo-color"]),"text-halo-width":new je(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new je(ke.paint_symbol["text-halo-blur"]),"text-translate":new Se(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Se(ke.paint_symbol["text-translate-anchor"])}),layout:lS};class rv{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:vn,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",rv,{omit:["defaultValue"]});class Dd extends Yn{constructor(t){super(t,Jf)}recalculate(t,s){if(super.recalculate(t,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const m=[];for(const y of c)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,s,c,m){const y=this.layout.get(t).evaluate(s,{},c,m),x=this._unevaluatedLayout._values[t];return x.isDataDriven()||ma(x.value)||!y?y:function(E,k){return k.replace(/{([^{}]+)}/g,(A,F)=>F in E?String(E[F]):"")}(s.properties,y)}createBucket(t){return new tc(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Jf.paint.overridableProperties){if(!Dd.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),c=new rv(s),m=new Yl(c,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new Gi("source",m):new _o("composite",m,s.value.zoomStops,s.value._interpolationType),this.paint._values[t]=new be(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&Dd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const c=t.get("text-field"),m=Jf.paint.properties[s];let y=!1;const x=E=>{for(const k of E)if(m.overrides&&m.overrides.hasOverride(k))return void(y=!0)};if(c.value.kind==="constant"&&c.value.value instanceof ie)x(c.value.value.sections);else if(c.value.kind==="source"){const E=A=>{y||(A instanceof Ze&&me(A.value)===Ir?x(A.value.sections):A instanceof gt?x(A.sections):A.eachChild(E))},k=c.value;k._styleExpression&&E(k._styleExpression.expression)}return y}}function Qf(r,t,s){let c="never";const m=r.get(t);return m?c=m:r.get(s)&&(c="always"),c}var uS={paint:new Rn({"background-color":new Se(ke.paint_background["background-color"]),"background-pattern":new en(ke.paint_background["background-pattern"]),"background-opacity":new Se(ke.paint_background["background-opacity"])})},cS={paint:new Rn({"raster-opacity":new Se(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Se(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Se(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Se(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Se(ke.paint_raster["raster-saturation"]),"raster-contrast":new Se(ke.paint_raster["raster-contrast"]),"raster-resampling":new Se(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Se(ke.paint_raster["raster-fade-duration"])})};class hS extends Yn{constructor(t){super(t,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const dS={circle:class extends Yn{constructor(r){super(r,jb)}createBucket(r){return new Tf(r)}queryRadius(r){const t=r;return Kc("circle-radius",this,t)+Kc("circle-stroke-width",this,t)+yd(this.paint.get("circle-translate"))}queryIntersectsFeature(r,t,s,c,m,y,x,E){const k=vd(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),A=this.paint.get("circle-radius").evaluate(t,s)+this.paint.get("circle-stroke-width").evaluate(t,s),F=this.paint.get("circle-pitch-alignment")==="map",O=F?k:function(W,H){return W.map(ae=>fy(ae,H))}(k,E),$=F?A*x:A;for(const W of c)for(const H of W){const ae=F?H:fy(H,E);let le=$;const xe=xd([],[H.x,H.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=xe[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=y.cameraToCenterDistance/xe[3]),Nb(O,ae,le))return!0}return!1}},heatmap:class extends Yn{constructor(r){super(r,Wb),this._updateColorRamp()}createBucket(r){return new my(r)}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_y({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Yn{constructor(r){super(r,qb)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Yn{constructor(r){super(r,u2)}recalculate(r,t){super.recalculate(r,t);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Of(r)}queryRadius(){return yd(this.paint.get("fill-translate"))}queryIntersectsFeature(r,t,s,c,m,y,x){return cy(vd(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Yn{constructor(r){super(r,b2)}createBucket(r){return new Uf(r)}queryRadius(){return yd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,t,s,c,m,y,x,E){const k=vd(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),A=this.paint.get("fill-extrusion-height").evaluate(t,s),F=this.paint.get("fill-extrusion-base").evaluate(t,s),O=function(W,H,ae,le){const xe=[];for(const Ie of W){const Pe=[Ie.x,Ie.y,0,1];xd(Pe,Pe,H),xe.push(new Ke(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return xe}(k,E),$=function(W,H,ae,le){const xe=[],Ie=[],Pe=le[8]*H,Re=le[9]*H,Ge=le[10]*H,Ve=le[11]*H,pt=le[8]*ae,vt=le[9]*ae,ot=le[10]*ae,st=le[11]*ae;for(const et of W){const ht=[],at=[];for(const He of et){const kt=He.x,St=He.y,an=le[0]*kt+le[4]*St+le[12],bn=le[1]*kt+le[5]*St+le[13],Zn=le[2]*kt+le[6]*St+le[14],jn=le[3]*kt+le[7]*St+le[15],qi=Zn+Ge,yi=jn+Ve,vi=an+pt,zi=bn+vt,Hi=Zn+ot,rr=jn+st,Fr=new Ke((an+Pe)/yi,(bn+Re)/yi);Fr.z=qi/yi,ht.push(Fr);const xi=new Ke(vi/rr,zi/rr);xi.z=Hi/rr,at.push(xi)}xe.push(ht),Ie.push(at)}return[xe,Ie]}(c,F,A,E);return function(W,H,ae){let le=1/0;cy(ae,H)&&(le=ky(ae,H[0]));for(let xe=0;xe<H.length;xe++){const Ie=H[xe],Pe=W[xe];for(let Re=0;Re<Ie.length-1;Re++){const Ge=Ie[Re],Ve=[Ge,Ie[Re+1],Pe[Re+1],Pe[Re],Ge];uy(ae,Ve)&&(le=Math.min(le,ky(ae,Ve)))}}return le!==1/0&&le}($[0],$[1],O)}},line:class extends Yn{constructor(r){super(r,Iy),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof is,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,t){super.recalculate(r,t),this.paint._values["line-floorwidth"]=zy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Vf(r)}queryRadius(r){const t=r,s=Ay(Kc("line-width",this,t),Kc("line-gap-width",this,t)),c=Kc("line-offset",this,t);return s/2+Math.abs(c)+yd(this.paint.get("line-translate"))}queryIntersectsFeature(r,t,s,c,m,y,x){const E=vd(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),k=x/2*Ay(this.paint.get("line-width").evaluate(t,s),this.paint.get("line-gap-width").evaluate(t,s)),A=this.paint.get("line-offset").evaluate(t,s);return A&&(c=function(F,O){const $=[];for(let W=0;W<F.length;W++){const H=F[W],ae=[];for(let le=0;le<H.length;le++){const xe=H[le-1],Ie=H[le],Pe=H[le+1],Re=le===0?new Ke(0,0):Ie.sub(xe)._unit()._perp(),Ge=le===H.length-1?new Ke(0,0):Pe.sub(Ie)._unit()._perp(),Ve=Re._add(Ge)._unit(),pt=Ve.x*Ge.x+Ve.y*Ge.y;pt!==0&&Ve._mult(1/pt),ae.push(Ve._mult(O)._add(Ie))}$.push(ae)}return $}(c,A*x)),function(F,O,$){for(let W=0;W<O.length;W++){const H=O[W];if(F.length>=3){for(let ae=0;ae<H.length;ae++)if(qu(F,H[ae]))return!0}if(Ub(F,H,$))return!0}return!1}(E,c,k)}isTileClipped(){return!0}},symbol:Dd,background:class extends Yn{constructor(r){super(r,uS)}},raster:class extends Yn{constructor(r){super(r,cS)}}};class pS{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ov=63710088e-1;class si{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new si(he(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,c=this.lat*s,m=t.lat*s,y=Math.sin(c)*Math.sin(m)+Math.cos(c)*Math.cos(m)*Math.cos((t.lng-this.lng)*s);return ov*Math.acos(Math.min(y,1))}toBounds(t=0){const s=360*t/40075017,c=s/Math.cos(Math.PI/180*this.lat);return new cu(new si(this.lng-c,this.lat-s),new si(this.lng+c,this.lat+s))}static convert(t){if(t instanceof si)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new si(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new si(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class cu{constructor(t,s){t&&(s?this.setSouthWest(t).setNorthEast(s):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof si?new si(t.lng,t.lat):si.convert(t),this}setSouthWest(t){return this._sw=t instanceof si?new si(t.lng,t.lat):si.convert(t),this}extend(t){const s=this._sw,c=this._ne;let m,y;if(t instanceof si)m=t,y=t;else{if(!(t instanceof cu))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(cu.convert(t)):this.extend(si.convert(t)):this;if(m=t._sw,y=t._ne,!m||!y)return this}return s||c?(s.lng=Math.min(m.lng,s.lng),s.lat=Math.min(m.lat,s.lat),c.lng=Math.max(y.lng,c.lng),c.lat=Math.max(y.lat,c.lat)):(this._sw=new si(m.lng,m.lat),this._ne=new si(y.lng,y.lat)),this}getCenter(){return new si((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new si(this.getWest(),this.getNorth())}getSouthEast(){return new si(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:s,lat:c}=si.convert(t);let m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&m}static convert(t){return t instanceof cu?t:t&&new cu(t)}}const sv=2*Math.PI*ov;function av(r){return sv*Math.cos(r*Math.PI/180)}function lv(r){return(180+r)/360}function uv(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function cv(r,t){return r/av(t)}function em(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class Rd{constructor(t,s,c=0){this.x=+t,this.y=+s,this.z=+c}static fromLngLat(t,s=0){const c=si.convert(t);return new Rd(lv(c.lng),uv(c.lat),cv(s,c.lat))}toLngLat(){return new si(360*this.x-180,em(this.y))}toAltitude(){return this.z*av(em(this.y))}meterInMercatorCoordinateUnits(){return 1/sv*(t=em(this.y),1/Math.cos(t*Math.PI/180));var t}}function hv(r,t,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[r*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class tm{constructor(t,s,c){this.z=t,this.x=s,this.y=c,this.key=ah(0,t,t,s,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s,c){const m=(x=this.y,E=this.z,k=hv(256*(y=this.x),256*(x=Math.pow(2,E)-x-1),E),A=hv(256*(y+1),256*(x+1),E),k[0]+","+k[1]+","+A[0]+","+A[1]);var y,x,E,k,A;const F=function(O,$,W){let H,ae="";for(let le=O;le>0;le--)H=1<<le-1,ae+=($&H?1:0)+(W&H?2:0);return ae}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,m)}getTilePoint(t){const s=Math.pow(2,this.z);return new Ke((t.x*s-this.x)*Ti,(t.y*s-this.y)*Ti)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dv{constructor(t,s){this.wrap=t,this.canonical=s,this.key=ah(t,s.z,s.z,s.x,s.y)}}class jo{constructor(t,s,c,m,y){this.overscaledZ=t,this.wrap=s,this.canonical=new tm(c,+m,+y),this.key=ah(s,t,c,m,y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const s=this.canonical.z-t;return t>this.canonical.z?new jo(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jo(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(t,s){const c=this.canonical.z-t;return t>this.canonical.z?ah(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):ah(this.wrap*+s,t,t,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const s=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new jo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,m=2*this.canonical.y;return[new jo(s,this.wrap,s,c,m),new jo(s,this.wrap,s,c+1,m),new jo(s,this.wrap,s,c,m+1),new jo(s,this.wrap,s,c+1,m+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new jo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new jo(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Rd(t.x-this.wrap,t.y))}}function ah(r,t,s,c,m){(r*=2)<0&&(r=-1*r-1);const y=1<<s;return(y*y*r+y*m+c).toString(36)+s.toString(36)+t.toString(36)}ut("CanonicalTileID",tm),ut("OverscaledTileID",jo,{omit:["posMatrix"]});class pv{constructor(t,s,c){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void Ae(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=c||"mapbox";for(let y=0;y<m;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(m,y)]=this.data[this._idx(m-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,m)]=this.data[this._idx(y,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)]}get(t,s){const c=new Uint8Array(this.data.buffer),m=4*this._idx(t,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[m],c[m+1],c[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}_unpackMapbox(t,s,c){return(256*t*256+256*s+c)/10-1e4}_unpackTerrarium(t,s,c){return 256*t+s+c/256-32768}getPixels(){return new wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,s,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,y=s*this.dim+this.dim,x=c*this.dim,E=c*this.dim+this.dim;switch(s){case-1:m=y-1;break;case 1:y=m+1}switch(c){case-1:x=E-1;break;case 1:E=x+1}const k=-s*this.dim,A=-c*this.dim;for(let F=x;F<E;F++)for(let O=m;O<y;O++)this.data[this._idx(O,F)]=t.data[this._idx(O+k,F+A)]}}ut("DEMData",pv);class fv{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const c=t[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class mv{constructor(t,s,c,m,y){this.type="Feature",this._vectorTileFeature=t,t._z=s,t._x=c,t._y=m,this.properties=t.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(t[s]=this[s]);return t}}class gv{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ds(Ti,16,0),this.grid3D=new ds(Ti,16,0),this.featureIndexArray=new un,this.promoteId=s}insert(t,s,c,m,y,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,m,y);const k=x?this.grid3D:this.grid;for(let A=0;A<s.length;A++){const F=s[A],O=[1/0,1/0,-1/0,-1/0];for(let $=0;$<F.length;$++){const W=F[$];O[0]=Math.min(O[0],W.x),O[1]=Math.min(O[1],W.y),O[2]=Math.max(O[2],W.x),O[3]=Math.max(O[3],W.y)}O[0]<Ti&&O[1]<Ti&&O[2]>=0&&O[3]>=0&&k.insert(E,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fl.VectorTile(new $f(this.rawTileData)).layers,this.sourceLayerCoder=new fv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,s,c,m){this.loadVTLayers();const y=t.params||{},x=Ti/t.tileSize/t.scale,E=il(y.filter),k=t.queryGeometry,A=t.queryPadding*x,F=yv(k),O=this.grid.query(F.minX-A,F.minY-A,F.maxX+A,F.maxY+A),$=yv(t.cameraQueryGeometry),W=this.grid3D.query($.minX-A,$.minY-A,$.maxX+A,$.maxY+A,(le,xe,Ie,Pe)=>function(Re,Ge,Ve,pt,vt){for(const st of Re)if(Ge<=st.x&&Ve<=st.y&&pt>=st.x&&vt>=st.y)return!0;const ot=[new Ke(Ge,Ve),new Ke(Ge,vt),new Ke(pt,vt),new Ke(pt,Ve)];if(Re.length>2){for(const st of ot)if(qu(Re,st))return!0}for(let st=0;st<Re.length-1;st++)if($b(Re[st],Re[st+1],ot))return!0;return!1}(t.cameraQueryGeometry,le-A,xe-A,Ie+A,Pe+A));for(const le of W)O.push(le);O.sort(fS);const H={};let ae;for(let le=0;le<O.length;le++){const xe=O[le];if(xe===ae)continue;ae=xe;const Ie=this.featureIndexArray.get(xe);let Pe=null;this.loadMatchingFeature(H,Ie.bucketIndex,Ie.sourceLayerIndex,Ie.featureIndex,E,y.layers,y.availableImages,s,c,m,(Re,Ge,Ve)=>(Pe||(Pe=lu(Re)),Ge.queryIntersectsFeature(k,Re,Ve,Pe,this.z,t.transform,x,t.pixelPosMatrix)))}return H}loadMatchingFeature(t,s,c,m,y,x,E,k,A,F,O){const $=this.bucketLayerIDs[s];if(x&&!function(le,xe){for(let Ie=0;Ie<le.length;Ie++)if(xe.indexOf(le[Ie])>=0)return!0;return!1}(x,$))return;const W=this.sourceLayerCoder.decode(c),H=this.vtLayers[W].feature(m);if(y.needGeometry){const le=uu(H,!0);if(!y.filter(new a(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!y.filter(new a(this.tileID.overscaledZ),H))return;const ae=this.getId(H,W);for(let le=0;le<$.length;le++){const xe=$[le];if(x&&x.indexOf(xe)<0)continue;const Ie=k[xe];if(!Ie)continue;let Pe={};ae&&F&&(Pe=F.getState(Ie.sourceLayer||"_geojsonTileLayer",ae));const Re=ge({},A[xe]);Re.paint=_v(Re.paint,Ie.paint,H,Pe,E),Re.layout=_v(Re.layout,Ie.layout,H,Pe,E);const Ge=!O||O(H,Ie,Pe);if(!Ge)continue;const Ve=new mv(H,this.z,this.x,this.y,ae);Ve.layer=Re;let pt=t[xe];pt===void 0&&(pt=t[xe]=[]),pt.push({featureIndex:m,feature:Ve,intersectionZ:Ge})}}lookupSymbolFeatures(t,s,c,m,y,x,E,k){const A={};this.loadVTLayers();const F=il(y);for(const O of t)this.loadMatchingFeature(A,c,m,O,F,x,E,k,s);return A}hasLayer(t){for(const s of this.bucketLayerIDs)for(const c of s)if(t===c)return!0;return!1}getId(t,s){let c=t.id;return this.promoteId&&(c=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof c=="boolean"&&(c=Number(c))),c}}function _v(r,t,s,c,m){return ne(r,(y,x)=>{const E=t instanceof Le?t.get(x):null;return E&&E.evaluate?E.evaluate(s,c,m):E})}function yv(r){let t=1/0,s=1/0,c=-1/0,m=-1/0;for(const y of r)t=Math.min(t,y.x),s=Math.min(s,y.y),c=Math.max(c,y.x),m=Math.max(m,y.y);return{minX:t,minY:s,maxX:c,maxY:m}}function fS(r,t){return t-r}var nm;ut("FeatureIndex",gv,{omit:["rawTileData","sourceLayerCoder"]}),u.PerformanceMarkers=void 0,(nm=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",nm.load="load",nm.fullLoad="fullLoad";let Bd=null,lh=[];const im=1e3/30,mS={mark(r){performance.mark(r)},frame(r){const t=r;Bd!=null&&lh.push(t-Bd),Bd=t},clearMetrics(){Bd=null,lh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const r in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure("fullLoadTime",u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const r=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,s=lh.length,c=1/(lh.reduce((y,x)=>y+x,0)/s/1e3),m=lh.filter(y=>y>im).reduce((y,x)=>y+(x-im)/im,0);return{loadTime:r,fullLoadTime:t,fps:c,percentDroppedFrames:m/(s+m)*100}}};u.AJAXError=Nn,u.ARRAY_TYPE=Hu,u.Actor=class{constructor(r,t,s){this.target=r,this.parent=t,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ee(["receive","process"],this),this.invoker=new pS(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Be()?r:window}send(r,t,s,c,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[y]=s);const x=on(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:r,hasCallback:!!s,targetMapId:c,mustQueue:m,sourceMapId:this.mapId,data:wa(t,x)},x),{cancel:()=>{s&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const t=r.data,s=t.id;if(s&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[s];const c=this.cancelCallbacks[s];delete this.cancelCallbacks[s],c&&c()}else Be()||t.mustQueue?(this.tasks[s]=t,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,t)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){if(t.type==="<response>"){const s=this.callbacks[r];delete this.callbacks[r],s&&(t.error?s(gr(t.error)):s(null,gr(t.data)))}else{let s=!1;const c=on(this.globalScope)?void 0:[],m=t.hasCallback?(E,k)=>{s=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:E?wa(E):null,data:wa(k,c)},c)}:E=>{s=!0};let y=null;const x=gr(t.data);if(this.parent[t.type])y=this.parent[t.type](t.sourceMapId,x,m);else if(this.parent.getWorkerSource){const E=t.type.split(".");y=this.parent.getWorkerSource(t.sourceMapId,E[0],x.source)[E[1]](x,m)}else m(new Error(`Could not find function ${t.type}`));!s&&y&&y.cancel&&(this.cancelCallbacks[r]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=Jc,u.CanonicalTileID=tm,u.CollisionBoxArray=ze,u.CollisionCircleLayoutArray=class extends R{},u.Color=B,u.DEMData=pv,u.DataConstantProperty=Se,u.DictionaryCoder=fv,u.EXTENT=Ti,u.ErrorEvent=yn,u.EvaluationParameters=a,u.Event=Et,u.Evented=Fn,u.FeatureIndex=gv,u.FillBucket=Of,u.FillExtrusionBucket=Uf,u.GeoJSONFeature=mv,u.ImageAtlas=Uy,u.ImagePosition=jf,u.LineBucket=Vf,u.LineStripIndexArray=class extends we{},u.LngLat=si,u.LngLatBounds=cu,u.MercatorCoordinate=Rd,u.ONE_EM=Oi,u.OverscaledTileID=jo,u.PerformanceUtils=mS,u.PosArray=class extends Ks{},u.Properties=Rn,u.QuadTriangleArray=class extends Z{},u.RGBAImage=wo,u.RasterBoundsArray=class extends Ys{},u.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},u.ResourceType=Li,u.SegmentVector=fn,u.SymbolBucket=tc,u.Transitionable=P,u.TriangleIndexArray=yr,u.Uniform1f=hl,u.Uniform1i=class extends Zo{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},u.Uniform2f=class extends Zo{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},u.Uniform3f=class extends Zo{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},u.Uniform4f=ry,u.UniformColor=oy,u.UniformMatrix4f=class extends Zo{constructor(r,t){super(r,t),this.current=Fb}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},u.UnwrappedTileID=dv,u.ValidationError=Qe,u.ZoomHistory=Ws,u.addDynamicAttributes=Xf,u.asyncAll=function(r,t,s){if(!r.length)return s(null,[]);let c=r.length;const m=new Array(r.length);let y=null;r.forEach((x,E)=>{t(x,(k,A)=>{k&&(y=k),m[E]=A,--c==0&&s(y,m)})})},u.bezier=j,u.bindAll=Ee,u.cacheEntryPossiblyAdded=function(r){Nt++,Nt>Qt&&(r.getActor().send("enforceCacheSizeLimit",It),Nt=0)},u.clamp=V,u.clearTileCache=function(r){const t=caches.delete(ct);r&&t.catch(r).then(()=>r())},u.clipLine=Jy,u.clone=function(r){var t=new Hu(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},u.clone$1=te,u.collisionCircleLayout=L2,u.config=Fe,u.create=function(){var r=new Hu(16);return Hu!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},u.createExpression=el,u.createFilter=il,u.createLayout=hi,u.createStyleLayer=function(r){return r.type==="custom"?new hS(r):new dS[r.type](r)},u.dot=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]},u.ease=q,u.emitValidationErrors=xa,u.enforceCacheSizeLimit=function(r){Rt(),qe&&qe.then(t=>{t.keys().then(s=>{for(let c=0;c<s.length-r;c++)t.delete(s[c])})})},u.evaluateSizeForFeature=function(r,{uSize:t,uSizeT:s},{lowerSize:c,upperSize:m}){return r.kind==="source"?c/Aa:r.kind==="composite"?Vn(c/Aa,m/Aa,s):t},u.evaluateSizeForZoom=function(r,t){let s=0,c=0;if(r.kind==="constant")c=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=r,E=m?V(Ri.interpolationFactor(m,t,y,x),0,1):0;r.kind==="camera"?c=Vn(r.minSize,r.maxSize,E):s=E}return{uSizeT:s,uSize:c}},u.evaluateVariableOffset=tv,u.evented=Xs,u.exported=cn,u.exported$1=Ct,u.extend=ge,u.filterObject=Q,u.getAnchorAlignment=Wf,u.getAnchorJustification=Hf,u.getArrayBuffer=ui,u.getImage=zo,u.getJSON=function(r,t){return kr(ge(r,{type:"json"}),t)},u.getOverlapMode=Qf,u.getRTLTextPluginStatus=cl,u.getReferrer=Pr,u.getVideo=function(r,t){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){t(null,s)};for(let c=0;c<r.length;c++){const m=window.document.createElement("source");Cr(r[c])||(s.crossOrigin="Anonymous"),m.src=r[c],s.appendChild(m)}return{cancel:()=>{}}},u.identity=Cf,u.invert=function(r,t){var s=t[0],c=t[1],m=t[2],y=t[3],x=t[4],E=t[5],k=t[6],A=t[7],F=t[8],O=t[9],$=t[10],W=t[11],H=t[12],ae=t[13],le=t[14],xe=t[15],Ie=s*E-c*x,Pe=s*k-m*x,Re=s*A-y*x,Ge=c*k-m*E,Ve=c*A-y*E,pt=m*A-y*k,vt=F*ae-O*H,ot=F*le-$*H,st=F*xe-W*H,et=O*le-$*ae,ht=O*xe-W*ae,at=$*xe-W*le,He=Ie*at-Pe*ht+Re*et+Ge*st-Ve*ot+pt*vt;return He?(r[0]=(E*at-k*ht+A*et)*(He=1/He),r[1]=(m*ht-c*at-y*et)*He,r[2]=(ae*pt-le*Ve+xe*Ge)*He,r[3]=($*Ve-O*pt-W*Ge)*He,r[4]=(k*st-x*at-A*ot)*He,r[5]=(s*at-m*st+y*ot)*He,r[6]=(le*Re-H*pt-xe*Pe)*He,r[7]=(F*pt-$*Re+W*Pe)*He,r[8]=(x*ht-E*st+A*vt)*He,r[9]=(c*st-s*ht-y*vt)*He,r[10]=(H*Ve-ae*Re+xe*Ie)*He,r[11]=(O*Re-F*Ve-W*Ie)*He,r[12]=(E*ot-x*et-k*vt)*He,r[13]=(s*et-c*ot+m*vt)*He,r[14]=(ae*Pe-H*Ge-le*Ie)*He,r[15]=(F*Ge-O*Pe+$*Ie)*He,r):null},u.isImageBitmap=At,u.isSafari=on,u.keysDifference=function(r,t){const s=[];for(const c in r)c in t||s.push(c);return s},u.lazyLoadRTLTextPlugin=function(){_r.isLoading()||_r.isLoaded()||cl()!=="deferred"||Ea()},u.makeRequest=kr,u.mapObject=ne,u.mercatorXfromLng=lv,u.mercatorYfromLat=uv,u.mercatorZfromAltitude=cv,u.mul=Gb,u.multiply=py,u.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},u.number=Vn,u.ortho=function(r,t,s,c,m,y,x){var E=1/(t-s),k=1/(c-m),A=1/(y-x);return r[0]=-2*E,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*k,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(t+s)*E,r[13]=(m+c)*k,r[14]=(x+y)*A,r[15]=1,r},u.parseCacheControl=lt,u.parseGlyphPBF=function(r){return new $f(r).readFields(j2,[])},u.pbf=$f,u.performSymbolLayout=function(r,t,s,c,m,y,x){r.createArrays(),r.tilePixelRatio=Ti/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const E=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,A={layoutIconSize:k["icon-size"].possiblyEvaluate(new a(r.zoom+1),x),layoutTextSize:k["text-size"].possiblyEvaluate(new a(r.zoom+1),x),textMaxSize:k["text-size"].possiblyEvaluate(new a(18))};if(r.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:ae}=r.textSizeData;A.compositeTextSizes=[k["text-size"].possiblyEvaluate(new a(H),x),k["text-size"].possiblyEvaluate(new a(ae),x)]}if(r.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:ae}=r.iconSizeData;A.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new a(H),x),k["icon-size"].possiblyEvaluate(new a(ae),x)]}const F=E.get("text-line-height")*Oi,O=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point",$=E.get("text-keep-upright"),W=E.get("text-size");for(const H of r.features){const ae=E.get("text-font").evaluate(H,{},x).join(","),le=W.evaluate(H,{},x),xe=A.layoutTextSize.evaluate(H,{},x),Ie=A.layoutIconSize.evaluate(H,{},x),Pe={horizontal:{},vertical:void 0},Re=H.text;let Ge,Ve=[0,0];if(Re){const ot=Re.toString(),st=E.get("text-letter-spacing").evaluate(H,{},x)*Oi,et=Jr(ot)?st:0,ht=E.get("text-anchor").evaluate(H,{},x),at=E.get("text-variable-anchor");if(!at){const bn=E.get("text-radial-offset").evaluate(H,{},x);Ve=bn?tv(ht,[bn*Oi,qf]):E.get("text-offset").evaluate(H,{},x).map(Zn=>Zn*Oi)}let He=O?"center":E.get("text-justify").evaluate(H,{},x);const kt=E.get("symbol-placement"),St=kt==="point"?E.get("text-max-width").evaluate(H,{},x)*Oi:0,an=()=>{r.allowVerticalPlacement&&nu(ot)&&(Pe.vertical=kd(Re,t,s,m,ae,St,F,ht,"left",et,Ve,u.WritingMode.vertical,!0,kt,xe,le))};if(!O&&at){const bn=He==="auto"?at.map(jn=>Hf(jn)):[He];let Zn=!1;for(let jn=0;jn<bn.length;jn++){const qi=bn[jn];if(!Pe.horizontal[qi])if(Zn)Pe.horizontal[qi]=Pe.horizontal[0];else{const yi=kd(Re,t,s,m,ae,St,F,"center",qi,et,Ve,u.WritingMode.horizontal,!1,kt,xe,le);yi&&(Pe.horizontal[qi]=yi,Zn=yi.positionedLines.length===1)}}an()}else{He==="auto"&&(He=Hf(ht));const bn=kd(Re,t,s,m,ae,St,F,ht,He,et,Ve,u.WritingMode.horizontal,!1,kt,xe,le);bn&&(Pe.horizontal[He]=bn),an(),nu(ot)&&O&&$&&(Pe.vertical=kd(Re,t,s,m,ae,St,F,ht,He,et,Ve,u.WritingMode.vertical,!1,kt,xe,le))}}let pt=!1;if(H.icon&&H.icon.name){const ot=c[H.icon.name];ot&&(Ge=K2(m[H.icon.name],E.get("icon-offset").evaluate(H,{},x),E.get("icon-anchor").evaluate(H,{},x)),pt=!!ot.sdf,r.sdfIcons===void 0?r.sdfIcons=pt:r.sdfIcons!==pt&&Ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ot.pixelRatio!==r.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const vt=iv(Pe.horizontal)||Pe.vertical;r.iconsInText=!!vt&&vt.iconsInText,(vt||Ge)&&iS(r,H,Pe,Ge,c,A,xe,Ie,Ve,pt,x)}y&&r.generateCollisionDebugBuffers()},u.perspective=function(r,t,s,c,m){var y,x=1/Math.tan(t/2);return r[0]=x/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+c)*(y=1/(c-m)),r[14]=2*m*c*y):(r[10]=-1,r[14]=-2*c),r},u.pick=function(r,t){const s={};for(let c=0;c<t.length;c++){const m=t[c];m in r&&(s[m]=r[m])}return s},u.plugin=_r,u.pointGeometry=Ke,u.polygonIntersectsPolygon=uy,u.potpack=Ny,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=ut,u.registerForPluginStateChange=function(r){return r({pluginStatus:Bi,pluginURL:xo}),Xs.on("pluginStateChange",r),r},u.renderColorRamp=_y,u.rotateX=function(r,t,s){var c=Math.sin(s),m=Math.cos(s),y=t[4],x=t[5],E=t[6],k=t[7],A=t[8],F=t[9],O=t[10],$=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=y*m+A*c,r[5]=x*m+F*c,r[6]=E*m+O*c,r[7]=k*m+$*c,r[8]=A*m-y*c,r[9]=F*m-x*c,r[10]=O*m-E*c,r[11]=$*m-k*c,r},u.rotateZ=function(r,t,s){var c=Math.sin(s),m=Math.cos(s),y=t[0],x=t[1],E=t[2],k=t[3],A=t[4],F=t[5],O=t[6],$=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=y*m+A*c,r[1]=x*m+F*c,r[2]=E*m+O*c,r[3]=k*m+$*c,r[4]=A*m-y*c,r[5]=F*m-x*c,r[6]=O*m-E*c,r[7]=$*m-k*c,r},u.scale=function(r,t,s){var c=s[0],m=s[1],y=s[2];return r[0]=t[0]*c,r[1]=t[1]*c,r[2]=t[2]*c,r[3]=t[3]*c,r[4]=t[4]*m,r[5]=t[5]*m,r[6]=t[6]*m,r[7]=t[7]*m,r[8]=t[8]*y,r[9]=t[9]*y,r[10]=t[10]*y,r[11]=t[11]*y,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},u.scale$1=function(r,t,s){return r[0]=t[0]*s,r[1]=t[1]*s,r[2]=t[2]*s,r[3]=t[3]*s,r},u.setCacheLimits=function(r,t){It=r,Qt=t},u.setRTLTextPlugin=function(r,t,s=!1){if(Bi===Sa||Bi===al||Bi===iu)throw new Error("setRTLTextPlugin cannot be called multiple times.");xo=cn.resolveURL(r),Bi=Sa,ll=t,ul(),s||Ea()},u.spec=ke,u.sphericalToCartesian=function([r,t,s]){return t+=90,t*=Math.PI/180,s*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(s),y:r*Math.sin(t)*Math.sin(s),z:r*Math.cos(s)}},u.toEvaluationFeature=uu,u.transformMat4=xd,u.translate=function(r,t,s){var c,m,y,x,E,k,A,F,O,$,W,H,ae=s[0],le=s[1],xe=s[2];return t===r?(r[12]=t[0]*ae+t[4]*le+t[8]*xe+t[12],r[13]=t[1]*ae+t[5]*le+t[9]*xe+t[13],r[14]=t[2]*ae+t[6]*le+t[10]*xe+t[14],r[15]=t[3]*ae+t[7]*le+t[11]*xe+t[15]):(m=t[1],y=t[2],x=t[3],E=t[4],k=t[5],A=t[6],F=t[7],O=t[8],$=t[9],W=t[10],H=t[11],r[0]=c=t[0],r[1]=m,r[2]=y,r[3]=x,r[4]=E,r[5]=k,r[6]=A,r[7]=F,r[8]=O,r[9]=$,r[10]=W,r[11]=H,r[12]=c*ae+E*le+O*xe+t[12],r[13]=m*ae+k*le+$*xe+t[13],r[14]=y*ae+A*le+W*xe+t[14],r[15]=x*ae+F*le+H*xe+t[15]),r},u.triggerPluginCompletionEvent=ru,u.unicodeBlockLookup=tt,u.uniqueId=function(){return pe++},u.validateCustomStyleLayer=function(r){const t=[],s=r.id;return s===void 0&&t.push({message:`layers.${s}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},u.validateLight=Yr,u.validateStyle=hs,u.vectorTile=fl,u.warnOnce=Ae,u.wrap=he}),v(["./shared"],function(u){function I(J){const M=typeof J;if(M==="number"||M==="boolean"||M==="string"||J==null)return JSON.stringify(J);if(Array.isArray(J)){let ee="[";for(const ie of J)ee+=`${I(ie)},`;return`${ee}]`}const B=Object.keys(J).sort();let X="{";for(let ee=0;ee<B.length;ee++)X+=`${JSON.stringify(B[ee])}:${I(J[B[ee]])},`;return`${X}}`}function N(J){let M="";for(const B of u.refProperties)M+=`/${I(J[B])}`;return M}class j{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,B){for(const ee of M){this._layerConfigs[ee.id]=ee;const ie=this._layers[ee.id]=u.createStyleLayer(ee);ie._featureFilter=u.createFilter(ie.filter),this.keyCache[ee.id]&&delete this.keyCache[ee.id]}for(const ee of B)delete this.keyCache[ee],delete this._layerConfigs[ee],delete this._layers[ee];this.familiesBySource={};const X=function(ee,ie){const fe={};for(let de=0;de<ee.length;de++){const me=ie&&ie[ee[de].id]||N(ee[de]);ie&&(ie[ee[de].id]=me);let Me=fe[me];Me||(Me=fe[me]=[]),Me.push(ee[de])}const ce=[];for(const de in fe)ce.push(fe[de]);return ce}(Object.values(this._layerConfigs),this.keyCache);for(const ee of X){const ie=ee.map(Ze=>this._layers[Ze.id]),fe=ie[0];if(fe.visibility==="none")continue;const ce=fe.source||"";let de=this.familiesBySource[ce];de||(de=this.familiesBySource[ce]={});const me=fe.sourceLayer||"_geojsonTileLayer";let Me=de[me];Me||(Me=de[me]=[]),Me.push(ie)}}}class q{constructor(M){const B={},X=[];for(const ce in M){const de=M[ce],me=B[ce]={};for(const Me in de){const Ze=de[+Me];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const Ce={x:0,y:0,w:Ze.bitmap.width+2,h:Ze.bitmap.height+2};X.push(Ce),me[Me]={rect:Ce,metrics:Ze.metrics}}}const{w:ee,h:ie}=u.potpack(X),fe=new u.AlphaImage({width:ee||1,height:ie||1});for(const ce in M){const de=M[ce];for(const me in de){const Me=de[+me];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Ze=B[ce][me].rect;u.AlphaImage.copy(Me.bitmap,fe,{x:0,y:0},{x:Ze.x+1,y:Ze.y+1},Me.bitmap)}}this.image=fe,this.positions=B}}u.register("GlyphAtlas",q);class V{constructor(M){this.tileID=new u.OverscaledTileID(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId}parse(M,B,X,ee,ie){this.status="parsing",this.data=M,this.collisionBoxArray=new u.CollisionBoxArray;const fe=new u.DictionaryCoder(Object.keys(M.layers).sort()),ce=new u.FeatureIndex(this.tileID,this.promoteId);ce.bucketLayerIDs=[];const de={},me={featureIndex:ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},Me=B.familiesBySource[this.source];for(const jt in Me){const $t=M.layers[jt];if(!$t)continue;$t.version===1&&u.warnOnce(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ot=fe.encode(jt),Dn=[];for(let zt=0;zt<$t.length;zt++){const Xt=$t.feature(zt),oi=ce.getId(Xt,jt);Dn.push({feature:Xt,id:oi,index:zt,sourceLayerIndex:Ot})}for(const zt of Me[jt]){const Xt=zt[0];Xt.minzoom&&this.zoom<Math.floor(Xt.minzoom)||Xt.maxzoom&&this.zoom>=Xt.maxzoom||Xt.visibility!=="none"&&(he(zt,this.zoom,X),(de[Xt.id]=Xt.createBucket({index:ce.bucketLayerIDs.length,layers:zt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ot,sourceID:this.source})).populate(Dn,me,this.tileID.canonical),ce.bucketLayerIDs.push(zt.map(oi=>oi.id)))}}let Ze,Ce,ft,rt;const gt=u.mapObject(me.glyphDependencies,jt=>Object.keys(jt).map(Number));Object.keys(gt).length?ee.send("getGlyphs",{uid:this.uid,stacks:gt},(jt,$t)=>{Ze||(Ze=jt,Ce=$t,qt.call(this))}):Ce={};const Tt=Object.keys(me.iconDependencies);Tt.length?ee.send("getImages",{icons:Tt,source:this.source,tileID:this.tileID,type:"icons"},(jt,$t)=>{Ze||(Ze=jt,ft=$t,qt.call(this))}):ft={};const ln=Object.keys(me.patternDependencies);function qt(){if(Ze)return ie(Ze);if(Ce&&ft&&rt){const jt=new q(Ce),$t=new u.ImageAtlas(ft,rt);for(const Ot in de){const Dn=de[Ot];Dn instanceof u.SymbolBucket?(he(Dn.layers,this.zoom,X),u.performSymbolLayout(Dn,Ce,jt.positions,ft,$t.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Dn.hasPattern&&(Dn instanceof u.LineBucket||Dn instanceof u.FillBucket||Dn instanceof u.FillExtrusionBucket)&&(he(Dn.layers,this.zoom,X),Dn.addFeatures(me,this.tileID.canonical,$t.patternPositions))}this.status="done",ie(null,{buckets:Object.values(de).filter(Ot=>!Ot.isEmpty()),featureIndex:ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jt.image,imageAtlas:$t,glyphMap:this.returnDependencies?Ce:null,iconMap:this.returnDependencies?ft:null,glyphPositions:this.returnDependencies?jt.positions:null})}}ln.length?ee.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},(jt,$t)=>{Ze||(Ze=jt,rt=$t,qt.call(this))}):rt={},qt.call(this)}}function he(J,M,B){const X=new u.EvaluationParameters(M);for(const ee of J)ee.recalculate(X,B)}function ge(J,M){const B=u.getArrayBuffer(J.request,(X,ee,ie,fe)=>{X?M(X):ee&&M(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(ee)),rawData:ee,cacheControl:ie,expires:fe})});return()=>{B.cancel(),M()}}class pe{constructor(M,B,X,ee){this.actor=M,this.layerIndex=B,this.availableImages=X,this.loadVectorData=ee||ge,this.loading={},this.loaded={}}loadTile(M,B){const X=M.uid;this.loading||(this.loading={});const ee=!!(M&&M.request&&M.request.collectResourceTiming)&&new u.RequestPerformance(M.request),ie=this.loading[X]=new V(M);ie.abort=this.loadVectorData(M,(fe,ce)=>{if(delete this.loading[X],fe||!ce)return ie.status="done",this.loaded[X]=ie,B(fe);const de=ce.rawData,me={};ce.expires&&(me.expires=ce.expires),ce.cacheControl&&(me.cacheControl=ce.cacheControl);const Me={};if(ee){const Ze=ee.finish();Ze&&(Me.resourceTiming=JSON.parse(JSON.stringify(Ze)))}ie.vectorTile=ce.vectorTile,ie.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ze,Ce)=>{if(Ze||!Ce)return B(Ze);B(null,u.extend({rawTileData:de.slice(0)},Ce,me,Me))}),this.loaded=this.loaded||{},this.loaded[X]=ie})}reloadTile(M,B){const X=this.loaded,ee=M.uid,ie=this;if(X&&X[ee]){const fe=X[ee];fe.showCollisionBoxes=M.showCollisionBoxes;const ce=(de,me)=>{const Me=fe.reloadCallback;Me&&(delete fe.reloadCallback,fe.parse(fe.vectorTile,ie.layerIndex,this.availableImages,ie.actor,Me)),B(de,me)};fe.status==="parsing"?fe.reloadCallback=ce:fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(M,B){const X=this.loading,ee=M.uid;X&&X[ee]&&X[ee].abort&&(X[ee].abort(),delete X[ee]),B()}removeTile(M,B){const X=this.loaded,ee=M.uid;X&&X[ee]&&delete X[ee],B()}}class Ee{constructor(){this.loaded={}}loadTile(M,B){const{uid:X,encoding:ee,rawImageData:ie}=M,fe=u.isImageBitmap(ie)?this.getImageData(ie):ie,ce=new u.DEMData(X,fe,ee);this.loaded=this.loaded||{},this.loaded[X]=ce,B(null,ce)}getImageData(M){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(M.width,M.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=M.width,this.offscreenCanvas.height=M.height,this.offscreenCanvasContext.drawImage(M,0,0,M.width,M.height);const B=this.offscreenCanvasContext.getImageData(-1,-1,M.width+2,M.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:B.width,height:B.height},B.data)}removeTile(M){const B=this.loaded,X=M.uid;B&&B[X]&&delete B[X]}}var ne=function J(M,B){var X,ee=M&&M.type;if(ee==="FeatureCollection")for(X=0;X<M.features.length;X++)J(M.features[X],B);else if(ee==="GeometryCollection")for(X=0;X<M.geometries.length;X++)J(M.geometries[X],B);else if(ee==="Feature")J(M.geometry,B);else if(ee==="Polygon")Q(M.coordinates,B);else if(ee==="MultiPolygon")for(X=0;X<M.coordinates.length;X++)Q(M.coordinates[X],B);return M};function Q(J,M){if(J.length!==0){te(J[0],M);for(var B=1;B<J.length;B++)te(J[B],!M)}}function te(J,M){for(var B=0,X=0,ee=0,ie=J.length,fe=ie-1;ee<ie;fe=ee++){var ce=(J[ee][0]-J[fe][0])*(J[fe][1]+J[ee][1]),de=B+ce;X+=Math.abs(B)>=Math.abs(ce)?B-de+ce:ce-de+B,B=de}B+X>=0!=!!M&&J.reverse()}const Te=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ae{constructor(M){this._feature=M,this.extent=u.EXTENT,this.type=M.type,this.properties=M.tags,"id"in M&&!isNaN(M.id)&&(this.id=parseInt(M.id,10))}loadGeometry(){if(this._feature.type===1){const M=[];for(const B of this._feature.geometry)M.push([new u.pointGeometry(B[0],B[1])]);return M}{const M=[];for(const B of this._feature.geometry){const X=[];for(const ee of B)X.push(new u.pointGeometry(ee[0],ee[1]));M.push(X)}return M}}toGeoJSON(M,B,X){return Te.call(this,M,B,X)}}class $e{constructor(M){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=M.length,this._features=M}feature(M){return new Ae(this._features[M])}}var Ne={exports:{}},Be=u.pointGeometry,lt=u.vectorTile.VectorTileFeature,dt=Pt;function Pt(J,M){this.options=M||{},this.features=J,this.length=J.length}function Lt(J,M){this.id=typeof J.id=="number"?J.id:void 0,this.type=J.type,this.rawGeometry=J.type===1?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=M||4096}Pt.prototype.feature=function(J){return new Lt(this.features[J],this.options.extent)},Lt.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var M=0;M<J.length;M++){for(var B=J[M],X=[],ee=0;ee<B.length;ee++)X.push(new Be(B[ee][0],B[ee][1]));this.geometry.push(X)}return this.geometry},Lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,M=1/0,B=-1/0,X=1/0,ee=-1/0,ie=0;ie<J.length;ie++)for(var fe=J[ie],ce=0;ce<fe.length;ce++){var de=fe[ce];M=Math.min(M,de.x),B=Math.max(B,de.x),X=Math.min(X,de.y),ee=Math.max(ee,de.y)}return[M,X,B,ee]},Lt.prototype.toGeoJSON=lt.prototype.toGeoJSON;var on=u.pbf,At=dt;function cn(J){var M=new on;return function(B,X){for(var ee in B.layers)X.writeMessage(3,Ke,B.layers[ee])}(J,M),M.finish()}function Ke(J,M){var B;M.writeVarintField(15,J.version||1),M.writeStringField(1,J.name||""),M.writeVarintField(5,J.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<J.length;B++)X.feature=J.feature(B),M.writeMessage(2,En,X);var ee=X.keys;for(B=0;B<ee.length;B++)M.writeStringField(3,ee[B]);var ie=X.values;for(B=0;B<ie.length;B++)M.writeMessage(4,It,ie[B])}function En(J,M){var B=J.feature;B.id!==void 0&&M.writeVarintField(1,B.id),M.writeMessage(2,Fe,J),M.writeVarintField(3,B.type),M.writeMessage(4,wt,B)}function Fe(J,M){var B=J.feature,X=J.keys,ee=J.values,ie=J.keycache,fe=J.valuecache;for(var ce in B.properties){var de=B.properties[ce],me=ie[ce];if(de!==null){me===void 0&&(X.push(ce),ie[ce]=me=X.length-1),M.writeVarint(me);var Me=typeof de;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(de=JSON.stringify(de));var Ze=Me+":"+de,Ce=fe[Ze];Ce===void 0&&(ee.push(de),fe[Ze]=Ce=ee.length-1),M.writeVarint(Ce)}}}function ct(J,M){return(M<<3)+(7&J)}function qe(J){return J<<1^J>>31}function wt(J,M){for(var B=J.loadGeometry(),X=J.type,ee=0,ie=0,fe=B.length,ce=0;ce<fe;ce++){var de=B[ce],me=1;X===1&&(me=de.length),M.writeVarint(ct(1,me));for(var Me=X===3?de.length-1:de.length,Ze=0;Ze<Me;Ze++){Ze===1&&X!==1&&M.writeVarint(ct(2,Me-1));var Ce=de[Ze].x-ee,ft=de[Ze].y-ie;M.writeVarint(qe(Ce)),M.writeVarint(qe(ft)),ee+=Ce,ie+=ft}X===3&&M.writeVarint(ct(7,1))}}function It(J,M){var B=typeof J;B==="string"?M.writeStringField(1,J):B==="boolean"?M.writeBooleanField(7,J):B==="number"&&(J%1!=0?M.writeDoubleField(3,J):J<0?M.writeSVarintField(6,J):M.writeVarintField(5,J))}Ne.exports=cn,Ne.exports.fromVectorTileJs=cn,Ne.exports.fromGeojsonVt=function(J,M){M=M||{};var B={};for(var X in J)B[X]=new At(J[X].features,M),B[X].name=X,B[X].version=M.version,B[X].extent=M.extent;return cn({layers:B})},Ne.exports.GeoJSONWrapper=At;var Qt=Ne.exports;function Rt(J,M,B,X,ee,ie){if(ee-X<=B)return;const fe=X+ee>>1;Nt(J,M,fe,X,ee,ie%2),Rt(J,M,B,X,fe-1,ie+1),Rt(J,M,B,fe+1,ee,ie+1)}function Nt(J,M,B,X,ee,ie){for(;ee>X;){if(ee-X>600){const me=ee-X+1,Me=B-X+1,Ze=Math.log(me),Ce=.5*Math.exp(2*Ze/3),ft=.5*Math.sqrt(Ze*Ce*(me-Ce)/me)*(Me-me/2<0?-1:1);Nt(J,M,B,Math.max(X,Math.floor(B-Me*Ce/me+ft)),Math.min(ee,Math.floor(B+(me-Me)*Ce/me+ft)),ie)}const fe=M[2*B+ie];let ce=X,de=ee;for(Ct(J,M,X,B),M[2*ee+ie]>fe&&Ct(J,M,X,ee);ce<de;){for(Ct(J,M,ce,de),ce++,de--;M[2*ce+ie]<fe;)ce++;for(;M[2*de+ie]>fe;)de--}M[2*X+ie]===fe?Ct(J,M,X,de):(de++,Ct(J,M,de,ee)),de<=B&&(X=de+1),B<=de&&(ee=de-1)}}function Ct(J,M,B,X){gn(J,B,X),gn(M,2*B,2*X),gn(M,2*B+1,2*X+1)}function gn(J,M,B){const X=J[M];J[M]=J[B],J[B]=X}function Ln(J,M,B,X){const ee=J-B,ie=M-X;return ee*ee+ie*ie}const qr=J=>J[0],Tr=J=>J[1];class hr{constructor(M,B=qr,X=Tr,ee=64,ie=Float64Array){this.nodeSize=ee,this.points=M;const fe=M.length<65536?Uint16Array:Uint32Array,ce=this.ids=new fe(M.length),de=this.coords=new ie(2*M.length);for(let me=0;me<M.length;me++)ce[me]=me,de[2*me]=B(M[me]),de[2*me+1]=X(M[me]);Rt(ce,de,ee,0,ce.length-1,0)}range(M,B,X,ee){return function(ie,fe,ce,de,me,Me,Ze){const Ce=[0,ie.length-1,0],ft=[];let rt,gt;for(;Ce.length;){const Tt=Ce.pop(),ln=Ce.pop(),qt=Ce.pop();if(ln-qt<=Ze){for(let Ot=qt;Ot<=ln;Ot++)rt=fe[2*Ot],gt=fe[2*Ot+1],rt>=ce&&rt<=me&&gt>=de&&gt<=Me&&ft.push(ie[Ot]);continue}const jt=Math.floor((qt+ln)/2);rt=fe[2*jt],gt=fe[2*jt+1],rt>=ce&&rt<=me&&gt>=de&&gt<=Me&&ft.push(ie[jt]);const $t=(Tt+1)%2;(Tt===0?ce<=rt:de<=gt)&&(Ce.push(qt),Ce.push(jt-1),Ce.push($t)),(Tt===0?me>=rt:Me>=gt)&&(Ce.push(jt+1),Ce.push(ln),Ce.push($t))}return ft}(this.ids,this.coords,M,B,X,ee,this.nodeSize)}within(M,B,X){return function(ee,ie,fe,ce,de,me){const Me=[0,ee.length-1,0],Ze=[],Ce=de*de;for(;Me.length;){const ft=Me.pop(),rt=Me.pop(),gt=Me.pop();if(rt-gt<=me){for(let $t=gt;$t<=rt;$t++)Ln(ie[2*$t],ie[2*$t+1],fe,ce)<=Ce&&Ze.push(ee[$t]);continue}const Tt=Math.floor((gt+rt)/2),ln=ie[2*Tt],qt=ie[2*Tt+1];Ln(ln,qt,fe,ce)<=Ce&&Ze.push(ee[Tt]);const jt=(ft+1)%2;(ft===0?fe-de<=ln:ce-de<=qt)&&(Me.push(gt),Me.push(Tt-1),Me.push(jt)),(ft===0?fe+de>=ln:ce+de>=qt)&&(Me.push(Tt+1),Me.push(rt),Me.push(jt))}return Ze}(this.ids,this.coords,M,B,X,this.nodeSize)}}const Li={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},Nn=Math.fround||(Pr=new Float32Array(1),J=>(Pr[0]=+J,Pr[0]));var Pr;class uo{constructor(M){this.options=Ht(Object.create(Li),M),this.trees=new Array(this.options.maxZoom+1)}load(M){const{log:B,minZoom:X,maxZoom:ee,nodeSize:ie}=this.options;B&&console.time("total time");const fe=`prepare ${M.length} points`;B&&console.time(fe),this.points=M;let ce=[];for(let de=0;de<M.length;de++)M[de].geometry&&ce.push(ui(M[de],de));this.trees[ee+1]=new hr(ce,it,Et,ie,Float32Array),B&&console.timeEnd(fe);for(let de=ee;de>=X;de--){const me=+Date.now();ce=this._cluster(ce,de),this.trees[de]=new hr(ce,it,Et,ie,Float32Array),B&&console.log("z%d: %d clusters in %dms",de,ce.length,+Date.now()-me)}return B&&console.timeEnd("total time"),this}getClusters(M,B){let X=((M[0]+180)%360+360)%360-180;const ee=Math.max(-90,Math.min(90,M[1]));let ie=M[2]===180?180:((M[2]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)X=-180,ie=180;else if(X>ie){const Me=this.getClusters([X,ee,180,fe],B),Ze=this.getClusters([-180,ee,ie,fe],B);return Me.concat(Ze)}const ce=this.trees[this._limitZoom(B)],de=ce.range(ki(X),Zi(fe),ki(ie),Zi(ee)),me=[];for(const Me of de){const Ze=ce.points[Me];me.push(Ze.numPoints?Cr(Ze):this.points[Ze.index])}return me}getChildren(M){const B=this._getOriginId(M),X=this._getOriginZoom(M),ee="No cluster with the specified id.",ie=this.trees[X];if(!ie)throw new Error(ee);const fe=ie.points[B];if(!fe)throw new Error(ee);const ce=this.options.radius/(this.options.extent*Math.pow(2,X-1)),de=ie.within(fe.x,fe.y,ce),me=[];for(const Me of de){const Ze=ie.points[Me];Ze.parentId===M&&me.push(Ze.numPoints?Cr(Ze):this.points[Ze.index])}if(me.length===0)throw new Error(ee);return me}getLeaves(M,B,X){const ee=[];return this._appendLeaves(ee,M,B=B||10,X=X||0,0),ee}getTile(M,B,X){const ee=this.trees[this._limitZoom(M)],ie=Math.pow(2,M),{extent:fe,radius:ce}=this.options,de=ce/fe,me=(X-de)/ie,Me=(X+1+de)/ie,Ze={features:[]};return this._addTileFeatures(ee.range((B-de)/ie,me,(B+1+de)/ie,Me),ee.points,B,X,ie,Ze),B===0&&this._addTileFeatures(ee.range(1-de/ie,me,1,Me),ee.points,ie,X,ie,Ze),B===ie-1&&this._addTileFeatures(ee.range(0,me,de/ie,Me),ee.points,-1,X,ie,Ze),Ze.features.length?Ze:null}getClusterExpansionZoom(M){let B=this._getOriginZoom(M)-1;for(;B<=this.options.maxZoom;){const X=this.getChildren(M);if(B++,X.length!==1)break;M=X[0].properties.cluster_id}return B}_appendLeaves(M,B,X,ee,ie){const fe=this.getChildren(B);for(const ce of fe){const de=ce.properties;if(de&&de.cluster?ie+de.point_count<=ee?ie+=de.point_count:ie=this._appendLeaves(M,de.cluster_id,X,ee,ie):ie<ee?ie++:M.push(ce),M.length===X)break}return ie}_addTileFeatures(M,B,X,ee,ie,fe){for(const ce of M){const de=B[ce],me=de.numPoints;let Me,Ze,Ce;if(me)Me=$i(de),Ze=de.x,Ce=de.y;else{const gt=this.points[de.index];Me=gt.properties,Ze=ki(gt.geometry.coordinates[0]),Ce=Zi(gt.geometry.coordinates[1])}const ft={type:1,geometry:[[Math.round(this.options.extent*(Ze*ie-X)),Math.round(this.options.extent*(Ce*ie-ee))]],tags:Me};let rt;me?rt=de.id:this.options.generateId?rt=de.index:this.points[de.index].id&&(rt=this.points[de.index].id),rt!==void 0&&(ft.id=rt),fe.features.push(ft)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(+M,this.options.maxZoom+1))}_cluster(M,B){const X=[],{radius:ee,extent:ie,reduce:fe,minPoints:ce}=this.options,de=ee/(ie*Math.pow(2,B));for(let me=0;me<M.length;me++){const Me=M[me];if(Me.zoom<=B)continue;Me.zoom=B;const Ze=this.trees[B+1],Ce=Ze.within(Me.x,Me.y,de),ft=Me.numPoints||1;let rt=ft;for(const gt of Ce){const Tt=Ze.points[gt];Tt.zoom>B&&(rt+=Tt.numPoints||1)}if(rt>ft&&rt>=ce){let gt=Me.x*ft,Tt=Me.y*ft,ln=fe&&ft>1?this._map(Me,!0):null;const qt=(me<<5)+(B+1)+this.points.length;for(const jt of Ce){const $t=Ze.points[jt];if($t.zoom<=B)continue;$t.zoom=B;const Ot=$t.numPoints||1;gt+=$t.x*Ot,Tt+=$t.y*Ot,$t.parentId=qt,fe&&(ln||(ln=this._map(Me,!0)),fe(ln,this._map($t)))}Me.parentId=qt,X.push(kr(gt/rt,Tt/rt,qt,rt,ln))}else if(X.push(Me),rt>1)for(const gt of Ce){const Tt=Ze.points[gt];Tt.zoom<=B||(Tt.zoom=B,X.push(Tt))}}return X}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,B){if(M.numPoints)return B?Ht({},M.properties):M.properties;const X=this.points[M.index].properties,ee=this.options.map(X);return B&&ee===X?Ht({},ee):ee}}function kr(J,M,B,X,ee){return{x:Nn(J),y:Nn(M),zoom:1/0,id:B,parentId:-1,numPoints:X,properties:ee}}function ui(J,M){const[B,X]=J.geometry.coordinates;return{x:Nn(ki(B)),y:Nn(Zi(X)),zoom:1/0,index:M,parentId:-1}}function Cr(J){return{type:"Feature",id:J.id,properties:$i(J),geometry:{type:"Point",coordinates:[(M=J.x,360*(M-.5)),zo(J.y)]}};var M}function $i(J){const M=J.numPoints,B=M>=1e4?`${Math.round(M/1e3)}k`:M>=1e3?Math.round(M/100)/10+"k":M;return Ht(Ht({},J.properties),{cluster:!0,cluster_id:J.id,point_count:M,point_count_abbreviated:B})}function ki(J){return J/360+.5}function Zi(J){const M=Math.sin(J*Math.PI/180),B=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return B<0?0:B>1?1:B}function zo(J){const M=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Ht(J,M){for(const B in M)J[B]=M[B];return J}function it(J){return J.x}function Et(J){return J.y}function yn(J,M,B,X){for(var ee,ie=X,fe=B-M>>1,ce=B-M,de=J[M],me=J[M+1],Me=J[B],Ze=J[B+1],Ce=M+3;Ce<B;Ce+=3){var ft=Fn(J[Ce],J[Ce+1],de,me,Me,Ze);if(ft>ie)ee=Ce,ie=ft;else if(ft===ie){var rt=Math.abs(Ce-fe);rt<ce&&(ee=Ce,ce=rt)}}ie>X&&(ee-M>3&&yn(J,M,ee,X),J[ee+2]=ie,B-ee>3&&yn(J,ee,B,X))}function Fn(J,M,B,X,ee,ie){var fe=ee-B,ce=ie-X;if(fe!==0||ce!==0){var de=((J-B)*fe+(M-X)*ce)/(fe*fe+ce*ce);de>1?(B=ee,X=ie):de>0&&(B+=fe*de,X+=ce*de)}return(fe=J-B)*fe+(ce=M-X)*ce}function ke(J,M,B,X){var ee={id:J===void 0?null:J,type:M,geometry:B,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var fe=ie.geometry,ce=ie.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")Qe(ie,fe);else if(ce==="Polygon"||ce==="MultiLineString")for(var de=0;de<fe.length;de++)Qe(ie,fe[de]);else if(ce==="MultiPolygon")for(de=0;de<fe.length;de++)for(var me=0;me<fe[de].length;me++)Qe(ie,fe[de][me])}(ee),ee}function Qe(J,M){for(var B=0;B<M.length;B+=3)J.minX=Math.min(J.minX,M[B]),J.minY=Math.min(J.minY,M[B+1]),J.maxX=Math.max(J.maxX,M[B]),J.maxY=Math.max(J.maxY,M[B+1])}function Di(J,M,B,X){if(M.geometry){var ee=M.geometry.coordinates,ie=M.geometry.type,fe=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),ce=[],de=M.id;if(B.promoteId?de=M.properties[B.promoteId]:B.generateId&&(de=X||0),ie==="Point")ji(ee,ce);else if(ie==="MultiPoint")for(var me=0;me<ee.length;me++)ji(ee[me],ce);else if(ie==="LineString")hn(ee,ce,fe,!1);else if(ie==="MultiLineString"){if(B.lineMetrics){for(me=0;me<ee.length;me++)hn(ee[me],ce=[],fe,!1),J.push(ke(de,"LineString",ce,M.properties));return}Si(ee,ce,fe,!1)}else if(ie==="Polygon")Si(ee,ce,fe,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for(me=0;me<M.geometry.geometries.length;me++)Di(J,{id:de,geometry:M.geometry.geometries[me],properties:M.properties},B,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<ee.length;me++){var Me=[];Si(ee[me],Me,fe,!0),ce.push(Me)}}J.push(ke(de,ie,ce,M.properties))}}function ji(J,M){M.push(Wn(J[0])),M.push(dr(J[1])),M.push(0)}function hn(J,M,B,X){for(var ee,ie,fe=0,ce=0;ce<J.length;ce++){var de=Wn(J[ce][0]),me=dr(J[ce][1]);M.push(de),M.push(me),M.push(0),ce>0&&(fe+=X?(ee*me-de*ie)/2:Math.sqrt(Math.pow(de-ee,2)+Math.pow(me-ie,2))),ee=de,ie=me}var Me=M.length-3;M[2]=1,yn(M,0,Me,B),M[Me+2]=1,M.size=Math.abs(fe),M.start=0,M.end=M.size}function Si(J,M,B,X){for(var ee=0;ee<J.length;ee++){var ie=[];hn(J[ee],ie,B,X),M.push(ie)}}function Wn(J){return J/360+.5}function dr(J){var M=Math.sin(J*Math.PI/180),B=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return B<0?0:B>1?1:B}function vn(J,M,B,X,ee,ie,fe,ce){if(X/=M,ie>=(B/=M)&&fe<X)return J;if(fe<B||ie>=X)return null;for(var de=[],me=0;me<J.length;me++){var Me=J[me],Ze=Me.geometry,Ce=Me.type,ft=ee===0?Me.minX:Me.minY,rt=ee===0?Me.maxX:Me.maxY;if(ft>=B&&rt<X)de.push(Me);else if(!(rt<B||ft>=X)){var gt=[];if(Ce==="Point"||Ce==="MultiPoint")Xe(Ze,gt,B,X,ee);else if(Ce==="LineString")Ut(Ze,gt,B,X,ee,!1,ce.lineMetrics);else if(Ce==="MultiLineString")Ci(Ze,gt,B,X,ee,!1);else if(Ce==="Polygon")Ci(Ze,gt,B,X,ee,!0);else if(Ce==="MultiPolygon")for(var Tt=0;Tt<Ze.length;Tt++){var ln=[];Ci(Ze[Tt],ln,B,X,ee,!0),ln.length&&gt.push(ln)}if(gt.length){if(ce.lineMetrics&&Ce==="LineString"){for(Tt=0;Tt<gt.length;Tt++)de.push(ke(Me.id,Ce,gt[Tt],Me.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(gt.length===1?(Ce="LineString",gt=gt[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=gt.length===3?"Point":"MultiPoint"),de.push(ke(Me.id,Ce,gt,Me.tags))}}}return de.length?de:null}function Xe(J,M,B,X,ee){for(var ie=0;ie<J.length;ie+=3){var fe=J[ie+ee];fe>=B&&fe<=X&&(M.push(J[ie]),M.push(J[ie+1]),M.push(J[ie+2]))}}function Ut(J,M,B,X,ee,ie,fe){for(var ce,de,me=Ft(J),Me=ee===0?Vt:es,Ze=J.start,Ce=0;Ce<J.length-3;Ce+=3){var ft=J[Ce],rt=J[Ce+1],gt=J[Ce+2],Tt=J[Ce+3],ln=J[Ce+4],qt=ee===0?ft:rt,jt=ee===0?Tt:ln,$t=!1;fe&&(ce=Math.sqrt(Math.pow(ft-Tt,2)+Math.pow(rt-ln,2))),qt<B?jt>B&&(de=Me(me,ft,rt,Tt,ln,B),fe&&(me.start=Ze+ce*de)):qt>X?jt<X&&(de=Me(me,ft,rt,Tt,ln,X),fe&&(me.start=Ze+ce*de)):pr(me,ft,rt,gt),jt<B&&qt>=B&&(de=Me(me,ft,rt,Tt,ln,B),$t=!0),jt>X&&qt<=X&&(de=Me(me,ft,rt,Tt,ln,X),$t=!0),!ie&&$t&&(fe&&(me.end=Ze+ce*de),M.push(me),me=Ft(J)),fe&&(Ze+=ce)}var Ot=J.length-3;ft=J[Ot],rt=J[Ot+1],gt=J[Ot+2],(qt=ee===0?ft:rt)>=B&&qt<=X&&pr(me,ft,rt,gt),Ot=me.length-3,ie&&Ot>=3&&(me[Ot]!==me[0]||me[Ot+1]!==me[1])&&pr(me,me[0],me[1],me[2]),me.length&&M.push(me)}function Ft(J){var M=[];return M.size=J.size,M.start=J.start,M.end=J.end,M}function Ci(J,M,B,X,ee,ie){for(var fe=0;fe<J.length;fe++)Ut(J[fe],M,B,X,ee,ie,!1)}function pr(J,M,B,X){J.push(M),J.push(B),J.push(X)}function Vt(J,M,B,X,ee,ie){var fe=(ie-M)/(X-M);return J.push(ie),J.push(B+(ee-B)*fe),J.push(1),fe}function es(J,M,B,X,ee,ie){var fe=(ie-B)/(ee-B);return J.push(M+(X-M)*fe),J.push(ie),J.push(1),fe}function Ir(J,M){for(var B=[],X=0;X<J.length;X++){var ee,ie=J[X],fe=ie.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")ee=co(ie.geometry,M);else if(fe==="MultiLineString"||fe==="Polygon"){ee=[];for(var ce=0;ce<ie.geometry.length;ce++)ee.push(co(ie.geometry[ce],M))}else if(fe==="MultiPolygon")for(ee=[],ce=0;ce<ie.geometry.length;ce++){for(var de=[],me=0;me<ie.geometry[ce].length;me++)de.push(co(ie.geometry[ce][me],M));ee.push(de)}B.push(ke(ie.id,fe,ee,ie.tags))}return B}function co(J,M){var B=[];B.size=J.size,J.start!==void 0&&(B.start=J.start,B.end=J.end);for(var X=0;X<J.length;X+=3)B.push(J[X]+M,J[X+1],J[X+2]);return B}function ii(J,M){if(J.transformed)return J;var B,X,ee,ie=1<<J.z,fe=J.x,ce=J.y;for(B=0;B<J.features.length;B++){var de=J.features[B],me=de.geometry,Me=de.type;if(de.geometry=[],Me===1)for(X=0;X<me.length;X+=2)de.geometry.push(Tn(me[X],me[X+1],M,ie,fe,ce));else for(X=0;X<me.length;X++){var Ze=[];for(ee=0;ee<me[X].length;ee+=2)Ze.push(Tn(me[X][ee],me[X][ee+1],M,ie,fe,ce));de.geometry.push(Ze)}}return J.transformed=!0,J}function Tn(J,M,B,X,ee,ie){return[Math.round(B*(J*X-ee)),Math.round(B*(M*X-ie))]}function fr(J,M,B,X,ee){for(var ie=M===ee.maxZoom?0:ee.tolerance/((1<<M)*ee.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:X,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ce=0;ce<J.length;ce++){fe.numFeatures++,ho(fe,J[ce],ie,ee);var de=J[ce].minX,me=J[ce].minY,Me=J[ce].maxX,Ze=J[ce].maxY;de<fe.minX&&(fe.minX=de),me<fe.minY&&(fe.minY=me),Me>fe.maxX&&(fe.maxX=Me),Ze>fe.maxY&&(fe.maxY=Ze)}return fe}function ho(J,M,B,X){var ee=M.geometry,ie=M.type,fe=[];if(ie==="Point"||ie==="MultiPoint")for(var ce=0;ce<ee.length;ce+=3)fe.push(ee[ce]),fe.push(ee[ce+1]),J.numPoints++,J.numSimplified++;else if(ie==="LineString")ci(fe,ee,J,B,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(ce=0;ce<ee.length;ce++)ci(fe,ee[ce],J,B,ie==="Polygon",ce===0);else if(ie==="MultiPolygon")for(var de=0;de<ee.length;de++){var me=ee[de];for(ce=0;ce<me.length;ce++)ci(fe,me[ce],J,B,!0,ce===0)}if(fe.length){var Me=M.tags||null;if(ie==="LineString"&&X.lineMetrics){for(var Ze in Me={},M.tags)Me[Ze]=M.tags[Ze];Me.mapbox_clip_start=ee.start/ee.size,Me.mapbox_clip_end=ee.end/ee.size}var Ce={geometry:fe,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:Me};M.id!==null&&(Ce.id=M.id),J.features.push(Ce)}}function ci(J,M,B,X,ee,ie){var fe=X*X;if(X>0&&M.size<(ee?fe:X))B.numPoints+=M.length/3;else{for(var ce=[],de=0;de<M.length;de+=3)(X===0||M[de+2]>fe)&&(B.numSimplified++,ce.push(M[de]),ce.push(M[de+1])),B.numPoints++;ee&&function(me,Me){for(var Ze=0,Ce=0,ft=me.length,rt=ft-2;Ce<ft;rt=Ce,Ce+=2)Ze+=(me[Ce]-me[rt])*(me[Ce+1]+me[rt+1]);if(Ze>0===Me)for(Ce=0,ft=me.length;Ce<ft/2;Ce+=2){var gt=me[Ce],Tt=me[Ce+1];me[Ce]=me[ft-2-Ce],me[Ce+1]=me[ft-1-Ce],me[ft-2-Ce]=gt,me[ft-1-Ce]=Tt}}(ce,ie),J.push(ce)}}function zr(J,M){var B=(M=this.options=function(ee,ie){for(var fe in ie)ee[fe]=ie[fe];return ee}(Object.create(this.options),M)).debug;if(B&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(ee,ie){var fe=[];if(ee.type==="FeatureCollection")for(var ce=0;ce<ee.features.length;ce++)Di(fe,ee.features[ce],ie,ce);else Di(fe,ee.type==="Feature"?ee:{geometry:ee},ie);return fe}(J,M);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(ee,ie){var fe=ie.buffer/ie.extent,ce=ee,de=vn(ee,1,-1-fe,fe,0,-1,2,ie),me=vn(ee,1,1-fe,2+fe,0,-1,2,ie);return(de||me)&&(ce=vn(ee,1,-fe,1+fe,0,-1,2,ie)||[],de&&(ce=Ir(de,1).concat(ce)),me&&(ce=ce.concat(Ir(me,-1)))),ce}(X,M),X.length&&this.splitTile(X,0,0,0),B&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ri(J,M,B){return 32*((1<<J)*B+M)+J}function bt(J,M){const B=J.tileID.canonical;if(!this._geoJSONIndex)return M(null,null);const X=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!X)return M(null,null);const ee=new $e(X.features);let ie=Qt(ee);ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),M(null,{vectorTile:ee,rawData:ie.buffer})}zr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zr.prototype.splitTile=function(J,M,B,X,ee,ie,fe){for(var ce=[J,M,B,X],de=this.options,me=de.debug;ce.length;){X=ce.pop(),B=ce.pop(),M=ce.pop(),J=ce.pop();var Me=1<<M,Ze=ri(M,B,X),Ce=this.tiles[Ze];if(!Ce&&(me>1&&console.time("creation"),Ce=this.tiles[Ze]=fr(J,M,B,X,de),this.tileCoords.push({z:M,x:B,y:X}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,B,X,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var ft="z"+M;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if(Ce.source=J,ee){if(M===de.maxZoom||M===ee)continue;var rt=1<<ee-M;if(B!==Math.floor(ie/rt)||X!==Math.floor(fe/rt))continue}else if(M===de.indexMaxZoom||Ce.numPoints<=de.indexMaxPoints)continue;if(Ce.source=null,J.length!==0){me>1&&console.time("clipping");var gt,Tt,ln,qt,jt,$t,Ot=.5*de.buffer/de.extent,Dn=.5-Ot,zt=.5+Ot,Xt=1+Ot;gt=Tt=ln=qt=null,jt=vn(J,Me,B-Ot,B+zt,0,Ce.minX,Ce.maxX,de),$t=vn(J,Me,B+Dn,B+Xt,0,Ce.minX,Ce.maxX,de),J=null,jt&&(gt=vn(jt,Me,X-Ot,X+zt,1,Ce.minY,Ce.maxY,de),Tt=vn(jt,Me,X+Dn,X+Xt,1,Ce.minY,Ce.maxY,de),jt=null),$t&&(ln=vn($t,Me,X-Ot,X+zt,1,Ce.minY,Ce.maxY,de),qt=vn($t,Me,X+Dn,X+Xt,1,Ce.minY,Ce.maxY,de),$t=null),me>1&&console.timeEnd("clipping"),ce.push(gt||[],M+1,2*B,2*X),ce.push(Tt||[],M+1,2*B,2*X+1),ce.push(ln||[],M+1,2*B+1,2*X),ce.push(qt||[],M+1,2*B+1,2*X+1)}}},zr.prototype.getTile=function(J,M,B){var X=this.options,ee=X.extent,ie=X.debug;if(J<0||J>24)return null;var fe=1<<J,ce=ri(J,M=(M%fe+fe)%fe,B);if(this.tiles[ce])return ii(this.tiles[ce],ee);ie>1&&console.log("drilling down to z%d-%d-%d",J,M,B);for(var de,me=J,Me=M,Ze=B;!de&&me>0;)me--,Me=Math.floor(Me/2),Ze=Math.floor(Ze/2),de=this.tiles[ri(me,Me,Ze)];return de&&de.source?(ie>1&&console.log("found parent tile z%d-%d-%d",me,Me,Ze),ie>1&&console.time("drilling down"),this.splitTile(de.source,me,Me,Ze,J,M,B),ie>1&&console.timeEnd("drilling down"),this.tiles[ce]?ii(this.tiles[ce],ee):null):null};class ts extends pe{constructor(M,B,X,ee){super(M,B,X,bt),ee&&(this.loadGeoJSON=ee)}loadData(M,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=B,this._pendingLoadDataParams=M,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const M=this._pendingCallback,B=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const X=!!(B&&B.request&&B.request.collectResourceTiming)&&new u.RequestPerformance(B.request);this.loadGeoJSON(B,(ee,ie)=>{if(ee||!ie)return M(ee);if(typeof ie!="object")return M(new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`));{ne(ie,!0);try{if(B.filter){const ce=u.createExpression(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ce.result==="error")throw new Error(ce.value.map(me=>`${me.key}: ${me.message}`).join(", "));const de=ie.features.filter(me=>ce.value.evaluate({zoom:0},me));ie={type:"FeatureCollection",features:de}}this._geoJSONIndex=B.cluster?new uo(function({superclusterOptions:ce,clusterProperties:de}){if(!de||!ce)return ce;const me={},Me={},Ze={accumulated:null,zoom:0},Ce={properties:null},ft=Object.keys(de);for(const rt of ft){const[gt,Tt]=de[rt],ln=u.createExpression(Tt),qt=u.createExpression(typeof gt=="string"?[gt,["accumulated"],["get",rt]]:gt);me[rt]=ln.value,Me[rt]=qt.value}return ce.map=rt=>{Ce.properties=rt;const gt={};for(const Tt of ft)gt[Tt]=me[Tt].evaluate(Ze,Ce);return gt},ce.reduce=(rt,gt)=>{Ce.properties=gt;for(const Tt of ft)Ze.accumulated=rt[Tt],rt[Tt]=Me[Tt].evaluate(Ze,Ce)},ce}(B)).load(ie.features):function(ce,de){return new zr(ce,de)}(ie,B.geojsonVtOptions)}catch(ce){return M(ce)}this.loaded={};const fe={};if(X){const ce=X.finish();ce&&(fe.resourceTiming={},fe.resourceTiming[B.source]=JSON.parse(JSON.stringify(ce)))}M(null,fe)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(M,B){const X=this.loaded;return X&&X[M.uid]?super.reloadTile(M,B):this.loadTile(M,B)}loadGeoJSON(M,B){if(M.request)u.getJSON(M.request,B);else{if(typeof M.data!="string")return B(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));try{return B(null,JSON.parse(M.data))}catch{return B(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`))}}}removeSource(M,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(M,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(X){B(X)}}getClusterChildren(M,B){try{B(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(X){B(X)}}getClusterLeaves(M,B){try{B(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(X){B(X)}}}class ns{constructor(M){this.self=M,this.actor=new u.Actor(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pe,geojson:ts},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,X)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=X},this.self.registerRTLTextPlugin=B=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=B.applyArabicShaping,u.plugin.processBidirectionalText=B.processBidirectionalText,u.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(M,B){this.referrer=B}setImages(M,B,X){this.availableImages[M]=B;for(const ee in this.workerSources[M]){const ie=this.workerSources[M][ee];for(const fe in ie)ie[fe].availableImages=B}X()}setLayers(M,B,X){this.getLayerIndex(M).replace(B),X()}updateLayers(M,B,X){this.getLayerIndex(M).update(B.layers,B.removedIds),X()}loadTile(M,B,X){this.getWorkerSource(M,B.type,B.source).loadTile(B,X)}loadDEMTile(M,B,X){this.getDEMWorkerSource(M,B.source).loadTile(B,X)}reloadTile(M,B,X){this.getWorkerSource(M,B.type,B.source).reloadTile(B,X)}abortTile(M,B,X){this.getWorkerSource(M,B.type,B.source).abortTile(B,X)}removeTile(M,B,X){this.getWorkerSource(M,B.type,B.source).removeTile(B,X)}removeDEMTile(M,B){this.getDEMWorkerSource(M,B.source).removeTile(B)}removeSource(M,B,X){if(!this.workerSources[M]||!this.workerSources[M][B.type]||!this.workerSources[M][B.type][B.source])return;const ee=this.workerSources[M][B.type][B.source];delete this.workerSources[M][B.type][B.source],ee.removeSource!==void 0?ee.removeSource(B,X):X()}loadWorkerSource(M,B,X){try{this.self.importScripts(B.url),X()}catch(ee){X(ee.toString())}}syncRTLPluginState(M,B,X){try{u.plugin.setState(B);const ee=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&ee!=null){this.self.importScripts(ee);const ie=u.plugin.isParsed();X(ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ee}`),ie)}}catch(ee){X(ee.toString())}}getAvailableImages(M){let B=this.availableImages[M];return B||(B=[]),B}getLayerIndex(M){let B=this.layerIndexes[M];return B||(B=this.layerIndexes[M]=new j),B}getWorkerSource(M,B,X){if(this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][B]||(this.workerSources[M][B]={}),!this.workerSources[M][B][X]){const ee={send:(ie,fe,ce)=>{this.actor.send(ie,fe,ce,M)}};this.workerSources[M][B][X]=new this.workerSourceTypes[B](ee,this.getLayerIndex(M),this.getAvailableImages(M))}return this.workerSources[M][B][X]}getDEMWorkerSource(M,B){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][B]||(this.demWorkerSources[M][B]=new Ee),this.demWorkerSources[M][B]}enforceCacheSizeLimit(M,B){u.enforceCacheSizeLimit(B)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ns(self)),ns}),v(["./shared"],function(u){var I=N;function N(f){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,_,b=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(b);try{_=new Worker(T),p=!0}catch{p=!1}return _&&_.terminate(),URL.revokeObjectURL(T),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var _=p.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===p.width}()?(j[l=i&&i.failIfMajorPerformanceCaveat]===void 0&&(j[l]=function(p){var _,b=function(T){var C=document.createElement("canvas"),z=Object.create(N.webGLContextAttributes);return z.failIfMajorPerformanceCaveat=T,C.getContext("webgl",z)||C.getContext("experimental-webgl",z)}(p);if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),b.getShaderParameter(_,b.COMPILE_STATUS)===!0)}(l)),j[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(f)}var j={};function q(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let l=0;l<f.length;l++)if(!q(f[l],i[l]))return!1;return!0}if(typeof f=="object"&&f!==null&&i!==null){if(typeof i!="object"||Object.keys(f).length!==Object.keys(i).length)return!1;for(const l in f)if(!q(f[l],i[l]))return!1;return!0}return f===i}N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class V{static testProp(i){if(!V.docStyle)return i[0];for(let l=0;l<i.length;l++)if(i[l]in V.docStyle)return i[l];return i[0]}static create(i,l,p){const _=window.document.createElement(i);return l!==void 0&&(_.className=l),p&&p.appendChild(_),_}static createNS(i,l){return window.document.createElementNS(i,l)}static disableDrag(){V.docStyle&&V.selectProp&&(V.userSelect=V.docStyle[V.selectProp],V.docStyle[V.selectProp]="none")}static enableDrag(){V.docStyle&&V.selectProp&&(V.docStyle[V.selectProp]=V.userSelect)}static setTransform(i,l){i.style[V.transformProp]=l}static addEventListener(i,l,p,_={}){i.addEventListener(l,p,"passive"in _?_:_.capture)}static removeEventListener(i,l,p,_={}){i.removeEventListener(l,p,"passive"in _?_:_.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",V.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",V.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",V.suppressClickInternal,!0)},0)}static mousePos(i,l){const p=i.getBoundingClientRect();return new u.pointGeometry(l.clientX-p.left-i.clientLeft,l.clientY-p.top-i.clientTop)}static touchPos(i,l){const p=i.getBoundingClientRect(),_=[];for(let b=0;b<l.length;b++)_.push(new u.pointGeometry(l[b].clientX-p.left-i.clientLeft,l[b].clientY-p.top-i.clientTop));return _}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}V.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,V.selectProp=V.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),V.transformProp=V.testProp(["transform","WebkitTransform"]);class he{constructor(i){this._transformRequestFn=i}transformRequest(i,l){return this._transformRequestFn&&this._transformRequestFn(i,l)||{url:i}}normalizeSpriteURL(i,l,p){const _=function(b){const T=b.match(ge);if(!T)throw new Error(`Unable to parse URL "${b}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(i);return _.path+=`${l}${p}`,function(b){const T=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${T}`}(_)}setTransformRequest(i){this._transformRequestFn=i}}const ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pe(f){var i=new u.ARRAY_TYPE(3);return i[0]=f[0],i[1]=f[1],i[2]=f[2],i}var Ee,ne=function(f,i,l){return f[0]=i[0]-l[0],f[1]=i[1]-l[1],f[2]=i[2]-l[2],f};Ee=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0);var Q=function(f){var i=f[0],l=f[1];return i*i+l*l};(function(){var f=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0)})();class te{constructor(i,l,p,_){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(l,_)}update(i,l,p){const{width:_,height:b}=i,T=!(this.size&&this.size[0]===_&&this.size[1]===b||p),{context:C}=this,{gl:z}=C;if(this.useMipmap=Boolean(l&&l.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[_,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,i):z.texImage2D(z.TEXTURE_2D,0,this.format,_,b,0,this.format,z.UNSIGNED_BYTE,i.data);else{const{x:R,y:U}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?z.texSubImage2D(z.TEXTURE_2D,0,R,U,z.RGBA,z.UNSIGNED_BYTE,i):z.texSubImage2D(z.TEXTURE_2D,0,R,U,_,b,z.RGBA,z.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(i,l,p){const{context:_}=this,{gl:b}=_;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||i),this.filter=i),l!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Te(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ae extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:l,callback:p}of this.requestors)this._notify(l,p);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,l){this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let p=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,l){if(!i)return!0;let p=0;for(const _ of i){if(_[0]<p||_[1]<_[0]||l<_[1])return!1;p=_[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l){l.version=this.images[i].version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){const l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,l){let p=!0;if(!this.isLoaded())for(const _ of i)this.images[_]||(p=!1);this.isLoaded()||p?this._notify(i,l):this.requestors.push({ids:i,callback:l})}_notify(i,l){const p={};for(const _ of i){this.images[_]||this.fire(new u.Event("styleimagemissing",{id:_}));const b=this.images[_];b?p[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:u.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,p)}getPixelSize(){const{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){const l=this.patterns[i],p=this.getImage(i);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new u.ImagePosition(_,p);this.patterns[i]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new te(i,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:l,h:p}=u.potpack(i),_=this.atlasImage;_.resize({width:l||1,height:p||1});for(const b in this.patterns){const{bin:T}=this.patterns[b],C=T.x+1,z=T.y+1,R=this.images[b].data,U=R.width,Z=R.height;u.RGBAImage.copy(R,_,{x:0,y:0},{x:C,y:z},{width:U,height:Z}),u.RGBAImage.copy(R,_,{x:0,y:Z-1},{x:C,y:z-1},{width:U,height:1}),u.RGBAImage.copy(R,_,{x:0,y:0},{x:C,y:z+Z},{width:U,height:1}),u.RGBAImage.copy(R,_,{x:U-1,y:0},{x:C-1,y:z},{width:1,height:Z}),u.RGBAImage.copy(R,_,{x:0,y:0},{x:C+U,y:z},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const p=this.images[l];Te(p)&&this.updateImage(l,p)}}}const $e=1e20;function Ne(f,i,l,p,_,b,T,C,z){for(let R=i;R<i+p;R++)Be(f,l*b+R,b,_,T,C,z);for(let R=l;R<l+_;R++)Be(f,R*b+i,1,p,T,C,z)}function Be(f,i,l,p,_,b,T){b[0]=0,T[0]=-$e,T[1]=$e,_[0]=f[i];for(let C=1,z=0,R=0;C<p;C++){_[C]=f[i+C*l];const U=C*C;do{const Z=b[z];R=(_[C]-_[Z]+U-Z*Z)/(C-Z)/2}while(R<=T[z]&&--z>-1);z++,b[z]=C,T[z]=R,T[z+1]=$e}for(let C=0,z=0;C<p;C++){for(;T[z+1]<C;)z++;const R=b[z],U=C-R;f[i+C*l]=_[R]+U*U}}class lt{constructor(i,l){this.requestManager=i,this.localIdeographFontFamily=l,this.entries={}}setURL(i){this.url=i}getGlyphs(i,l){const p=[];for(const _ in i)for(const b of i[_])p.push({stack:_,id:b});u.asyncAll(p,({stack:_,id:b},T)=>{let C=this.entries[_];C||(C=this.entries[_]={glyphs:{},requests:{},ranges:{}});let z=C.glyphs[b];if(z!==void 0)return void T(null,{stack:_,id:b,glyph:z});if(z=this._tinySDF(C,_,b),z)return C.glyphs[b]=z,void T(null,{stack:_,id:b,glyph:z});const R=Math.floor(b/256);if(256*R>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[R])return void T(null,{stack:_,id:b,glyph:z});let U=C.requests[R];U||(U=C.requests[R]=[],lt.loadGlyphRange(_,R,this.url,this.requestManager,(Z,K)=>{if(K){for(const se in K)this._doesCharSupportLocalGlyph(+se)||(C.glyphs[+se]=K[+se]);C.ranges[R]=!0}for(const se of U)se(Z,K);delete C.requests[R]})),U.push((Z,K)=>{Z?T(Z):K&&T(null,{stack:_,id:b,glyph:K[b]||null})})},(_,b)=>{if(_)l(_);else if(b){const T={};for(const{stack:C,id:z,glyph:R}of b)(T[C]||(T[C]={}))[z]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};l(null,T)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](i)||u.unicodeBlockLookup["Hangul Syllables"](i)||u.unicodeBlockLookup.Hiragana(i)||u.unicodeBlockLookup.Katakana(i))}_tinySDF(i,l,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let b=i.tinySDF;if(!b){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),b=i.tinySDF=new lt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:_,fontWeight:C})}const T=b.draw(String.fromCharCode(p));return{id:p,bitmap:new u.AlphaImage({width:T.width||30,height:T.height||30},T.data),metrics:{width:T.glyphWidth||24,height:T.glyphHeight||24,left:T.glyphLeft||0,top:T.glyphTop-27||-8,advance:T.glyphAdvance||24}}}}lt.loadGlyphRange=function(f,i,l,p,_){const b=256*i,T=b+255,C=p.transformRequest(l.replace("{fontstack}",f).replace("{range}",`${b}-${T}`),u.ResourceType.Glyphs);u.getArrayBuffer(C,(z,R)=>{if(z)_(z);else if(R){const U={};for(const Z of u.parseGlyphPBF(R))U[Z.id]=Z;_(null,U)}})},lt.TinySDF=class{constructor({fontSize:f=24,buffer:i=3,radius:l=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:b="normal",fontStyle:T="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=l;const C=this.size=f+4*i,z=this._createCanvas(C),R=this.ctx=z.getContext("2d",{willReadFrequently:!0});R.font=`${T} ${b} ${f}px ${_}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(f){const i=document.createElement("canvas");return i.width=i.height=f,i}draw(f){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:b}=this.ctx.measureText(f),T=Math.ceil(l),C=Math.min(this.size-this.buffer,Math.ceil(b-_)),z=Math.min(this.size-this.buffer,T+Math.ceil(p)),R=C+2*this.buffer,U=z+2*this.buffer,Z=Math.max(R*U,0),K=new Uint8ClampedArray(Z),se={data:K,width:R,height:U,glyphWidth:C,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:i};if(C===0||z===0)return se;const{ctx:Y,buffer:oe,gridInner:_e,gridOuter:ye}=this;Y.clearRect(oe,oe,C,z),Y.fillText(f,oe,oe+T);const we=Y.getImageData(oe,oe,C,z);ye.fill($e,0,Z),_e.fill(0,0,Z);for(let ve=0;ve<z;ve++)for(let Ue=0;Ue<C;Ue++){const ze=we.data[4*(ve*C+Ue)+3]/255;if(ze===0)continue;const De=(ve+oe)*R+Ue+oe;if(ze===1)ye[De]=0,_e[De]=$e;else{const We=.5-ze;ye[De]=We>0?We*We:0,_e[De]=We<0?We*We:0}}Ne(ye,0,0,R,U,R,this.f,this.v,this.z),Ne(_e,oe,oe,C,z,R,this.f,this.v,this.z);for(let ve=0;ve<Z;ve++){const Ue=Math.sqrt(ye[ve])-Math.sqrt(_e[ve]);K[ve]=Math.round(255-255*(Ue/this.radius+this.cutoff))}return se}};const dt=new u.Properties({anchor:new u.DataConstantProperty(u.spec.light.anchor),position:new class{constructor(){this.specification=u.spec.light.position}possiblyEvaluate(f,i){return u.sphericalToCartesian(f.expression.evaluate(i))}interpolate(f,i,l){return{x:u.number(f.x,i.x,l),y:u.number(f.y,i.y,l),z:u.number(f.z,i.z,l)}}},color:new u.DataConstantProperty(u.spec.light.color),intensity:new u.DataConstantProperty(u.spec.light.intensity)}),Pt="-transition";class Lt extends u.Evented{constructor(i){super(),this._transitionable=new u.Transitionable(dt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(u.validateLight,i,l))for(const p in i){const _=i[p];p.endsWith(Pt)?this._transitionable.setTransition(p.slice(0,-Pt.length),_):this._transitionable.setValue(p,_)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&u.emitValidationErrors(this,i.call(u.validateStyle,u.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.spec})))}}class on{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,l){const p=i.join(",")+String(l);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,l)),this.dashEntry[p]}getDashRanges(i,l,p){const _=[];let b=i.length%2==1?-i[i.length-1]*p:0,T=i[0]*p,C=!0;_.push({left:b,right:T,isDash:C,zeroLength:i[0]===0});let z=i[0];for(let R=1;R<i.length;R++){C=!C;const U=i[R];b=z*p,z+=U,T=z*p,_.push({left:b,right:T,isDash:C,zeroLength:U===0})}return _}addRoundDash(i,l,p){const _=l/2;for(let b=-p;b<=p;b++){const T=this.width*(this.nextRow+p+b);let C=0,z=i[C];for(let R=0;R<this.width;R++){R/z.right>1&&(z=i[++C]);const U=Math.abs(R-z.left),Z=Math.abs(R-z.right),K=Math.min(U,Z);let se;const Y=b/p*(_+1);if(z.isDash){const oe=_-Math.abs(Y);se=Math.sqrt(K*K+oe*oe)}else se=_-Math.sqrt(K*K+Y*Y);this.data[T+R]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const z=i[C],R=i[C+1];z.zeroLength?i.splice(C,1):R&&R.isDash===z.isDash&&(R.left=z.left,i.splice(C,1))}const l=i[0],p=i[i.length-1];l.isDash===p.isDash&&(l.left=p.left-this.width,p.right=l.right+this.width);const _=this.width*this.nextRow;let b=0,T=i[b];for(let C=0;C<this.width;C++){C/T.right>1&&(T=i[++b]);const z=Math.abs(C-T.left),R=Math.abs(C-T.right),U=Math.min(z,R);this.data[_+C]=Math.max(0,Math.min(255,(T.isDash?U:-U)+128))}}addDash(i,l){const p=l?7:0,_=2*p+1;if(this.nextRow+_>this.height)return u.warnOnce("LineAtlas out of space"),null;let b=0;for(let C=0;C<i.length;C++)b+=i[C];if(b!==0){const C=this.width/b,z=this.getDashRanges(i,this.width,C);l?this.addRoundDash(z,C,p):this.addRegularDash(z)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=_,this.dirty=!0,T}bind(i){const l=i.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}class At{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=u.uniqueId();const p=this.workerPool.acquire(this.id);for(let _=0;_<p.length;_++){const b=new At.Actor(p[_],l,this.id);b.name=`Worker ${_}`,this.actors.push(b)}}broadcast(i,l,p){u.asyncAll(this.actors,(_,b)=>{_.send(i,l,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function cn(f,i,l){const p=function(_,b){if(_)return l(_);if(b){const T=u.pick(u.extend(b,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(T.vectorLayers=b.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),l(null,T)}};return f.url?u.getJSON(i.transformRequest(f.url,u.ResourceType.Source),p):u.exported.frame(()=>p(null,f))}At.Actor=u.Actor;class Ke{constructor(i,l,p){this.bounds=u.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),p=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*l),_=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*l),b=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*l);return i.x>=p&&i.x<b&&i.y>=_&&i.y<T}}class En extends u.Evented{constructor(i,l,p,_){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(l,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,(i,l)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new u.ErrorEvent(i)):l&&(u.extend(this,l),l.bounds&&(this.tileBounds=new Ke(l.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(p,u.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(T,C){return delete i.request,i.aborted?l(null):T&&T.status!==404?l(T):(C&&C.resourceTiming&&(i.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&i.setExpiryData(C),i.loadVectorData(C,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",_,b.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",_,b.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Fe extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},l),u.extend(this,u.pick(l,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,(i,l)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new u.ErrorEvent(i)):l&&(u.extend(this,l),l.bounds&&(this.tileBounds=new Ke(l.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=u.getImage(this.map._requestManager.transformRequest(p,u.ResourceType.Tile),(_,b,T)=>{if(delete i.request,i.aborted)i.state="unloaded",l(null);else if(_)i.state="errored",l(_);else if(b){this.map._refreshExpiredTiles&&i.setExpiryData(T);const C=this.map.painter.context,z=C.gl;i.texture=this.map.painter.getTileTexture(b.width),i.texture?i.texture.update(b,{useMipmap:!0}):(i.texture=new te(C,b,z.RGBA,{useMipmap:!0}),i.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),i.state="loaded",u.cacheEntryPossiblyAdded(this.dispatcher),l(null)}})}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l()}unloadTile(i,l){i.texture&&this.map.painter.saveTileTexture(i.texture),l()}hasTransition(){return!1}}let ct;class qe extends Fe{constructor(i,l,p,_){super(i,l,p,_),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function _(b,T){b&&(i.state="errored",l(b)),T&&(i.dem=T,i.needsHillshadePrepare=!0,i.state="loaded",l(null))}i.request=u.getImage(this.map._requestManager.transformRequest(p,u.ResourceType.Tile),function(b,T){if(delete i.request,i.aborted)i.state="unloaded",l(null);else if(b)i.state="errored",l(b);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData(T),delete T.cacheControl,delete T.expires;const C=u.isImageBitmap(T)&&(ct==null&&(ct=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ct)?T:u.exported.getImageData(T,1),z={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:C,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",z,_.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const l=i.canonical,p=Math.pow(2,l.z),_=(l.x-1+p)%p,b=l.x===0?i.wrap-1:i.wrap,T=(l.x+1+p)%p,C=l.x+1===p?i.wrap+1:i.wrap,z={};return z[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y).key]={backfilled:!1},z[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(z[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y-1).key]={backfilled:!1},z[new u.OverscaledTileID(i.overscaledZ,i.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},z[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<p&&(z[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y+1).key]={backfilled:!1},z[new u.OverscaledTileID(i.overscaledZ,i.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},z[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y+1).key]={backfilled:!1}),z}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class wt extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(_),this._data=l.data,this._options=u.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const b=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*b,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*b,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.EXTENT,radius:(l.clusterRadius||50)*b,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},l),this}getClusterChildren(i,l){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},l),this}getClusterLeaves(i,l,p,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:l,offset:p},_),this}_updateWorkerData(i){const l=u.extend({},this.workerOptions),p=this._data;typeof p=="string"?(l.request=this.map._requestManager.transformRequest(u.exported.resolveURL(p),u.ResourceType.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(p),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,l,(_,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return;let T=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T=b.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:l.source},null),_)return void this.fire(new u.ErrorEvent(_));const C={dataType:"source",sourceDataType:i};this._collectResourceTiming&&T&&T.length>0&&u.extend(C,{resourceTiming:T}),this.fire(new u.Event("data",C))})}loaded(){return this._pendingLoads===0}loadTile(i,l){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const _={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,_,(b,T)=>(delete i.request,i.unloadVectorData(),i.aborted?l(null):b?l(b):(i.loadVectorData(T,this.map.painter,p==="reloadTile"),l(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return u.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var It=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qt extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=l}load(i,l){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),(p,_)=>{this._loaded=!0,p?this.fire(new u.ErrorEvent(p)):_&&(this.image=_,i&&(this.coordinates=i),l&&l(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const l=i.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(_){let b=1/0,T=1/0,C=-1/0,z=-1/0;for(const K of _)b=Math.min(b,K.x),T=Math.min(T,K.y),C=Math.max(C,K.x),z=Math.max(z,K.y);const R=Math.max(C-b,z-T),U=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),Z=Math.pow(2,U);return new u.CanonicalTileID(U,Math.floor((b+C)/2*Z),Math.floor((T+z)/2*Z))}(l),this.minzoom=this.maxzoom=this.tileID.z;const p=l.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,l=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,It.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new te(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}loadTile(i,l){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},l(null)):(i.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Rt extends Qt{constructor(i,l,p,_){super(i,l,p,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const l of i.urls)this.urls.push(this.map._requestManager.transformRequest(l,u.ResourceType.Source).url);u.getVideo(this.urls,(l,p)=>{this._loaded=!0,l?this.fire(new u.ErrorEvent(l)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const l=this.video.seekable;i<l.start(0)||i>l.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,l=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,It.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new te(i,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Nt extends Qt{constructor(i,l,p,_){super(i,l,p,_),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(T=>typeof T!="number"))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,It.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new te(l,this.canvas,p.RGBA,{premultiply:!0});for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ct={vector:En,raster:Fe,"raster-dem":qe,geojson:wt,video:Rt,image:Qt,canvas:Nt};function gn(f,i){const l=u.create();return u.translate(l,l,[1,1,0]),u.scale(l,l,[.5*f.width,.5*f.height,1]),u.multiply(l,l,f.calculatePosMatrix(i.toUnwrapped()))}function Ln(f,i,l,p,_,b){const T=function(Z,K,se){if(Z)for(const Y of Z){const oe=K[Y];if(oe&&oe.source===se&&oe.type==="fill-extrusion")return!0}else for(const Y in K){const oe=K[Y];if(oe.source===se&&oe.type==="fill-extrusion")return!0}return!1}(_&&_.layers,i,f.id),C=b.maxPitchScaleFactor(),z=f.tilesIn(p,C,T);z.sort(qr);const R=[];for(const Z of z)R.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(i,l,f._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,_,b,C,gn(f.transform,Z.tileID))});const U=function(Z){const K={},se={};for(const Y of Z){const oe=Y.queryResults,_e=Y.wrappedTileID,ye=se[_e]=se[_e]||{};for(const we in oe){const ve=oe[we],Ue=ye[we]=ye[we]||{},ze=K[we]=K[we]||[];for(const De of ve)Ue[De.featureIndex]||(Ue[De.featureIndex]=!0,ze.push(De))}}return K}(R);for(const Z in U)U[Z].forEach(K=>{const se=K.feature,Y=f.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=Y});return U}function qr(f,i){const l=f.tileID,p=i.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}class Tr{constructor(i,l){this.tileID=i,this.uid=u.uniqueId(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const l=i+this.timeAdded;l<u.exported.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,l,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(_,b){const T={};if(!b)return T;for(const C of _){const z=C.layerIds.map(R=>b.getLayer(R)).filter(Boolean);if(z.length!==0){C.layers=z,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(R=>z.filter(U=>U.id===R)[0]));for(const R of z)T[R.id]=C}}return T}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof u.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const _ in this.buckets){const b=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(_).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new te(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new te(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,p,_,b,T,C,z,R,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:b,scale:T,tileSize:this.tileSize,pixelPosMatrix:U,transform:z,params:C,queryPadding:this.queryPadding*R},i,l,p):{}}querySourceFeatures(i,l){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),b=l?l.sourceLayer:"",T=_._geojsonTileLayer||_[b];if(!T)return;const C=u.createFilter(l&&l.filter),{z,x:R,y:U}=this.tileID.canonical,Z={z,x:R,y:U};for(let K=0;K<T.length;K++){const se=T.feature(K);if(C.needGeometry){const _e=u.toEvaluationFeature(se,!0);if(!C.filter(new u.EvaluationParameters(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!C.filter(new u.EvaluationParameters(this.tileID.overscaledZ),se))continue;const Y=p.getId(se,b),oe=new u.GeoJSONFeature(se,z,R,U,Y);oe.tile=Z,i.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const p=u.parseCacheControl(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(l)if(this.expirationTime<l)_=!0;else{const b=this.expirationTime-l;b?this.expirationTime=p+Math.max(b,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!l.style.hasLayer(_))continue;const b=this.buckets[_],T=b.layers[0].sourceLayer||"_geojsonTileLayer",C=p[T],z=i[T];if(!C||!z||Object.keys(z).length===0)continue;b.update(z,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=l&&l.style&&l.style.getLayer(_);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=u.exported.now()+i}setDependencies(i,l){const p={};for(const _ of l)p[_]=!0;this.dependencies[i]=p}hasDependency(i,l){for(const p of i){const _=this.dependencies[p];if(_){for(const b of l)if(_[b])return!0}}return!1}}class hr{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,p){const _=i.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const b={value:l,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},p)),this.data[_].push(b),this.order.push(_),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const p=i.wrapped().key,_=l===void 0?0:this.data[p].indexOf(l),b=this.data[p][_];return this.data[p].splice(_,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const p in this.data)for(const _ of this.data[p])i(_.value)||l.push(_);for(const p of l)this.remove(p.value.tileID,p)}}class Li{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,p){const _=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][_]=this.stateChanges[i][_]||{},u.extend(this.stateChanges[i][_],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==_&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][_]===null){this.deletedStates[i][_]={};for(const b in this.state[i][_])p[b]||(this.deletedStates[i][_][b]=null)}else for(const b in p)this.deletedStates[i]&&this.deletedStates[i][_]&&this.deletedStates[i][_][b]===null&&delete this.deletedStates[i][_][b]}removeFeatureState(i,l,p){if(this.deletedStates[i]===null)return;const _=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&l!==void 0)this.deletedStates[i][_]!==null&&(this.deletedStates[i][_]=this.deletedStates[i][_]||{},this.deletedStates[i][_][p]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][_])for(p in this.deletedStates[i][_]={},this.stateChanges[i][_])this.deletedStates[i][_][p]=null;else this.deletedStates[i][_]=null;else this.deletedStates[i]=null}getState(i,l){const p=String(l),_=u.extend({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][l];if(b===null)return{};for(const T in b)delete _[T]}return _}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const b={};for(const T in this.stateChanges[_])this.state[_][T]||(this.state[_][T]={}),u.extend(this.state[_][T],this.stateChanges[_][T]),b[T]=this.state[_][T];p[_]=b}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const b={};if(this.deletedStates[_]===null)for(const T in this.state[_])b[T]={},this.state[_][T]={};else for(const T in this.deletedStates[_]){if(this.deletedStates[_][T]===null)this.state[_][T]={};else for(const C of Object.keys(this.deletedStates[_][T]))delete this.state[_][T][C];b[T]=this.state[_][T]}p[_]=p[_]||{},u.extend(p[_],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in i)i[_].setFeatureState(p,l)}}class Nn extends u.Evented{constructor(i,l,p){super(),this.id=i,this.dispatcher=p,this.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(_,b,T,C){const z=new Ct[b.type](_,b,T,C);if(z.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${z.id}`);return u.bindAll(["load","abort","unload","serialize","prepare"],z),z}(i,l,p,this),this._tiles={},this._cache=new hr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Li}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new u.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const p=this._tiles[l];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Pr).map(i=>i.key)}getRenderableIds(i){const l=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&l.push(this._tiles[p]);return i?l.sort((p,_)=>{const b=p.tileID,T=_.tileID,C=new u.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),z=new u.pointGeometry(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-T.overscaledZ||z.y-C.y||z.x-C.x}).map(p=>p.tileID.key):l.map(p=>p.tileID).sort(Pr).map(p=>p.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,l){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=l),this._loadTile(p,this._tileLoaded.bind(this,p,i,l)))}_tileLoaded(i,l,p,_){if(_)return i.state="errored",void(_.status!==404?this._source.fire(new u.ErrorEvent(_,{tile:i})):this.update(this.transform));i.timeAdded=u.exported.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const l=this.getRenderableIds();for(let _=0;_<l.length;_++){const b=l[_];if(i.neighboringTiles&&i.neighboringTiles[b]){const T=this.getTileByID(b);p(i,T),p(T,i)}}function p(_,b){_.needsHillshadePrepare=!0;let T=b.tileID.canonical.x-_.tileID.canonical.x;const C=b.tileID.canonical.y-_.tileID.canonical.y,z=Math.pow(2,_.tileID.canonical.z),R=b.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),b.dem&&_.dem&&(_.dem.backfillBorder(b.dem,T,C),_.neighboringTiles&&_.neighboringTiles[R]&&(_.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,p,_){for(const b in this._tiles){let T=this._tiles[b];if(_[b]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>p)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>l+1;){const R=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[R.key],T&&T.hasData()&&(C=R)}let z=C;for(;z.overscaledZ>l;)if(z=z.scaledTo(z.overscaledZ-1),i[z.key]){_[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=l?p:null}for(let p=i.overscaledZ-1;p>=l;p--){const _=i.scaledTo(p),b=this._getLoadedTile(_);if(b)return b}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const l=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,_=Math.floor(l*p*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const p={};for(const _ in this._tiles){const b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+l),p[b.tileID.key]=b}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let l;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?l=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new u.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(l=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(l=l.filter(z=>this._source.hasTile(z)))):l=[];const p=i.coveringZoomLevel(this._source),_=Math.max(p-Nn.maxOverzooming,this._source.minzoom),b=Math.max(p+Nn.maxUnderzooming,this._source.minzoom),T=this._updateRetainedTiles(l,p);if(uo(this._source.type)){const z={},R={},U=Object.keys(T);for(const Z of U){const K=T[Z],se=this._tiles[Z];if(!se||se.fadeEndTime&&se.fadeEndTime<=u.exported.now())continue;const Y=this.findLoadedParent(K,_);Y&&(this._addTile(Y.tileID),z[Y.tileID.key]=Y.tileID),R[Z]=K}this._retainLoadedChildren(R,p,b,T);for(const Z in z)T[Z]||(this._coveredTiles[Z]=!0,T[Z]=z[Z])}for(const z in T)this._tiles[z].clearFadeHold();const C=u.keysDifference(this._tiles,T);for(const z of C){const R=this._tiles[z];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,l){const p={},_={},b=Math.max(l-Nn.maxOverzooming,this._source.minzoom),T=Math.max(l+Nn.maxUnderzooming,this._source.minzoom),C={};for(const z of i){const R=this._addTile(z);p[z.key]=z,R.hasData()||l<this._source.maxzoom&&(C[z.key]=z)}this._retainLoadedChildren(C,l,T,p);for(const z of i){let R=this._tiles[z.key];if(R.hasData())continue;if(l+1>this._source.maxzoom){const Z=z.children(this._source.maxzoom)[0],K=this.getTile(Z);if(K&&K.hasData()){p[Z.key]=Z;continue}}else{const Z=z.children(this._source.maxzoom);if(p[Z[0].key]&&p[Z[1].key]&&p[Z[2].key]&&p[Z[3].key])continue}let U=R.wasRequested();for(let Z=z.overscaledZ-1;Z>=b;--Z){const K=z.scaledTo(Z);if(_[K.key]||(_[K.key]=!0,R=this.getTile(K),!R&&U&&(R=this._addTile(K)),R&&(p[K.key]=K,U=R.wasRequested(),R.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let p,_=this._tiles[i].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){p=this._loadedParentTiles[_.key];break}l.push(_.key);const b=_.scaledTo(_.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;_=b}for(const b of l)this._loadedParentTiles[b]=p}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const p=l;return l||(l=new Tr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))),l.uses++,this._tiles[i.key]=l,p||this._source.fire(new u.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=l.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,l,p){const _=[],b=this.transform;if(!b)return _;const T=p?b.getCameraQueryGeometry(i):i,C=i.map(Y=>b.pointCoordinate(Y)),z=T.map(Y=>b.pointCoordinate(Y)),R=this.getIds();let U=1/0,Z=1/0,K=-1/0,se=-1/0;for(const Y of z)U=Math.min(U,Y.x),Z=Math.min(Z,Y.y),K=Math.max(K,Y.x),se=Math.max(se,Y.y);for(let Y=0;Y<R.length;Y++){const oe=this._tiles[R[Y]];if(oe.holdingForFade())continue;const _e=oe.tileID,ye=Math.pow(2,b.zoom-oe.tileID.overscaledZ),we=l*oe.queryPadding*u.EXTENT/oe.tileSize/ye,ve=[_e.getTilePoint(new u.MercatorCoordinate(U,Z)),_e.getTilePoint(new u.MercatorCoordinate(K,se))];if(ve[0].x-we<u.EXTENT&&ve[0].y-we<u.EXTENT&&ve[1].x+we>=0&&ve[1].y+we>=0){const Ue=C.map(De=>_e.getTilePoint(De)),ze=z.map(De=>_e.getTilePoint(De));_.push({tile:oe,tileID:_e,queryGeometry:Ue,cameraQueryGeometry:ze,scale:ye})}}return _}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of l)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(uo(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=u.exported.now())return!0}return!1}setFeatureState(i,l,p){this._state.updateState(i=i||"_geojsonTileLayer",l,p)}removeFeatureState(i,l,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,p)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,p){const _=this._tiles[i];_&&_.setDependencies(l,p)}reloadTilesForDependencies(i,l){for(const p in this._tiles)this._tiles[p].hasDependency(i,l)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,l))}}function Pr(f,i){const l=Math.abs(2*f.wrap)-+(f.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return f.overscaledZ-i.overscaledZ||p-l||i.canonical.y-f.canonical.y||i.canonical.x-f.canonical.x}function uo(f){return f==="raster"||f==="image"||f==="video"}Nn.maxOverzooming=10,Nn.maxUnderzooming=3;const kr="mapboxgl_preloaded_worker_pool";class ui{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ui.workerCount;)this.workers.push(new Worker(Ys.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kr]}numActive(){return Object.keys(this.active).length}}const Cr=Math.floor(u.exported.hardwareConcurrency/2);let $i;function ki(){return $i||($i=new ui),$i}function Zi(f,i){const l={};for(const p in f)p!=="ref"&&(l[p]=f[p]);return u.refProperties.forEach(p=>{p in i&&(l[p]=i[p])}),l}function zo(f){f=f.slice();const i=Object.create(null);for(let l=0;l<f.length;l++)i[f[l].id]=f[l];for(let l=0;l<f.length;l++)"ref"in f[l]&&(f[l]=Zi(f[l],i[f[l].ref]));return f}ui.workerCount=Math.max(Math.min(Cr,6),1);const Ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function it(f,i,l){l.push({command:Ht.addSource,args:[f,i[f]]})}function Et(f,i,l){i.push({command:Ht.removeSource,args:[f]}),l[f]=!0}function yn(f,i,l,p){Et(f,l,p),it(f,i,l)}function Fn(f,i,l){let p;for(p in f[l])if(Object.prototype.hasOwnProperty.call(f[l],p)&&p!=="data"&&!q(f[l][p],i[l][p]))return!1;for(p in i[l])if(Object.prototype.hasOwnProperty.call(i[l],p)&&p!=="data"&&!q(f[l][p],i[l][p]))return!1;return!0}function ke(f,i,l,p,_,b){let T;for(T in i=i||{},f=f||{})Object.prototype.hasOwnProperty.call(f,T)&&(q(f[T],i[T])||l.push({command:b,args:[p,T,i[T],_]}));for(T in i)Object.prototype.hasOwnProperty.call(i,T)&&!Object.prototype.hasOwnProperty.call(f,T)&&(q(f[T],i[T])||l.push({command:b,args:[p,T,i[T],_]}))}function Qe(f){return f.id}function Di(f,i){return f[i.id]=i,f}class ji{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);let l=1,p=this._distances[l];const _=i*this.paddedLength+this.padding;for(;p<_&&l<this._distances.length;)p=this._distances[++l];const b=l-1,T=this._distances[b],C=p-T,z=C>0?(_-T)/C:0;return this.points[b].mult(1-z).add(this.points[l].mult(z))}}function hn(f,i){let l=!0;return f==="always"||f!=="never"&&i!=="never"||(l=!1),l}class Si{constructor(i,l,p){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(l/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,p,_,b){this._forEachCell(l,p,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(i,l,p,_){this._forEachCell(l-_,p-_,l+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(p),this.circles.push(_)}_insertBoxCell(i,l,p,_,b,T){this.boxCells[b].push(T)}_insertCircleCell(i,l,p,_,b,T){this.circleCells[b].push(T)}_query(i,l,p,_,b,T,C){if(p<0||i>this.width||_<0||l>this.height)return[];const z=[];if(i<=0&&l<=0&&this.width<=p&&this.height<=_){if(b)return[{key:null,x1:i,y1:l,x2:p,y2:_}];for(let R=0;R<this.boxKeys.length;R++)z.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const U=this.circles[3*R],Z=this.circles[3*R+1],K=this.circles[3*R+2];z.push({key:this.circleKeys[R],x1:U-K,y1:Z-K,x2:U+K,y2:Z+K})}}else this._forEachCell(i,l,p,_,this._queryCell,z,{hitTest:b,overlapMode:T,seenUids:{box:{},circle:{}}},C);return z}query(i,l,p,_){return this._query(i,l,p,_,!1,null)}hitTest(i,l,p,_,b,T){return this._query(i,l,p,_,!0,b,T).length>0}hitTestCircle(i,l,p,_,b){const T=i-p,C=i+p,z=l-p,R=l+p;if(C<0||T>this.width||R<0||z>this.height)return!1;const U=[];return this._forEachCell(T,z,C,R,this._queryCellCircle,U,{hitTest:!0,overlapMode:_,circle:{x:i,y:l,radius:p},seenUids:{box:{},circle:{}}},b),U.length>0}_queryCell(i,l,p,_,b,T,C,z){const{seenUids:R,hitTest:U,overlapMode:Z}=C,K=this.boxCells[b];if(K!==null){const Y=this.bboxes;for(const oe of K)if(!R.box[oe]){R.box[oe]=!0;const _e=4*oe,ye=this.boxKeys[oe];if(i<=Y[_e+2]&&l<=Y[_e+3]&&p>=Y[_e+0]&&_>=Y[_e+1]&&(!z||z(ye))&&(!U||!hn(Z,ye.overlapMode))&&(T.push({key:ye,x1:Y[_e],y1:Y[_e+1],x2:Y[_e+2],y2:Y[_e+3]}),U))return!0}}const se=this.circleCells[b];if(se!==null){const Y=this.circles;for(const oe of se)if(!R.circle[oe]){R.circle[oe]=!0;const _e=3*oe,ye=this.circleKeys[oe];if(this._circleAndRectCollide(Y[_e],Y[_e+1],Y[_e+2],i,l,p,_)&&(!z||z(ye))&&(!U||!hn(Z,ye.overlapMode))){const we=Y[_e],ve=Y[_e+1],Ue=Y[_e+2];if(T.push({key:ye,x1:we-Ue,y1:ve-Ue,x2:we+Ue,y2:ve+Ue}),U)return!0}}}return!1}_queryCellCircle(i,l,p,_,b,T,C,z){const{circle:R,seenUids:U,overlapMode:Z}=C,K=this.boxCells[b];if(K!==null){const Y=this.bboxes;for(const oe of K)if(!U.box[oe]){U.box[oe]=!0;const _e=4*oe,ye=this.boxKeys[oe];if(this._circleAndRectCollide(R.x,R.y,R.radius,Y[_e+0],Y[_e+1],Y[_e+2],Y[_e+3])&&(!z||z(ye))&&!hn(Z,ye.overlapMode))return T.push(!0),!0}}const se=this.circleCells[b];if(se!==null){const Y=this.circles;for(const oe of se)if(!U.circle[oe]){U.circle[oe]=!0;const _e=3*oe,ye=this.circleKeys[oe];if(this._circlesCollide(Y[_e],Y[_e+1],Y[_e+2],R.x,R.y,R.radius)&&(!z||z(ye))&&!hn(Z,ye.overlapMode))return T.push(!0),!0}}}_forEachCell(i,l,p,_,b,T,C,z){const R=this._convertToXCellCoord(i),U=this._convertToYCellCoord(l),Z=this._convertToXCellCoord(p),K=this._convertToYCellCoord(_);for(let se=R;se<=Z;se++)for(let Y=U;Y<=K;Y++)if(b.call(this,i,l,p,_,this.xCellCount*Y+se,T,C,z))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,p,_,b,T){const C=_-i,z=b-l,R=p+T;return R*R>C*C+z*z}_circleAndRectCollide(i,l,p,_,b,T,C){const z=(T-_)/2,R=Math.abs(i-(_+z));if(R>z+p)return!1;const U=(C-b)/2,Z=Math.abs(l-(b+U));if(Z>U+p)return!1;if(R<=z||Z<=U)return!0;const K=R-z,se=Z-U;return K*K+se*se<=p*p}}function Wn(f,i,l,p,_){const b=u.create();return i?(u.scale(b,b,[1/_,1/_,1]),l||u.rotateZ(b,b,p.angle)):u.multiply(b,p.labelPlaneMatrix,f),b}function dr(f,i,l,p,_){if(i){const b=u.clone(f);return u.scale(b,b,[_,_,1]),l||u.rotateZ(b,b,-p.angle),b}return p.glCoordMatrix}function vn(f,i){const l=[f.x,f.y,0,1];Tn(l,l,i);const p=l[3];return{point:new u.pointGeometry(l[0]/p,l[1]/p),signedDistanceFromCamera:p}}function Xe(f,i){return .5+f/i*.5}function Ut(f,i){const l=f[0]/f[3],p=f[1]/f[3];return l>=-i[0]&&l<=i[0]&&p>=-i[1]&&p<=i[1]}function Ft(f,i,l,p,_,b,T,C,z){const R=p?f.textSizeData:f.iconSizeData,U=u.evaluateSizeForZoom(R,l.transform.zoom),Z=[256/l.width*2+1,256/l.height*2+1],K=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;K.clear();const se=f.lineVertexArray,Y=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,oe=l.transform.width/l.transform.height;let _e=!1;for(let ye=0;ye<Y.length;ye++){const we=Y.get(ye);if(we.hidden||we.writingMode===u.WritingMode.vertical&&!_e){ii(we.numGlyphs,K);continue}_e=!1;const ve=[we.anchorX,we.anchorY,0,1];if(u.transformMat4(ve,ve,i),!Ut(ve,Z)){ii(we.numGlyphs,K);continue}const Ue=Xe(l.transform.cameraToCenterDistance,ve[3]),ze=u.evaluateSizeForFeature(R,U,we),De=T?ze/Ue:ze*Ue,We=new u.pointGeometry(we.anchorX,we.anchorY),Je=vn(We,_).point,Oe={},mt=Vt(we,De,!1,C,i,_,b,f.glyphOffsetArray,se,K,Je,We,Oe,oe,z);_e=mt.useVertical,(mt.notEnoughRoom||_e||mt.needsFlipping&&Vt(we,De,!0,C,i,_,b,f.glyphOffsetArray,se,K,Je,We,Oe,oe,z).notEnoughRoom)&&ii(we.numGlyphs,K)}p?f.text.dynamicLayoutVertexBuffer.updateData(K):f.icon.dynamicLayoutVertexBuffer.updateData(K)}function Ci(f,i,l,p,_,b,T,C,z,R,U,Z){const K=C.glyphStartIndex+C.numGlyphs,se=C.lineStartIndex,Y=C.lineStartIndex+C.lineLength,oe=i.getoffsetX(C.glyphStartIndex),_e=i.getoffsetX(K-1),ye=Ir(f*oe,l,p,_,b,T,C.segment,se,Y,z,R,U,Z);if(!ye)return null;const we=Ir(f*_e,l,p,_,b,T,C.segment,se,Y,z,R,U,Z);return we?{first:ye,last:we}:null}function pr(f,i,l,p){return f===u.WritingMode.horizontal&&Math.abs(l.y-i.y)>Math.abs(l.x-i.x)*p?{useVertical:!0}:(f===u.WritingMode.vertical?i.y<l.y:i.x>l.x)?{needsFlipping:!0}:null}function Vt(f,i,l,p,_,b,T,C,z,R,U,Z,K,se,Y){const oe=i/24,_e=f.lineOffsetX*oe,ye=f.lineOffsetY*oe;let we;if(f.numGlyphs>1){const ve=f.glyphStartIndex+f.numGlyphs,Ue=f.lineStartIndex,ze=f.lineStartIndex+f.lineLength,De=Ci(oe,C,_e,ye,l,U,Z,f,z,b,K,Y);if(!De)return{notEnoughRoom:!0};const We=vn(De.first.point,T).point,Je=vn(De.last.point,T).point;if(p&&!l){const Oe=pr(f.writingMode,We,Je,se);if(Oe)return Oe}we=[De.first];for(let Oe=f.glyphStartIndex+1;Oe<ve-1;Oe++)we.push(Ir(oe*C.getoffsetX(Oe),_e,ye,l,U,Z,f.segment,Ue,ze,z,b,K,Y));we.push(De.last)}else{if(p&&!l){const Ue=vn(Z,_).point,ze=f.lineStartIndex+f.segment+1,De=new u.pointGeometry(z.getx(ze),z.gety(ze)),We=vn(De,_),Je=We.signedDistanceFromCamera>0?We.point:es(Z,De,Ue,1,_),Oe=pr(f.writingMode,Ue,Je,se);if(Oe)return Oe}const ve=Ir(oe*C.getoffsetX(f.glyphStartIndex),_e,ye,l,U,Z,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,z,b,K,Y);if(!ve)return{notEnoughRoom:!0};we=[ve]}for(const ve of we)u.addDynamicAttributes(R,ve.point,ve.angle);return{}}function es(f,i,l,p,_){const b=vn(f.add(f.sub(i)._unit()),_).point,T=l.sub(b);return l.add(T._mult(p/T.mag()))}function Ir(f,i,l,p,_,b,T,C,z,R,U,Z,K){const se=p?f-i:f+i;let Y=se>0?1:-1,oe=0;p&&(Y*=-1,oe=Math.PI),Y<0&&(oe+=Math.PI);let _e=Y>0?C+T:C+T+1,ye=_,we=_,ve=0,Ue=0;const ze=Math.abs(se),De=[];for(;ve+Ue<=ze;){if(_e+=Y,_e<C||_e>=z)return null;if(we=ye,De.push(ye),ye=Z[_e],ye===void 0){const nt=new u.pointGeometry(R.getx(_e),R.gety(_e)),Dt=vn(nt,U);if(Dt.signedDistanceFromCamera>0)ye=Z[_e]=Dt.point;else{const un=_e-Y;ye=es(ve===0?b:new u.pointGeometry(R.getx(un),R.gety(un)),nt,we,ze-ve+1,U)}}ve+=Ue,Ue=we.dist(ye)}const We=(ze-ve)/Ue,Je=ye.sub(we),Oe=Je.mult(We)._add(we);Oe._add(Je._unit()._perp()._mult(l*Y));const mt=oe+Math.atan2(ye.y-we.y,ye.x-we.x);return De.push(Oe),{point:Oe,angle:K?mt:0,path:De}}const co=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ii(f,i){for(let l=0;l<f;l++){const p=i.length;i.resize(p+4),i.float32.set(co,3*p)}}function Tn(f,i,l){const p=i[0],_=i[1];return f[0]=l[0]*p+l[4]*_+l[12],f[1]=l[1]*p+l[5]*_+l[13],f[3]=l[3]*p+l[7]*_+l[15],f}const fr=100;class ho{constructor(i,l=new Si(i.width+200,i.height+200,25),p=new Si(i.width+200,i.height+200,25)){this.transform=i,this.grid=l,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+fr,this.screenBottomBoundary=i.height+fr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,l,p,_,b){const T=this.projectAndGetPerspectiveRatio(_,i.anchorPointX,i.anchorPointY),C=p*T.perspectiveRatio,z=i.x1*C+T.point.x,R=i.y1*C+T.point.y,U=i.x2*C+T.point.x,Z=i.y2*C+T.point.y;return!this.isInsideGrid(z,R,U,Z)||l!=="always"&&this.grid.hitTest(z,R,U,Z,l,b)?{box:[],offscreen:!1}:{box:[z,R,U,Z],offscreen:this.isOffscreen(z,R,U,Z)}}placeCollisionCircles(i,l,p,_,b,T,C,z,R,U,Z,K,se){const Y=[],oe=new u.pointGeometry(l.anchorX,l.anchorY),_e=vn(oe,T),ye=Xe(this.transform.cameraToCenterDistance,_e.signedDistanceFromCamera),we=(U?b/ye:b*ye)/u.ONE_EM,ve=vn(oe,C).point,Ue=Ci(we,_,l.lineOffsetX*we,l.lineOffsetY*we,!1,ve,oe,l,p,C,{},!1);let ze=!1,De=!1,We=!0;if(Ue){const Je=.5*K*ye+se,Oe=new u.pointGeometry(-100,-100),mt=new u.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),nt=new ji,Dt=Ue.first,un=Ue.last;let Jt=[];for(let Zt=Dt.path.length-1;Zt>=1;Zt--)Jt.push(Dt.path[Zt]);for(let Zt=1;Zt<un.path.length;Zt++)Jt.push(un.path[Zt]);const sn=2.5*Je;if(z){const Zt=Jt.map(pn=>vn(pn,z));Jt=Zt.some(pn=>pn.signedDistanceFromCamera<=0)?[]:Zt.map(pn=>pn.point)}let Jn=[];if(Jt.length>0){const Zt=Jt[0].clone(),pn=Jt[0].clone();for(let kn=1;kn<Jt.length;kn++)Zt.x=Math.min(Zt.x,Jt[kn].x),Zt.y=Math.min(Zt.y,Jt[kn].y),pn.x=Math.max(pn.x,Jt[kn].x),pn.y=Math.max(pn.y,Jt[kn].y);Jn=Zt.x>=Oe.x&&pn.x<=mt.x&&Zt.y>=Oe.y&&pn.y<=mt.y?[Jt]:pn.x<Oe.x||Zt.x>mt.x||pn.y<Oe.y||Zt.y>mt.y?[]:u.clipLine([Jt],Oe.x,Oe.y,mt.x,mt.y)}for(const Zt of Jn){nt.reset(Zt,.25*Je);let pn=0;pn=nt.length<=.5*Je?1:Math.ceil(nt.paddedLength/sn)+1;for(let kn=0;kn<pn;kn++){const Fi=kn/Math.max(pn-1,1),Rr=nt.lerp(Fi),eo=Rr.x+fr,to=Rr.y+fr;Y.push(eo,to,Je,0);const Js=eo-Je,yr=to-Je,Vo=eo+Je,Pa=to+Je;if(We=We&&this.isOffscreen(Js,yr,Vo,Pa),De=De||this.isInsideGrid(Js,yr,Vo,Pa),i!=="always"&&this.grid.hitTestCircle(eo,to,Je,i,Z)&&(ze=!0,!R))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!R&&ze||!De?[]:Y,offscreen:We,collisionDetected:ze}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let p=1/0,_=1/0,b=-1/0,T=-1/0;for(const U of i){const Z=new u.pointGeometry(U.x+fr,U.y+fr);p=Math.min(p,Z.x),_=Math.min(_,Z.y),b=Math.max(b,Z.x),T=Math.max(T,Z.y),l.push(Z)}const C=this.grid.query(p,_,b,T).concat(this.ignoredGrid.query(p,_,b,T)),z={},R={};for(const U of C){const Z=U.key;if(z[Z.bucketInstanceId]===void 0&&(z[Z.bucketInstanceId]={}),z[Z.bucketInstanceId][Z.featureIndex])continue;const K=[new u.pointGeometry(U.x1,U.y1),new u.pointGeometry(U.x2,U.y1),new u.pointGeometry(U.x2,U.y2),new u.pointGeometry(U.x1,U.y2)];u.polygonIntersectsPolygon(l,K)&&(z[Z.bucketInstanceId][Z.featureIndex]=!0,R[Z.bucketInstanceId]===void 0&&(R[Z.bucketInstanceId]=[]),R[Z.bucketInstanceId].push(Z.featureIndex))}return R}insertCollisionBox(i,l,p,_,b,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:T,overlapMode:l},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,p,_,b,T){const C=p?this.ignoredGrid:this.grid,z={bucketInstanceId:_,featureIndex:b,collisionGroupID:T,overlapMode:l};for(let R=0;R<i.length;R+=4)C.insertCircle(z,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,l,p){const _=[l,p,0,1];return Tn(_,_,i),{point:new u.pointGeometry((_[0]/_[3]+1)/2*this.transform.width+fr,(-_[1]/_[3]+1)/2*this.transform.height+fr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,l,p,_){return p<fr||i>=this.screenRightBoundary||_<fr||l>this.screenBottomBoundary}isInsideGrid(i,l,p,_){return p>=0&&i<this.gridRightBoundary&&_>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i}}function ci(f,i,l){return i*(u.EXTENT/(f.tileSize*Math.pow(2,l-f.tileID.overscaledZ)))}class zr{constructor(i,l,p,_){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class ri{constructor(i,l,p,_,b){this.text=new zr(i?i.text:null,l,p,b),this.icon=new zr(i?i.icon:null,l,_,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bt{constructor(i,l,p){this.text=i,this.icon=l,this.skipFade=p}}class ts{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class ns{constructor(i,l,p,_,b){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=b}}class J{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[i]}}function M(f,i,l,p,_){const{horizontalAlign:b,verticalAlign:T}=u.getAnchorAlignment(f),C=-(b-.5)*i,z=-(T-.5)*l,R=u.evaluateVariableOffset(f,p);return new u.pointGeometry(C+R[0]*_,z+R[1]*_)}function B(f,i,l,p,_,b){const{x1:T,x2:C,y1:z,y2:R,anchorPointX:U,anchorPointY:Z}=f,K=new u.pointGeometry(i,l);return p&&K._rotate(_?b:-b),{x1:T+K.x,y1:z+K.y,x2:C+K.x,y2:R+K.y,anchorPointX:U,anchorPointY:Z}}class X{constructor(i,l,p,_){this.transform=i.clone(),this.collisionIndex=new ho(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new J(p),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,p,_){const b=p.getBucket(l),T=p.latestFeatureIndex;if(!b||!T||l.id!==b.layerIds[0])return;const C=p.collisionBoxArray,z=b.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),U=p.tileSize/u.EXTENT,Z=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),K=z.get("text-pitch-alignment")==="map",se=z.get("text-rotation-alignment")==="map",Y=ci(p,1,this.transform.zoom),oe=Wn(Z,K,se,this.transform,Y);let _e=null;if(K){const we=dr(Z,K,se,this.transform,Y);_e=u.multiply([],this.transform.labelPlaneMatrix,we)}this.retainedQueryData[b.bucketInstanceId]=new ns(b.bucketInstanceId,T,b.sourceLayerIndex,b.index,p.tileID);const ye={bucket:b,layout:z,posMatrix:Z,textLabelPlaneMatrix:oe,labelToScreenMatrix:_e,scale:R,textPixelRatio:U,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const we of b.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:Ue,symbolInstanceEnd:ze}=we;i.push({sortKey:ve,symbolInstanceStart:Ue,symbolInstanceEnd:ze,parameters:ye})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(i,l,p,_,b,T,C,z,R,U,Z,K,se,Y,oe){const _e=[K.textOffset0,K.textOffset1],ye=M(i,p,_,_e,b),we=this.collisionIndex.placeCollisionBox(B(l,ye.x,ye.y,T,C,this.transform.angle),Z,z,R,U.predicate);if((!oe||this.collisionIndex.placeCollisionBox(B(oe,ye.x,ye.y,T,C,this.transform.angle),Z,z,R,U.predicate).box.length!==0)&&we.box.length>0){let ve;return this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[K.crossTileID].anchor),this.variableOffsets[K.crossTileID]={textOffset:_e,width:p,height:_,anchor:i,textBoxScale:b,prevAnchor:ve},this.markUsedJustification(se,i,K,Y),se.allowVerticalPlacement&&(this.markUsedOrientation(se,Y,K),this.placedOrientations[K.crossTileID]=Y),{shift:ye,placedGlyphBoxes:we}}}placeLayerBucketPart(i,l,p){const{bucket:_,layout:b,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:z,textPixelRatio:R,holdingForFade:U,collisionBoxArray:Z,partiallyEvaluatedTextSize:K,collisionGroup:se}=i.parameters,Y=b.get("text-optional"),oe=b.get("icon-optional"),_e=u.getOverlapMode(b,"text-overlap","text-allow-overlap"),ye=_e==="always",we=u.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),ve=we==="always",Ue=b.get("text-rotation-alignment")==="map",ze=b.get("text-pitch-alignment")==="map",De=b.get("icon-text-fit")!=="none",We=b.get("symbol-z-order")==="viewport-y",Je=ye&&(ve||!_.hasIconData()||oe),Oe=ve&&(ye||!_.hasTextData()||Y);!_.collisionArrays&&Z&&_.deserializeCollisionBoxes(Z);const mt=(nt,Dt)=>{if(l[nt.crossTileID])return;if(U)return void(this.placements[nt.crossTileID]=new bt(!1,!1,!1));let un=!1,Jt=!1,sn=!0,Jn=null,Zt={box:null,offscreen:null},pn={box:null,offscreen:null},kn=null,Fi=null,Rr=null,eo=0,to=0,Js=0;Dt.textFeatureIndex?eo=Dt.textFeatureIndex:nt.useRuntimeCollisionCircles&&(eo=nt.featureIndex),Dt.verticalTextFeatureIndex&&(to=Dt.verticalTextFeatureIndex);const yr=Dt.textBox;if(yr){const Br=wn=>{let _i=u.WritingMode.horizontal;if(_.allowVerticalPlacement&&!wn&&this.prevPlacement){const ir=this.prevPlacement.placedOrientations[nt.crossTileID];ir&&(this.placedOrientations[nt.crossTileID]=ir,_i=ir,this.markUsedOrientation(_,_i,nt))}return _i},fn=(wn,_i)=>{if(_.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&Dt.verticalTextBox){for(const ir of _.writingModes)if(ir===u.WritingMode.vertical?(Zt=_i(),pn=Zt):Zt=wn(),Zt&&Zt.box&&Zt.box.length)break}else Zt=wn()};if(b.get("text-variable-anchor")){let wn=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[nt.crossTileID]){const $n=this.prevPlacement.variableOffsets[nt.crossTileID];wn.indexOf($n.anchor)>0&&(wn=wn.filter(ka=>ka!==$n.anchor),wn.unshift($n.anchor))}const _i=($n,ka,$o)=>{const Zu=$n.x2-$n.x1,Hc=$n.y2-$n.y1,ju=nt.textBoxScale,gd=De&&we==="never"?ka:null;let Ca={box:[],offscreen:!1};const Gu=_e!=="never"?2*wn.length:wn.length;for(let Zo=0;Zo<Gu;++Zo){const hl=this.attemptAnchorPlacement(wn[Zo%wn.length],$n,Zu,Hc,ju,Ue,ze,R,T,se,Zo>=wn.length?_e:"never",nt,_,$o,gd);if(hl&&(Ca=hl.placedGlyphBoxes,Ca&&Ca.box&&Ca.box.length)){un=!0,Jn=hl.shift;break}}return Ca};fn(()=>_i(yr,Dt.iconBox,u.WritingMode.horizontal),()=>{const $n=Dt.verticalTextBox;return _.allowVerticalPlacement&&!(Zt&&Zt.box&&Zt.box.length)&&nt.numVerticalGlyphVertices>0&&$n?_i($n,Dt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Zt&&(un=Zt.box,sn=Zt.offscreen);const ir=Br(Zt&&Zt.box);if(!un&&this.prevPlacement){const $n=this.prevPlacement.variableOffsets[nt.crossTileID];$n&&(this.variableOffsets[nt.crossTileID]=$n,this.markUsedJustification(_,$n.anchor,nt,ir))}}else{const wn=(_i,ir)=>{const $n=this.collisionIndex.placeCollisionBox(_i,_e,R,T,se.predicate);return $n&&$n.box&&$n.box.length&&(this.markUsedOrientation(_,ir,nt),this.placedOrientations[nt.crossTileID]=ir),$n};fn(()=>wn(yr,u.WritingMode.horizontal),()=>{const _i=Dt.verticalTextBox;return _.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&_i?wn(_i,u.WritingMode.vertical):{box:null,offscreen:null}}),Br(Zt&&Zt.box&&Zt.box.length)}}if(kn=Zt,un=kn&&kn.box&&kn.box.length>0,sn=kn&&kn.offscreen,nt.useRuntimeCollisionCircles){const Br=_.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex),fn=u.evaluateSizeForFeature(_.textSizeData,K,Br),wn=b.get("text-padding");Fi=this.collisionIndex.placeCollisionCircles(_e,Br,_.lineVertexArray,_.glyphOffsetArray,fn,T,C,z,p,ze,se.predicate,nt.collisionCircleDiameter,wn),un=ye||Fi.circles.length>0&&!Fi.collisionDetected,sn=sn&&Fi.offscreen}if(Dt.iconFeatureIndex&&(Js=Dt.iconFeatureIndex),Dt.iconBox){const Br=fn=>{const wn=De&&Jn?B(fn,Jn.x,Jn.y,Ue,ze,this.transform.angle):fn;return this.collisionIndex.placeCollisionBox(wn,we,R,T,se.predicate)};pn&&pn.box&&pn.box.length&&Dt.verticalIconBox?(Rr=Br(Dt.verticalIconBox),Jt=Rr.box.length>0):(Rr=Br(Dt.iconBox),Jt=Rr.box.length>0),sn=sn&&Rr.offscreen}const Vo=Y||nt.numHorizontalGlyphVertices===0&&nt.numVerticalGlyphVertices===0,Pa=oe||nt.numIconVertices===0;if(Vo||Pa?Pa?Vo||(Jt=Jt&&un):un=Jt&&un:Jt=un=Jt&&un,un&&kn&&kn.box&&this.collisionIndex.insertCollisionBox(kn.box,_e,b.get("text-ignore-placement"),_.bucketInstanceId,pn&&pn.box&&to?to:eo,se.ID),Jt&&Rr&&this.collisionIndex.insertCollisionBox(Rr.box,we,b.get("icon-ignore-placement"),_.bucketInstanceId,Js,se.ID),Fi&&(un&&this.collisionIndex.insertCollisionCircles(Fi.circles,_e,b.get("text-ignore-placement"),_.bucketInstanceId,eo,se.ID),p)){const Br=_.bucketInstanceId;let fn=this.collisionCircleArrays[Br];fn===void 0&&(fn=this.collisionCircleArrays[Br]=new ts);for(let wn=0;wn<Fi.circles.length;wn+=4)fn.circles.push(Fi.circles[wn+0]),fn.circles.push(Fi.circles[wn+1]),fn.circles.push(Fi.circles[wn+2]),fn.circles.push(Fi.collisionDetected?1:0)}this.placements[nt.crossTileID]=new bt(un||Je,Jt||Oe,sn||_.justReloaded),l[nt.crossTileID]=!0};if(We){const nt=_.getSortedSymbolIndexes(this.transform.angle);for(let Dt=nt.length-1;Dt>=0;--Dt){const un=nt[Dt];mt(_.symbolInstances.get(un),_.collisionArrays[un])}}else for(let nt=i.symbolInstanceStart;nt<i.symbolInstanceEnd;nt++)mt(_.symbolInstances.get(nt),_.collisionArrays[nt]);if(p&&_.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[_.bucketInstanceId];u.invert(nt.invProjMatrix,T),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}markUsedJustification(i,l,p,_){let b;b=_===u.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(l)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=b>=0&&C!==b?0:p.crossTileID)}markUsedOrientation(i,l,p){const _=l===u.WritingMode.horizontal||l===u.WritingMode.horizontalOnly?l:0,b=l===u.WritingMode.vertical?l:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of T)i.text.placedSymbolArray.get(C).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const _=l?l.symbolFadeChange(i):1,b=l?l.opacities:{},T=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(const z in this.placements){const R=this.placements[z],U=b[z];U?(this.opacities[z]=new ri(U,_,R.text,R.icon),p=p||R.text!==U.text.placed||R.icon!==U.icon.placed):(this.opacities[z]=new ri(null,_,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const z in b){const R=b[z];if(!this.opacities[z]){const U=new ri(R,_,!1,!1);U.isHidden()||(this.opacities[z]=U,p=p||R.text.placed||R.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in C)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=C[z]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){const p={};for(const _ of l){const b=_.getBucket(i);b&&_.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,_.collisionBoxArray)}}updateBucketOpacities(i,l,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const _=i.layers[0].layout,b=new ri(null,0,!1,!1,!0),T=_.get("text-allow-overlap"),C=_.get("icon-allow-overlap"),z=_.get("text-variable-anchor"),R=_.get("text-rotation-alignment")==="map",U=_.get("text-pitch-alignment")==="map",Z=_.get("icon-text-fit")!=="none",K=new ri(null,0,T&&(C||!i.hasIconData()||_.get("icon-optional")),C&&(T||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const se=(Y,oe,_e)=>{for(let ye=0;ye<oe/4;ye++)Y.opacityVertexArray.emplaceBack(_e)};for(let Y=0;Y<i.symbolInstances.length;Y++){const oe=i.symbolInstances.get(Y),{numHorizontalGlyphVertices:_e,numVerticalGlyphVertices:ye,crossTileID:we}=oe;let ve=this.opacities[we];l[we]?ve=b:ve||(ve=K,this.opacities[we]=ve),l[we]=!0;const Ue=oe.numIconVertices>0,ze=this.placedOrientations[oe.crossTileID],De=ze===u.WritingMode.vertical,We=ze===u.WritingMode.horizontal||ze===u.WritingMode.horizontalOnly;if(_e>0||ye>0){const Je=Ce(ve.text);se(i.text,_e,De?ft:Je),se(i.text,ye,We?ft:Je);const Oe=ve.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(Dt=>{Dt>=0&&(i.text.placedSymbolArray.get(Dt).hidden=Oe||De?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Oe||We?1:0);const mt=this.variableOffsets[oe.crossTileID];mt&&this.markUsedJustification(i,mt.anchor,oe,ze);const nt=this.placedOrientations[oe.crossTileID];nt&&(this.markUsedJustification(i,"left",oe,nt),this.markUsedOrientation(i,nt,oe))}if(Ue){const Je=Ce(ve.icon),Oe=!(Z&&oe.verticalPlacedIconSymbolIndex&&De);oe.placedIconSymbolIndex>=0&&(se(i.icon,oe.numIconVertices,Oe?Je:ft),i.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=ve.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(se(i.icon,oe.numVerticalIconVertices,Oe?ft:Je),i.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Je=i.collisionArrays[Y];if(Je){let Oe=new u.pointGeometry(0,0);if(Je.textBox||Je.verticalTextBox){let nt=!0;if(z){const Dt=this.variableOffsets[we];Dt?(Oe=M(Dt.anchor,Dt.width,Dt.height,Dt.textOffset,Dt.textBoxScale),R&&Oe._rotate(U?this.transform.angle:-this.transform.angle)):nt=!1}Je.textBox&&ee(i.textCollisionBox.collisionVertexArray,ve.text.placed,!nt||De,Oe.x,Oe.y),Je.verticalTextBox&&ee(i.textCollisionBox.collisionVertexArray,ve.text.placed,!nt||We,Oe.x,Oe.y)}const mt=Boolean(!We&&Je.verticalIconBox);Je.iconBox&&ee(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,mt,Z?Oe.x:0,Z?Oe.y:0),Je.verticalIconBox&&ee(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,!mt,Z?Oe.x:0,Z?Oe.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Y.invProjMatrix,i.placementViewportMatrix=Y.viewportMatrix,i.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function ee(f,i,l,p,_){f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0)}const ie=Math.pow(2,25),fe=Math.pow(2,24),ce=Math.pow(2,17),de=Math.pow(2,16),me=Math.pow(2,9),Me=Math.pow(2,8),Ze=Math.pow(2,1);function Ce(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,l=Math.floor(127*f.opacity);return l*ie+i*fe+l*ce+i*de+l*me+i*Me+l*Ze+i}const ft=0;class rt{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,l,p,_,b){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(T,_,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,z)=>C.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class gt{constructor(i,l,p,_,b,T,C){this.placement=new X(i,b,T,C),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,l,p){const _=u.exported.now(),b=()=>{const T=u.exported.now()-_;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=l[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new rt(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Tt=512/u.EXTENT/2;class ln{constructor(i,l,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let _=0;_<l.length;_++){const b=l.get(_),T=b.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,i)})}}getScaledCoordinates(i,l){const p=Tt/Math.pow(2,l.canonical.z-this.tileID.canonical.z);return{x:Math.floor((l.canonical.x*u.EXTENT+i.anchorX)*p),y:Math.floor((l.canonical.y*u.EXTENT+i.anchorY)*p)}}findMatches(i,l,p){const _=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let b=0;b<i.length;b++){const T=i.get(b);if(T.crossTileID)continue;const C=this.indexedSymbolInstances[T.key];if(!C)continue;const z=this.getScaledCoordinates(T,l);for(const R of C)if(Math.abs(R.coord.x-z.x)<=_&&Math.abs(R.coord.y-z.y)<=_&&!p[R.crossTileID]){p[R.crossTileID]=!0,T.crossTileID=R.crossTileID;break}}}}class qt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const p in this.indexes){const _=this.indexes[p],b={};for(const T in _){const C=_[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),b[C.tileID.key]=C}this.indexes[p]=b}this.lng=i}addBucket(i,l,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<l.symbolInstances.length;b++)l.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const _=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const T=this.indexes[b];if(Number(b)>i.overscaledZ)for(const C in T){const z=T[C];z.tileID.isChildOf(i)&&z.findMatches(l.symbolInstances,i,_)}else{const C=T[i.scaledTo(Number(b)).key];C&&C.findMatches(l.symbolInstances,i,_)}}for(let b=0;b<l.symbolInstances.length;b++){const T=l.symbolInstances.get(b);T.crossTileID||(T.crossTileID=p.generate(),_[T.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ln(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const p in l.indexedSymbolInstances)for(const _ of l.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][_.crossTileID]}removeStaleBuckets(i){let l=!1;for(const p in this.indexes){const _=this.indexes[p];for(const b in _)i[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[b]),delete _[b],l=!0)}return l}}class $t{constructor(){this.layerIndexes={},this.crossTileIDs=new qt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,p){let _=this.layerIndexes[i.id];_===void 0&&(_=this.layerIndexes[i.id]=new jt);let b=!1;const T={};_.handleWrapJump(p);for(const C of l){const z=C.getBucket(i);z&&i.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(C.tileID,z,this.crossTileIDs)&&(b=!0),T[z.bucketInstanceId]=!0)}return _.removeStaleBuckets(T)&&(b=!0),b}pruneUnusedLayers(i){const l={};i.forEach(p=>{l[p]=!0});for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}const Ot=(f,i)=>u.emitValidationErrors(f,i&&i.filter(l=>l.identifier!=="source.canvas")),Dn=u.pick(Ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),zt=u.pick(Ht,["setCenter","setZoom","setBearing","setPitch"]),Xt=function(){const f={},i=u.spec.$version;for(const l in u.spec.$root){const p=u.spec.$root[l];if(p.required){let _=null;_=l==="version"?i:p.type==="array"?[]:{},_!=null&&(f[l]=_)}}return f}();class oi extends u.Evented{constructor(i,l={}){super(),this.map=i,this.dispatcher=new At(ki(),this),this.imageManager=new Ae,this.imageManager.setEventedParent(this),this.glyphManager=new lt(i._requestManager,l.localIdeographFontFamily),this.lineAtlas=new on(256,512),this.crossTileSymbolIndex=new $t,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const p=this;this._rtlTextPluginCallback=oi.registerForPluginStateChange(_=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,T)=>{if(u.triggerPluginCompletionEvent(b),T&&T.every(C=>C))for(const C in p.sourceCaches)p.sourceCaches[C].reload()})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.sourceCaches[_.sourceId];if(!b)return;const T=b.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const z=this._layers[C];z.source===T.id&&this._validateLayer(z)}})}loadURL(i,l={}){this.fire(new u.Event("dataloading",{dataType:"style"}));const p=typeof l.validate!="boolean"||l.validate,_=this.map._requestManager.transformRequest(i,u.ResourceType.Style);this._request=u.getJSON(_,(b,T)=>{this._request=null,b?this.fire(new u.ErrorEvent(b)):T&&this._load(T,p)})}loadJSON(i,l={}){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.exported.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(Xt,!1)}_load(i,l){if(l&&Ot(this,u.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const _ in i.sources)this.addSource(_,i.sources[_],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const p=zo(this.stylesheet.layers);this._order=p.map(_=>_.id),this._layers={},this._serializedLayers={};for(let _ of p)_=u.createStyleLayer(_),_.setEventedParent(this,{layer:{id:_.id}}),this._layers[_.id]=_,this._serializedLayers[_.id]=_.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Lt(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(l,p,_,b){let T,C,z;const R=_>1?"@2x":"";let U=u.getJSON(p.transformRequest(p.normalizeSpriteURL(l,R,".json"),u.ResourceType.SpriteJSON),(se,Y)=>{U=null,z||(z=se,T=Y,K())}),Z=u.getImage(p.transformRequest(p.normalizeSpriteURL(l,R,".png"),u.ResourceType.SpriteImage),(se,Y)=>{Z=null,z||(z=se,C=Y,K())});function K(){if(z)b(z);else if(T&&C){const se=u.exported.getImageData(C),Y={};for(const oe in T){const{width:_e,height:ye,x:we,y:ve,sdf:Ue,pixelRatio:ze,stretchX:De,stretchY:We,content:Je}=T[oe],Oe=new u.RGBAImage({width:_e,height:ye});u.RGBAImage.copy(se,Oe,{x:we,y:ve},{x:0,y:0},{width:_e,height:ye}),Y[oe]={data:Oe,pixelRatio:ze,sdf:Ue,stretchX:De,stretchY:We,content:Je}}b(null,Y)}}return{cancel(){U&&(U.cancel(),U=null),Z&&(Z.cancel(),Z=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(l,p)=>{if(this._spriteRequest=null,l)this.fire(new u.ErrorEvent(l));else if(p)for(const _ in p)this.imageManager.addImage(_,p[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))})}_validateLayer(i){const l=this.sourceCaches[i.source];if(!l)return;const p=i.sourceLayer;if(!p)return;const _=l.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const l=[];for(const p of i){const _=this._layers[p];_.type!=="custom"&&l.push(_.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const l=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const T in this._updatedSources){const C=this._updatedSources[T];C==="reload"?this._reloadSource(T):C==="clear"&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const b=this.sourceCaches[_];p[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const _ in p){const b=this.sourceCaches[_];p[_]!==b.used&&b.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(i),this.z=i.zoom,l&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),Ot(this,u.validateStyle(i)))return!1;(i=u.clone$1(i)).layers=zo(i.layers);const l=function(_,b){if(!_)return[{command:Ht.setStyle,args:[b]}];let T=[];try{if(!q(_.version,b.version))return[{command:Ht.setStyle,args:[b]}];q(_.center,b.center)||T.push({command:Ht.setCenter,args:[b.center]}),q(_.zoom,b.zoom)||T.push({command:Ht.setZoom,args:[b.zoom]}),q(_.bearing,b.bearing)||T.push({command:Ht.setBearing,args:[b.bearing]}),q(_.pitch,b.pitch)||T.push({command:Ht.setPitch,args:[b.pitch]}),q(_.sprite,b.sprite)||T.push({command:Ht.setSprite,args:[b.sprite]}),q(_.glyphs,b.glyphs)||T.push({command:Ht.setGlyphs,args:[b.glyphs]}),q(_.transition,b.transition)||T.push({command:Ht.setTransition,args:[b.transition]}),q(_.light,b.light)||T.push({command:Ht.setLight,args:[b.light]});const C={},z=[];(function(U,Z,K,se){let Y;for(Y in Z=Z||{},U=U||{})Object.prototype.hasOwnProperty.call(U,Y)&&(Object.prototype.hasOwnProperty.call(Z,Y)||Et(Y,K,se));for(Y in Z)Object.prototype.hasOwnProperty.call(Z,Y)&&(Object.prototype.hasOwnProperty.call(U,Y)?q(U[Y],Z[Y])||(U[Y].type==="geojson"&&Z[Y].type==="geojson"&&Fn(U,Z,Y)?K.push({command:Ht.setGeoJSONSourceData,args:[Y,Z[Y].data]}):yn(Y,Z,K,se)):it(Y,Z,K))})(_.sources,b.sources,z,C);const R=[];_.layers&&_.layers.forEach(U=>{C[U.source]?T.push({command:Ht.removeLayer,args:[U.id]}):R.push(U)}),T=T.concat(z),function(U,Z,K){Z=Z||[];const se=(U=U||[]).map(Qe),Y=Z.map(Qe),oe=U.reduce(Di,{}),_e=Z.reduce(Di,{}),ye=se.slice(),we=Object.create(null);let ve,Ue,ze,De,We,Je,Oe;for(ve=0,Ue=0;ve<se.length;ve++)ze=se[ve],Object.prototype.hasOwnProperty.call(_e,ze)?Ue++:(K.push({command:Ht.removeLayer,args:[ze]}),ye.splice(ye.indexOf(ze,Ue),1));for(ve=0,Ue=0;ve<Y.length;ve++)ze=Y[Y.length-1-ve],ye[ye.length-1-ve]!==ze&&(Object.prototype.hasOwnProperty.call(oe,ze)?(K.push({command:Ht.removeLayer,args:[ze]}),ye.splice(ye.lastIndexOf(ze,ye.length-Ue),1)):Ue++,Je=ye[ye.length-ve],K.push({command:Ht.addLayer,args:[_e[ze],Je]}),ye.splice(ye.length-ve,0,ze),we[ze]=!0);for(ve=0;ve<Y.length;ve++)if(ze=Y[ve],De=oe[ze],We=_e[ze],!we[ze]&&!q(De,We))if(q(De.source,We.source)&&q(De["source-layer"],We["source-layer"])&&q(De.type,We.type)){for(Oe in ke(De.layout,We.layout,K,ze,null,Ht.setLayoutProperty),ke(De.paint,We.paint,K,ze,null,Ht.setPaintProperty),q(De.filter,We.filter)||K.push({command:Ht.setFilter,args:[ze,We.filter]}),q(De.minzoom,We.minzoom)&&q(De.maxzoom,We.maxzoom)||K.push({command:Ht.setLayerZoomRange,args:[ze,We.minzoom,We.maxzoom]}),De)Object.prototype.hasOwnProperty.call(De,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?ke(De[Oe],We[Oe],K,ze,Oe.slice(6),Ht.setPaintProperty):q(De[Oe],We[Oe])||K.push({command:Ht.setLayerProperty,args:[ze,Oe,We[Oe]]}));for(Oe in We)Object.prototype.hasOwnProperty.call(We,Oe)&&!Object.prototype.hasOwnProperty.call(De,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?ke(De[Oe],We[Oe],K,ze,Oe.slice(6),Ht.setPaintProperty):q(De[Oe],We[Oe])||K.push({command:Ht.setLayerProperty,args:[ze,Oe,We[Oe]]}))}else K.push({command:Ht.removeLayer,args:[ze]}),Je=ye[ye.lastIndexOf(ze)+1],K.push({command:Ht.addLayer,args:[We,Je]})}(R,b.layers,T)}catch(C){console.warn("Unable to compute style diff:",C),T=[{command:Ht.setStyle,args:[b]}]}return T}(this.serialize(),i).filter(_=>!(_.command in zt));if(l.length===0)return!1;const p=l.filter(_=>!(_.command in Dn));if(p.length>0)throw new Error(`Unimplemented: ${p.map(_=>_.command).join(", ")}.`);return l.forEach(_=>{_.command!=="setTransition"&&this[_.command].apply(this,_.args)}),this.stylesheet=i,!0}addImage(i,l){if(this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,l),this._afterImageUpdated(i)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,l,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.validateStyle.source,`sources.${i}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const _=this.sourceCaches[i]=new Nn(i,l,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:_.serialize(),sourceId:i})),_.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const l=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],l.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,l){this._checkLoaded(),this.sourceCaches[i].getSource().setData(l),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,l,p={}){this._checkLoaded();const _=i.id;if(this.getLayer(_))return void this.fire(new u.ErrorEvent(new Error(`Layer "${_}" already exists on this map.`)));let b;if(i.type==="custom"){if(Ot(this,u.validateCustomStyleLayer(i)))return;b=u.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(_,i.source),i=u.clone$1(i),i=u.extend(i,{source:_})),this._validate(u.validateStyle.layer,`layers.${_}`,i,{arrayIndex:-1},p))return;b=u.createStyleLayer(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize()}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${_}" before non-existing layer "${l}".`)));else{if(this._order.splice(T,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){const C=this._removedLayers[_];delete this._removedLayers[_],C.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;const p=this._order.indexOf(i);this._order.splice(p,1);const _=l?this._order.indexOf(l):this._order.length;l&&_===-1?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${l}".`))):(this._order.splice(_,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const l=this._layers[i];if(!l)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));l.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,l,p){this._checkLoaded();const _=this.getLayer(i);_?_.minzoom===l&&_.maxzoom===p||(l!=null&&(_.minzoom=l),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,l,p={}){this._checkLoaded();const _=this.getLayer(i);if(_){if(!q(_.filter,l))return l==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(u.validateStyle.filter,`layers.${_.id}.filter`,l,null,p)||(_.filter=u.clone$1(l),this._updateLayer(_)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,l,p,_={}){this._checkLoaded();const b=this.getLayer(i);b?q(b.getLayoutProperty(l),p)||(b.setLayoutProperty(l,p,_),this._updateLayer(b)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,l){const p=this.getLayer(i);if(p)return p.getLayoutProperty(l);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,l,p,_={}){this._checkLoaded();const b=this.getLayer(i);b?q(b.getPaintProperty(l),p)||(b.setPaintProperty(l,p,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,l){return this.getLayer(i).getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const p=i.source,_=i.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const T=b.getSource().type;T==="geojson"&&_?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||_?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,i.id,l)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,l){this._checkLoaded();const p=i.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const b=_.getSource().type,T=b==="vector"?i.sourceLayer:void 0;b!=="vector"||T?l&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(T,i.id,l):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const l=i.source,p=i.sourceLayer,_=this.sourceCaches[l];if(_!==void 0)return _.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,i.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const l=T=>this._layers[T].type==="fill-extrusion",p={},_=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(l(C)){p[C]=T;for(const z of i){const R=z[C];if(R)for(const U of R)_.push(U)}}}_.sort((T,C)=>C.intersectionZ-T.intersectionZ);const b=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(l(C))for(let z=_.length-1;z>=0;z--){const R=_[z].feature;if(p[R.layer.id]<T)break;b.push(R),_.pop()}else for(const z of i){const R=z[C];if(R)for(const U of R)b.push(U.feature)}}return b}queryRenderedFeatures(i,l,p){l&&l.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);const _={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const T of l.layers){const C=this._layers[T];if(!C)return this.fire(new u.ErrorEvent(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];_[C.source]=!0}}const b=[];l.availableImages=this._availableImages;for(const T in this.sourceCaches)l.layers&&!_[T]||b.push(Ln(this.sourceCaches[T],this._layers,this._serializedLayers,i,l,p));return this.placement&&b.push(function(T,C,z,R,U,Z,K){const se={},Y=Z.queryRenderedSymbols(R),oe=[];for(const _e of Object.keys(Y).map(Number))oe.push(K[_e]);oe.sort(qr);for(const _e of oe){const ye=_e.featureIndex.lookupSymbolFeatures(Y[_e.bucketInstanceId],C,_e.bucketIndex,_e.sourceLayerIndex,U.filter,U.layers,U.availableImages,T);for(const we in ye){const ve=se[we]=se[we]||[],Ue=ye[we];Ue.sort((ze,De)=>{const We=_e.featureSortOrder;if(We){const Je=We.indexOf(ze.featureIndex);return We.indexOf(De.featureIndex)-Je}return De.featureIndex-ze.featureIndex});for(const ze of Ue)ve.push(ze)}}for(const _e in se)se[_e].forEach(ye=>{const we=ye.feature,ve=z[T[_e].source].getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=ve});return se}(this._layers,this._serializedLayers,this.sourceCaches,i,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,l){l&&l.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);const p=this.sourceCaches[i];return p?function(_,b){const T=_.getRenderableIds().map(R=>_.getTileByID(R)),C=[],z={};for(let R=0;R<T.length;R++){const U=T[R],Z=U.tileID.canonical.key;z[Z]||(z[Z]=!0,U.querySourceFeatures(C,b))}return C}(p,l):[]}addSourceType(i,l,p){return oi.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(oi.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const T in i)if(!q(i[T],p[T])){_=!0;break}if(!_)return;const b={now:u.exported.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,l),this.light.updateTransitions(b)}_validate(i,l,p,_,b={}){return(!b||b.validate!==!1)&&Ot(this,i.call(u.validateStyle,u.extend({key:l,style:this.serialize(),value:p,styleSpec:u.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const l=this.sourceCaches[i];l.setEventedParent(null),l.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const l in this.sourceCaches)this.sourceCaches[l].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,l,p,_,b=!1){let T=!1,C=!1;const z={};for(const R of this._order){const U=this._layers[R];if(U.type!=="symbol")continue;if(!z[U.source]){const K=this.sourceCaches[U.source];z[U.source]=K.getRenderableIds(!0).map(se=>K.getTileByID(se)).sort((se,Y)=>Y.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(Y.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(U,z[U.source],i.center.lng);T=T||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.exported.now(),i.zoom))&&(this.pauseablePlacement=new gt(i,this._order,b,l,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.exported.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const R of this._order){const U=this._layers[R];U.type==="symbol"&&this.placement.updateLayerOpacities(U,z[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l,p){this.imageManager.getImages(l.icons,p),this._updateTilesForChangedImages();const _=this.sourceCaches[l.source];_&&_.setDependencies(l.tileID.key,l.type,l.icons)}getGlyphs(i,l,p){this.glyphManager.getGlyphs(l.stacks,p)}getResource(i,l,p){return u.makeRequest(l,p)}}oi.getSourceType=function(f){return Ct[f]},oi.setSourceType=function(f,i){Ct[f]=i},oi.registerForPluginStateChange=u.registerForPluginStateChange;var Ao=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Mo={prelude:xn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:xn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:xn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:xn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:xn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function xn(f,i){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),_=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=b?b.concat(_):_,C={};return{fragmentSource:f=f.replace(l,(z,R,U,Z,K)=>(C[K]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${U} ${Z} ${K};
#else
uniform ${U} ${Z} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${U} ${Z} ${K} = u_${K};
#endif
`)),vertexSource:i=i.replace(l,(z,R,U,Z,K)=>{const se=Z==="float"?"vec2":"vec4",Y=K.match(/color/)?"color":se;return C[K]?R==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${U} ${se} a_${K};
varying ${U} ${Z} ${K};
#else
uniform ${U} ${Z} u_${K};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${U} ${Z} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${Y}(a_${K}, u_${K}_t);
#else
    ${U} ${Z} ${K} = u_${K};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${U} ${se} a_${K};
#else
uniform ${U} ${Z} u_${K};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${U} ${Z} ${K} = a_${K};
#else
    ${U} ${Z} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${U} ${Z} ${K} = unpack_mix_${Y}(a_${K}, u_${K}_t);
#else
    ${U} ${Z} ${K} = u_${K};
#endif
`}),staticAttributes:p,staticUniforms:T}}class Kt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,l,p,_,b,T,C,z){this.context=i;let R=this.boundPaintVertexBuffers.length!==_.length;for(let U=0;!R&&U<_.length;U++)this.boundPaintVertexBuffers[U]!==_[U]&&(R=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===l&&this.boundLayoutVertexBuffer===p&&!R&&this.boundIndexBuffer===b&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===C&&this.boundDynamicVertexBuffer2===z?(i.bindVertexArrayOES.set(this.vao),C&&C.bind(),b&&b.dynamicDraw&&b.bind(),z&&z.bind()):this.freshBind(l,p,_,b,T,C,z)}freshBind(i,l,p,_,b,T,C){let z;const R=i.numAttributes,U=this.context,Z=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C;else{z=U.currentNumAttributes||0;for(let K=R;K<z;K++)Z.disableVertexAttribArray(K)}l.enableAttributes(Z,i);for(const K of p)K.enableAttributes(Z,i);T&&T.enableAttributes(Z,i),C&&C.enableAttributes(Z,i),l.bind(),l.setVertexAttribPointers(Z,i,b);for(const K of p)K.bind(),K.setVertexAttribPointers(Z,i,b);T&&(T.bind(),T.setVertexAttribPointers(Z,i,b)),_&&_.bind(),C&&(C.bind(),C.setVertexAttribPointers(Z,i,b)),U.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Un(f){const i=[];for(let l=0;l<f.length;l++){if(f[l]===null)continue;const p=f[l].split(" ");i.push(p.pop())}return i}class Ul{constructor(i,l,p,_,b,T){const C=i.gl;this.program=C.createProgram();const z=Un(p.staticAttributes),R=_?_.getBinderAttributes():[],U=z.concat(R),Z=p.staticUniforms?Un(p.staticUniforms):[],K=_?_.getBinderUniforms():[],se=Z.concat(K),Y=[];for(const ze of se)Y.indexOf(ze)<0&&Y.push(ze);const oe=_?_.defines():[];T&&oe.push("#define OVERDRAW_INSPECTOR;");const _e=oe.concat(Mo.prelude.fragmentSource,p.fragmentSource).join(`
`),ye=oe.concat(Mo.prelude.vertexSource,p.vertexSource).join(`
`),we=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(we,_e),C.compileShader(we),C.attachShader(this.program,we);const ve=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(ve,ye),C.compileShader(ve),C.attachShader(this.program,ve),this.attributes={};const Ue={};this.numAttributes=U.length;for(let ze=0;ze<this.numAttributes;ze++)U[ze]&&(C.bindAttribLocation(this.program,ze,U[ze]),this.attributes[U[ze]]=ze);C.linkProgram(this.program),C.deleteShader(ve),C.deleteShader(we);for(let ze=0;ze<Y.length;ze++){const De=Y[ze];if(De&&!Ue[De]){const We=C.getUniformLocation(this.program,De);We&&(Ue[De]=We)}}this.fixedUniforms=b(i,Ue),this.binderUniforms=_?_.getUniforms(i,Ue):[]}draw(i,l,p,_,b,T,C,z,R,U,Z,K,se,Y,oe,_e){const ye=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(_),i.setColorMode(b),i.setCullFace(T);for(const ve in this.fixedUniforms)this.fixedUniforms[ve].set(C[ve]);Y&&Y.setUniforms(i,this.binderUniforms,K,{zoom:se});const we={[ye.LINES]:2,[ye.TRIANGLES]:3,[ye.LINE_STRIP]:1}[l];for(const ve of Z.get()){const Ue=ve.vaos||(ve.vaos={});(Ue[z]||(Ue[z]=new Kt)).bind(i,this,R,Y?Y.getPaintVertexBuffers():[],U,ve.vertexOffset,oe,_e),ye.drawElements(l,ve.primitiveLength*we,ye.UNSIGNED_SHORT,ve.primitiveOffset*we*2)}}}function As(f,i,l){const p=1/ci(l,1,i.transform.tileZoom),_=Math.pow(2,l.tileID.overscaledZ),b=l.tileSize*Math.pow(2,i.transform.tileZoom)/_,T=b*(l.tileID.canonical.x+l.tileID.wrap*_),C=b*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const Ji=(f,i,l,p)=>{const _=i.style.light,b=_.properties.get("position"),T=[b.x,b.y,b.z],C=function(){var R=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();_.properties.get("anchor")==="viewport"&&function(R,U){var Z=Math.sin(U),K=Math.cos(U);R[0]=K,R[1]=Z,R[2]=0,R[3]=-Z,R[4]=K,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(C,-i.transform.angle),function(R,U,Z){var K=U[0],se=U[1],Y=U[2];R[0]=K*Z[0]+se*Z[3]+Y*Z[6],R[1]=K*Z[1]+se*Z[4]+Y*Z[7],R[2]=K*Z[2]+se*Z[5]+Y*Z[8]}(T,T,C);const z=_.properties.get("color");return{u_matrix:f,u_lightpos:T,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+l,u_opacity:p}},Vl=(f,i,l,p,_,b,T)=>u.extend(Ji(f,i,l,p),As(b,i,T),{u_height_factor:-Math.pow(2,_.overscaledZ)/T.tileSize/8}),Ms=f=>({u_matrix:f}),po=(f,i,l,p)=>u.extend(Ms(f),As(l,i,p)),Kn=(f,i)=>({u_matrix:f,u_world:i}),Lo=(f,i,l,p,_)=>u.extend(po(f,i,l,p),{u_world:_}),Ar=(f,i,l,p)=>{const _=f.transform;let b,T;if(p.paint.get("circle-pitch-alignment")==="map"){const C=ci(l,1,_.zoom);b=!0,T=[C,C]}else b=!1,T=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(i.posMatrix,l,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:T}},Do=(f,i,l)=>{const p=ci(l,1,i.zoom),_=Math.pow(2,i.zoom-l.tileID.overscaledZ),b=l.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*_),i.pixelsToGLUnits[1]/(p*_)],u_overscale_factor:b}},Ro=(f,i,l=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:l}),fo=f=>({u_matrix:f}),Ls=(f,i,l,p)=>({u_matrix:f,u_extrude_scale:ci(i,1,l),u_intensity:p});function Ds(f,i){const l=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.MercatorCoordinate(0,p/l).toLngLat().lat,new u.MercatorCoordinate(0,(p+1)/l).toLngLat().lat]}const Bo=(f,i,l)=>{const p=f.transform;return{u_matrix:aa(f,i,l),u_ratio:1/ci(i,1,p.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Rs=(f,i,l,p)=>u.extend(Bo(f,i,l),{u_image:0,u_image_height:p}),is=(f,i,l,p)=>{const _=f.transform,b=Bs(i,_);return{u_matrix:aa(f,i,l),u_texsize:i.imageAtlasTexture.size,u_ratio:1/ci(i,1,_.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[b,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Vn=(f,i,l,p,_)=>{const b=f.lineAtlas,T=Bs(i,f.transform),C=l.layout.get("line-cap")==="round",z=b.getDash(p.from,C),R=b.getDash(p.to,C),U=z.width*_.fromScale,Z=R.width*_.toScale;return u.extend(Bo(f,i,l),{u_patternscale_a:[T/U,-z.height/2],u_patternscale_b:[T/Z,-R.height/2],u_sdfgamma:b.width/(256*Math.min(U,Z)*f.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:R.y,u_mix:_.t})};function Bs(f,i){return 1/ci(f,1,i.tileZoom)}function aa(f,i,l){return f.translatePosMatrix(i.tileID.posMatrix,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Mu=(f,i,l,p,_)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(T=_.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(b=_.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Gt(_.paint.get("raster-hue-rotate"))};var b,T};function Gt(f){f*=Math.PI/180;const i=Math.sin(f),l=Math.cos(f);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const Qi=(f,i,l,p,_,b,T,C,z,R)=>{const U=_.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:U.width/U.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+z,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},Pn=(f,i,l,p,_,b,T,C,z,R,U)=>{const Z=_.transform;return u.extend(Qi(f,i,l,p,_,b,T,C,z,R),{u_gamma_scale:p?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:_.pixelRatio,u_is_halo:+U})},Lu=(f,i,l,p,_,b,T,C,z,R)=>u.extend(Pn(f,i,l,p,_,b,T,C,!0,z,!0),{u_texsize_icon:R,u_texture_icon:1}),$l=(f,i,l)=>({u_matrix:f,u_opacity:i,u_color:l}),la=(f,i,l,p,_,b)=>u.extend(function(T,C,z,R){const U=z.imageManager.getPattern(T.from.toString()),Z=z.imageManager.getPattern(T.to.toString()),{width:K,height:se}=z.imageManager.getPixelSize(),Y=Math.pow(2,R.tileID.overscaledZ),oe=R.tileSize*Math.pow(2,z.transform.tileZoom)/Y,_e=oe*(R.tileID.canonical.x+R.tileID.wrap*Y),ye=oe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[K,se],u_mix:C.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/ci(R,1,z.transform.tileZoom),u_pixel_coord_upper:[_e>>16,ye>>16],u_pixel_coord_lower:[65535&_e,65535&ye]}}(p,b,l,_),{u_matrix:f,u_opacity:i}),ua={fillExtrusion:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_lightpos:new u.Uniform3f(f,i.u_lightpos),u_lightintensity:new u.Uniform1f(f,i.u_lightintensity),u_lightcolor:new u.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(f,i.u_vertical_gradient),u_opacity:new u.Uniform1f(f,i.u_opacity)}),fillExtrusionPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_lightpos:new u.Uniform3f(f,i.u_lightpos),u_lightintensity:new u.Uniform1f(f,i.u_lightintensity),u_lightcolor:new u.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new u.Uniform1f(f,i.u_height_factor),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade),u_opacity:new u.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(f,i.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(f,i.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),collisionBox:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(f,i.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(f,i.u_extrude_scale),u_overscale_factor:new u.Uniform1f(f,i.u_overscale_factor)}),collisionCircle:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new u.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new u.UniformColor(f,i.u_color),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_overlay:new u.Uniform1i(f,i.u_overlay),u_overlay_scale:new u.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new u.Uniform1f(f,i.u_extrude_scale),u_intensity:new u.Uniform1f(f,i.u_intensity),u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),heatmapTexture:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world),u_image:new u.Uniform1i(f,i.u_image),u_color_ramp:new u.Uniform1i(f,i.u_color_ramp),u_opacity:new u.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_latrange:new u.Uniform2f(f,i.u_latrange),u_light:new u.Uniform2f(f,i.u_light),u_shadow:new u.UniformColor(f,i.u_shadow),u_highlight:new u.UniformColor(f,i.u_highlight),u_accent:new u.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_dimension:new u.Uniform2f(f,i.u_dimension),u_zoom:new u.Uniform1f(f,i.u_zoom),u_unpack:new u.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels)}),lineGradient:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_image:new u.Uniform1i(f,i.u_image),u_image_height:new u.Uniform1f(f,i.u_image_height)}),linePattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_texsize:new u.Uniform2f(f,i.u_texsize),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_image:new u.Uniform1i(f,i.u_image),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),lineSDF:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(f,i.u_patternscale_a),u_patternscale_b:new u.Uniform2f(f,i.u_patternscale_b),u_sdfgamma:new u.Uniform1f(f,i.u_sdfgamma),u_image:new u.Uniform1i(f,i.u_image),u_tex_y_a:new u.Uniform1f(f,i.u_tex_y_a),u_tex_y_b:new u.Uniform1f(f,i.u_tex_y_b),u_mix:new u.Uniform1f(f,i.u_mix)}),raster:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new u.Uniform2f(f,i.u_tl_parent),u_scale_parent:new u.Uniform1f(f,i.u_scale_parent),u_buffer_scale:new u.Uniform1f(f,i.u_buffer_scale),u_fade_t:new u.Uniform1f(f,i.u_fade_t),u_opacity:new u.Uniform1f(f,i.u_opacity),u_image0:new u.Uniform1i(f,i.u_image0),u_image1:new u.Uniform1i(f,i.u_image1),u_brightness_low:new u.Uniform1f(f,i.u_brightness_low),u_brightness_high:new u.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new u.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new u.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new u.Uniform3f(f,i.u_spin_weights)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texture:new u.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texture:new u.Uniform1i(f,i.u_texture),u_gamma_scale:new u.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texsize_icon:new u.Uniform2f(f,i.u_texsize_icon),u_texture:new u.Uniform1i(f,i.u_texture),u_texture_icon:new u.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new u.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_opacity:new u.Uniform1f(f,i.u_opacity),u_color:new u.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_opacity:new u.Uniform1f(f,i.u_opacity),u_image:new u.Uniform1i(f,i.u_image),u_pattern_tl_a:new u.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(f,i.u_pattern_br_b),u_texsize:new u.Uniform2f(f,i.u_texsize),u_mix:new u.Uniform1f(f,i.u_mix),u_pattern_size_a:new u.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new u.Uniform1f(f,i.u_scale_a),u_scale_b:new u.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(f,i.u_tile_units_to_pixels)})};class mo{constructor(i,l,p){this.context=i;const _=i.gl;this.buffer=_.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ca={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fs{constructor(i,l,p,_){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=_,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let p=0;p<this.attributes.length;p++){const _=l.attributes[this.attributes[p].name];_!==void 0&&i.enableVertexAttribArray(_)}}setVertexAttribPointers(i,l,p){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],T=l.attributes[b.name];T!==void 0&&i.vertexAttribPointer(T,b.components,i[ca[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rs extends Bt{getDefault(){return u.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Os extends Bt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ha extends Bt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Zl extends Bt{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ri extends Bt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class jl extends Bt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class da extends Bt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class rn extends Bt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Gl extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class er extends Bt{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Fo extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ya extends Bt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Wl extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class Ns extends Bt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Du extends Bt{getDefault(){return u.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ql extends Bt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Us extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class $c extends Bt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Hl extends Bt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Zc extends Bt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Hr extends Bt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class jc extends Bt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ru extends Bt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Xr extends Bt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ja extends Bt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class os extends Bt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Bu extends Bt{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Fu extends Bt{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class pa extends Bt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ss extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Xl extends Bt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Oo extends Bt{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class go extends Oo{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class No extends Oo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Kl{constructor(i,l,p,_){this.context=i,this.width=l,this.height=p;const b=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new go(i,b),_&&(this.depthAttachment=new No(i,b))}destroy(){const i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Mt{constructor(i,l,p){this.blendFunction=i,this.blendColor=l,this.mask=p}}Mt.Replace=[1,0],Mt.disabled=new Mt(Mt.Replace,u.Color.transparent,[!1,!1,!1,!1]),Mt.unblended=new Mt(Mt.Replace,u.Color.transparent,[!0,!0,!0,!0]),Mt.alphaBlended=new Mt([1,771],u.Color.transparent,[!0,!0,!0,!0]);class mr{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rs(this),this.clearDepth=new Os(this),this.clearStencil=new ha(this),this.colorMask=new Zl(this),this.depthMask=new Ri(this),this.stencilMask=new jl(this),this.stencilFunc=new da(this),this.stencilOp=new rn(this),this.stencilTest=new Gl(this),this.depthRange=new er(this),this.depthTest=new Fo(this),this.depthFunc=new Ya(this),this.blend=new Wl(this),this.blendFunc=new Ns(this),this.blendColor=new Du(this),this.blendEquation=new ql(this),this.cullFace=new Us(this),this.cullFaceSide=new $c(this),this.frontFace=new Hl(this),this.program=new Zc(this),this.activeTexture=new Hr(this),this.viewport=new jc(this),this.bindFramebuffer=new Ru(this),this.bindRenderbuffer=new Xr(this),this.bindTexture=new Ja(this),this.bindVertexBuffer=new os(this),this.bindElementBuffer=new Bu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Fu(this),this.pixelStoreUnpack=new pa(this),this.pixelStoreUnpackPremultiplyAlpha=new ss(this),this.pixelStoreUnpackFlipY=new Xl(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new mo(this,i,l)}createVertexBuffer(i,l,p){return new Fs(this,i,l,p)}createRenderbuffer(i,l,p){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,i,l,p),this.bindRenderbuffer.set(null),b}createFramebuffer(i,l,p){return new Kl(this,i,l,p)}clear({color:i,depth:l}){const p=this.gl;let _=0;i&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){q(i.blendFunction,Mt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class dn{constructor(i,l,p){this.func=i,this.mask=l,this.range=p}}dn.ReadOnly=!1,dn.ReadWrite=!0,dn.disabled=new dn(519,dn.ReadOnly,[0,1]);const Qa=7680;class zn{constructor(i,l,p,_,b,T){this.test=i,this.ref=l,this.mask=p,this.fail=_,this.depthFail=b,this.pass=T}}zn.disabled=new zn({func:519,mask:0},0,0,Qa,Qa,Qa);class qn{constructor(i,l,p){this.enable=i,this.mode=l,this.frontFace=p}}let Vs;function fa(f,i,l,p,_,b,T){const C=f.context,z=C.gl,R=f.useProgram("collisionBox"),U=[];let Z=0,K=0;for(let ve=0;ve<p.length;ve++){const Ue=p[ve],ze=i.getTile(Ue),De=ze.getBucket(l);if(!De)continue;let We=Ue.posMatrix;_[0]===0&&_[1]===0||(We=f.translatePosMatrix(Ue.posMatrix,ze,_,b));const Je=T?De.textCollisionBox:De.iconCollisionBox,Oe=De.collisionCircleArray;if(Oe.length>0){const mt=u.create(),nt=We;u.mul(mt,De.placementInvProjMatrix,f.transform.glCoordMatrix),u.mul(mt,mt,De.placementViewportMatrix),U.push({circleArray:Oe,circleOffset:K,transform:nt,invTransform:mt}),Z+=Oe.length/4,K=Z}Je&&R.draw(C,z.LINES,dn.disabled,zn.disabled,f.colorModeForRenderPass(),qn.disabled,Do(We,f.transform,ze),l.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,f.transform.zoom,null,null,Je.collisionVertexBuffer)}if(!T||!U.length)return;const se=f.useProgram("collisionCircle"),Y=new u.CollisionCircleLayoutArray;Y.resize(4*Z),Y._trim();let oe=0;for(const ve of U)for(let Ue=0;Ue<ve.circleArray.length/4;Ue++){const ze=4*Ue,De=ve.circleArray[ze+0],We=ve.circleArray[ze+1],Je=ve.circleArray[ze+2],Oe=ve.circleArray[ze+3];Y.emplace(oe++,De,We,Je,Oe,0),Y.emplace(oe++,De,We,Je,Oe,1),Y.emplace(oe++,De,We,Je,Oe,2),Y.emplace(oe++,De,We,Je,Oe,3)}(!Vs||Vs.length<2*Z)&&(Vs=function(ve){const Ue=2*ve,ze=new u.QuadTriangleArray;ze.resize(Ue),ze._trim();for(let De=0;De<Ue;De++){const We=6*De;ze.uint16[We+0]=4*De+0,ze.uint16[We+1]=4*De+1,ze.uint16[We+2]=4*De+2,ze.uint16[We+3]=4*De+2,ze.uint16[We+4]=4*De+3,ze.uint16[We+5]=4*De+0}return ze}(Z));const _e=C.createIndexBuffer(Vs,!0),ye=C.createVertexBuffer(Y,u.collisionCircleLayout.members,!0);for(const ve of U){const Ue={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(we=f.transform).cameraToCenterDistance,u_viewport_size:[we.width,we.height]};se.draw(C,z.TRIANGLES,dn.disabled,zn.disabled,f.colorModeForRenderPass(),qn.disabled,Ue,l.id,ye,_e,u.SegmentVector.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,f.transform.zoom,null,null,null)}var we;ye.destroy(),_e.destroy()}qn.disabled=new qn(!1,1029,2305),qn.backCCW=new qn(!0,1029,2305);const Gc=u.identity(new Float32Array(16));function Yl(f,i,l,p,_,b){const{horizontalAlign:T,verticalAlign:C}=u.getAnchorAlignment(f),z=-(T-.5)*i,R=-(C-.5)*l,U=u.evaluateVariableOffset(f,p);return new u.pointGeometry((z/_+U[0])*b,(R/_+U[1])*b)}function ma(f,i,l,p,_,b,T,C,z,R){const U=f.text.placedSymbolArray,Z=f.text.dynamicLayoutVertexArray,K=f.icon.dynamicLayoutVertexArray,se={};Z.clear();for(let Y=0;Y<U.length;Y++){const oe=U.get(Y),_e=f.allowVerticalPlacement&&!oe.placedOrientation,ye=oe.hidden||!oe.crossTileID||_e?null:p[oe.crossTileID];if(ye){const we=new u.pointGeometry(oe.anchorX,oe.anchorY),ve=vn(we,l?T:b),Ue=Xe(_.cameraToCenterDistance,ve.signedDistanceFromCamera);let ze=u.evaluateSizeForFeature(f.textSizeData,z,oe)*Ue/u.ONE_EM;l&&(ze*=f.tilePixelRatio/C);const{width:De,height:We,anchor:Je,textOffset:Oe,textBoxScale:mt}=ye,nt=Yl(Je,De,We,Oe,mt,ze),Dt=l?vn(we.add(nt),b).point:ve.point.add(i?nt.rotate(-_.angle):nt),un=f.allowVerticalPlacement&&oe.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let Jt=0;Jt<oe.numGlyphs;Jt++)u.addDynamicAttributes(Z,Dt,un);R&&oe.associatedIconIndex>=0&&(se[oe.associatedIconIndex]={shiftedAnchor:Dt,angle:un})}else ii(oe.numGlyphs,Z)}if(R){K.clear();const Y=f.icon.placedSymbolArray;for(let oe=0;oe<Y.length;oe++){const _e=Y.get(oe);if(_e.hidden)ii(_e.numGlyphs,K);else{const ye=se[oe];if(ye)for(let we=0;we<_e.numGlyphs;we++)u.addDynamicAttributes(K,ye.shiftedAnchor,ye.angle);else ii(_e.numGlyphs,K)}}f.icon.dynamicLayoutVertexBuffer.updateData(K)}f.text.dynamicLayoutVertexBuffer.updateData(Z)}function el(f,i,l){return l.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Gi(f,i,l,p,_,b,T,C,z,R,U,Z){const K=f.context,se=K.gl,Y=f.transform,oe=C==="map",_e=z==="map",ye=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",we=oe&&!_e&&!ye,ve=!l.layout.get("symbol-sort-key").isConstant();let Ue=!1;const ze=f.depthModeForSublayer(0,dn.ReadOnly),De=l.layout.get("text-variable-anchor"),We=[];for(const Je of p){const Oe=i.getTile(Je),mt=Oe.getBucket(l);if(!mt)continue;const nt=_?mt.text:mt.icon;if(!nt||!nt.segments.get().length)continue;const Dt=nt.programConfigurations.get(l.id),un=_||mt.sdfIcons,Jt=_?mt.textSizeData:mt.iconSizeData,sn=_e||Y.pitch!==0,Jn=f.useProgram(el(un,_,mt),Dt),Zt=u.evaluateSizeForZoom(Jt,Y.zoom);let pn,kn,Fi,Rr,eo=[0,0],to=null;if(_){if(kn=Oe.glyphAtlasTexture,Fi=se.LINEAR,pn=Oe.glyphAtlasTexture.size,mt.iconsInText){eo=Oe.imageAtlasTexture.size,to=Oe.imageAtlasTexture;const $o=Jt.kind==="composite"||Jt.kind==="camera";Rr=sn||f.options.rotating||f.options.zooming||$o?se.LINEAR:se.NEAREST}}else{const $o=l.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;kn=Oe.imageAtlasTexture,Fi=un||f.options.rotating||f.options.zooming||$o||sn?se.LINEAR:se.NEAREST,pn=Oe.imageAtlasTexture.size}const Js=ci(Oe,1,f.transform.zoom),yr=Wn(Je.posMatrix,_e,oe,f.transform,Js),Vo=dr(Je.posMatrix,_e,oe,f.transform,Js),Pa=De&&mt.hasTextData(),Br=l.layout.get("icon-text-fit")!=="none"&&Pa&&mt.hasIconData();if(ye){const $o=l.layout.get("text-rotation-alignment")==="map";Ft(mt,Je.posMatrix,f,_,yr,Vo,_e,R,$o)}const fn=f.translatePosMatrix(Je.posMatrix,Oe,b,T),wn=ye||_&&De||Br?Gc:yr,_i=f.translatePosMatrix(Vo,Oe,b,T,!0),ir=un&&l.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $n;$n=un?mt.iconsInText?Lu(Jt.kind,Zt,we,_e,f,fn,wn,_i,pn,eo):Pn(Jt.kind,Zt,we,_e,f,fn,wn,_i,_,pn,!0):Qi(Jt.kind,Zt,we,_e,f,fn,wn,_i,_,pn);const ka={program:Jn,buffers:nt,uniformValues:$n,atlasTexture:kn,atlasTextureIcon:to,atlasInterpolation:Fi,atlasInterpolationIcon:Rr,isSDF:un,hasHalo:ir};if(ve&&mt.canOverlap){Ue=!0;const $o=nt.segments.get();for(const Zu of $o)We.push({segments:new u.SegmentVector([Zu]),sortKey:Zu.sortKey,state:ka})}else We.push({segments:nt.segments,sortKey:0,state:ka})}Ue&&We.sort((Je,Oe)=>Je.sortKey-Oe.sortKey);for(const Je of We){const Oe=Je.state;if(K.activeTexture.set(se.TEXTURE0),Oe.atlasTexture.bind(Oe.atlasInterpolation,se.CLAMP_TO_EDGE),Oe.atlasTextureIcon&&(K.activeTexture.set(se.TEXTURE1),Oe.atlasTextureIcon&&Oe.atlasTextureIcon.bind(Oe.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Oe.isSDF){const mt=Oe.uniformValues;Oe.hasHalo&&(mt.u_is_halo=1,_o(Oe.buffers,Je.segments,l,f,Oe.program,ze,U,Z,mt)),mt.u_is_halo=0}_o(Oe.buffers,Je.segments,l,f,Oe.program,ze,U,Z,Oe.uniformValues)}}function _o(f,i,l,p,_,b,T,C,z){const R=p.context;_.draw(R,R.gl.TRIANGLES,b,T,C,qn.disabled,z,l.id,f.layoutVertexBuffer,f.indexBuffer,i,l.paint,p.transform.zoom,f.programConfigurations.get(l.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Jl(f,i,l,p,_,b,T){const C=f.context.gl,z=l.paint.get("fill-pattern"),R=z&&z.constantOr(1),U=l.getCrossfadeParameters();let Z,K,se,Y,oe;T?(K=R&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=C.LINES):(K=R?"fillPattern":"fill",Z=C.TRIANGLES);for(const _e of p){const ye=i.getTile(_e);if(R&&!ye.patternsLoaded())continue;const we=ye.getBucket(l);if(!we)continue;const ve=we.programConfigurations.get(l.id),Ue=f.useProgram(K,ve);R&&(f.context.activeTexture.set(C.TEXTURE0),ye.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ve.updatePaintBuffers(U));const ze=z.constantOr(null);if(ze&&ye.imageAtlas){const We=ye.imageAtlas,Je=We.patternPositions[ze.to.toString()],Oe=We.patternPositions[ze.from.toString()];Je&&Oe&&ve.setConstantPatternPositions(Je,Oe)}const De=f.translatePosMatrix(_e.posMatrix,ye,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){Y=we.indexBuffer2,oe=we.segments2;const We=[C.drawingBufferWidth,C.drawingBufferHeight];se=K==="fillOutlinePattern"&&R?Lo(De,f,U,ye,We):Kn(De,We)}else Y=we.indexBuffer,oe=we.segments,se=R?po(De,f,U,ye):Ms(De);Ue.draw(f.context,Z,_,f.stencilModeForClipping(_e),b,qn.disabled,se,l.id,we.layoutVertexBuffer,Y,oe,l.paint,f.transform.zoom,ve)}}function Mr(f,i,l,p,_,b,T){const C=f.context,z=C.gl,R=l.paint.get("fill-extrusion-pattern"),U=R.constantOr(1),Z=l.getCrossfadeParameters(),K=l.paint.get("fill-extrusion-opacity");for(const se of p){const Y=i.getTile(se),oe=Y.getBucket(l);if(!oe)continue;const _e=oe.programConfigurations.get(l.id),ye=f.useProgram(U?"fillExtrusionPattern":"fillExtrusion",_e);U&&(f.context.activeTexture.set(z.TEXTURE0),Y.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),_e.updatePaintBuffers(Z));const we=R.constantOr(null);if(we&&Y.imageAtlas){const De=Y.imageAtlas,We=De.patternPositions[we.to.toString()],Je=De.patternPositions[we.from.toString()];We&&Je&&_e.setConstantPatternPositions(We,Je)}const ve=f.translatePosMatrix(se.posMatrix,Y,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ue=l.paint.get("fill-extrusion-vertical-gradient"),ze=U?Vl(ve,f,Ue,K,se,Z,Y):Ji(ve,f,Ue,K);ye.draw(C,C.gl.TRIANGLES,_,b,T,qn.backCCW,ze,l.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,l.paint,f.transform.zoom,_e)}}function tl(f,i,l,p,_,b){const T=f.context,C=T.gl,z=i.fbo;if(!z)return;const R=f.useProgram("hillshade");T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,z.colorAttachment.get());const U=((Z,K,se)=>{const Y=se.paint.get("hillshade-shadow-color"),oe=se.paint.get("hillshade-highlight-color"),_e=se.paint.get("hillshade-accent-color");let ye=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=Z.transform.angle);const we=!Z.options.moving;return{u_matrix:Z.transform.calculatePosMatrix(K.tileID.toUnwrapped(),we),u_image:0,u_latrange:Ds(0,K.tileID),u_light:[se.paint.get("hillshade-exaggeration"),ye],u_shadow:Y,u_highlight:oe,u_accent:_e}})(f,i,l);R.draw(T,C.TRIANGLES,p,_,b,qn.disabled,U,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function Ii(f,i,l,p,_,b){const T=f.context,C=T.gl,z=i.dem;if(z&&z.data){const R=z.dim,U=z.stride,Z=z.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(U),i.demTexture){const se=i.demTexture;se.update(Z,{premultiply:!1}),se.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new te(T,Z,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let K=i.fbo;if(!K){const se=new te(T,{width:R,height:R,data:null},C.RGBA);se.bind(C.LINEAR,C.CLAMP_TO_EDGE),K=i.fbo=T.createFramebuffer(R,R,!0),K.colorAttachment.set(se.texture)}T.bindFramebuffer.set(K.framebuffer),T.viewport.set([0,0,R,R]),f.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,p,_,b,qn.disabled,((se,Y)=>{const oe=Y.stride,_e=u.create();return u.ortho(_e,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(_e,_e,[0,-u.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[oe,oe],u_zoom:se.overscaledZ,u_unpack:Y.getUnpackVector()}})(i.tileID,z),l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ou(f,i,l,p,_){const b=p.paint.get("raster-fade-duration");if(b>0){const T=u.exported.now(),C=(T-f.timeAdded)/b,z=i?(T-i.timeAdded)/b:-1,R=l.getSource(),U=_.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-U)>Math.abs(f.tileID.overscaledZ-U),K=Z&&f.refreshedUponExpiration?1:u.clamp(Z?C:1-z,0,1);return f.refreshedUponExpiration&&C>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const $s=new u.Color(1,0,0,1),Ql=new u.Color(0,1,0,1),yo=new u.Color(0,0,1,1),nl=new u.Color(1,0,1,1),Kr=new u.Color(0,1,1,1);function ga(f,i,l,p){Zs(f,0,i+l/2,f.transform.width,l,p)}function il(f,i,l,p){Zs(f,i-l/2,0,l,f.transform.height,p)}function Zs(f,i,l,p,_,b){const T=f.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*f.pixelRatio,l*f.pixelRatio,p*f.pixelRatio,_*f.pixelRatio),T.clear({color:b}),C.disable(C.SCISSOR_TEST)}function Nu(f,i,l){const p=f.context,_=p.gl,b=l.posMatrix,T=f.useProgram("debug"),C=dn.disabled,z=zn.disabled,R=f.colorModeForRenderPass(),U="$debug";p.activeTexture.set(_.TEXTURE0),f.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),T.draw(p,_.LINE_STRIP,C,z,R,qn.disabled,Ro(b,u.Color.red),U,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);const Z=i.getTileByID(l.key).latestRawTileData,K=Math.floor((Z&&Z.byteLength||0)/1024),se=i.getTile(l).tileSize,Y=512/Math.min(se,512)*(l.overscaledZ/f.transform.zoom)*.5;let oe=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(oe+=` => ${l.overscaledZ}`),function(_e,ye){_e.initDebugOverlayCanvas();const we=_e.debugOverlayCanvas,ve=_e.context.gl,Ue=_e.debugOverlayCanvas.getContext("2d");Ue.clearRect(0,0,we.width,we.height),Ue.shadowColor="white",Ue.shadowBlur=2,Ue.lineWidth=1.5,Ue.strokeStyle="white",Ue.textBaseline="top",Ue.font="bold 36px Open Sans, sans-serif",Ue.fillText(ye,5,5),Ue.strokeText(ye,5,5),_e.debugOverlayTexture.update(we),_e.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(f,`${oe} ${K}kb`),T.draw(p,_.TRIANGLES,C,z,Mt.alphaBlended,qn.disabled,Ro(b,u.Color.transparent,Y),U,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}const tr={symbol:function(f,i,l,p,_){if(f.renderPass!=="translucent")return;const b=zn.disabled,T=f.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(C,z,R,U,Z,K,se){const Y=z.transform,oe=Z==="map",_e=K==="map";for(const ye of C){const we=U.getTile(ye),ve=we.getBucket(R);if(!ve||!ve.text||!ve.text.segments.get().length)continue;const Ue=u.evaluateSizeForZoom(ve.textSizeData,Y.zoom),ze=ci(we,1,z.transform.zoom),De=Wn(ye.posMatrix,_e,oe,z.transform,ze),We=R.layout.get("icon-text-fit")!=="none"&&ve.hasIconData();if(Ue){const Je=Math.pow(2,Y.zoom-we.tileID.overscaledZ);ma(ve,oe,_e,se,Y,De,ye.posMatrix,Je,Ue,We)}}}(p,f,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),_),l.paint.get("icon-opacity").constantOr(1)!==0&&Gi(f,i,l,p,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),b,T),l.paint.get("text-opacity").constantOr(1)!==0&&Gi(f,i,l,p,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),b,T),i.map.showCollisionBoxes&&(fa(f,i,l,p,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),fa(f,i,l,p,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,l,p){if(f.renderPass!=="translucent")return;const _=l.paint.get("circle-opacity"),b=l.paint.get("circle-stroke-width"),T=l.paint.get("circle-stroke-opacity"),C=!l.layout.get("circle-sort-key").isConstant();if(_.constantOr(1)===0&&(b.constantOr(1)===0||T.constantOr(1)===0))return;const z=f.context,R=z.gl,U=f.depthModeForSublayer(0,dn.ReadOnly),Z=zn.disabled,K=f.colorModeForRenderPass(),se=[];for(let Y=0;Y<p.length;Y++){const oe=p[Y],_e=i.getTile(oe),ye=_e.getBucket(l);if(!ye)continue;const we=ye.programConfigurations.get(l.id),ve={programConfiguration:we,program:f.useProgram("circle",we),layoutVertexBuffer:ye.layoutVertexBuffer,indexBuffer:ye.indexBuffer,uniformValues:Ar(f,oe,_e,l)};if(C){const Ue=ye.segments.get();for(const ze of Ue)se.push({segments:new u.SegmentVector([ze]),sortKey:ze.sortKey,state:ve})}else se.push({segments:ye.segments,sortKey:0,state:ve})}C&&se.sort((Y,oe)=>Y.sortKey-oe.sortKey);for(const Y of se){const{programConfiguration:oe,program:_e,layoutVertexBuffer:ye,indexBuffer:we,uniformValues:ve}=Y.state;_e.draw(z,R.TRIANGLES,U,Z,K,qn.disabled,ve,l.id,ye,we,Y.segments,l.paint,f.transform.zoom,oe)}},heatmap:function(f,i,l,p){if(l.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const _=f.context,b=_.gl,T=zn.disabled,C=new Mt([b.ONE,b.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(z,R,U){const Z=z.gl;z.activeTexture.set(Z.TEXTURE1),z.viewport.set([0,0,R.width/4,R.height/4]);let K=U.heatmapFbo;if(K)Z.bindTexture(Z.TEXTURE_2D,K.colorAttachment.get()),z.bindFramebuffer.set(K.framebuffer);else{const se=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,se),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),K=U.heatmapFbo=z.createFramebuffer(R.width/4,R.height/4,!1),function(Y,oe,_e,ye){const we=Y.gl;we.texImage2D(we.TEXTURE_2D,0,we.RGBA,oe.width/4,oe.height/4,0,we.RGBA,Y.extRenderToTextureHalfFloat?Y.extTextureHalfFloat.HALF_FLOAT_OES:we.UNSIGNED_BYTE,null),ye.colorAttachment.set(_e)}(z,R,se,K)}})(_,f,l),_.clear({color:u.Color.transparent});for(let z=0;z<p.length;z++){const R=p[z];if(i.hasRenderableParent(R))continue;const U=i.getTile(R),Z=U.getBucket(l);if(!Z)continue;const K=Z.programConfigurations.get(l.id),se=f.useProgram("heatmap",K),{zoom:Y}=f.transform;se.draw(_,b.TRIANGLES,dn.disabled,T,C,qn.disabled,Ls(R.posMatrix,U,Y,l.paint.get("heatmap-intensity")),l.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,l.paint,f.transform.zoom,K)}_.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(_,b){const T=_.context,C=T.gl,z=b.heatmapFbo;if(!z)return;T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,z.colorAttachment.get()),T.activeTexture.set(C.TEXTURE1);let R=b.colorRampTexture;R||(R=b.colorRampTexture=new te(T,b.colorRamp,C.RGBA)),R.bind(C.LINEAR,C.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(T,C.TRIANGLES,dn.disabled,zn.disabled,_.colorModeForRenderPass(),qn.disabled,((U,Z,K,se)=>{const Y=u.create();u.ortho(Y,0,U.width,U.height,0,0,1);const oe=U.context.gl;return{u_matrix:Y,u_world:[oe.drawingBufferWidth,oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(_,b),b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(f,l))},line:function(f,i,l,p){if(f.renderPass!=="translucent")return;const _=l.paint.get("line-opacity"),b=l.paint.get("line-width");if(_.constantOr(1)===0||b.constantOr(1)===0)return;const T=f.depthModeForSublayer(0,dn.ReadOnly),C=f.colorModeForRenderPass(),z=l.paint.get("line-dasharray"),R=l.paint.get("line-pattern"),U=R.constantOr(1),Z=l.paint.get("line-gradient"),K=l.getCrossfadeParameters(),se=U?"linePattern":z?"lineSDF":Z?"lineGradient":"line",Y=f.context,oe=Y.gl;let _e=!0;for(const ye of p){const we=i.getTile(ye);if(U&&!we.patternsLoaded())continue;const ve=we.getBucket(l);if(!ve)continue;const Ue=ve.programConfigurations.get(l.id),ze=f.context.program.get(),De=f.useProgram(se,Ue),We=_e||De.program!==ze,Je=R.constantOr(null);if(Je&&we.imageAtlas){const mt=we.imageAtlas,nt=mt.patternPositions[Je.to.toString()],Dt=mt.patternPositions[Je.from.toString()];nt&&Dt&&Ue.setConstantPatternPositions(nt,Dt)}const Oe=U?is(f,we,l,K):z?Vn(f,we,l,z,K):Z?Rs(f,we,l,ve.lineClipsArray.length):Bo(f,we,l);if(U)Y.activeTexture.set(oe.TEXTURE0),we.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Ue.updatePaintBuffers(K);else if(z&&(We||f.lineAtlas.dirty))Y.activeTexture.set(oe.TEXTURE0),f.lineAtlas.bind(Y);else if(Z){const mt=ve.gradients[l.id];let nt=mt.texture;if(l.gradientVersion!==mt.version){let Dt=256;if(l.stepInterpolant){const un=i.getSource().maxzoom,Jt=ye.canonical.z===un?Math.ceil(1<<f.transform.maxZoom-ye.canonical.z):1;Dt=u.clamp(u.nextPowerOfTwo(ve.maxLineLength/u.EXTENT*1024*Jt),256,Y.maxTextureSize)}mt.gradient=u.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:mt.gradient||void 0,clips:ve.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new te(Y,mt.gradient,oe.RGBA),mt.version=l.gradientVersion,nt=mt.texture}Y.activeTexture.set(oe.TEXTURE0),nt.bind(l.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}De.draw(Y,oe.TRIANGLES,T,f.stencilModeForClipping(ye),C,qn.disabled,Oe,l.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,l.paint,f.transform.zoom,Ue,ve.layoutVertexBuffer2),_e=!1}},fill:function(f,i,l,p){const _=l.paint.get("fill-color"),b=l.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const T=f.colorModeForRenderPass(),C=l.paint.get("fill-pattern"),z=f.opaquePassEnabledForLayer()&&!C.constantOr(1)&&_.constantOr(u.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===z){const R=f.depthModeForSublayer(1,f.renderPass==="opaque"?dn.ReadWrite:dn.ReadOnly);Jl(f,i,l,p,R,T,!1)}if(f.renderPass==="translucent"&&l.paint.get("fill-antialias")){const R=f.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,dn.ReadOnly);Jl(f,i,l,p,R,T,!0)}},"fill-extrusion":function(f,i,l,p){const _=l.paint.get("fill-extrusion-opacity");if(_!==0&&f.renderPass==="translucent"){const b=new dn(f.context.gl.LEQUAL,dn.ReadWrite,f.depthRangeFor3D);if(_!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))Mr(f,i,l,p,b,zn.disabled,Mt.disabled),Mr(f,i,l,p,b,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const T=f.colorModeForRenderPass();Mr(f,i,l,p,b,zn.disabled,T)}}},hillshade:function(f,i,l,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const _=f.context,b=f.depthModeForSublayer(0,dn.ReadOnly),T=f.colorModeForRenderPass(),[C,z]=f.renderPass==="translucent"?f.stencilConfigForOverlap(p):[{},p];for(const R of z){const U=i.getTile(R);U.needsHillshadePrepare&&f.renderPass==="offscreen"?Ii(f,U,l,b,zn.disabled,T):f.renderPass==="translucent"&&tl(f,U,l,b,C[R.overscaledZ],T)}_.viewport.set([0,0,f.width,f.height])},raster:function(f,i,l,p){if(f.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!p.length)return;const _=f.context,b=_.gl,T=i.getSource(),C=f.useProgram("raster"),z=f.colorModeForRenderPass(),[R,U]=T instanceof Qt?[{},p]:f.stencilConfigForOverlap(p),Z=U[U.length-1].overscaledZ,K=!f.options.moving;for(const se of U){const Y=f.depthModeForSublayer(se.overscaledZ-Z,l.paint.get("raster-opacity")===1?dn.ReadWrite:dn.ReadOnly,b.LESS),oe=i.getTile(se),_e=f.transform.calculatePosMatrix(se.toUnwrapped(),K);oe.registerFadeDuration(l.paint.get("raster-fade-duration"));const ye=i.findLoadedParent(se,0),we=Ou(oe,ye,i,l,f.transform);let ve,Ue;const ze=l.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;_.activeTexture.set(b.TEXTURE0),oe.texture.bind(ze,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(b.TEXTURE1),ye?(ye.texture.bind(ze,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),ve=Math.pow(2,ye.tileID.overscaledZ-oe.tileID.overscaledZ),Ue=[oe.tileID.canonical.x*ve%1,oe.tileID.canonical.y*ve%1]):oe.texture.bind(ze,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const De=Mu(_e,Ue||[0,0],ve||1,we,l);T instanceof Qt?C.draw(_,b.TRIANGLES,Y,zn.disabled,z,qn.disabled,De,l.id,T.boundsBuffer,f.quadTriangleIndexBuffer,T.boundsSegments):C.draw(_,b.TRIANGLES,Y,R[se.overscaledZ],z,qn.disabled,De,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,i,l){const p=l.paint.get("background-color"),_=l.paint.get("background-opacity");if(_===0)return;const b=f.context,T=b.gl,C=f.transform,z=C.tileSize,R=l.paint.get("background-pattern");if(f.isPatternMissing(R))return;const U=!R&&p.a===1&&_===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==U)return;const Z=zn.disabled,K=f.depthModeForSublayer(0,U==="opaque"?dn.ReadWrite:dn.ReadOnly),se=f.colorModeForRenderPass(),Y=f.useProgram(R?"backgroundPattern":"background"),oe=C.coveringTiles({tileSize:z});R&&(b.activeTexture.set(T.TEXTURE0),f.imageManager.bind(f.context));const _e=l.getCrossfadeParameters();for(const ye of oe){const we=f.transform.calculatePosMatrix(ye.toUnwrapped()),ve=R?la(we,_,f,R,{tileID:ye,tileSize:z},_e):$l(we,_,p);Y.draw(b,T.TRIANGLES,K,Z,se,qn.disabled,ve,l.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,i,l){for(let p=0;p<l.length;p++)Nu(f,i,l[p])},custom:function(f,i,l){const p=f.context,_=l.implementation;if(f.renderPass==="offscreen"){const b=_.prerender;b&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),b.call(_,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(zn.disabled);const b=_.renderingMode==="3d"?new dn(f.context.gl.LEQUAL,dn.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,dn.ReadOnly);p.setDepthMode(b),_.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class eu{constructor(i,l){this.context=new mr(i),this.transform=l,this._tileTextures={},this.setup(),this.numSublayers=Nn.maxUnderzooming+Nn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $t,this.gpuTimers={}}resize(i,l,p){if(this.width=i*p,this.height=l*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const i=this.context,l=new u.PosArray;l.emplaceBack(0,0),l.emplaceBack(u.EXTENT,0),l.emplaceBack(0,u.EXTENT),l.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(l,Ao.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const p=new u.PosArray;p.emplaceBack(0,0),p.emplaceBack(u.EXTENT,0),p.emplaceBack(0,u.EXTENT),p.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(p,Ao.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const _=new u.RasterBoundsArray;_.emplaceBack(0,0,0,0),_.emplaceBack(u.EXTENT,0,u.EXTENT,0),_.emplaceBack(0,u.EXTENT,0,u.EXTENT),_.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(_,It.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const b=new u.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,Ao.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const T=new u.LineStripIndexArray;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(T);const C=new u.TriangleIndexArray;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C),this.emptyTexture=new te(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const z=this.context.gl;this.stencilClearMode=new zn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.create();u.ortho(p,0,this.width,this.height,0,0,1),u.scale(p,p,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,l.TRIANGLES,dn.disabled,this.stencilClearMode,Mt.disabled,qn.disabled,fo(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,l){if(this.currentStencilSource===i.source||!i.isTileClipped()||!l||!l.length)return;this.currentStencilSource=i.source;const p=this.context,_=p.gl;this.nextStencilID+l.length>256&&this.clearStencil(),p.setColorMode(Mt.disabled),p.setDepthMode(dn.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of l){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++;b.draw(p,_.TRIANGLES,dn.disabled,new zn({func:_.ALWAYS,mask:0},C,255,_.KEEP,_.KEEP,_.REPLACE),Mt.disabled,qn.disabled,fo(T.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new zn({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){const l=this.context.gl;return new zn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,p=i.sort((T,C)=>C.overscaledZ-T.overscaledZ),_=p[p.length-1].overscaledZ,b=p[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const T={};for(let C=0;C<b;C++)T[C+_]=new zn({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=b,[T,p]}return[{[_]:zn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Mt([i.CONSTANT_COLOR,i.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mt.unblended:Mt.alphaBlended}depthModeForSublayer(i,l,p){if(!this.opaquePassEnabledForLayer())return dn.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new dn(p||this.context.gl.LEQUAL,l,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){this.style=i,this.options=l,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.exported.now()),this.imageManager.beginFrame();const p=this.style._order,_=this.style.sourceCaches;for(const z in _){const R=_[z];R.used&&R.prepare(this.context)}const b={},T={},C={};for(const z in _){const R=_[z];b[z]=R.getVisibleCoordinates(),T[z]=b[z].slice().reverse(),C[z]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<p.length;z++)if(this.style._layers[p[z]].is3D()){this.opaquePassCutoff=z;break}this.renderPass="offscreen";for(const z of p){const R=this.style._layers[z];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const U=T[R.source];(R.type==="custom"||U.length)&&this.renderLayer(this,_[R.source],R,U)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[p[this.currentLayer]],R=_[z.source],U=b[z.source];this._renderTileClippingMasks(z,U),this.renderLayer(this,R,z,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const z=this.style._layers[p[this.currentLayer]],R=_[z.source],U=(z.type==="symbol"?C:T)[z.source];this._renderTileClippingMasks(z,b[z.source]),this.renderLayer(this,R,z,U)}if(this.options.showTileBoundaries){let z,R;Object.values(this.style._layers).forEach(U=>{U.source&&!U.isHidden(this.transform.zoom)&&(U.source!==(R&&R.id)&&(R=this.style.sourceCaches[U.source]),(!z||z.getSource().maxzoom<R.getSource().maxzoom)&&(z=R))}),z&&tr.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const R=z.transform.padding;ga(z,z.transform.height-(R.top||0),3,$s),ga(z,R.bottom||0,3,Ql),il(z,R.left||0,3,yo),il(z,z.transform.width-(R.right||0),3,nl);const U=z.transform.centerPoint;(function(Z,K,se,Y){Zs(Z,K-1,se-10,2,20,Y),Zs(Z,K-10,se-1,20,2,Y)})(z,U.x,z.transform.height-U.y,Kr)}(this),this.context.setDefault()}renderLayer(i,l,p,_){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||_.length)&&(this.id=p.id,this.gpuTimingStart(p),tr[p.type](i,l,p,_,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),p.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const l={};for(const p in i){const _=i[p],b=this.context.extTimerQuery,T=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),l[p]=T}return l}translatePosMatrix(i,l,p,_,b){if(!p[0]&&!p[1])return i;const T=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(T){const R=Math.sin(T),U=Math.cos(T);p=[p[0]*U-p[1]*R,p[0]*R+p[1]*U]}const C=[b?p[0]:ci(l,p[0],this.transform.zoom),b?p[1]:ci(l,p[1],this.transform.zoom),0],z=new Float32Array(16);return u.translate(z,i,C),z}saveTileTexture(i){const l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const l=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!l||!p}useProgram(i,l){this.cache=this.cache||{};const p=`${i}${l?l.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[p]||(this.cache[p]=new Ul(this.context,i,Mo[i],l,ua[i],this._showOverdrawInspector)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new te(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class vo{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,p){const _=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>u.transformMat4([],C,i)).map(C=>u.scale$1([],C,1/C[3]/l*_)),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const z=function(K,se){var Y=se[0],oe=se[1],_e=se[2],ye=Y*Y+oe*oe+_e*_e;return ye>0&&(ye=1/Math.sqrt(ye)),K[0]=se[0]*ye,K[1]=se[1]*ye,K[2]=se[2]*ye,K}([],function(K,se,Y){var oe=se[0],_e=se[1],ye=se[2],we=Y[0],ve=Y[1],Ue=Y[2];return K[0]=_e*Ue-ye*ve,K[1]=ye*we-oe*Ue,K[2]=oe*ve-_e*we,K}([],ne([],b[C[0]],b[C[1]]),ne([],b[C[2]],b[C[1]]))),R=-((U=z)[0]*(Z=b[C[1]])[0]+U[1]*Z[1]+U[2]*Z[2]);var U,Z;return z.concat(R)});return new vo(b,T)}}class rl{constructor(i,l){this.min=i,this.max=l,this.center=function(p,_,b){return p[0]=.5*_[0],p[1]=.5*_[1],p[2]=.5*_[2],p}([],function(p,_,b){return p[0]=_[0]+b[0],p[1]=_[1]+b[1],p[2]=_[2]+b[2],p}([],this.min,this.max))}quadrant(i){const l=[i%2==0,i<2],p=pe(this.min),_=pe(this.max);for(let b=0;b<l.length;b++)p[b]=l[b]?this.min[b]:this.center[b],_[b]=l[b]?this.center[b]:this.max[b];return _[2]=this.max[2],new rl(p,_)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const l=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let p=!0;for(let _=0;_<i.planes.length;_++){const b=i.planes[_];let T=0;for(let C=0;C<l.length;C++)u.dot(b,l[C])>=0&&T++;if(T===0)return 0;T!==l.length&&(p=!1)}if(p)return 2;for(let _=0;_<3;_++){let b=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const z=i.points[C][_]-this.min[_];b=Math.min(b,z),T=Math.max(T,z)}if(T<0||b>this.max[_]-this.min[_])return 0}return 1}}class Wi{constructor(i=0,l=0,p=0,_=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=p,this.right=_}interpolate(i,l,p){return l.top!=null&&i.top!=null&&(this.top=u.number(i.top,l.top,p)),l.bottom!=null&&i.bottom!=null&&(this.bottom=u.number(i.bottom,l.bottom,p)),l.left!=null&&i.left!=null&&(this.left=u.number(i.left,l.left,p)),l.right!=null&&i.right!=null&&(this.right=u.number(i.right,l.right,p)),this}getCenter(i,l){const p=u.clamp((this.left+i-this.right)/2,0,i),_=u.clamp((this.top+l-this.bottom)/2,0,l);return new u.pointGeometry(p,_)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Wi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class as{constructor(i,l,p,_,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=p==null?0:p,this._maxPitch=_==null?60:_,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wi,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new as(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const l=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,_,b){var T=_[0],C=_[1],z=_[2],R=_[3],U=Math.sin(b),Z=Math.cos(b);p[0]=T*Z+z*U,p[1]=C*Z+R*U,p[2]=T*-U+z*Z,p[3]=C*-U+R*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,p){this._unmodified=!1,this._edgeInsets.interpolate(i,l,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.pointGeometry(0,0)),_=this.pointCoordinate(new u.pointGeometry(this.width,0)),b=this.pointCoordinate(new u.pointGeometry(this.width,this.height)),T=this.pointCoordinate(new u.pointGeometry(0,this.height)),C=Math.floor(Math.min(p.x,_.x,b.x,T.x)),z=Math.floor(Math.max(p.x,_.x,b.x,T.x)),R=1;for(let U=C-R;U<=z+R;U++)U!==0&&l.push(new u.UnwrappedTileID(U,i))}return l}coveringTiles(i){let l=this.coveringZoomLevel(i);const p=l;if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const _=u.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,l),T=[b*_.x,b*_.y,0],C=vo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l);let z=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(z=l);const R=Y=>({aabb:new rl([Y*b,0,0],[(Y+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Y,fullyVisible:!1}),U=[],Z=[],K=l,se=i.reparseOverscaled?p:l;if(this._renderWorldCopies)for(let Y=1;Y<=3;Y++)U.push(R(-Y)),U.push(R(Y));for(U.push(R(0));U.length>0;){const Y=U.pop(),oe=Y.x,_e=Y.y;let ye=Y.fullyVisible;if(!ye){const De=Y.aabb.intersects(C);if(De===0)continue;ye=De===2}const we=Y.aabb.distanceX(T),ve=Y.aabb.distanceY(T),Ue=Math.max(Math.abs(we),Math.abs(ve)),ze=3+(1<<K-Y.zoom)-2;if(Y.zoom===K||Ue>ze&&Y.zoom>=z)Z.push({tileID:new u.OverscaledTileID(Y.zoom===K?se:Y.zoom,Y.wrap,Y.zoom,oe,_e),distanceSq:Q([T[0]-.5-oe,T[1]-.5-_e])});else for(let De=0;De<4;De++){const We=(oe<<1)+De%2,Je=(_e<<1)+(De>>1);U.push({aabb:Y.aabb.quadrant(De),zoom:Y.zoom+1,x:We,y:Je,wrap:Y.wrap,fullyVisible:ye})}}return Z.sort((Y,oe)=>Y.distanceSq-oe.distanceSq).map(Y=>Y.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.pointGeometry(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(l)*this.worldSize)}unproject(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,l){const p=this.pointCoordinate(l),_=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),T=new u.MercatorCoordinate(b.x-(p.x-_.x),b.y-(p.y-_.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return u.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const l=[i.x,i.y,0,1],p=[i.x,i.y,1,1];u.transformMat4(l,l,this.pixelMatrixInverse),u.transformMat4(p,p,this.pixelMatrixInverse);const _=l[3],b=p[3],T=l[1]/_,C=p[1]/b,z=l[2]/_,R=p[2]/b,U=z===R?0:(0-z)/(R-z);return new u.MercatorCoordinate(u.number(l[0]/_,p[0]/b,U)/this.worldSize,u.number(T,C,U)/this.worldSize)}coordinatePoint(i){const l=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix),new u.pointGeometry(l[0]/l[3],l[1]/l[3])}getBounds(){return new u.LngLatBounds().extend(this.pointLocation(new u.pointGeometry(0,0))).extend(this.pointLocation(new u.pointGeometry(this.width,0))).extend(this.pointLocation(new u.pointGeometry(this.width,this.height))).extend(this.pointLocation(new u.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,l=!1){const p=i.key,_=l?this._alignedPosMatrixCache:this._posMatrixCache;if(_[p])return _[p];const b=i.canonical,T=this.worldSize/this.zoomScale(b.z),C=b.x+Math.pow(2,b.z)*i.wrap,z=u.identity(new Float64Array(16));return u.translate(z,z,[C*T,b.y*T,0]),u.scale(z,z,[T/u.EXTENT,T/u.EXTENT,1]),u.multiply(z,l?this.alignedProjMatrix:this.projMatrix,z),_[p]=new Float32Array(z),_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,l,p,_,b=-90,T=90,C=-180,z=180;const R=this.size,U=this._unmodified;if(this.latRange){const se=this.latRange;b=u.mercatorYfromLat(se[1])*this.worldSize,T=u.mercatorYfromLat(se[0])*this.worldSize,i=T-b<R.y?R.y/(T-b):0}if(this.lngRange){const se=this.lngRange;C=u.mercatorXfromLng(se[0])*this.worldSize,z=u.mercatorXfromLng(se[1])*this.worldSize,l=z-C<R.x?R.x/(z-C):0}const Z=this.point,K=Math.max(l||0,i||0);if(K)return this.center=this.unproject(new u.pointGeometry(l?(z+C)/2:Z.x,i?(T+b)/2:Z.y)),this.zoom+=this.scaleZoom(K),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const se=Z.y,Y=R.y/2;se-Y<b&&(_=b+Y),se+Y>T&&(_=T-Y)}if(this.lngRange){const se=Z.x,Y=R.x/2;se-Y<C&&(p=C+Y),se+Y>z&&(p=z-Y)}p===void 0&&_===void 0||(this.center=this.unproject(new u.pointGeometry(p!==void 0?p:Z.x,_!==void 0?_:Z.y))),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const l=Math.PI/2+this._pitch,p=this._fov*(.5+i.y/this.height),_=Math.sin(p)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-l-p,.01,Math.PI-.01)),b=this.point,T=b.x,C=b.y,z=1.01*(Math.cos(Math.PI/2-this._pitch)*_+this.cameraToCenterDistance),R=this.height/50;let U=new Float64Array(16);u.perspective(U,this._fov,this.width/this.height,R,z),U[8]=2*-i.x/this.width,U[9]=2*i.y/this.height,u.scale(U,U,[1,-1,1]),u.translate(U,U,[0,0,-this.cameraToCenterDistance]),u.rotateX(U,U,this._pitch),u.rotateZ(U,U,this.angle),u.translate(U,U,[-T,-C,0]),this.mercatorMatrix=u.scale([],U,[this.worldSize,this.worldSize,this.worldSize]),u.scale(U,U,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=U,this.invProjMatrix=u.invert([],this.projMatrix);const Z=this.width%2/2,K=this.height%2/2,se=Math.cos(this.angle),Y=Math.sin(this.angle),oe=T-Math.round(T)+se*Z+Y*K,_e=C-Math.round(C)+se*K+Y*Z,ye=new Float64Array(U);if(u.translate(ye,ye,[oe>.5?oe-1:oe,_e>.5?_e-1:_e,0]),this.alignedProjMatrix=ye,U=u.create(),u.scale(U,U,[this.width/2,-this.height/2,1]),u.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=u.create(),u.scale(U,U,[1,-1,1]),u.translate(U,U,[-1,-1,0]),u.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),U=u.invert(new Float64Array(16),this.pixelMatrix),!U)throw new Error("failed to invert matrix");this.pixelMatrixInverse=U,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.pointGeometry(0,0)),l=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.pointGeometry(0,i))}getCameraQueryGeometry(i){const l=this.getCameraPoint();if(i.length===1)return[i[0],l];{let p=l.x,_=l.y,b=l.x,T=l.y;for(const C of i)p=Math.min(p,C.x),_=Math.min(_,C.y),b=Math.max(b,C.x),T=Math.max(T,C.y);return[new u.pointGeometry(p,_),new u.pointGeometry(b,_),new u.pointGeometry(b,T),new u.pointGeometry(p,T),new u.pointGeometry(p,_)]}}}class tu{constructor(i){this._hashName=i&&encodeURIComponent(i),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(l,p){let _=!1,b=null;const T=()=>{b=null,_&&(l(),b=setTimeout(T,300),_=!1)};return()=>(_=!0,b||T(),b)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const l=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),T=Math.round(l.lng*b)/b,C=Math.round(l.lat*b)/b,z=this._map.getBearing(),R=this._map.getPitch();let U="";if(U+=i?`/${T}/${C}/${p}`:`${p}/${C}/${T}`,(z||R)&&(U+="/"+Math.round(10*z)/10),R&&(U+=`/${Math.round(R)}`),this._hashName){const Z=this._hashName;let K=!1;const se=window.location.hash.slice(1).split("&").map(Y=>{const oe=Y.split("=")[0];return oe===Z?(K=!0,`${oe}=${U}`):Y}).filter(Y=>Y);return K||se.push(`${Z}=${U}`),`#${se.join("&")}`}return`#${U}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(l=p)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(l=>isNaN(l))){const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:l,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const ls={linearity:.3,easing:u.bezier(0,0,.3,1)},_a=u.extend({deceleration:2500,maxSpeed:1400},ls),ol=u.extend({deceleration:20,maxSpeed:1400},ls),ya=u.extend({deceleration:1e3,maxSpeed:360},ls),Lr=u.extend({deceleration:1e3,maxSpeed:90},ls);class va{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=u.exported.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)l.zoom+=b.zoomDelta||0,l.bearing+=b.bearingDelta||0,l.pitch+=b.pitchDelta||0,b.panDelta&&l.pan._add(b.panDelta),b.around&&(l.around=b.around),b.pinchAround&&(l.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(l.pan.mag()){const b=js(l.pan.mag(),p,u.extend({},_a,i||{}));_.offset=l.pan.mult(b.amount/l.pan.mag()),_.center=this._map.transform.center,us(_,b)}if(l.zoom){const b=js(l.zoom,p,ol);_.zoom=this._map.transform.zoom+b.amount,us(_,b)}if(l.bearing){const b=js(l.bearing,p,ya);_.bearing=this._map.transform.bearing+u.clamp(b.amount,-179,179),us(_,b)}if(l.pitch){const b=js(l.pitch,p,Lr);_.pitch=this._map.transform.pitch+b.amount,us(_,b)}if(_.zoom||_.bearing){const b=l.pinchAround===void 0?l.around:l.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),u.extend(_,{noMoveStart:!0})}}function us(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function js(f,i,l){const{maxSpeed:p,linearity:_,deceleration:b}=l,T=u.clamp(f*_/(i/1e3),-p,p),C=Math.abs(T)/(b*_);return{easing:l.easing,duration:1e3*C,amount:T*(C/2)}}class nr extends u.Event{constructor(i,l,p,_={}){const b=V.mousePos(l.getCanvasContainer(),p),T=l.unproject(b);super(i,u.extend({point:b,lngLat:T,originalEvent:p},_)),this._defaultPrevented=!1,this.target=l}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ei extends u.Event{constructor(i,l,p){const _=i==="touchend"?p.changedTouches:p.touches,b=V.touchPos(l.getCanvasContainer(),_),T=b.map(z=>l.unproject(z)),C=b.reduce((z,R,U,Z)=>z.add(R.div(Z.length)),new u.pointGeometry(0,0));super(i,{points:b,point:C,lngLats:T,lngLat:l.unproject(C),originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Wc extends u.Event{constructor(i,l,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Uo{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Wc(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new nr(i.type,this._map,i))}mouseup(i){this._map.fire(new nr(i.type,this._map,i))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new nr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new nr(i.type,this._map,i))}mouseover(i){this._map.fire(new nr(i.type,this._map,i))}mouseout(i){this._map.fire(new nr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ei(i.type,this._map,i))}touchmove(i){this._map.fire(new Ei(i.type,this._map,i))}touchend(i){this._map.fire(new Ei(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ei(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Uu{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new nr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new nr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(V.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const p=l;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=V.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(_.x,p.x),T=Math.max(_.x,p.x),C=Math.min(_.y,p.y),z=Math.max(_.y,p.y);V.setTransform(this._box,`translate(${b}px,${C}px)`),this._box.style.width=T-b+"px",this._box.style.height=z-C+"px"}mouseupWindow(i,l){if(!this._active||i.button!==0)return;const p=this._startPos,_=l;if(this.reset(),V.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(p,_,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(V.remove(this._box),this._box=null),V.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new u.Event(i,{originalEvent:l}))}}function hs(f,i){const l={};for(let p=0;p<f.length;p++)l[f[p].identifier]=i[p];return l}class Yr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const b=new u.pointGeometry(0,0);for(const T of _)b._add(T);return b.div(_.length)}(l),this.touches=hs(p,l)))}touchmove(i,l,p){if(this.aborted||!this.centroid)return;const _=hs(p,l);for(const b in this.touches){const T=this.touches[b],C=_[b];(!C||C.dist(T)>30)&&(this.aborted=!0)}}touchend(i,l,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Gs{constructor(i){this.singleTap=new Yr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,l,p){this.singleTap.touchstart(i,l,p)}touchmove(i,l,p){this.singleTap.touchmove(i,l,p)}touchend(i,l,p){const _=this.singleTap.touchend(i,l,p);if(_){const b=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(_)<30;if(b&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class qc{constructor(){this._zoomIn=new Gs({numTouches:1,numTaps:2}),this._zoomOut=new Gs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,p){this._zoomIn.touchstart(i,l,p),this._zoomOut.touchstart(i,l,p)}touchmove(i,l,p){this._zoomIn.touchmove(i,l,p),this._zoomOut.touchmove(i,l,p)}touchend(i,l,p){const _=this._zoomIn.touchend(i,l,p),b=this._zoomOut.touchend(i,l,p);return _?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(_)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xa={0:1,2:2};class ds{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const p=V.mouseButton(i);this._correctButton(i,p)&&(this._lastPoint=l,this._eventButton=p)}mousemoveWindow(i,l){const p=this._lastPoint;if(p){if(i.preventDefault(),function(_,b){const T=xa[b];return _.buttons===void 0||(_.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(p,l)}}mouseupWindow(i){this._lastPoint&&V.mouseButton(i)===this._eventButton&&(this._moved&&V.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps extends ds{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class ut extends ds{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=.8*(l.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class fs extends ds{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=-.5*(l.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class wa{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.pointGeometry(0,0)}touchstart(i,l,p){return this._calculateTransform(i,l,p)}touchmove(i,l,p){if(this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,l,p)}touchend(i,l,p){this._calculateTransform(i,l,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,p){p.length>0&&(this._active=!0);const _=hs(p,l),b=new u.pointGeometry(0,0),T=new u.pointGeometry(0,0);let C=0;for(const R in _){const U=_[R],Z=this._touches[R];Z&&(b._add(U),T._add(U.sub(Z)),C++,_[R]=U)}if(this._touches=_,C<this._minTouches||!T.mag())return;const z=T.div(C);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(C),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,l,p){return{}}touchstart(i,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,p){if(!this._firstTwoTouches)return;i.preventDefault();const[_,b]=this._firstTwoTouches,T=Ws(p,l,_),C=Ws(p,l,b);if(!T||!C)return;const z=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],z,i)}touchend(i,l,p){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,T=Ws(p,l,_),C=Ws(p,l,b);T&&C||(this._active&&V.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ws(f,i,l){for(let p=0;p<f.length;p++)if(f[p].identifier===l)return i[p]}function tt(f,i){return Math.log(f/i)/Math.LN2}class nu extends gr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(tt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tt(this._distance,p),pinchAround:l}}}function Jr(f,i){return 180*f.angleWith(i)/Math.PI}class Vu extends gr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jr(this._vector,p),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,p=Jr(i,this._startVector);return Math.abs(p)<l}}function qs(f){return Math.abs(f.y)>Math.abs(f.x)}class Hs extends gr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,qs(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,p){const _=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,b,p.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}}gestureBeginsVertically(i,l,p){if(this._valid!==void 0)return this._valid;const _=i.mag()>=2,b=l.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==l.y>0;return qs(i)&&qs(l)&&T}}const $u={panStep:100,bearingStep:15,pitchStep:10};class sl{constructor(){const i=$u;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,p=0,_=0,b=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?_=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?_=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:C=>{const z=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:ba,zoom:l?Math.round(z)+l*(i.shiftKey?2:1):z,bearing:C.getBearing()+p*this._bearingStep,pitch:C.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-T*this._panStep],center:C.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ba(f){return f*(2-f)}const Sa=4.000244140625;class al{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,u.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let l=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=u.exported.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%Sa==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(_*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=V.mousePos(this._el,i);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(l)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Sa?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&z!==0&&(z=1/z);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*z))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,_=this._easing;let b,T=!1;if(this._type==="wheel"&&p&&_){const C=Math.min((u.exported.now()-this._lastWheelEventTime)/200,1),z=_(C);b=u.number(p,l,z),C<1?this._frameId||(this._frameId=!0):T=!0}else b=l,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=u.ease;if(this._prevEase){const p=this._prevEase,_=(u.exported.now()-p.start)/p.duration,b=p.easing(_+.01)-p.easing(_),T=.27/Math.sqrt(b*b+1e-4)*.01,C=Math.sqrt(.0729-T*T);l=u.bezier(T,C,.25,1)}return this._prevEase={start:u.exported.now(),duration:i,easing:l},l}reset(){this._active=!1}}class iu{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ll{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,l){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this._tap=new Gs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,l,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=l[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,l,p))}touchmove(i,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=l[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,l,p)}touchend(i,l,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,l,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(i,l,p){this._el=i,this._mousePan=l,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ru{constructor(i,l,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ul{constructor(i,l,p,_){this._el=i,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Xs=f=>f.zoom||f.drag||f.pitch||f.rotate;class cl extends u.Event{}function Ea(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class _r{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new va(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),u.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,b,T]of this._listeners)V.addEventListener(_,b,_===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,l,p]of this._listeners)V.removeEventListener(i,l,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new Uo(l,i));const _=l.boxZoom=new cs(l,i);this._add("boxZoom",_);const b=new qc,T=new ll;l.doubleClickZoom=new iu(T,b),this._add("tapZoom",b),this._add("clickZoom",T);const C=new Bi;this._add("tapDragZoom",C);const z=l.touchPitch=new Hs;this._add("touchPitch",z);const R=new ut(i),U=new fs(i);l.dragRotate=new ru(i,R,U),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const Z=new ps(i),K=new wa(i);l.dragPan=new xo(p,Z,K),this._add("mousePan",Z),this._add("touchPan",K,["touchZoom","touchRotate"]);const se=new Vu,Y=new nu;l.touchZoomRotate=new ul(p,Y,se,C),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);const oe=l.scrollZoom=new al(l,this);this._add("scrollZoom",oe,["mousePan"]);const _e=l.keyboard=new sl;this._add("keyboard",_e),this._add("blockableMapEvent",new Uu(l));for(const ye of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[ye]&&l[ye].enable(i[ye])}_add(i,l,p){this._handlers.push({handlerName:i,handler:l,allowed:p}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Xs(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,l,p){for(const _ in i)if(_!==p&&(!l||l.indexOf(_)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const p of i)this._el.contains(p.target)&&l.push(p);return l}handleEvent(i,l){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const p=i.type==="renderFrame"?void 0:i,_={needsRenderFrame:!1},b={},T={},C=i.touches,z=C?this._getMapTouches(C):void 0,R=z?V.touchPos(this._el,z):V.mousePos(this._el,i);for(const{handlerName:K,handler:se,allowed:Y}of this._handlers){if(!se.isEnabled())continue;let oe;this._blockedByActive(T,Y,K)?se.reset():se[l||i.type]&&(oe=se[l||i.type](i,R,z),this.mergeHandlerResult(_,b,oe,K,p),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||se.isActive())&&(T[K]=se)}const U={};for(const K in this._previousActiveHandlers)T[K]||(U[K]=p);this._previousActiveHandlers=T,(Object.keys(U).length||Ea(_))&&(this._changes.push([_,b,U]),this._triggerRenderFrame()),(Object.keys(T).length||Ea(_))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=_;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(i,l,p,_,b){if(!p)return;u.extend(i,p);const T={handlerName:_,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(l.zoom=T),p.panDelta!==void 0&&(l.drag=T),p.pitchDelta!==void 0&&(l.pitch=T),p.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const i={},l={},p={};for(const[_,b,T]of this._changes)_.panDelta&&(i.panDelta=(i.panDelta||new u.pointGeometry(0,0))._add(_.panDelta)),_.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(i.around=_.around),_.pinchAround!==void 0&&(i.pinchAround=_.pinchAround),_.noInertia&&(i.noInertia=_.noInertia),u.extend(l,b),u.extend(p,T);this._updateMapTransform(i,l,p),this._changes=[]}_updateMapTransform(i,l,p){const _=this._map,b=_.transform;if(!Ea(i))return this._fireEvents(l,p,!0);let{panDelta:T,zoomDelta:C,bearingDelta:z,pitchDelta:R,around:U,pinchAround:Z}=i;Z!==void 0&&(U=Z),_._stop(!0),U=U||_.transform.centerPoint;const K=b.pointLocation(T?U.sub(T):U);z&&(b.bearing+=z),R&&(b.pitch+=R),C&&(b.zoom+=C),b.setLocationAtPoint(K,U),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,p,!0)}_fireEvents(i,l,p){const _=Xs(this._eventsInProgress),b=Xs(i),T={};for(const U in i){const{originalEvent:Z}=i[U];this._eventsInProgress[U]||(T[`${U}start`]=Z),this._eventsInProgress[U]=i[U]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const U in T)this._fireEvent(U,T[U]);b&&this._fireEvent("move",b.originalEvent);for(const U in i){const{originalEvent:Z}=i[U];this._fireEvent(U,Z)}const C={};let z;for(const U in this._eventsInProgress){const{handlerName:Z,originalEvent:K}=this._eventsInProgress[U];this._handlersById[Z].isActive()||(delete this._eventsInProgress[U],z=l[Z]||K,C[`${U}end`]=z)}for(const U in C)this._fireEvent(U,C[U]);const R=Xs(this._eventsInProgress);if(p&&(_||b)&&!R){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;U?(Z(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:z})):(this._map.fire(new u.Event("moveend",{originalEvent:z})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new u.Event(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new cl("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const a={extend:(f,...i)=>u.extend(f,...i),run(f){f()},logToElement(f,i=!1,l="log"){const p=window.document.getElementById(l);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${f}`)}};class d extends u.Evented{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,p){return i=u.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,u.extend({offset:i},l),p)}panTo(i,l,p){return this.easeTo(u.extend({center:i},l),p)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,p){return this.easeTo(u.extend({zoom:i},l),p)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,p){return this.easeTo(u.extend({bearing:i},l),p)}resetNorth(i,l){return this.rotateTo(0,u.extend({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=u.LngLatBounds.convert(i);const p=l&&l.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,l)}_cameraForBoxAndBearing(i,l,p,_){const b={top:0,bottom:0,right:0,left:0};if(typeof(_=u.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const ze=_.padding;_.padding={top:ze,bottom:ze,right:ze,left:ze}}_.padding=u.extend(b,_.padding);const T=this.transform,C=T.padding,z=T.project(u.LngLat.convert(i)),R=T.project(u.LngLat.convert(l)),U=z.rotate(-p*Math.PI/180),Z=R.rotate(-p*Math.PI/180),K=new u.pointGeometry(Math.max(U.x,Z.x),Math.max(U.y,Z.y)),se=new u.pointGeometry(Math.min(U.x,Z.x),Math.min(U.y,Z.y)),Y=K.sub(se),oe=(T.width-(C.left+C.right+_.padding.left+_.padding.right))/Y.x,_e=(T.height-(C.top+C.bottom+_.padding.top+_.padding.bottom))/Y.y;if(_e<0||oe<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(T.scaleZoom(T.scale*Math.min(oe,_e)),_.maxZoom),we=u.pointGeometry.convert(_.offset),ve=new u.pointGeometry((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(p*Math.PI/180),Ue=we.add(ve).mult(T.scale/T.zoomScale(ye));return{center:T.unproject(z.add(R).div(2).sub(Ue)),zoom:ye,bearing:p}}fitBounds(i,l,p){return this._fitInternal(this.cameraForBounds(i,l),l,p)}fitScreenCoordinates(i,l,p,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.pointGeometry.convert(i)),this.transform.pointLocation(u.pointGeometry.convert(l)),p,_),_,b)}_fitInternal(i,l,p){return i?(delete(l=u.extend(i,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(i,l){this.stop();const p=this.transform;let _=!1,b=!1,T=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(_=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(b=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this.fire(new u.Event("movestart",l)).fire(new u.Event("move",l)),_&&this.fire(new u.Event("zoomstart",l)).fire(new u.Event("zoom",l)).fire(new u.Event("zoomend",l)),b&&this.fire(new u.Event("rotatestart",l)).fire(new u.Event("rotate",l)).fire(new u.Event("rotateend",l)),T&&this.fire(new u.Event("pitchstart",l)).fire(new u.Event("pitch",l)).fire(new u.Event("pitchend",l)),this.fire(new u.Event("moveend",l))}easeTo(i,l){this._stop(!1,i.easeId),((i=u.extend({offset:[0,0],duration:500,easing:u.ease},i)).animate===!1||!i.essential&&u.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),z="zoom"in i?+i.zoom:_,R="bearing"in i?this._normalizeBearing(i.bearing,b):b,U="pitch"in i?+i.pitch:T,Z="padding"in i?i.padding:p.padding,K=u.pointGeometry.convert(i.offset);let se=p.centerPoint.add(K);const Y=p.pointLocation(se),oe=u.LngLat.convert(i.center||Y);this._normalizeCenter(oe);const _e=p.project(Y),ye=p.project(oe).sub(_e),we=p.zoomScale(z-_);let ve,Ue;i.around&&(ve=u.LngLat.convert(i.around),Ue=p.locationPoint(ve));const ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==_,this._rotating=this._rotating||b!==R,this._pitching=this._pitching||U!==T,this._padding=!p.isPaddingEqual(Z),this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,ze),this._ease(De=>{if(this._zooming&&(p.zoom=u.number(_,z,De)),this._rotating&&(p.bearing=u.number(b,R,De)),this._pitching&&(p.pitch=u.number(T,U,De)),this._padding&&(p.interpolatePadding(C,Z,De),se=p.centerPoint.add(K)),ve)p.setLocationAtPoint(ve,Ue);else{const We=p.zoomScale(p.zoom-_),Je=z>_?Math.min(2,we):Math.max(.5,we),Oe=Math.pow(Je,1-De),mt=p.unproject(_e.add(ye.mult(De*Oe)).mult(We));p.setLocationAtPoint(p.renderWorldCopies?mt.wrap():mt,se)}this._fireMoveEvents(l)},De=>{this._afterEase(l,De)},i),this}_prepareEase(i,l,p={}){this._moving=!0,l||p.moving||this.fire(new u.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new u.Event("move",i)),this._zooming&&this.fire(new u.Event("zoom",i)),this._rotating&&this.fire(new u.Event("rotate",i)),this._pitching&&this.fire(new u.Event("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const p=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.Event("zoomend",i)),_&&this.fire(new u.Event("rotateend",i)),b&&this.fire(new u.Event("pitchend",i)),this.fire(new u.Event("moveend",i))}flyTo(i,l){if(!i.essential&&u.exported.prefersReducedMotion){const sn=u.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(sn,l)}this.stop(),i=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},i);const p=this.transform,_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),z="zoom"in i?u.clamp(+i.zoom,p.minZoom,p.maxZoom):_,R="bearing"in i?this._normalizeBearing(i.bearing,b):b,U="pitch"in i?+i.pitch:T,Z="padding"in i?i.padding:p.padding,K=p.zoomScale(z-_),se=u.pointGeometry.convert(i.offset);let Y=p.centerPoint.add(se);const oe=p.pointLocation(Y),_e=u.LngLat.convert(i.center||oe);this._normalizeCenter(_e);const ye=p.project(oe),we=p.project(_e).sub(ye);let ve=i.curve;const Ue=Math.max(p.width,p.height),ze=Ue/K,De=we.mag();if("minZoom"in i){const sn=u.clamp(Math.min(i.minZoom,_,z),p.minZoom,p.maxZoom),Jn=Ue/p.zoomScale(sn-_);ve=Math.sqrt(Jn/De*2)}const We=ve*ve;function Je(sn){const Jn=(ze*ze-Ue*Ue+(sn?-1:1)*We*We*De*De)/(2*(sn?ze:Ue)*We*De);return Math.log(Math.sqrt(Jn*Jn+1)-Jn)}function Oe(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function mt(sn){return(Math.exp(sn)+Math.exp(-sn))/2}const nt=Je(0);let Dt=function(sn){return mt(nt)/mt(nt+ve*sn)},un=function(sn){return Ue*((mt(nt)*(Oe(Jn=nt+ve*sn)/mt(Jn))-Oe(nt))/We)/De;var Jn},Jt=(Je(1)-nt)/ve;if(Math.abs(De)<1e-6||!isFinite(Jt)){if(Math.abs(Ue-ze)<1e-6)return this.easeTo(i,l);const sn=ze<Ue?-1:1;Jt=Math.abs(Math.log(ze/Ue))/ve,un=function(){return 0},Dt=function(Jn){return Math.exp(sn*ve*Jn)}}return i.duration="duration"in i?+i.duration:1e3*Jt/("screenSpeed"in i?+i.screenSpeed/ve:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==R,this._pitching=U!==T,this._padding=!p.isPaddingEqual(Z),this._prepareEase(l,!1),this._ease(sn=>{const Jn=sn*Jt,Zt=1/Dt(Jn);p.zoom=sn===1?z:_+p.scaleZoom(Zt),this._rotating&&(p.bearing=u.number(b,R,sn)),this._pitching&&(p.pitch=u.number(T,U,sn)),this._padding&&(p.interpolatePadding(C,Z,sn),Y=p.centerPoint.add(se));const pn=sn===1?_e:p.unproject(ye.add(we.mult(un(Jn))).mult(Zt));p.setLocationAtPoint(p.renderWorldCopies?pn.wrap():pn,Y),this._fireMoveEvents(l)},()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,l,p){p.animate===!1||p.duration===0?(i(1),l()):(this._easeStart=u.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((u.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=u.wrap(i,-180,180);const p=Math.abs(i-l);return Math.abs(i-360-l)<p&&(i-=360),Math.abs(i+360-l)<p&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const p=i.lng-l.center.lng;i.lng+=p>180?-360:p<-180?360:0}}class w{constructor(i={}){this.options=i,u.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=V.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=V.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=V.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,l){const p=this._map._getUIString(`AttributionControl.${l}`);i.title=p,i.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const l=this._map.style.sourceCaches;for(const _ in l){const b=l[_];if(b.used){const T=b.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i=i.filter(_=>String(_).trim()),i.sort((_,b)=>_.length-b.length),i=i.filter((_,b)=>{for(let T=b+1;T<i.length;T++)if(i[T].indexOf(_)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class P{constructor(i={}){this.options=i,u.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=V.create("div","maplibregl-ctrl mapboxgl-ctrl");const l=V.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){V.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact","mapboxgl-compact"):l.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class D{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const _ of p)if(_.id===i)return void(_.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const G={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ue={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},be={showCompass:!0,showZoom:!0,visualizePitch:!1};class Le{constructor(i,l,p=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new ut({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new fs({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),V.addEventListener(l,"mousedown",this.mousedown),V.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),V.addEventListener(l,"touchmove",this.touchmove),V.addEventListener(l,"touchend",this.touchend),V.addEventListener(l,"touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),V.disableDrag()}move(i,l){const p=this.map,_=this.mouseRotate.mousemoveWindow(i,l);if(_&&_.bearingDelta&&p.setBearing(p.getBearing()+_.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(i,l);b&&b.pitchDelta&&p.setPitch(p.getPitch()+b.pitchDelta)}}off(){const i=this.element;V.removeEventListener(i,"mousedown",this.mousedown),V.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),V.removeEventListener(i,"touchmove",this.touchmove),V.removeEventListener(i,"touchend",this.touchend),V.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){V.enableDrag(),V.removeEventListener(window,"mousemove",this.mousemove),V.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(u.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),V.mousePos(this.element,i)),V.addEventListener(window,"mousemove",this.mousemove),V.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,V.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=V.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=V.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Se(f,i,l){if(f=new u.LngLat(f.lng,f.lat),i){const p=new u.LngLat(f.lng-360,f.lat),_=new u.LngLat(f.lng+360,f.lat),b=l.locationPoint(f).distSqr(i);l.locationPoint(p).distSqr(i)<b?f=p:l.locationPoint(_).distSqr(i)<b&&(f=_)}for(;Math.abs(f.lng-l.center.lng)>180;){const p=l.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=l.width&&p.y<=l.height)break;f.lng>l.center.lng?f.lng-=360:f.lng+=360}return f}const je={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wt(f,i,l){const p=f.classList;for(const _ in je)p.remove(`maplibregl-${l}-anchor-${_}`,`mapboxgl-${l}-anchor-${_}`);p.add(`maplibregl-${l}-anchor-${i}`,`mapboxgl-${l}-anchor-${i}`)}class en extends u.Evented{constructor(i,l){if(super(),(i instanceof HTMLElement||l)&&(i=u.extend({element:i},l)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=u.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=V.create("div"),this._element.setAttribute("aria-label","Map marker");const p=V.createNS("http://www.w3.org/2000/svg","svg"),_=41,b=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${_}px`),p.setAttributeNS(null,"width",`${b}px`),p.setAttributeNS(null,"viewBox",`0 0 ${b} ${_}`);const T=V.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const C=V.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const z=V.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of R){const ve=V.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",we.rx),ve.setAttributeNS(null,"ry",we.ry),z.appendChild(ve)}const U=V.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const Z=V.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(Z);const K=V.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const se=V.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(se);const Y=V.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const oe=V.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=V.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const ye=V.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),oe.appendChild(_e),oe.appendChild(ye),C.appendChild(z),C.appendChild(U),C.appendChild(K),C.appendChild(Y),C.appendChild(oe),p.appendChild(C),p.setAttributeNS(null,"height",_*this._scale+"px"),p.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(p),this._offset=u.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),Wt(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),V.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const l=i.code,p=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,p=this._element;this._popup&&(l===p||p.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Se(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(l=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?p="rotateX(0deg)":this._pitchAlignment==="map"&&(p=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),V.setTransform(this._element,`${je[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${l}`)}getOffset(){return this._offset}setOffset(i){return this._offset=u.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Dr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Rn,Qr=0,Yn=!1;const ou={maxWidth:100,unit:"metric"};function Ta(f,i,l){const p=l&&l.maxWidth||100,_=f._container.clientHeight/2,b=f.unproject([0,_]),T=f.unproject([p,_]),C=b.distanceTo(T);if(l&&l.unit==="imperial"){const z=3.2808*C;z>5280?An(i,p,z/5280,f._getUIString("ScaleControl.Miles")):An(i,p,z,f._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?An(i,p,C/1852,f._getUIString("ScaleControl.NauticalMiles")):C>=1e3?An(i,p,C/1e3,f._getUIString("ScaleControl.Kilometers")):An(i,p,C,f._getUIString("ScaleControl.Meters"))}function An(f,i,l,p){const _=function(b){const T=Math.pow(10,`${Math.floor(b)}`.length-1);let C=b/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(z){const R=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*R)/R}(C),T*C}(l);f.style.width=i*(_/l)+"px",f.innerHTML=`${_}&nbsp;${p}`}const hi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},su=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ks(f){if(f){if(typeof f=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new u.pointGeometry(0,0),top:new u.pointGeometry(0,f),"top-left":new u.pointGeometry(i,i),"top-right":new u.pointGeometry(-i,i),bottom:new u.pointGeometry(0,-f),"bottom-left":new u.pointGeometry(i,-i),"bottom-right":new u.pointGeometry(-i,-i),left:new u.pointGeometry(f,0),right:new u.pointGeometry(-f,0)}}if(f instanceof u.pointGeometry||Array.isArray(f)){const i=u.pointGeometry.convert(f);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.pointGeometry.convert(f.center||[0,0]),top:u.pointGeometry.convert(f.top||[0,0]),"top-left":u.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":u.pointGeometry.convert(f["top-right"]||[0,0]),bottom:u.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":u.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":u.pointGeometry.convert(f["bottom-right"]||[0,0]),left:u.pointGeometry.convert(f.left||[0,0]),right:u.pointGeometry.convert(f.right||[0,0])}}return Ks(new u.pointGeometry(0,0))}const Ys={supported:I,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:class extends d{constructor(f){var i;if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),(f=u.extend({},ue,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new as(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new D,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},G,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(i=f.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new he(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new _r(this,f),this._hash=f.hash&&new tu(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,u.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new w({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new P,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new u.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new u.Event(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new u.Event("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}resize(f){const i=this._containerDimensions(),l=i[0],p=i[1];this._resizeCanvas(l,p,this.getPixelRatio()),this.transform.resize(l,p),this.painter.resize(l,p,this.getPixelRatio());const _=!this._moving;return _&&(this.stop(),this.fire(new u.Event("movestart",f)).fire(new u.Event("move",f))),this.fire(new u.Event("resize",f)),_&&this.fire(new u.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[i,l]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(i,l,f),this.painter.resize(i,l,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(u.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?60:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(u.LngLat.convert(f))}unproject(f){return this.transform.pointLocation(u.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,i,l){if(f==="mouseenter"||f==="mouseover"){let p=!1;return{layer:i,listener:l,delegates:{mousemove:b=>{const T=this.getLayer(i)?this.queryRenderedFeatures(b.point,{layers:[i]}):[];T.length?p||(p=!0,l.call(this,new nr(f,this,b.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if(f==="mouseleave"||f==="mouseout"){let p=!1;return{layer:i,listener:l,delegates:{mousemove:T=>{(this.getLayer(i)?this.queryRenderedFeatures(T.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,l.call(this,new nr(f,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,l.call(this,new nr(f,this,T.originalEvent)))}}}}{const p=_=>{const b=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];b.length&&(_.features=b,l.call(this,_),delete _.features)};return{layer:i,listener:l,delegates:{[f]:p}}}}on(f,i,l){if(l===void 0)return super.on(f,i);const p=this._createDelegatedListener(f,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return this}once(f,i,l){if(l===void 0)return super.once(f,i);const p=this._createDelegatedListener(f,i,l);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(f,i,l){return l===void 0?super.off(f,i):(this._delegatedListeners&&this._delegatedListeners[f]&&(p=>{const _=this._delegatedListeners[f];for(let b=0;b<_.length;b++){const T=_[b];if(T.layer===i&&T.listener===l){for(const C in T.delegates)this.off(C,T.delegates[C]);return _.splice(b,1),this}}})(),this)}queryRenderedFeatures(f,i){if(!this.style)return[];let l;if(i!==void 0||f===void 0||f instanceof u.pointGeometry||Array.isArray(f)||(i=f,f=void 0),i=i||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof u.pointGeometry||typeof f[0]=="number")l=[u.pointGeometry.convert(f)];else{const p=u.pointGeometry.convert(f[0]),_=u.pointGeometry.convert(f[1]);l=[p,new u.pointGeometry(_.x,p.y),_,new u.pointGeometry(p.x,_.y),p]}return this.style.queryRenderedFeatures(l,i,this.transform)}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}setStyle(f,i){return(i=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(f,i))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new oi(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new oi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if(typeof f=="string"){const l=this._requestManager.transformRequest(f,u.ResourceType.Style);u.getJSON(l,(p,_)=>{p?this.fire(new u.ErrorEvent(p)):_&&this._updateDiff(_,i)})}else typeof f=="object"&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(l){u.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){const i=this.style&&this.style.sourceCaches[f];if(i!==void 0)return i.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const i in f){const l=f[i]._tiles;for(const p in l){const _=l[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(f,i,l){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,l)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:l=1,sdf:p=!1,stretchX:_,stretchY:b,content:T}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||u.isImageBitmap(i)){const{width:C,height:z,data:R}=u.exported.getImageData(i);this.style.addImage(f,{data:new u.RGBAImage({width:C,height:z},R),pixelRatio:l,stretchX:_,stretchY:b,content:T,sdf:p,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:z,data:R}=i,U=i;this.style.addImage(f,{data:new u.RGBAImage({width:C,height:z},new Uint8Array(R)),pixelRatio:l,stretchX:_,stretchY:b,content:T,sdf:p,version:0,userImage:U}),U.onAdd&&U.onAdd(this,f)}}}updateImage(f,i){const l=this.style.getImage(f);if(!l)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.isImageBitmap(i)?u.exported.getImageData(i):i,{width:_,height:b,data:T}=p;if(_===void 0||b===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==l.data.width||b!==l.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||u.isImageBitmap(i));l.data.replace(T,C),this.style.updateImage(f,l)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){u.getImage(this._requestManager.transformRequest(f,u.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,l){return this.style.setLayerZoomRange(f,i,l),this._update(!0)}setFilter(f,i,l={}){return this.style.setFilter(f,i,l),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,l,p={}){return this.style.setPaintProperty(f,i,l,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,l,p={}){return this.style.setLayoutProperty(f,i,l,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,i=0;return this._container&&(f=this._container.clientWidth||400,i=this._container.clientHeight||300),[f,i]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=V.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=V.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions();this._resizeCanvas(l[0],l[1],this.getPixelRatio());const p=this._controlContainer=V.create("div","maplibregl-control-container mapboxgl-control-container",f),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=V.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i,l){this._canvas.width=l*f,this._canvas.height=l*i,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const f=u.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(this.painter=new eu(i,this.transform),u.exported$1.testSupport(i)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let i,l=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,i),l=u.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let _=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const T=this.transform.zoom,C=u.exported.now();this.style.zoomHistory.update(T,C);const z=new u.EvaluationParameters(T,{now:C,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),R=z.crossFadingFactor();R===1&&R===this._crossFadingFactor||(_=!0,this._crossFadingFactor=R),this.style.update(z)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||_)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const T=u.exported.now()-l;p.endQueryEXT(p.TIME_ELAPSED_EXT,i),setTimeout(()=>{const C=p.getQueryObjectEXT(i,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(i),this.fire(new u.Event("gpu-timing-frame",{cpuTime:T,gpuTime:C}))},50)}if(this.listens("gpu-timing-layer")){const T=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(T);this.fire(new u.Event("gpu-timing-layer",{layerTimes:C}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),V.remove(this._canvasContainer),V.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.exported.frame(f=>{u.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){u.setCacheLimits(f,i)}},NavigationControl:class{constructor(f){this.options=u.extend({},be,f),this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),i=f===this._map.getMaxZoom(),l=f===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Le(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){V.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,i){const l=V.create("button",f,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(f,i){const l=this._map._getUIString(`NavigationControl.${i}`);f.title=l,f.setAttribute("aria-label",l)}},GeolocateControl:class extends u.Evented{constructor(f){super(),this.options=u.extend({},Dr,f),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var i;return this._map=f,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Rn!==void 0?i(Rn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(l=>{Rn=l.state!=="denied",i(Rn)}):(Rn=!!window.navigator.geolocation,i(Rn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),V.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qr=0,Yn=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),l=f.coords;return i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new u.LngLat(f.coords.longitude,f.coords.latitude),l=f.coords.accuracy,p=this._map.getBearing(),_=u.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),_,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new u.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,i=this._map.unproject([0,f]),l=this._map.unproject([1,f]),p=i.distanceTo(l),_=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Yn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=V.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new en(this._dotElement),this._circleElement=V.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new en({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qr--,Yn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qr++,Qr>1?(f={maximumAge:6e5,timeout:0},Yn=!0):(f=this.options.positionOptions,Yn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:w,LogoControl:P,ScaleControl:class{constructor(f){this.options=u.extend({},ou,f),u.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ta(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){V.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Ta(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){V.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=V.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends u.Evented{constructor(f){super(),this.options=u.extend(Object.create(hi),f),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&V.remove(this._content),this._container&&(V.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=u.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const i=document.createDocumentFragment(),l=document.createElement("body");let p;for(l.innerHTML=f;p=l.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=V.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=V.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=V.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=V.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Se(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const i=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let l=this.options.anchor;const p=Ks(this.options.offset);if(!l){const b=this._container.offsetWidth,T=this._container.offsetHeight;let C;C=i.y+p.bottom.y<T?["top"]:i.y>this._map.transform.height-T?["bottom"]:[],i.x<b/2?C.push("left"):i.x>this._map.transform.width-b/2&&C.push("right"),l=C.length===0?"bottom":C.join("-")}const _=i.add(p[l]).round();V.setTransform(this._container,`${je[l]} translate(${_.x}px,${_.y}px)`),Wt(this._container,l,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(su);f&&f.focus()}_onClose(){this.remove()}},Marker:en,Style:oi,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.pointGeometry,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,AJAXError:u.AJAXError,config:u.config,CanvasSource:Nt,GeoJSONSource:wt,ImageSource:Qt,RasterDEMTileSource:qe,RasterTileSource:Fe,VectorTileSource:En,VideoSource:Rt,prewarm:function(){ki().acquire(kr)},clearPrewarmedResources:function(){const f=$i;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(kr),$i=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return ui.workerCount},set workerCount(f){ui.workerCount=f},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){u.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){u.clearTileCache(f)},workerUrl:"",addProtocol(f,i){u.config.REGISTERED_PROTOCOLS[f]=i},removeProtocol(f){delete u.config.REGISTERED_PROTOCOLS[f]}};return a.extend(Ys,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),Ys});var S=g;return S})})(gb);var Um=gb.exports;const jI=Mn("div",{height:"calc(100vh - $4 - $4)"}),GI=e=>({version:8,sources:{source:{type:"raster",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],maxzoom:4}},layers:[{id:"raster",type:"raster",source:"source"}]}),WI=async e=>{let n=await e.metadata(),o=[];if(n.json){let h=JSON.parse(n.json);if(h.tilestats)for(let g of h.tilestats.layers)g.geometry==="Polygon"?o.push({id:g.layer+"_fill",type:"fill",source:"source","source-layer":g.layer,paint:{"fill-color":"white"}}):g.geometry==="LineString"?o.push({id:g.layer+"_stroke",type:"line",source:"source","source-layer":g.layer,paint:{"line-color":"steelblue","line-width":.5}}):o.push({id:g.layer+"_point",type:"circle",source:"source","source-layer":g.layer,paint:{"circle-color":"red"}})}return{version:8,sources:{source:{type:"vector",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],maxzoom:10}},layers:o}};function qI(e){let n=re.exports.useRef(null),o;return re.exports.useEffect(()=>{let h=new QP;return Um.addProtocol("pmtiles",h.protocol),h.add(e.file),o=new Um.Map({container:n.current,zoom:0,center:[0,0],style:{version:8,sources:{},layers:[]}}),o.addControl(new Um.NavigationControl({})),o.on("load",o.resize),()=>{o.remove()}},[]),re.exports.useEffect(()=>{(async()=>{if(o){let v=(await e.file.metadata()).bounds.split(",");o.fitBounds([[+v[0],+v[1]],[+v[2],+v[3]]]);let S=await iy(e.file);if(S===Ga.PNG||S==Ga.JPG)o.setStyle(GI(e.file));else{let u=await WI(e.file);o.setStyle(u)}}})()},[]),_t(jI,{ref:n})}function Bl(e){const n=re.exports.useRef(e);return re.exports.useEffect(()=>{n.current=e}),re.exports.useMemo(()=>(...o)=>{var h;return(h=n.current)===null||h===void 0?void 0:h.call(n,...o)},[])}function md({prop:e,defaultProp:n,onChange:o=()=>{}}){const[h,g]=function({defaultProp:I,onChange:N}){const j=re.exports.useState(I),[q]=j,V=re.exports.useRef(q),he=Bl(N);return re.exports.useEffect(()=>{V.current!==q&&(he(q),V.current=q)},[q,V,he]),j}({defaultProp:n,onChange:o}),v=e!==void 0,S=v?e:h,u=Bl(o);return[S,re.exports.useCallback(I=>{if(v){const N=I,j=typeof I=="function"?N(e):I;j!==e&&u(j)}else g(I)},[v,e,g,u])]}function Sr(e,n,{checkForDefaultPrevented:o=!0}={}){return function(h){if(e==null||e(h),o===!1||!h.defaultPrevented)return n==null?void 0:n(h)}}const HI=re.exports.forwardRef((e,n)=>{const I=e,{pressed:o,defaultPressed:h=!1,onPressedChange:g}=I,v=_n(I,["pressed","defaultPressed","onPressedChange"]),[S=!1,u]=md({prop:o,onChange:g,defaultProp:h});return re.exports.createElement(cr.button,Yt({type:"button","aria-pressed":S,"data-state":S?"on":"off","data-disabled":e.disabled?"":void 0},v,{ref:n,onClick:Sr(e.onClick,()=>{e.disabled||u(!S)})}))});function XI(e){const n=e+"CollectionProvider",[o,h]=pd(n),[g,v]=o(n,{collectionRef:{current:null},itemMap:new Map}),S=V=>{const{scope:he,children:ge}=V,pe=nn.useRef(null),Ee=nn.useRef(new Map).current;return nn.createElement(g,{scope:he,itemMap:Ee,collectionRef:pe},ge)},u=e+"CollectionSlot",I=nn.forwardRef((V,he)=>{const{scope:ge,children:pe}=V,Ee=v(u,ge),ne=sa(he,Ee.collectionRef);return nn.createElement(od,{ref:ne},pe)}),N=e+"CollectionItemSlot",j="data-radix-collection-item";return[{Provider:S,Slot:I,ItemSlot:nn.forwardRef((V,he)=>{const Te=V,{scope:ge,children:pe}=Te,Ee=_n(Te,["scope","children"]),ne=nn.useRef(null),Q=sa(he,ne),te=v(N,ge);return nn.useEffect(()=>(te.itemMap.set(ne,ai({ref:ne},Ee)),()=>{te.itemMap.delete(ne)})),nn.createElement(od,{[j]:"",ref:Q},pe)})},function(V){const he=v(e+"CollectionConsumer",V);return nn.useCallback(()=>{const ge=he.collectionRef.current;if(!ge)return[];const pe=Array.from(ge.querySelectorAll(`[${j}]`));return Array.from(he.itemMap.values()).sort((Ee,ne)=>pe.indexOf(Ee.ref.current)-pe.indexOf(ne.ref.current))},[he.collectionRef,he.itemMap])},h]}const KI={bubbles:!1,cancelable:!0},[Jg,yb,YI]=XI("RovingFocusGroup"),[JI,xf]=pd("RovingFocusGroup",[YI]),[QI,ez]=JI("RovingFocusGroup"),tz=re.exports.forwardRef((e,n)=>re.exports.createElement(Jg.Provider,{scope:e.__scopeRovingFocusGroup},re.exports.createElement(Jg.Slot,{scope:e.__scopeRovingFocusGroup},re.exports.createElement(nz,Yt({},e,{ref:n}))))),nz=re.exports.forwardRef((e,n)=>{const Te=e,{__scopeRovingFocusGroup:o,orientation:h,dir:g="ltr",loop:v=!1,currentTabStopId:S,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:I,onEntryFocus:N}=Te,j=_n(Te,["__scopeRovingFocusGroup","orientation","dir","loop","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"]),q=re.exports.useRef(null),V=sa(n,q),[he=null,ge]=md({prop:S,defaultProp:u,onChange:I}),[pe,Ee]=re.exports.useState(!1),ne=Bl(N),Q=yb(o),te=re.exports.useRef(!1);return re.exports.useEffect(()=>{const Ae=q.current;if(Ae)return Ae.addEventListener("rovingFocusGroup.onEntryFocus",ne),()=>Ae.removeEventListener("rovingFocusGroup.onEntryFocus",ne)},[ne]),re.exports.createElement(QI,{scope:o,orientation:h,dir:g,loop:v,currentTabStopId:he,onItemFocus:re.exports.useCallback(Ae=>ge(Ae),[ge]),onItemShiftTab:re.exports.useCallback(()=>Ee(!0),[])},re.exports.createElement(cr.div,Yt({tabIndex:pe?-1:0,"data-orientation":h},j,{ref:V,style:ai({outline:"none"},e.style),onMouseDown:Sr(e.onMouseDown,()=>{te.current=!0}),onFocus:Sr(e.onFocus,Ae=>{const $e=!te.current;if(Ae.target===Ae.currentTarget&&$e&&!pe){const Ne=new Event("rovingFocusGroup.onEntryFocus",KI);if(Ae.currentTarget.dispatchEvent(Ne),!Ne.defaultPrevented){const Be=Q().filter(lt=>lt.focusable);vb([Be.find(lt=>lt.active),Be.find(lt=>lt.id===he),...Be].filter(Boolean).map(lt=>lt.ref.current))}}te.current=!1}),onBlur:Sr(e.onBlur,()=>Ee(!1))})))}),iz=re.exports.forwardRef((e,n)=>{const j=e,{__scopeRovingFocusGroup:o,focusable:h=!0,active:g=!1}=j,v=_n(j,["__scopeRovingFocusGroup","focusable","active"]),S=Nh(),u=ez("RovingFocusGroupItem",o),I=u.currentTabStopId===S,N=yb(o);return re.exports.createElement(Jg.ItemSlot,{scope:o,id:S,focusable:h,active:g},re.exports.createElement(cr.span,Yt({tabIndex:I?0:-1,"data-orientation":u.orientation},v,{ref:n,onMouseDown:Sr(e.onMouseDown,q=>{h?u.onItemFocus(S):q.preventDefault()}),onFocus:Sr(e.onFocus,()=>u.onItemFocus(S)),onKeyDown:Sr(e.onKeyDown,q=>{if(q.key==="Tab"&&q.shiftKey)return void u.onItemShiftTab();if(q.target!==q.currentTarget)return;const V=function(pe,Ee,ne){const Q=function(te,Te){return Te!=="rtl"?te:te==="ArrowLeft"?"ArrowRight":te==="ArrowRight"?"ArrowLeft":te}(pe.key,ne);return Ee==="vertical"&&["ArrowLeft","ArrowRight"].includes(Q)||Ee==="horizontal"&&["ArrowUp","ArrowDown"].includes(Q)?void 0:rz[Q]}(q,u.orientation,u.dir);if(V!==void 0){q.preventDefault();let pe=N().filter(Ee=>Ee.focusable).map(Ee=>Ee.ref.current);if(V==="last")pe.reverse();else if(V==="prev"||V==="next"){V==="prev"&&pe.reverse();const Ee=pe.indexOf(q.currentTarget);pe=u.loop?(ge=Ee+1,(he=pe).map((ne,Q)=>he[(ge+Q)%he.length])):pe.slice(Ee+1)}setTimeout(()=>vb(pe))}var he,ge})})))}),rz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vb(e){const n=document.activeElement;for(const o of e)if(o===n||(o.focus(),document.activeElement!==n))return}const xb=tz,ey=iz,[wb,bb]=pd("ToggleGroup",[xf]),Sb=xf(),oz=nn.forwardRef((e,n)=>{const g=e,{type:o}=g,h=_n(g,["type"]);if(o==="single"){const v=h;return nn.createElement(sz,Yt({},v,{ref:n}))}if(o==="multiple"){const v=h;return nn.createElement(az,Yt({},v,{ref:n}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")}),[Eb,Tb]=wb("ToggleGroup"),sz=nn.forwardRef((e,n)=>{const I=e,{value:o,defaultValue:h,onValueChange:g=()=>{}}=I,v=_n(I,["value","defaultValue","onValueChange"]),[S,u]=md({prop:o,defaultProp:h,onChange:g});return nn.createElement(Eb,{scope:e.__scopeToggleGroup,type:"single",value:S?[S]:[],onItemActivate:u,onItemDeactivate:nn.useCallback(()=>u(""),[u])},nn.createElement(Pb,Yt({},v,{ref:n})))}),az=nn.forwardRef((e,n)=>{const j=e,{value:o,defaultValue:h,onValueChange:g=()=>{}}=j,v=_n(j,["value","defaultValue","onValueChange"]),[S=[],u]=md({prop:o,defaultProp:h,onChange:g}),I=nn.useCallback(q=>u((V=[])=>[...V,q]),[u]),N=nn.useCallback(q=>u((V=[])=>V.filter(he=>he!==q)),[u]);return nn.createElement(Eb,{scope:e.__scopeToggleGroup,type:"multiple",value:S,onItemActivate:I,onItemDeactivate:N},nn.createElement(Pb,Yt({},v,{ref:n})))}),[lz,uz]=wb("ToggleGroup"),Pb=nn.forwardRef((e,n)=>{const q=e,{__scopeToggleGroup:o,disabled:h=!1,rovingFocus:g=!0,orientation:v,dir:S="ltr",loop:u=!0}=q,I=_n(q,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),N=Sb(o),j=ai({role:"group",dir:S},I);return nn.createElement(lz,{scope:o,rovingFocus:g,disabled:h},g?nn.createElement(xb,Yt({asChild:!0},N,{orientation:v,dir:S,loop:u}),nn.createElement(cr.div,Yt({},j,{ref:n}))):nn.createElement(cr.div,Yt({},j,{ref:n})))}),cz=nn.forwardRef((e,n)=>{const o=Tb("ToggleGroupItem",e.__scopeToggleGroup),h=uz("ToggleGroupItem",e.__scopeToggleGroup),g=Sb(e.__scopeToggleGroup),v=o.value.includes(e.value),S=h.disabled||e.disabled,u=Ra(ai({},e),{pressed:v,disabled:S}),I=nn.useRef(null);return h.rovingFocus?nn.createElement(ey,Yt({asChild:!0},g,{focusable:!S,active:v,ref:I}),nn.createElement(ax,Yt({},u,{ref:n}))):nn.createElement(ax,Yt({},u,{ref:n}))}),ax=nn.forwardRef((e,n)=>{const I=e,{__scopeToggleGroup:o,value:h}=I,g=_n(I,["__scopeToggleGroup","value"]),v=Tb("ToggleGroupItem",o),S={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u=v.type==="single"?S:void 0;return nn.createElement(HI,Yt({},u,g,{ref:n,onPressedChange:N=>{N?v.onItemActivate(h):v.onItemDeactivate(h)}}))}),hz=oz,dz=cz,[pz,oM]=pd("Toolbar",[xf,bb]),ty=xf(),kb=bb(),[fz,mz]=pz("Toolbar"),gz=re.exports.forwardRef((e,n)=>{const I=e,{__scopeToolbar:o,orientation:h="horizontal",dir:g="ltr",loop:v=!0}=I,S=_n(I,["__scopeToolbar","orientation","dir","loop"]),u=ty(o);return re.exports.createElement(fz,{scope:o,orientation:h},re.exports.createElement(xb,Yt({asChild:!0},u,{orientation:h,dir:g,loop:v}),re.exports.createElement(cr.div,Yt({role:"toolbar","aria-orientation":h,dir:g},S,{ref:n}))))}),_z=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:o}=v,h=_n(v,["__scopeToolbar"]),g=ty(o);return re.exports.createElement(ey,Yt({asChild:!0},g,{focusable:!e.disabled}),re.exports.createElement(cr.button,Yt({type:"button"},h,{ref:n})))}),yz=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:o}=v,h=_n(v,["__scopeToolbar"]),g=ty(o);return re.exports.createElement(ey,Yt({asChild:!0},g,{focusable:!0}),re.exports.createElement(cr.a,Yt({},h,{ref:n,onKeyDown:Sr(e.onKeyDown,S=>{S.key===" "&&S.currentTarget.click()})})))}),vz=re.exports.forwardRef((e,n)=>{const S=e,{__scopeToolbar:o}=S,h=_n(S,["__scopeToolbar"]),g=mz("ToolbarToggleGroup",o),v=kb(o);return re.exports.createElement(hz,Yt({"data-orientation":g.orientation},v,h,{ref:n,rovingFocus:!1}))}),xz=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:o}=v,h=_n(v,["__scopeToolbar"]),g=kb(o);return re.exports.createElement(_z,Yt({asChild:!0},e),re.exports.createElement(dz,Yt({},g,h,{ref:n})))}),wz=gz,bz=yz,Sz=vz,Ez=xz;var Tz=function(e){if(typeof document=="undefined")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},sc=new WeakMap,sp=new WeakMap,ap={},Vm=0,Pz=function(e,n,o){n===void 0&&(n=Tz(e)),o===void 0&&(o="data-aria-hidden");var h=Array.isArray(e)?e:[e];ap[o]||(ap[o]=new WeakMap);var g=ap[o],v=[],S=new Set,u=function(N){!N||S.has(N)||(S.add(N),u(N.parentNode))};h.forEach(u);var I=function(N){!N||h.indexOf(N)>=0||Array.prototype.forEach.call(N.children,function(j){if(S.has(j))I(j);else{var q=j.getAttribute("aria-hidden"),V=q!==null&&q!=="false",he=(sc.get(j)||0)+1,ge=(g.get(j)||0)+1;sc.set(j,he),g.set(j,ge),v.push(j),he===1&&V&&sp.set(j,!0),ge===1&&j.setAttribute(o,"true"),V||j.setAttribute("aria-hidden","true")}})};return I(n),S.clear(),Vm++,function(){v.forEach(function(N){var j=sc.get(N)-1,q=g.get(N)-1;sc.set(N,j),g.set(N,q),j||(sp.has(N)||N.removeAttribute("aria-hidden"),sp.delete(N)),q||N.removeAttribute(o)}),Vm--,Vm||(sc=new WeakMap,sc=new WeakMap,sp=new WeakMap,ap={})}},El=function(){return El=Object.assign||function(n){for(var o,h=1,g=arguments.length;h<g;h++){o=arguments[h];for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(n[v]=o[v])}return n},El.apply(this,arguments)};function kz(e,n){var o={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&n.indexOf(h)<0&&(o[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(e);g<h.length;g++)n.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(e,h[g])&&(o[h[g]]=e[h[g]]);return o}function Cz(e,n,o){if(o||arguments.length===2)for(var h=0,g=n.length,v;h<g;h++)(v||!(h in n))&&(v||(v=Array.prototype.slice.call(n,0,h)),v[h]=n[h]);return e.concat(v||Array.prototype.slice.call(n))}var Sp="right-scroll-bar-position",Ep="width-before-scroll-bar",Iz="with-scroll-bars-hidden",zz="--removed-body-scroll-bar-size";function Az(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function Mz(e,n){var o=re.exports.useState(function(){return{value:e,callback:n,facade:{get current(){return o.value},set current(h){var g=o.value;g!==h&&(o.value=h,o.callback(h,g))}}}})[0];return o.callback=n,o.facade}function Lz(e,n){return Mz(n||null,function(o){return e.forEach(function(h){return Az(h,o)})})}var tf=function(){return tf=Object.assign||function(n){for(var o,h=1,g=arguments.length;h<g;h++){o=arguments[h];for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(n[v]=o[v])}return n},tf.apply(this,arguments)};function Dz(e,n){var o={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&n.indexOf(h)<0&&(o[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(e);g<h.length;g++)n.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(e,h[g])&&(o[h[g]]=e[h[g]]);return o}function Rz(e){return e}function Bz(e,n){n===void 0&&(n=Rz);var o=[],h=!1,g={read:function(){if(h)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:e},useMedium:function(v){var S=n(v,h);return o.push(S),function(){o=o.filter(function(u){return u!==S})}},assignSyncMedium:function(v){for(h=!0;o.length;){var S=o;o=[],S.forEach(v)}o={push:function(u){return v(u)},filter:function(){return o}}},assignMedium:function(v){h=!0;var S=[];if(o.length){var u=o;o=[],u.forEach(v),S=o}var I=function(){var j=S;S=[],j.forEach(v)},N=function(){return Promise.resolve().then(I)};N(),o={push:function(j){S.push(j),N()},filter:function(j){return S=S.filter(j),o}}}};return g}function Fz(e){e===void 0&&(e={});var n=Bz(null);return n.options=tf({async:!0,ssr:!1},e),n}var Cb=function(e){var n=e.sideCar,o=Dz(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var h=n.read();if(!h)throw new Error("Sidecar medium not found");return re.exports.createElement(h,tf({},o))};Cb.isSideCarExport=!0;function Oz(e,n){return e.useMedium(n),Cb}var Ib=Fz(),$m=function(){},wf=re.exports.forwardRef(function(e,n){var o=re.exports.useRef(null),h=re.exports.useState({onScrollCapture:$m,onWheelCapture:$m,onTouchMoveCapture:$m}),g=h[0],v=h[1],S=e.forwardProps,u=e.children,I=e.className,N=e.removeScrollBar,j=e.enabled,q=e.shards,V=e.sideCar,he=e.noIsolation,ge=e.inert,pe=e.allowPinchZoom,Ee=e.as,ne=Ee===void 0?"div":Ee,Q=kz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),te=V,Te=Lz([o,n]),Ae=El(El({},Q),g);return re.exports.createElement(re.exports.Fragment,null,j&&re.exports.createElement(te,{sideCar:Ib,removeScrollBar:N,shards:q,noIsolation:he,inert:ge,setCallbacks:v,allowPinchZoom:!!pe,lockRef:o}),S?re.exports.cloneElement(re.exports.Children.only(u),El(El({},Ae),{ref:Te})):re.exports.createElement(ne,El({},Ae,{className:I,ref:Te}),u))});wf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wf.classNames={fullWidth:Ep,zeroRight:Sp};var Nz=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function Uz(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Nz();return n&&e.setAttribute("nonce",n),e}function Vz(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function $z(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Zz=function(){var e=0,n=null;return{add:function(o){e==0&&(n=Uz())&&(Vz(n,o),$z(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},jz=function(){var e=Zz();return function(n){re.exports.useEffect(function(){return e.add(n),function(){e.remove()}},[n])}},zb=function(){var e=jz(),n=function(o){var h=o.styles;return e(h),null};return n},Gz={left:0,top:0,right:0,gap:0},Zm=function(e){return parseInt(e||"",10)||0},Wz=function(e){var n=window.getComputedStyle(document.body),o=n[e==="padding"?"paddingLeft":"marginLeft"],h=n[e==="padding"?"paddingTop":"marginTop"],g=n[e==="padding"?"paddingRight":"marginRight"];return[Zm(o),Zm(h),Zm(g)]},lx=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return Gz;var n=Wz(e),o=document.documentElement.clientWidth,h=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,h-o+n[2]-n[0])}},qz=zb(),Hz=function(e,n,o,h){var g=e.left,v=e.top,S=e.right,u=e.gap;return o===void 0&&(o="margin"),`
  .`.concat(Iz,` {
   overflow: hidden `).concat(h,`;
   padding-right: `).concat(u,"px ").concat(h,`;
  }
  body {
    overflow: hidden `).concat(h,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(h,";"),o==="margin"&&`
    padding-left: `.concat(g,`px;
    padding-top: `).concat(v,`px;
    padding-right: `).concat(S,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(h,`;
    `),o==="padding"&&"padding-right: ".concat(u,"px ").concat(h,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sp,` {
    right: `).concat(u,"px ").concat(h,`;
  }
  
  .`).concat(Ep,` {
    margin-right: `).concat(u,"px ").concat(h,`;
  }
  
  .`).concat(Sp," .").concat(Sp,` {
    right: 0 `).concat(h,`;
  }
  
  .`).concat(Ep," .").concat(Ep,` {
    margin-right: 0 `).concat(h,`;
  }
  
  body {
    `).concat(zz,": ").concat(u,`px;
  }
`)},Xz=function(e){var n=re.exports.useState(lx(e.gapMode)),o=n[0],h=n[1];re.exports.useEffect(function(){h(lx(e.gapMode))},[e.gapMode]);var g=e.noRelative,v=e.noImportant,S=e.gapMode,u=S===void 0?"margin":S;return re.exports.createElement(qz,{styles:Hz(o,!g,u,v?"":"!important")})},Qg=!1;if(typeof window!="undefined")try{var lp=Object.defineProperty({},"passive",{get:function(){return Qg=!0,!0}});window.addEventListener("test",lp,lp),window.removeEventListener("test",lp,lp)}catch{Qg=!1}var ac=Qg?{passive:!1}:!1,Kz=function(e){var n=window.getComputedStyle(e);return n.overflowY!=="hidden"&&!(n.overflowY===n.overflowX&&n.overflowY==="visible")},Yz=function(e){var n=window.getComputedStyle(e);return n.overflowX!=="hidden"&&!(n.overflowY===n.overflowX&&n.overflowX==="visible")},ux=function(e,n){var o=n;do{typeof ShadowRoot!="undefined"&&o instanceof ShadowRoot&&(o=o.host);var h=Ab(e,o);if(h){var g=Mb(e,o),v=g[1],S=g[2];if(v>S)return!0}o=o.parentNode}while(o&&o!==document.body);return!1},Jz=function(e){var n=e.scrollTop,o=e.scrollHeight,h=e.clientHeight;return[n,o,h]},Qz=function(e){var n=e.scrollLeft,o=e.scrollWidth,h=e.clientWidth;return[n,o,h]},Ab=function(e,n){return e==="v"?Kz(n):Yz(n)},Mb=function(e,n){return e==="v"?Jz(n):Qz(n)},eA=function(e,n){return e==="h"&&n==="rtl"?-1:1},tA=function(e,n,o,h,g){var v=eA(e,window.getComputedStyle(n).direction),S=v*h,u=o.target,I=n.contains(u),N=!1,j=S>0,q=0,V=0;do{var he=Mb(e,u),ge=he[0],pe=he[1],Ee=he[2],ne=pe-Ee-v*ge;(ge||ne)&&Ab(e,u)&&(q+=ne,V+=ge),u=u.parentNode}while(!I&&u!==document.body||I&&(n.contains(u)||n===u));return(j&&(g&&q===0||!g&&S>q)||!j&&(g&&V===0||!g&&-S>V))&&(N=!0),N},up=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cx=function(e){return[e.deltaX,e.deltaY]},hx=function(e){return e&&"current"in e?e.current:e},nA=function(e,n){return e[0]===n[0]&&e[1]===n[1]},iA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rA=0,lc=[];function oA(e){var n=re.exports.useRef([]),o=re.exports.useRef([0,0]),h=re.exports.useRef(),g=re.exports.useState(rA++)[0],v=re.exports.useState(function(){return zb()})[0],S=re.exports.useRef(e);re.exports.useEffect(function(){S.current=e},[e]),re.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(g));var pe=Cz([e.lockRef.current],(e.shards||[]).map(hx),!0).filter(Boolean);return pe.forEach(function(Ee){return Ee.classList.add("allow-interactivity-".concat(g))}),function(){document.body.classList.remove("block-interactivity-".concat(g)),pe.forEach(function(Ee){return Ee.classList.remove("allow-interactivity-".concat(g))})}}},[e.inert,e.lockRef.current,e.shards]);var u=re.exports.useCallback(function(pe,Ee){if("touches"in pe&&pe.touches.length===2)return!S.current.allowPinchZoom;var ne=up(pe),Q=o.current,te="deltaX"in pe?pe.deltaX:Q[0]-ne[0],Te="deltaY"in pe?pe.deltaY:Q[1]-ne[1],Ae,$e=pe.target,Ne=Math.abs(te)>Math.abs(Te)?"h":"v";if("touches"in pe&&Ne==="h"&&$e.type==="range")return!1;var Be=ux(Ne,$e);if(!Be)return!0;if(Be?Ae=Ne:(Ae=Ne==="v"?"h":"v",Be=ux(Ne,$e)),!Be)return!1;if(!h.current&&"changedTouches"in pe&&(te||Te)&&(h.current=Ae),!Ae)return!0;var lt=h.current||Ae;return tA(lt,Ee,pe,lt==="h"?te:Te,!0)},[]),I=re.exports.useCallback(function(pe){var Ee=pe;if(!(!lc.length||lc[lc.length-1]!==v)){var ne="deltaY"in Ee?cx(Ee):up(Ee),Q=n.current.filter(function(Ae){return Ae.name===Ee.type&&Ae.target===Ee.target&&nA(Ae.delta,ne)})[0];if(Q&&Q.should){Ee.preventDefault();return}if(!Q){var te=(S.current.shards||[]).map(hx).filter(Boolean).filter(function(Ae){return Ae.contains(Ee.target)}),Te=te.length>0?u(Ee,te[0]):!S.current.noIsolation;Te&&Ee.preventDefault()}}},[]),N=re.exports.useCallback(function(pe,Ee,ne,Q){var te={name:pe,delta:Ee,target:ne,should:Q};n.current.push(te),setTimeout(function(){n.current=n.current.filter(function(Te){return Te!==te})},1)},[]),j=re.exports.useCallback(function(pe){o.current=up(pe),h.current=void 0},[]),q=re.exports.useCallback(function(pe){N(pe.type,cx(pe),pe.target,u(pe,e.lockRef.current))},[]),V=re.exports.useCallback(function(pe){N(pe.type,up(pe),pe.target,u(pe,e.lockRef.current))},[]);re.exports.useEffect(function(){return lc.push(v),e.setCallbacks({onScrollCapture:q,onWheelCapture:q,onTouchMoveCapture:V}),document.addEventListener("wheel",I,ac),document.addEventListener("touchmove",I,ac),document.addEventListener("touchstart",j,ac),function(){lc=lc.filter(function(pe){return pe!==v}),document.removeEventListener("wheel",I,ac),document.removeEventListener("touchmove",I,ac),document.removeEventListener("touchstart",j,ac)}},[]);var he=e.removeScrollBar,ge=e.inert;return re.exports.createElement(re.exports.Fragment,null,ge?re.exports.createElement(v,{styles:iA(g)}):null,he?re.exports.createElement(Xz,{gapMode:"margin"}):null)}var sA=Oz(Ib,oA),Lb=re.exports.forwardRef(function(e,n){return re.exports.createElement(wf,El({},e,{ref:n,sideCar:sA}))});Lb.classNames=wf.classNames;var aA=Lb;let jm=0;function lA(){re.exports.useEffect(()=>{var e,n;const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=o[0])!==null&&e!==void 0?e:dx()),document.body.insertAdjacentElement("beforeend",(n=o[1])!==null&&n!==void 0?n:dx()),jm++,()=>{jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(h=>h.remove()),jm--}},[])}function dx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const bf=e=>{const{present:n,children:o}=e,h=function(S){const[u,I]=re.exports.useState(),N=re.exports.useRef({}),j=re.exports.useRef(S),q=re.exports.useRef("none"),V=S?"mounted":"unmounted",[he,ge]=function(pe,Ee){return re.exports.useReducer((ne,Q)=>{const te=Ee[ne][Q];return te!=null?te:ne},pe)}(V,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return re.exports.useEffect(()=>{const pe=cp(N.current);q.current=he==="mounted"?pe:"none"},[he]),ef(()=>{const pe=N.current,Ee=j.current;if(Ee!==S){const ne=q.current,Q=cp(pe);S?ge("MOUNT"):Q==="none"||(pe==null?void 0:pe.display)==="none"?ge("UNMOUNT"):ge(Ee&&ne!==Q?"ANIMATION_OUT":"UNMOUNT"),j.current=S}},[S,ge]),ef(()=>{if(u){const pe=ne=>{const Q=cp(N.current).includes(ne.animationName);ne.target===u&&Q&&ge("ANIMATION_END")},Ee=ne=>{ne.target===u&&(q.current=cp(N.current))};return u.addEventListener("animationstart",Ee),u.addEventListener("animationcancel",pe),u.addEventListener("animationend",pe),()=>{u.removeEventListener("animationstart",Ee),u.removeEventListener("animationcancel",pe),u.removeEventListener("animationend",pe)}}ge("ANIMATION_END")},[u,ge]),{isPresent:["mounted","unmountSuspended"].includes(he),ref:re.exports.useCallback(pe=>{pe&&(N.current=getComputedStyle(pe)),I(pe)},[])}}(n),g=typeof o=="function"?o({present:h.isPresent}):re.exports.Children.only(o),v=sa(h.ref,g.ref);return typeof o=="function"||h.isPresent?re.exports.cloneElement(g,{ref:v}):null};function cp(e){return(e==null?void 0:e.animationName)||"none"}bf.displayName="Presence";const uA=re.exports.forwardRef((e,n)=>{var o;const v=e,{container:h=globalThis==null||(o=globalThis.document)===null||o===void 0?void 0:o.body}=v,g=_n(v,["container"]);return h?WT.createPortal(re.exports.createElement(cr.div,Yt({},g,{ref:n})),h):null}),px={bubbles:!1,cancelable:!0},cA=re.exports.forwardRef((e,n)=>{const pe=e,{loop:o=!1,trapped:h=!1,onMountAutoFocus:g,onUnmountAutoFocus:v}=pe,S=_n(pe,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[u,I]=re.exports.useState(null),N=Bl(g),j=Bl(v),q=re.exports.useRef(null),V=sa(n,Ee=>I(Ee)),he=re.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;re.exports.useEffect(()=>{if(h){let Q=function(Te){if(he.paused||!u)return;const Ae=Te.target;u.contains(Ae)?q.current=Ae:du(q.current,{select:!0})},te=function(Te){!he.paused&&u&&(u.contains(Te.relatedTarget)||du(q.current,{select:!0}))};var Ee=Q,ne=te;return document.addEventListener("focusin",Q),document.addEventListener("focusout",te),()=>{document.removeEventListener("focusin",Q),document.removeEventListener("focusout",te)}}},[h,u,he.paused]),re.exports.useEffect(()=>{if(u){gx.add(he);const ne=document.activeElement;if(!u.contains(ne)){const Q=new Event("focusScope.autoFocusOnMount",px);u.addEventListener("focusScope.autoFocusOnMount",N),u.dispatchEvent(Q),Q.defaultPrevented||(function(te,{select:Te=!1}={}){const Ae=document.activeElement;for(const $e of te)if(du($e,{select:Te}),document.activeElement!==Ae)return}((Ee=fx(u),Ee.filter(te=>te.tagName!=="A")),{select:!0}),document.activeElement===ne&&du(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",N),setTimeout(()=>{const Q=new Event("focusScope.autoFocusOnUnmount",px);u.addEventListener("focusScope.autoFocusOnUnmount",j),u.dispatchEvent(Q),Q.defaultPrevented||du(ne!=null?ne:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",j),gx.remove(he)},0)}}var Ee},[u,N,j,he]);const ge=re.exports.useCallback(Ee=>{if(!o&&!h||he.paused)return;const ne=Ee.key==="Tab"&&!Ee.altKey&&!Ee.ctrlKey&&!Ee.metaKey,Q=document.activeElement;if(ne&&Q){const te=Ee.currentTarget,[Te,Ae]=function($e){const Ne=fx($e),Be=mx(Ne,$e),lt=mx(Ne.reverse(),$e);return[Be,lt]}(te);Te&&Ae?Ee.shiftKey||Q!==Ae?Ee.shiftKey&&Q===Te&&(Ee.preventDefault(),o&&du(Ae,{select:!0})):(Ee.preventDefault(),o&&du(Te,{select:!0})):Q===te&&Ee.preventDefault()}},[o,h,he.paused]);return re.exports.createElement(cr.div,Yt({tabIndex:-1},S,{ref:V,onKeyDown:ge}))});function fx(e){const n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:h=>{const g=h.tagName==="INPUT"&&h.type==="hidden";return h.disabled||h.hidden||g?NodeFilter.FILTER_SKIP:h.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)n.push(o.currentNode);return n}function mx(e,n){for(const o of e)if(!hA(o,{upTo:n}))return o}function hA(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function du(e,{select:n=!1}={}){if(e&&e.focus){const o=document.activeElement;e.focus({preventScroll:!0}),e!==o&&function(h){return h instanceof HTMLInputElement&&"select"in h}(e)&&n&&e.select()}}const gx=function(){let e=[];return{add(n){const o=e[0];n!==o&&(o==null||o.pause()),e=_x(e,n),e.unshift(n)},remove(n){var o;e=_x(e,n),(o=e[0])===null||o===void 0||o.resume()}}}();function _x(e,n){const o=[...e],h=o.indexOf(n);return h!==-1&&o.splice(h,1),o}function dA(e){const n=Bl(e);re.exports.useEffect(()=>{const o=h=>{h.key==="Escape"&&n(h)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n])}let yx,hp=0;function pA({disabled:e}){const n=re.exports.useRef(!1);ef(()=>{if(e){let g=function(){hp--,hp===0&&(document.body.style.pointerEvents=yx)},v=function(S){n.current=S.pointerType!=="mouse"};var o=g,h=v;return hp===0&&(yx=document.body.style.pointerEvents),document.body.style.pointerEvents="none",hp++,document.addEventListener("pointerup",v),()=>{n.current?document.addEventListener("click",g,{once:!0}):g(),document.removeEventListener("pointerup",v)}}},[e])}const fA=re.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mA=re.exports.forwardRef((e,n)=>{const $e=e,{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:S,onDismiss:u}=$e,I=_n($e,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),N=re.exports.useContext(fA),[j,q]=re.exports.useState(null),[,V]=re.exports.useState({}),he=sa(n,Ne=>q(Ne)),ge=Array.from(N.layers),[pe]=[...N.layersWithOutsidePointerEventsDisabled].slice(-1),Ee=ge.indexOf(pe),ne=j?ge.indexOf(j):-1,Q=N.layersWithOutsidePointerEventsDisabled.size>0,te=ne>=Ee,Te=function(Ne){const Be=Bl(Ne),lt=re.exports.useRef(!1);return re.exports.useEffect(()=>{const dt=Lt=>{Lt.target&&!lt.current&&xx("dismissableLayer.pointerDownOutside",Be,{originalEvent:Lt}),lt.current=!1},Pt=window.setTimeout(()=>{document.addEventListener("pointerdown",dt)},0);return()=>{window.clearTimeout(Pt),document.removeEventListener("pointerdown",dt)}},[Be]),{onPointerDownCapture:()=>lt.current=!0}}(Ne=>{const Be=Ne.target,lt=[...N.branches].some(dt=>dt.contains(Be));te&&!lt&&(g==null||g(Ne),S==null||S(Ne),Ne.defaultPrevented||u==null||u())}),Ae=function(Ne){const Be=Bl(Ne),lt=re.exports.useRef(!1);return re.exports.useEffect(()=>{const dt=Pt=>{Pt.target&&!lt.current&&xx("dismissableLayer.focusOutside",Be,{originalEvent:Pt})};return document.addEventListener("focusin",dt),()=>document.removeEventListener("focusin",dt)},[Be]),{onFocusCapture:()=>lt.current=!0,onBlurCapture:()=>lt.current=!1}}(Ne=>{const Be=Ne.target;[...N.branches].some(lt=>lt.contains(Be))||(v==null||v(Ne),S==null||S(Ne),Ne.defaultPrevented||u==null||u())});return dA(Ne=>{ne===N.layers.size-1&&(h==null||h(Ne),Ne.defaultPrevented||u==null||u())}),pA({disabled:o}),re.exports.useEffect(()=>{j&&(o&&N.layersWithOutsidePointerEventsDisabled.add(j),N.layers.add(j),vx())},[j,o,N]),re.exports.useEffect(()=>()=>{j&&(N.layers.delete(j),N.layersWithOutsidePointerEventsDisabled.delete(j),vx())},[j,N]),re.exports.useEffect(()=>{const Ne=()=>V({});return document.addEventListener("dismissableLayer.update",Ne),()=>document.removeEventListener("dismissableLayer.update",Ne)},[]),re.exports.createElement(cr.div,Yt({},I,{ref:he,style:ai({pointerEvents:Q?te?"auto":"none":void 0},e.style),onFocusCapture:Sr(e.onFocusCapture,Ae.onFocusCapture),onBlurCapture:Sr(e.onBlurCapture,Ae.onBlurCapture),onPointerDownCapture:Sr(e.onPointerDownCapture,Te.onPointerDownCapture)}))});function vx(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function xx(e,n,o){const h=o.originalEvent.target,g=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:o});return n&&h.addEventListener(e,n,{once:!0}),!h.dispatchEvent(g)}const[gA,sM]=pd("Dialog"),[_A,zs]=gA("Dialog"),yA=e=>{const{__scopeDialog:n,children:o,open:h,defaultOpen:g,onOpenChange:v,modal:S=!0,allowPinchZoom:u}=e,I=re.exports.useRef(null),N=re.exports.useRef(null),[j=!1,q]=md({prop:h,defaultProp:g,onChange:v});return re.exports.createElement(_A,{scope:n,triggerRef:I,contentRef:N,contentId:Nh(),titleId:Nh(),descriptionId:Nh(),open:j,onOpenChange:q,onOpenToggle:re.exports.useCallback(()=>q(V=>!V),[q]),modal:S,allowPinchZoom:u},o)},vA=re.exports.forwardRef((e,n)=>{const S=e,{__scopeDialog:o}=S,h=_n(S,["__scopeDialog"]),g=zs("DialogTrigger",o),v=sa(n,g.triggerRef);return re.exports.createElement(cr.button,Yt({type:"button","aria-haspopup":"dialog","aria-expanded":g.open,"aria-controls":g.contentId,"data-state":ny(g.open)},h,{ref:v,onClick:Sr(e.onClick,g.onOpenToggle)}))}),xA=e=>{const{__scopeDialog:n,forceMount:o,children:h,container:g}=e,v=zs("DialogPortal",n);return re.exports.createElement(re.exports.Fragment,null,re.exports.Children.map(h,S=>re.exports.createElement(bf,{present:o||v.open},re.exports.createElement(uA,{asChild:!0,container:g},S))))},wA=re.exports.forwardRef((e,n)=>{const v=e,{forceMount:o}=v,h=_n(v,["forceMount"]),g=zs("DialogOverlay",e.__scopeDialog);return g.modal?re.exports.createElement(bf,{present:o||g.open},re.exports.createElement(bA,Yt({},h,{ref:n}))):null}),bA=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:o}=v,h=_n(v,["__scopeDialog"]),g=zs("DialogOverlay",o);return re.exports.createElement(aA,{as:od,allowPinchZoom:g.allowPinchZoom,shards:[g.contentRef]},re.exports.createElement(cr.div,Yt({"data-state":ny(g.open)},h,{ref:n,style:ai({pointerEvents:"auto"},h.style)})))}),SA=re.exports.forwardRef((e,n)=>{const v=e,{forceMount:o}=v,h=_n(v,["forceMount"]),g=zs("DialogContent",e.__scopeDialog);return re.exports.createElement(bf,{present:o||g.open},g.modal?re.exports.createElement(EA,Yt({},h,{ref:n})):re.exports.createElement(TA,Yt({},h,{ref:n})))}),EA=re.exports.forwardRef((e,n)=>{const o=zs("DialogContent",e.__scopeDialog),h=re.exports.useRef(null),g=sa(n,o.contentRef,h);return re.exports.useEffect(()=>{const v=h.current;if(v)return Pz(v)},[]),re.exports.createElement(Db,Yt({},e,{ref:g,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sr(e.onCloseAutoFocus,v=>{var S;v.preventDefault(),(S=o.triggerRef.current)===null||S===void 0||S.focus()}),onPointerDownOutside:Sr(e.onPointerDownOutside,v=>{const S=v.detail.originalEvent,u=S.button===0&&S.ctrlKey===!0;(S.button===2||u)&&v.preventDefault()}),onFocusOutside:Sr(e.onFocusOutside,v=>v.preventDefault())}))}),TA=re.exports.forwardRef((e,n)=>{const o=zs("DialogContent",e.__scopeDialog),h=re.exports.useRef(!1);return re.exports.createElement(Db,Yt({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var v,S;(v=e.onCloseAutoFocus)===null||v===void 0||v.call(e,g),g.defaultPrevented||(h.current||(S=o.triggerRef.current)===null||S===void 0||S.focus(),g.preventDefault()),h.current=!1},onInteractOutside:g=>{var v,S;(v=e.onInteractOutside)===null||v===void 0||v.call(e,g),g.defaultPrevented||(h.current=!0);const u=g.target;!((S=o.triggerRef.current)===null||S===void 0)&&S.contains(u)&&g.preventDefault()}}))}),Db=re.exports.forwardRef((e,n)=>{const j=e,{__scopeDialog:o,trapFocus:h,onOpenAutoFocus:g,onCloseAutoFocus:v}=j,S=_n(j,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),u=zs("DialogContent",o),I=re.exports.useRef(null),N=sa(n,I);return lA(),re.exports.createElement(re.exports.Fragment,null,re.exports.createElement(cA,{asChild:!0,loop:!0,trapped:h,onMountAutoFocus:g,onUnmountAutoFocus:v},re.exports.createElement(mA,Yt({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":ny(u.open)},S,{ref:N,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),PA=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:o}=v,h=_n(v,["__scopeDialog"]),g=zs("DialogTitle",o);return re.exports.createElement(cr.h2,Yt({id:g.titleId},h,{ref:n}))}),kA=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:o}=v,h=_n(v,["__scopeDialog"]),g=zs("DialogDescription",o);return re.exports.createElement(cr.p,Yt({id:g.descriptionId},h,{ref:n}))}),CA=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:o}=v,h=_n(v,["__scopeDialog"]),g=zs("DialogClose",o);return re.exports.createElement(cr.button,Yt({type:"button"},h,{ref:n,onClick:Sr(e.onClick,()=>g.onOpenChange(!1))}))});function ny(e){return e?"open":"closed"}ob("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"});const IA=yA,zA=vA,AA=xA,MA=wA,LA=SA,DA=PA,RA=kA,BA=CA;var Ga=(e=>(e[e.UNKNOWN=1]="UNKNOWN",e[e.PNG=2]="PNG",e[e.JPG=3]="JPG",e[e.MVT=4]="MVT",e[e.MVT_GZ=5]="MVT_GZ",e))(Ga||{});const FA=Mn(wz,{display:"flex",height:"$4",width:"100%",boxSizing:"border-box",minWidth:"max-content",backgroundColor:"white",boxShadow:'0 2px 10px "black"'}),Rb={all:"unset",flex:"0 0 auto",color:"$black",display:"inline-flex",padding:"0 $1 0 $1",fontSize:"$2",alignItems:"center","&:hover":{backgroundColor:"$hover",color:"$white"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px blue"}},OA=Mn(bz,Ra(ai({},Rb),{backgroundColor:"transparent",color:"black",display:"inline-flex",justifyContent:"center",alignItems:"center"}),{"&:hover":{backgroundColor:"$hover",color:"$white",cursor:"pointer"}}),NA=Mn(Sz,{display:"inline-flex",borderRadius:4}),UA=Mn(Ez,Ra(ai({},Rb),{boxShadow:0,backgroundColor:"white",marginLeft:2,cursor:"pointer","&:first-child":{marginLeft:0},"&[data-state=on]":{backgroundColor:"$primary",color:"$primaryText"}})),VA=Mn(zA,{backgroundColor:"$primary",color:"$primaryText",padding:"$1",cursor:"pointer"}),$A=Mn(MA,{backgroundColor:"black",position:"fixed",inset:0,opacity:"40%",zIndex:3}),ZA=Mn(LA,{backgroundColor:"#222",padding:"$1",borderRadius:6,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",zIndex:4,"&:focus":{outline:"none"}}),jA=Mn("table",{tableLayout:"fixed",width:"100%"}),GA=Mn("td",{padding:"0 $1"}),Bb=Mn("td",{fontFamily:"monospace"}),WA=Mn(Bb,{overflowX:"scroll"}),iy=async e=>{let n=await e.source.getBytes(512e3,4),o=n.getUint8(0),h=n.getUint8(1),g=n.getUint8(2),v=n.getUint8(3);return o==137&&h==80&&g==78&&v==71?2:o==255&&h==216&&g==255&&v==224?3:o==31&&h==139?5:4},qA=FA,HA=OA,XA=NA,Gm=UA;function KA(e){let[n,o]=re.exports.useState("inspector");re.exports.useState(1);let[h,g]=re.exports.useState([]),[v,S]=re.exports.useState(!1),u;n==="leaflet"?u=_t(ZI,{file:e.file}):n==="maplibre"?u=_t(qI,{file:e.file}):u=_t(UI,{file:e.file}),re.exports.useEffect(()=>{let j=e.file;(async()=>{let V=await j.metadata(),he=[];for(var ge in V)he.push([ge,V[ge]]);g(he)})()},[e.file]);const I=h.map((j,q)=>{let V=j[0]==="json"?WA:Bb;return wi("tr",{children:[_t(GA,{children:j[0]}),_t(V,{children:j[1]})]},q)}),N=()=>{S(!1)};return wi(eb,{children:[wi(qA,{"aria-label":"Formatting options",children:[wi(XA,{type:"single",defaultValue:"center","aria-label":"Text alignment",value:n,onValueChange:o,children:[wi(Gm,{value:"inspector","aria-label":"Left aligned",children:[_t(ik,{})," Tile Inspector"]}),_t(Gm,{value:"leaflet","aria-label":"Center aligned",children:"Leaflet"}),_t(Gm,{value:"maplibre","aria-label":"Right aligned",children:"MapLibre"})]}),_t(HA,{href:"#",target:"_blank",css:{marginRight:10},children:e.file.source.getKey()}),wi(IA,{open:v,children:[_t(VA,{onClick:()=>S(!0),children:"Metadata"}),wi(AA,{children:[_t($A,{}),wi(ZA,{onEscapeKeyDown:N,onPointerDownOutside:N,children:[_t(DA,{}),_t(RA,{}),wi(jA,{children:[_t("thead",{children:wi("tr",{children:[_t("th",{children:"key"}),_t("th",{children:"value"})]})}),_t("tbody",{children:I})]}),_t(BA,{})]})]})]})]}),u]})}const YA=Mn("div",{height:"$4",display:"flex",alignItems:"center",padding:"0 $2 0 $2"}),JA=Mn("span",{fontWeight:500,cursor:"pointer"}),QA=Mn("a",{color:"white",textDecoration:"none",fontSize:"$1"}),eM=Mn("span",{marginLeft:"auto"}),tM="407db08".substr(0,8);function nM(){bP();let e;const n=new URLSearchParams(location.search).get("url");n&&(e=new Oh(n));let[o,h]=re.exports.useState(e);return re.exports.useEffect(()=>{const v=new URL(window.location.href);o&&o.source.getKey().startsWith("http")?(v.searchParams.set("url",o.source.getKey()),history.pushState(null,"",v.toString())):(v.searchParams.delete("url"),history.pushState(null,"",v.toString()))},[o]),wi("div",{children:[wi(YA,{children:[_t(JA,{onClick:()=>{h(void 0)},children:"PMTiles Viewer"}),_t(eM,{children:wi(QA,{href:"https://github.com/protomaps/PMTiles",target:"_blank",children:[_t(tk,{})," ",tM]})})]}),o?_t(KA,{file:o}):_t(TC,{setFile:h})]})}Wm.createRoot(document.getElementById("root")).render(_t(nn.StrictMode,{children:_t(nM,{})}));
